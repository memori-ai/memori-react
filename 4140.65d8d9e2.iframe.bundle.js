"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[4140],{"./src/components/ChatInputs/ChatInputs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react_hot_toast__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),_ChatTextArea_ChatTextArea__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ChatTextArea/ChatTextArea.tsx"),_icons_Send__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/icons/Send.tsx"),_MicrophoneButton_MicrophoneButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/MicrophoneButton/MicrophoneButton.tsx"),classnames__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__),_icons_Microphone__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/icons/Microphone.tsx"),_UploadButton_UploadButton__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/UploadButton/UploadButton.tsx"),_FilePreview_FilePreview__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/FilePreview/FilePreview.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ChatInputs=({dialogState,userMessage="",sendOnEnter,onChangeUserMessage,sendMessage,onTextareaFocus,onTextareaBlur,showMicrophone=!1,microphoneMode="HOLD_TO_TALK",listening=!1,stopAudio,startListening,stopListening,showUpload=!1,isTyping=!1,sessionID,authToken,memoriID,client,onTextareaExpanded,maxTotalMessagePayload,maxTextareaCharacters,maxDocumentsPerMessage,maxDocumentContentLength,pasteAsCardLineThreshold,pasteAsCardCharThreshold})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.B)(),[isExpanded,setIsExpanded]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[documentPreviewFiles,setDocumentPreviewFiles]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),{dialog}=client||{dialog:{postMediumDeselectedEvent:null}},handleTextareaPaste=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(e=>{if(e.clipboardData.files?.length)return;const text=e.clipboardData.getData("text/plain");if(!text?.trim())return;const target=e.target,selectionLength=target.selectionEnd-target.selectionStart,lengthAfterPaste=userMessage.length-selectionLength+text.length;if(null!=maxTextareaCharacters&&lengthAfterPaste>maxTextareaCharacters)return e.preventDefault(),void(0,react_hot_toast__WEBPACK_IMPORTED_MODULE_2__.Ay)(t("upload.pasteContentExceedsLimit",{defaultValue:"Pasted content exceeds the size limit. Try shortening the text or splitting it into smaller parts."}),{icon:"‚ö†Ô∏è"});const lineCount=text.split(/\r?\n/).length,charThreshold=pasteAsCardCharThreshold??4200,lineThreshold=pasteAsCardLineThreshold??100;if(!(text.length>charThreshold)&&!(lineCount>lineThreshold))return;const maxDocs=maxDocumentsPerMessage??10;if(documentPreviewFiles.length>=maxDocs)return e.preventDefault(),void react_hot_toast__WEBPACK_IMPORTED_MODULE_2__.Ay.error(t("upload.pasteMaxAttachmentsReached",{max:maxDocs,defaultValue:`Maximum ${maxDocs} attachments. Remove one to add this as a file.`}));const totalPayloadLimit=maxTotalMessagePayload??2e5,perDocumentLimit=maxDocumentContentLength??2e5;if(text.length>perDocumentLimit)return e.preventDefault(),void(0,react_hot_toast__WEBPACK_IMPORTED_MODULE_2__.Ay)(t("upload.pasteContentExceedsLimit",{defaultValue:"Pasted content exceeds the size limit. Try shortening the text or splitting it into smaller parts."}),{icon:"‚ö†Ô∏è"});if(documentPreviewFiles.reduce((sum,f)=>sum+f.content.length,0)+text.length>totalPayloadLimit)return e.preventDefault(),void(0,react_hot_toast__WEBPACK_IMPORTED_MODULE_2__.Ay)(t("upload.pasteContentExceedsLimit",{defaultValue:"Pasted content exceeds the size limit. Try shortening the text or splitting it into smaller parts."}),{icon:"‚ö†Ô∏è"});e.preventDefault();const wrappedContent=`<document_attachment filename="pasted-text.txt" type="text/plain">\n\n${text}\n\n</document_attachment>`,newFile={name:t("upload.pastedText")||"pasted-text",id:`paste_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,content:wrappedContent,mediumID:void 0,mimeType:"text/plain",type:"document"};setDocumentPreviewFiles(prev=>[...prev,newFile])},[documentPreviewFiles,maxTextareaCharacters,maxTotalMessagePayload,userMessage.length,t]),isDisabled="X2a"===dialogState?.state||"X3"===dialogState?.state,textareaDisabled=["R2","R3","R4","R5","G3","X3"].includes(dialogState?.state||"");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori-chat-inputs-wrapper",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("fieldset",{id:"chat-fieldset",className:classnames__WEBPACK_IMPORTED_MODULE_6___default()("memori-chat-inputs",{"memori-chat-inputs--expanded":isExpanded}),disabled:isDisabled,children:[(showUpload||documentPreviewFiles.length>0)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori-chat-inputs--preview-wrapper",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_FilePreview_FilePreview__WEBPACK_IMPORTED_MODULE_9__.A,{previewFiles:documentPreviewFiles,removeFile:async(fileId,mediumID)=>{dialog.postMediumDeselectedEvent&&sessionID&&mediumID&&await dialog.postMediumDeselectedEvent(sessionID,mediumID),setDocumentPreviewFiles(prev=>prev.filter(file=>file.id!==fileId))}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"memori-chat-inputs--container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori-chat-inputs--leading",children:showUpload&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori-chat-inputs--upload-wrapper",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_UploadButton_UploadButton__WEBPACK_IMPORTED_MODULE_8__.A,{authToken,client,sessionID,isMediaAccepted:dialogState?.acceptsMedia||!1,setDocumentPreviewFiles,documentPreviewFiles,memoriID,maxTotalMessagePayload,maxDocumentsPerMessage,maxDocumentContentLength})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori-chat-inputs--primary",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ChatTextArea_ChatTextArea__WEBPACK_IMPORTED_MODULE_3__.A,{value:userMessage,onChange:onChangeUserMessage,onPressEnter:e=>{if(!e.altKey&&(e.preventDefault(),!isTyping&&"keypress"===sendOnEnter&&userMessage?.length>0)){stopListening();const mediaWithIds=documentPreviewFiles.map((file,index)=>({mediumID:file.mediumID||`file_${Date.now()}_${index}_${Math.random().toString(36).substr(2,9)}`,mimeType:file.mimeType,content:file.content,title:file.name,properties:{isAttachedFile:!0},type:file.type,url:file.url}));sendMessage(userMessage,mediaWithIds),setDocumentPreviewFiles([]),onChangeUserMessage("")}},onPaste:handleTextareaPaste,onFocus:onTextareaFocus,onBlur:onTextareaBlur,onExpandedChange:expanded=>{setIsExpanded(expanded),onTextareaExpanded&&onTextareaExpanded(expanded)},disabled:textareaDisabled,maxTextareaCharacters})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori-chat-inputs--trailing",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"memori-chat-inputs--trailing-inner",children:[showMicrophone&&"CONTINUOUS"===microphoneMode&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("button",{type:"button",className:classnames__WEBPACK_IMPORTED_MODULE_6___default()("memori-chat-inputs--mic-btn",{"memori-chat-inputs--mic-btn--listening":listening}),title:listening?t("write_and_speak.micButtonPopoverListening")||"Listening":t("write_and_speak.micButtonPopover")||"Start listening",onClick:()=>{listening?stopListening():(stopAudio(),startListening())},disabled:isDisabled,"aria-label":listening?t("write_and_speak.micButtonPopoverListening")||"Listening":t("write_and_speak.micButtonPopover")||"Start listening",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_icons_Microphone__WEBPACK_IMPORTED_MODULE_7__.default,{className:"icon"})}),showMicrophone&&"HOLD_TO_TALK"===microphoneMode&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_MicrophoneButton_MicrophoneButton__WEBPACK_IMPORTED_MODULE_5__.A,{listening,startListening,stopListening:()=>{stopListening(),listening&&userMessage?.length&&sendMessage(userMessage)},stopAudio}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("button",{type:"button",className:classnames__WEBPACK_IMPORTED_MODULE_6___default()("memori-chat-inputs--send-btn",{"memori-chat-inputs--send-btn--active":!!userMessage?.length,"memori-chat-inputs--send-btn--disabled":!userMessage||0===userMessage.length}),onClick:()=>{(files=>{if(isTyping)return;const mediaWithIds=files.map((file,index)=>({mediumID:file.mediumID||`file_${Date.now()}_${index}_${Math.random().toString(36).substr(2,9)}`,mimeType:file.mimeType,content:file.content,title:file.name,properties:{isAttachedFile:!0},type:file.type,url:file.url}));sendMessage(userMessage,mediaWithIds),setDocumentPreviewFiles([]),stopAudio(),speechSynthesis.speak(new SpeechSynthesisUtterance(""))})(documentPreviewFiles)},disabled:!userMessage||0===userMessage.length||isTyping,title:t("send")||"Send","aria-label":t("send")||"Send",children:isTyping?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori-chat-inputs--send-btn--loading"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_icons_Send__WEBPACK_IMPORTED_MODULE_4__.default,{className:"icon"})})]})})]})]})})};ChatInputs.displayName="ChatInputs";const __WEBPACK_DEFAULT_EXPORT__=ChatInputs;try{ChatInputs.displayName="ChatInputs",ChatInputs.__docgenInfo={description:"",displayName:"ChatInputs",props:{dialogState:{defaultValue:null,description:"",name:"dialogState",required:!1,type:{name:"DialogState"}},instruct:{defaultValue:null,description:"",name:"instruct",required:!1,type:{name:"boolean"}},sendOnEnter:{defaultValue:null,description:"",name:"sendOnEnter",required:!1,type:{name:"enum",value:[{value:'"keypress"'},{value:'"click"'}]}},setSendOnEnter:{defaultValue:null,description:"",name:"setSendOnEnter",required:!0,type:{name:'(sendOnEnter: "keypress" | "click") => void'}},attachmentsMenuOpen:{defaultValue:null,description:"",name:"attachmentsMenuOpen",required:!1,type:{name:"enum",value:[{value:'"link"'},{value:'"media"'}]}},setAttachmentsMenuOpen:{defaultValue:null,description:"",name:"setAttachmentsMenuOpen",required:!0,type:{name:'(attachmentsMenuOpen: "link" | "media") => void'}},userMessage:{defaultValue:{value:""},description:"",name:"userMessage",required:!1,type:{name:"string"}},onChangeUserMessage:{defaultValue:null,description:"",name:"onChangeUserMessage",required:!0,type:{name:"(userMessage: string) => void"}},sendMessage:{defaultValue:null,description:"",name:"sendMessage",required:!0,type:{name:"(msg: string, media?: (Medium & { type: string; })[] | undefined) => void"}},onTextareaFocus:{defaultValue:null,description:"",name:"onTextareaFocus",required:!0,type:{name:"() => void"}},onTextareaBlur:{defaultValue:null,description:"",name:"onTextareaBlur",required:!0,type:{name:"() => void"}},listening:{defaultValue:{value:"false"},description:"",name:"listening",required:!1,type:{name:"boolean"}},isPlayingAudio:{defaultValue:null,description:"",name:"isPlayingAudio",required:!1,type:{name:"boolean"}},stopAudio:{defaultValue:null,description:"",name:"stopAudio",required:!0,type:{name:"() => void"}},startListening:{defaultValue:null,description:"",name:"startListening",required:!0,type:{name:"() => void"}},stopListening:{defaultValue:null,description:"",name:"stopListening",required:!0,type:{name:"() => void"}},showMicrophone:{defaultValue:{value:"false"},description:"",name:"showMicrophone",required:!1,type:{name:"boolean"}},microphoneMode:{defaultValue:{value:"HOLD_TO_TALK"},description:"",name:"microphoneMode",required:!1,type:{name:"enum",value:[{value:'"HOLD_TO_TALK"'},{value:'"CONTINUOUS"'}]}},authToken:{defaultValue:null,description:"",name:"authToken",required:!1,type:{name:"string"}},showUpload:{defaultValue:{value:"false"},description:"",name:"showUpload",required:!1,type:{name:"boolean"}},isTyping:{defaultValue:{value:"false"},description:"",name:"isTyping",required:!1,type:{name:"boolean"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},memoriID:{defaultValue:null,description:"",name:"memoriID",required:!1,type:{name:"string"}},client:{defaultValue:null,description:"",name:"client",required:!1,type:{name:'{ constants: { BACKEND_URL: string; ENGINE_URL: string; allowedMediaTypes: string[]; anonTag: "üë§"; }; asset: { getResourceUrl: ({ type, resourceURI, sessionID, baseURL, }: ResourceURLParams) => string; }; getAllFunctions: (sessionId: string) => Promise<...>; ... 137 more ...; backend: { ...; }; }'}},onTextareaExpanded:{defaultValue:null,description:"",name:"onTextareaExpanded",required:!1,type:{name:"((expanded: boolean) => void)"}},maxTotalMessagePayload:{defaultValue:null,description:"Override total document payload limit (character count).",name:"maxTotalMessagePayload",required:!1,type:{name:"number"}},maxTextareaCharacters:{defaultValue:null,description:"Max characters in textarea; shows counter and enforces pasted content + existing text does not exceed this limit.",name:"maxTextareaCharacters",required:!1,type:{name:"number"}},maxDocumentsPerMessage:{defaultValue:null,description:"Max attachments (docs + images) per message.",name:"maxDocumentsPerMessage",required:!1,type:{name:"number"}},maxDocumentContentLength:{defaultValue:null,description:"Per-document content character limit.",name:"maxDocumentContentLength",required:!1,type:{name:"number"}},pasteAsCardLineThreshold:{defaultValue:null,description:"When pasted text has more than this many lines, it is added as a document card.",name:"pasteAsCardLineThreshold",required:!1,type:{name:"number"}},pasteAsCardCharThreshold:{defaultValue:null,description:"When pasted text exceeds this length, it is added as a document card.",name:"pasteAsCardCharThreshold",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ChatInputs/ChatInputs.tsx#ChatInputs"]={docgenInfo:ChatInputs.__docgenInfo,name:"ChatInputs",path:"src/components/ChatInputs/ChatInputs.tsx#ChatInputs"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ChatTextArea/ChatTextArea.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),_helpers_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/helpers/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ChatTextArea=({disabled=!1,value,onChange,onPressEnter,onPaste,onFocus,onBlur,onExpandedChange,maxTextareaCharacters})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_2__.B)(),textareaRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),innerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const textarea=textareaRef.current,inner=innerRef.current;if(textarea&&inner)if(0===value.length){textarea.style.height="36px",inner.style.height="36px",onExpandedChange&&onExpandedChange(!1);const chat=document.getElementsByClassName("memori-chat--content");if(chat){const lastChild=chat[chat.length-1];lastChild&&(lastChild.style.paddingBottom="0px")}}else{textarea.style.height="auto";const scrollHeight=textarea.scrollHeight,newHeight=Math.min(Math.max(scrollHeight,36),208);textarea.style.height=`${newHeight}px`,inner.style.height=`${newHeight}px`;const chat=document.getElementsByClassName("memori-chat--content");if(chat){chat[chat.length-1]&&chat[0].scrollTo({top:chat[0].scrollHeight,behavior:"smooth"})}}},[value]);const displayValue=null!=maxTextareaCharacters?value.slice(0,maxTextareaCharacters):value;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{null!=maxTextareaCharacters&&value.length>maxTextareaCharacters&&onChange(value.slice(0,maxTextareaCharacters))},[maxTextareaCharacters,value,onChange]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{"data-testid":"chat-textarea",className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("memori-chat-textarea",{"memori-chat-textarea--disabled":disabled,"memori-chat-textarea--with-counter":null!=maxTextareaCharacters}),children:[null!=maxTextareaCharacters&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"memori-chat-textarea--counter","aria-live":"polite",children:[displayValue.length," / ",maxTextareaCharacters]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{ref:innerRef,className:"memori-chat-textarea--inner",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("textarea",{ref:textareaRef,className:"memori-chat-textarea--input",disabled,value:displayValue,placeholder:t("placeholder","Ask a question")||"Ask a question",onChange:e=>{const next=e.target.value;onChange(null!=maxTextareaCharacters?next.slice(0,maxTextareaCharacters):next)},onKeyDownCapture:e=>{const isMobile=(0,_helpers_utils__WEBPACK_IMPORTED_MODULE_3__.Gz)();if("Enter"===e.key&&e.altKey&&!e.shiftKey&&!isMobile){e.preventDefault();const el=textareaRef.current,start=el?.selectionStart??displayValue.length,end=el?.selectionEnd??displayValue.length;let nextValue=`${displayValue.slice(0,start)}\n${displayValue.slice(end)}`;return null!=maxTextareaCharacters&&(nextValue=nextValue.slice(0,maxTextareaCharacters)),onChange(nextValue),void requestAnimationFrame(()=>{if(!el)return;const caret=start+1;el.selectionStart=caret,el.selectionEnd=caret})}"Enter"!==e.key||e.shiftKey||!onPressEnter||isMobile||onPressEnter(e)},onPaste,onFocus,onBlur,maxLength:maxTextareaCharacters??1e5})})]})};ChatTextArea.displayName="ChatTextArea";const __WEBPACK_DEFAULT_EXPORT__=ChatTextArea;try{ChatTextArea.displayName="ChatTextArea",ChatTextArea.__docgenInfo={description:"",displayName:"ChatTextArea",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onPressEnter:{defaultValue:null,description:"",name:"onPressEnter",required:!1,type:{name:"((e: KeyboardEvent<HTMLTextAreaElement>) => void)"}},onPaste:{defaultValue:null,description:"",name:"onPaste",required:!1,type:{name:"((e: ClipboardEvent<HTMLTextAreaElement>) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<Element, Element>) => void)"}},onExpandedChange:{defaultValue:null,description:"",name:"onExpandedChange",required:!1,type:{name:"((expanded: boolean) => void)"}},maxTextareaCharacters:{defaultValue:null,description:'When set, shows a character counter (e.g. "0 / 500") above the textarea and enforces the max length.',name:"maxTextareaCharacters",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ChatTextArea/ChatTextArea.tsx#ChatTextArea"]={docgenInfo:ChatTextArea.__docgenInfo,name:"ChatTextArea",path:"src/components/ChatTextArea/ChatTextArea.tsx#ChatTextArea"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/MicrophoneButton/MicrophoneButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_icons_Microphone__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/icons/Microphone.tsx"),_ui_Button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/Button.tsx"),_ui_Tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Tooltip.tsx"),classnames__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MicrophoneButton=({listening,stopAudio,startListening,stopListening})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.B)(),[micBtnTooltip,setMicBtnTooltip]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),intervalRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),startHold=e=>{e.preventDefault(),e.stopPropagation(),setMicBtnTooltip(t("write_and_speak.holdToSpeak")||"Hold to record"),intervalRef.current||(intervalRef.current=setTimeout(()=>{stopAudio(),setMicBtnTooltip(t("write_and_speak.releaseToEndListening")||"Release to end listening"),startListening()},300))},stopHold=e=>{e&&(e.preventDefault(),e.stopPropagation()),intervalRef.current&&(clearTimeout(intervalRef.current),intervalRef.current=null),stopListening(),setMicBtnTooltip(void 0)};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>()=>stopHold(),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Tooltip__WEBPACK_IMPORTED_MODULE_3__.A,{visible:!!micBtnTooltip,content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{children:micBtnTooltip||t("write_and_speak.pressAndHoldToSpeak")||"Press and hold to speak"}),align:"topLeft",className:"memori-mic-btn-tooltip",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_2__.A,{primary:!0,className:classnames__WEBPACK_IMPORTED_MODULE_4___default()("memori-chat-inputs--mic",{"memori-chat-inputs--mic--listening":listening}),title:listening?t("write_and_speak.micButtonPopoverListening")||"Listening":t("write_and_speak.micButtonPopover")||"Start listening",onMouseDown:startHold,onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),startHold(e)},onMouseUp:stopHold,onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),stopHold(e)},onMouseLeave:stopHold,shape:"circle",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_icons_Microphone__WEBPACK_IMPORTED_MODULE_1__.default,{})})})})};MicrophoneButton.displayName="MicrophoneButton";const __WEBPACK_DEFAULT_EXPORT__=MicrophoneButton;try{MicrophoneButton.displayName="MicrophoneButton",MicrophoneButton.__docgenInfo={description:"",displayName:"MicrophoneButton",props:{listening:{defaultValue:null,description:"",name:"listening",required:!1,type:{name:"boolean"}},stopAudio:{defaultValue:null,description:"",name:"stopAudio",required:!0,type:{name:"() => void"}},startListening:{defaultValue:null,description:"",name:"startListening",required:!0,type:{name:"() => void"}},stopListening:{defaultValue:null,description:"",name:"stopListening",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MicrophoneButton/MicrophoneButton.tsx#MicrophoneButton"]={docgenInfo:MicrophoneButton.__docgenInfo,name:"MicrophoneButton",path:"src/components/MicrophoneButton/MicrophoneButton.tsx#MicrophoneButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Microphone.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Microphone=({className,title})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className,"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"})});Microphone.displayName="Microphone";const __WEBPACK_DEFAULT_EXPORT__=Microphone;try{Microphone.displayName="Microphone",Microphone.__docgenInfo={description:"",displayName:"Microphone",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Microphone.tsx#Microphone"]={docgenInfo:Microphone.__docgenInfo,name:"Microphone",path:"src/components/icons/Microphone.tsx#Microphone"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Send.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Send=({className,title})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className,"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2-8.5 2.1-13.8 10.7-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"})});Send.displayName="Send";const __WEBPACK_DEFAULT_EXPORT__=Send;try{Send.displayName="Send",Send.__docgenInfo={description:"",displayName:"Send",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Send.tsx#Send"]={docgenInfo:Send.__docgenInfo,name:"Send",path:"src/components/icons/Send.tsx#Send"})}catch(__react_docgen_typescript_loader_error){}}}]);