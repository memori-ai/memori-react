"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[4451],{"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/ContentPreviewModal/ContentPreviewModal.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"/* ContentPreviewModal – modern preview modal for files and media */\n\n.memori-content-preview-modal.memori-modal .memori-modal--panel {\n  overflow: hidden;\n  border-radius: 16px;\n  background: var(--memori-content-preview-bg, #fafafa);\n  box-shadow:\n    0 25px 50px -12px rgba(0, 0, 0, 0.25),\n    0 0 0 1px rgba(0, 0, 0, 0.05);\n}\n\n/* Image variant: modal at least 600px wide (capped by viewport on small screens) */\n.memori-content-preview-modal--image.memori-modal .memori-modal--panel {\n  min-width: min(600px, 100vw);\n}\n\n.memori-content-preview-modal .memori-modal--title {\n  padding: 1rem 1.25rem 0.75rem;\n  border-bottom: 1px solid var(--memori-content-preview-border, rgba(0, 0, 0, 0.06));\n  color: var(--memori-content-preview-title, #1f2937);\n  font-size: 1rem;\n  font-weight: 600;\n  letter-spacing: -0.01em;\n}\n\n.memori-content-preview-modal .memori-modal--close {\n  top: 0.75rem;\n  right: 0.75rem;\n}\n\n.memori-content-preview-modal .memori-modal--close button {\n  border-radius: 10px;\n  background: var(--memori-content-preview-close-bg, rgba(0, 0, 0, 0.05));\n  transition: background 0.2s ease, transform 0.15s ease;\n}\n\n.memori-content-preview-modal .memori-modal--close button:hover {\n  background: var(--memori-content-preview-close-hover, rgba(0, 0, 0, 0.1));\n  transform: scale(1.05);\n}\n\n/* Body area */\n.memori-content-preview-modal--body {\n  overflow: auto;\n  max-height: 70vh;\n  padding: 1.25rem;\n}\n\n.memori-content-preview-modal--body--image {\n  display: flex;\n  min-height: 400px;\n  align-items: center;\n  justify-content: center;\n  padding: 1.5rem;\n  background: var(--memori-content-preview-image-bg, #f3f4f6);\n}\n\n.memori-content-preview-modal--body--content {\n  padding: 1rem 1.25rem;\n}\n\n/* Image */\n.memori-content-preview-modal--image-wrap {\n  display: flex;\n  width: 100%;\n  min-width: 0;\n  align-items: center;\n  justify-content: center;\n}\n\n.memori-content-preview-modal--image {\n  width: 100%;\n  height: 100%;\n  max-height: 70vh;\n  border-radius: 8px;\n  object-fit: contain;\n}\n\n/* Snippet / text content area */\n.memori-content-preview-modal--snippet-wrap {\n  min-height: 120px;\n  border: 1px solid var(--memori-content-preview-snippet-border, #e2e8f0);\n  border-radius: 12px;\n  background: var(--memori-content-preview-snippet-bg, #f8fafc);\n  color: var(--memori-content-preview-snippet-text, #334155);\n  font-family: 'SF Mono', 'Fira Code', 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 0.875rem;\n  line-height: 1.6;\n  overflow-x: auto;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* When Snippet component is used inside, give it consistent spacing */\n.memori-content-preview-modal--snippet-wrap .memori-snippet {\n  border: none;\n  border-radius: 12px;\n  background: transparent;\n  box-shadow: none;\n}\n\n.memori-content-preview-modal--snippet-wrap .memori-snippet--content pre {\n  padding: 1rem 1.25rem;\n}\n","",{version:3,sources:["webpack://./src/components/ContentPreviewModal/ContentPreviewModal.css"],names:[],mappings:"AAAA,mEAAmE;;AAEnE;EACE,gBAAgB;EAChB,mBAAmB;EACnB,qDAAqD;EACrD;;iCAE+B;AACjC;;AAEA,mFAAmF;AACnF;EACE,4BAA4B;AAC9B;;AAEA;EACE,6BAA6B;EAC7B,kFAAkF;EAClF,mDAAmD;EACnD,eAAe;EACf,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EACE,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,uEAAuE;EACvE,sDAAsD;AACxD;;AAEA;EACE,yEAAyE;EACzE,sBAAsB;AACxB;;AAEA,cAAc;AACd;EACE,cAAc;EACd,gBAAgB;EAChB,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,iBAAiB;EACjB,mBAAmB;EACnB,uBAAuB;EACvB,eAAe;EACf,2DAA2D;AAC7D;;AAEA;EACE,qBAAqB;AACvB;;AAEA,UAAU;AACV;EACE,aAAa;EACb,WAAW;EACX,YAAY;EACZ,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,gBAAgB;EAChB,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA,gCAAgC;AAChC;EACE,iBAAiB;EACjB,uEAAuE;EACvE,mBAAmB;EACnB,6DAA6D;EAC7D,0DAA0D;EAC1D,gFAAgF;EAChF,mBAAmB;EACnB,gBAAgB;EAChB,gBAAgB;EAChB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA,sEAAsE;AACtE;EACE,YAAY;EACZ,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE,qBAAqB;AACvB",sourcesContent:["/* ContentPreviewModal – modern preview modal for files and media */\n\n.memori-content-preview-modal.memori-modal .memori-modal--panel {\n  overflow: hidden;\n  border-radius: 16px;\n  background: var(--memori-content-preview-bg, #fafafa);\n  box-shadow:\n    0 25px 50px -12px rgba(0, 0, 0, 0.25),\n    0 0 0 1px rgba(0, 0, 0, 0.05);\n}\n\n/* Image variant: modal at least 600px wide (capped by viewport on small screens) */\n.memori-content-preview-modal--image.memori-modal .memori-modal--panel {\n  min-width: min(600px, 100vw);\n}\n\n.memori-content-preview-modal .memori-modal--title {\n  padding: 1rem 1.25rem 0.75rem;\n  border-bottom: 1px solid var(--memori-content-preview-border, rgba(0, 0, 0, 0.06));\n  color: var(--memori-content-preview-title, #1f2937);\n  font-size: 1rem;\n  font-weight: 600;\n  letter-spacing: -0.01em;\n}\n\n.memori-content-preview-modal .memori-modal--close {\n  top: 0.75rem;\n  right: 0.75rem;\n}\n\n.memori-content-preview-modal .memori-modal--close button {\n  border-radius: 10px;\n  background: var(--memori-content-preview-close-bg, rgba(0, 0, 0, 0.05));\n  transition: background 0.2s ease, transform 0.15s ease;\n}\n\n.memori-content-preview-modal .memori-modal--close button:hover {\n  background: var(--memori-content-preview-close-hover, rgba(0, 0, 0, 0.1));\n  transform: scale(1.05);\n}\n\n/* Body area */\n.memori-content-preview-modal--body {\n  overflow: auto;\n  max-height: 70vh;\n  padding: 1.25rem;\n}\n\n.memori-content-preview-modal--body--image {\n  display: flex;\n  min-height: 400px;\n  align-items: center;\n  justify-content: center;\n  padding: 1.5rem;\n  background: var(--memori-content-preview-image-bg, #f3f4f6);\n}\n\n.memori-content-preview-modal--body--content {\n  padding: 1rem 1.25rem;\n}\n\n/* Image */\n.memori-content-preview-modal--image-wrap {\n  display: flex;\n  width: 100%;\n  min-width: 0;\n  align-items: center;\n  justify-content: center;\n}\n\n.memori-content-preview-modal--image {\n  width: 100%;\n  height: 100%;\n  max-height: 70vh;\n  border-radius: 8px;\n  object-fit: contain;\n}\n\n/* Snippet / text content area */\n.memori-content-preview-modal--snippet-wrap {\n  min-height: 120px;\n  border: 1px solid var(--memori-content-preview-snippet-border, #e2e8f0);\n  border-radius: 12px;\n  background: var(--memori-content-preview-snippet-bg, #f8fafc);\n  color: var(--memori-content-preview-snippet-text, #334155);\n  font-family: 'SF Mono', 'Fira Code', 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 0.875rem;\n  line-height: 1.6;\n  overflow-x: auto;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* When Snippet component is used inside, give it consistent spacing */\n.memori-content-preview-modal--snippet-wrap .memori-snippet {\n  border: none;\n  border-radius: 12px;\n  background: transparent;\n  box-shadow: none;\n}\n\n.memori-content-preview-modal--snippet-wrap .memori-snippet--content pre {\n  padding: 1rem 1.25rem;\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/components/ContentPreviewModal/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>components_ContentPreviewModal_ContentPreviewModal});__webpack_require__("./node_modules/react/index.js");var Modal=__webpack_require__("./src/components/ui/Modal.tsx"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ContentPreviewModal=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/ContentPreviewModal/ContentPreviewModal.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ContentPreviewModal.A,options);ContentPreviewModal.A&&ContentPreviewModal.A.locals&&ContentPreviewModal.A.locals;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ContentPreviewModal_ContentPreviewModal_ContentPreviewModal=({open,onClose,title,isImage=!1,imageSrc,imageAlt="",children,className})=>{const width="min(90vw, 800px)";return(0,jsx_runtime.jsx)(Modal.A,{open,onClose:()=>onClose(),width,widthMd:width,className:classnames_default()("memori-content-preview-modal",className,{"memori-content-preview-modal--image":isImage}),closable:!0,title,footer:null,children:(0,jsx_runtime.jsx)("div",{className:classnames_default()("memori-content-preview-modal--body",{"memori-content-preview-modal--body--image":isImage,"memori-content-preview-modal--body--content":!isImage}),children:isImage&&imageSrc?(0,jsx_runtime.jsx)("div",{className:"memori-content-preview-modal--image-wrap",children:(0,jsx_runtime.jsx)("img",{src:imageSrc,alt:imageAlt,className:"memori-content-preview-modal--image"})}):(0,jsx_runtime.jsx)("div",{className:"memori-content-preview-modal--snippet-wrap",children})})})};ContentPreviewModal_ContentPreviewModal_ContentPreviewModal.displayName="ContentPreviewModal";const components_ContentPreviewModal_ContentPreviewModal=ContentPreviewModal_ContentPreviewModal_ContentPreviewModal;try{ContentPreviewModal_ContentPreviewModal_ContentPreviewModal.displayName="ContentPreviewModal",ContentPreviewModal_ContentPreviewModal_ContentPreviewModal.__docgenInfo={description:"",displayName:"ContentPreviewModal",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isImage:{defaultValue:{value:"false"},description:"When true, renders image with min 600px width; otherwise renders children in snippet-style area",name:"isImage",required:!1,type:{name:"boolean"}},imageSrc:{defaultValue:null,description:"",name:"imageSrc",required:!1,type:{name:"string"}},imageAlt:{defaultValue:{value:""},description:"",name:"imageAlt",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"Content for non-image preview (text, Snippet, iframe, etc.)",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ContentPreviewModal/ContentPreviewModal.tsx#ContentPreviewModal"]={docgenInfo:ContentPreviewModal_ContentPreviewModal_ContentPreviewModal.__docgenInfo,name:"ContentPreviewModal",path:"src/components/ContentPreviewModal/ContentPreviewModal.tsx#ContentPreviewModal"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/CustomGLBModelViewer/ModelViewer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ModelViewer=({src,poster,alt=""})=>((0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const script=document.createElement("script");return script.src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js",script.type="module",document.head.appendChild(script),()=>{document.head.removeChild(script)}},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"model-viewer",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("model-viewer",{src,"ios-src":"",poster,alt,"shadow-intensity":"1","disable-zoom":!0,"camera-controls":!0,autoplay:!0})}));ModelViewer.displayName="ModelViewer";const __WEBPACK_DEFAULT_EXPORT__=ModelViewer;try{ModelViewer.displayName="ModelViewer",ModelViewer.__docgenInfo={description:"",displayName:"ModelViewer",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},poster:{defaultValue:null,description:"",name:"poster",required:!0,type:{name:"string"}},alt:{defaultValue:{value:""},description:"",name:"alt",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/CustomGLBModelViewer/ModelViewer.tsx#ModelViewer"]={docgenInfo:ModelViewer.__docgenInfo,name:"ModelViewer",path:"src/components/CustomGLBModelViewer/ModelViewer.tsx#ModelViewer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/MediaWidget/MediaItemWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>MediaWidget_MediaItemWidget});var react=__webpack_require__("./node_modules/react/index.js"),media=__webpack_require__("./src/helpers/media.ts"),utils=__webpack_require__("./src/helpers/utils.ts"),translations=__webpack_require__("./src/helpers/translations.ts"),constants=__webpack_require__("./src/helpers/constants.ts"),ModelViewer=__webpack_require__("./src/components/CustomGLBModelViewer/ModelViewer.tsx"),Snippet=__webpack_require__("./src/components/Snippet/Snippet.tsx"),Card=__webpack_require__("./src/components/ui/Card.tsx"),File=__webpack_require__("./src/components/icons/File.tsx"),transition=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Sound=__webpack_require__("./src/components/icons/Sound.tsx"),Link=__webpack_require__("./src/components/icons/Link.tsx"),ellipsed=__webpack_require__("./node_modules/ellipsed/lib/ellipsed.js");const FILE_EXTENSIONS_DARK_CARD=["TXT","HTML","PDF","DOC","DOCX","XLS","XLSX","JSON","XML","MD","CSS","JS","TS","PY"],FILE_MIME_TYPES_DARK_CARD=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/html","text/plain","text/css","text/javascript","application/json","application/xml","text/markdown"],TEXT_FILE_EXTENSIONS=["TXT","HTML","MD","CSS","JS","TS","PY","JSON","XML"],IMAGE_MIME_TYPES=["image/jpeg","image/png","image/jpg","image/gif"],MIME_TO_EXT={"application/pdf":"PDF","application/msword":"DOC","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOCX","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLSX","text/html":"HTML","text/plain":"TXT","text/css":"CSS","text/javascript":"JS","application/json":"JSON","application/xml":"XML","text/markdown":"MD"};function formatBytes(bytes){if(!bytes||0===bytes)return"0 Bytes";const i=Math.floor(Math.log(bytes)/Math.log(1024));return`${parseFloat((bytes/Math.pow(1024,i)).toFixed(2))} ${["Bytes","KB","MB","GB"][i]}`}function getFileExtensionFromMime(mimeType){return MIME_TO_EXT[mimeType]||mimeType.split("/")[1]?.toUpperCase()||"FILE"}function countLines(content){return content?content.split(/\r\n|\r|\n/).length:0}function getContentSize(item){return null!=item.content?new Blob([item.content]).size:item.properties?.size}function isValidUrl(urlString){if(!urlString)return!1;try{return new URL(urlString),!0}catch{return!1}}function getImageDisplaySource(item,resourceUrl){const hasValidUrl=isValidUrl(resourceUrl)||isValidUrl(item.url),isRgb=!!item.url&&(item.url.startsWith("rgb(")||item.url.startsWith("rgba("));let src;return src=hasValidUrl?resourceUrl||item.url:isRgb?item.url:item.content?`data:${item.mimeType};base64,${item.content}`:void 0,{src,isRgb}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function DocumentCard({title,badge}){return(0,jsx_runtime.jsxs)("div",{className:"memori-media-item--document",children:[(0,jsx_runtime.jsx)("div",{className:"memori-media-item--document-header",children:(0,jsx_runtime.jsx)("div",{className:"memori-media-item--document-title",children:title})}),(0,jsx_runtime.jsx)("span",{className:"memori-media-item--document-badge",children:badge})]})}DocumentCard.displayName="DocumentCard";try{DocumentCard.displayName="DocumentCard",DocumentCard.__docgenInfo={description:"",displayName:"DocumentCard",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},badge:{defaultValue:null,description:"",name:"badge",required:!0,type:{name:"string"}},meta:{defaultValue:null,description:"",name:"meta",required:!1,type:{name:"string | null"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MediaWidget/DocumentCard.tsx#DocumentCard"]={docgenInfo:DocumentCard.__docgenInfo,name:"DocumentCard",path:"src/components/MediaWidget/DocumentCard.tsx#DocumentCard"})}catch(__react_docgen_typescript_loader_error){}var ContentPreviewModal=__webpack_require__("./src/components/ContentPreviewModal/index.ts");const CODE_MIME_TYPES=constants.prismSyntaxLangs.map(l=>l.mimeType),VIDEO_MIME_TYPES=["video/mp4","video/quicktime","video/avi","video/mpeg"],AUDIO_MIME_TYPES=["audio/mpeg3","audio/wav","audio/mpeg"];function MediaPreviewModal({medium,onClose,sessionID,tenantID,baseURL,apiURL,customMediaRenderer:_customMediaRenderer,descriptionOneLine:_descriptionOneLine,onLinkPreviewInfo:_onLinkPreviewInfo,onMediumClick:_onMediumClick}){const previewUrl=(0,media.A)({resourceURI:medium.url,sessionID,tenantID,baseURL,apiURL}),isDocumentAttachment=!0===medium.properties?.isDocumentAttachment||!0===medium.properties?.isAttachedFile||function isDocumentAttachmentContent(content){if(!content||"string"!=typeof content)return!1;const trimmed=content.trim();return trimmed.includes("document_attachment")||trimmed.includes("<document_attachment")||trimmed.includes("</document_attachment>")||trimmed.includes("&lt;document_attachment")||trimmed.includes("&lt;/document_attachment&gt;")||trimmed.startsWith("<")&&trimmed.includes(">")&&trimmed.length<1e4}(medium.content),isImage=IMAGE_MIME_TYPES.includes(medium.mimeType),isCode=CODE_MIME_TYPES.includes(medium.mimeType),isPdf="application/pdf"===medium.mimeType&&!isDocumentAttachment,isExcel=("application/vnd.ms-excel"===medium.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===medium.mimeType)&&!isDocumentAttachment,isHtmlWithContent="text/html"===medium.mimeType&&!!medium.content,isHtmlLink="text/html"===medium.mimeType&&!!medium.url,isVideoType=function isVideo(mimeType){return VIDEO_MIME_TYPES.includes(mimeType)}(medium.mimeType),isAudioType=function isAudio(mimeType){return AUDIO_MIME_TYPES.includes(mimeType)}(medium.mimeType),is3D="model/gltf-binary"===medium.mimeType,isCsv="text/csv"===medium.mimeType,isPlainText="text/plain"===medium.mimeType||isDocumentAttachment||isCsv,isMarkdown="text/markdown"===medium.mimeType,isWordType=function isWordDoc(mimeType){return"application/msword"===mimeType||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===mimeType}(medium.mimeType),mediaSrc=null!=medium.content?`data:${medium.mimeType};base64,${medium.content}`:previewUrl,hasMediaSrc=!!mediaSrc,glbSrc=null!=medium.content?`data:model/gltf-binary;base64,${medium.content}`:previewUrl,imageDisplay=isImage?getImageDisplaySource(medium,previewUrl):{src:void 0,isRgb:!1},{src:imageSrc,isRgb:isImageRgb}=imageDisplay,iframeSrcFromContent=medium.content?`data:${medium.mimeType};base64,${medium.content}`:previewUrl,htmlLinkSrc=!medium.url||medium.url.startsWith("http")?medium.url:`https://${medium.url}`,htmlAsTextMedium={...medium,mimeType:"text/plain",content:(0,utils._e)(medium.content||"")};if(isImage){if(isImageRgb&&medium.url)return(0,jsx_runtime.jsx)(ContentPreviewModal.A,{open:!0,onClose,title:medium.title??void 0,children:(0,jsx_runtime.jsx)("div",{className:"memori-media-item-preview--content memori-media-item--modal-rgb",style:{width:"100%",minHeight:200,backgroundColor:medium.url}})});if(imageSrc)return(0,jsx_runtime.jsx)(ContentPreviewModal.A,{open:!0,onClose,title:medium.title??void 0,isImage:!0,imageSrc,imageAlt:medium.title??""})}return(0,jsx_runtime.jsx)(ContentPreviewModal.A,{open:!0,onClose,title:medium.title??void 0,children:isCode?(0,jsx_runtime.jsx)(Snippet.A,{preview:!1,medium}):isDocumentAttachment&&medium.content?(()=>{if("text/html"===medium.mimeType&&isDocumentAttachment){let htmlContent=medium.content||"";if(htmlContent.includes("&lt;")||htmlContent.includes("&quot;")){const div=document.createElement("div");div.innerHTML=htmlContent,htmlContent=div.textContent||div.innerText||htmlContent}else htmlContent=(0,utils.mo)(htmlContent);const htmlMedium={...medium,mimeType:"application/xml",content:htmlContent};return(0,jsx_runtime.jsx)(Snippet.A,{preview:!1,medium:htmlMedium})}{let displayContent=medium.content;if(displayContent.includes("&lt;")||displayContent.includes("&quot;")){const div=document.createElement("div");div.innerHTML=displayContent,displayContent=div.textContent||div.innerText||displayContent}else displayContent=(0,utils.mo)(displayContent);return displayContent=displayContent.replace(/[ \t]+/g," ").replace(/\n{3,}/g,"\n\n").trim(),(0,jsx_runtime.jsx)(Snippet.A,{preview:!1,medium:{...medium,mimeType:"text/plain",content:displayContent}})}})():isPdf&&(previewUrl||medium.content)?(0,jsx_runtime.jsx)("div",{className:"memori-media-item-preview--content memori-media-item--modal-iframe-wrap",children:(0,jsx_runtime.jsx)("iframe",{title:medium.title||"PDF preview",src:medium.content?`data:application/pdf;base64,${medium.content}`:previewUrl,className:"memori-media-item--modal-iframe"})}):isExcel&&(previewUrl||medium.content)?(0,jsx_runtime.jsx)("div",{className:"memori-media-item-preview--content memori-media-item--modal-iframe-wrap",children:(0,jsx_runtime.jsx)("iframe",{title:medium.title||"Spreadsheet preview",src:iframeSrcFromContent,className:"memori-media-item--modal-iframe"})}):isHtmlWithContent&&!isDocumentAttachment?(0,jsx_runtime.jsx)(Snippet.A,{preview:!1,medium:htmlAsTextMedium}):isHtmlLink?(0,jsx_runtime.jsx)("div",{className:"memori-media-item-preview--content memori-media-item--modal-iframe-wrap",children:(0,jsx_runtime.jsx)("iframe",{title:medium.title||"Link preview",src:htmlLinkSrc,className:"memori-media-item--modal-iframe"})}):isVideoType&&hasMediaSrc?(0,jsx_runtime.jsx)("div",{className:"memori-media-item-preview--content memori-media-item--modal-video-wrap",children:(0,jsx_runtime.jsxs)("video",{className:"memori-media-item--modal-video",controls:!0,src:mediaSrc,title:medium.title||"Video preview",children:["video/quicktime"===medium.mimeType&&(0,jsx_runtime.jsx)("source",{src:mediaSrc,type:"video/mp4"}),"Your browser does not support this video format."]})}):isAudioType&&hasMediaSrc?(0,jsx_runtime.jsxs)("div",{className:"memori-media-item-preview--content memori-media-item--modal-audio-wrap",children:[(0,jsx_runtime.jsx)("p",{className:"memori-media-item--modal-audio-title",children:medium.title||"Audio"}),(0,jsx_runtime.jsx)("audio",{className:"memori-media-item--modal-audio",controls:!0,src:mediaSrc,title:medium.title||"Audio preview",children:"Your browser does not support this audio format."})]}):is3D&&glbSrc?(0,jsx_runtime.jsx)("div",{className:"memori-media-item-preview--content memori-media-item--modal-3d-wrap",children:(0,jsx_runtime.jsx)(ModelViewer.A,{src:glbSrc,poster:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2U1ZTdlYiIvPjwvc3ZnPg==",alt:medium.title||"3D model"})}):isPlainText&&medium.content||isMarkdown&&medium.content?(0,jsx_runtime.jsx)(Snippet.A,{preview:!1,medium}):(0,jsx_runtime.jsxs)("div",{className:"memori-media-item-preview--content memori-media-item--modal-fallback",children:[(0,jsx_runtime.jsx)("p",{className:"memori-media-item--modal-fallback-message",children:isWordType?"Preview not available for this document.":"Preview not available for this file type."}),(0,jsx_runtime.jsx)("p",{className:"memori-media-item--modal-fallback-hint",children:"You can open it in a new tab or download it."}),previewUrl&&(0,jsx_runtime.jsxs)("div",{className:"memori-media-item--modal-fallback-actions",children:[(0,jsx_runtime.jsx)("a",{href:previewUrl,target:"_blank",rel:"noopener noreferrer",className:"memori-media-item--modal-fallback-link",children:"Open in new tab"}),(0,jsx_runtime.jsx)("a",{href:previewUrl,download:medium.title||void 0,className:"memori-media-item--modal-fallback-link",children:"Download"})]})]})})}MediaPreviewModal.displayName="MediaPreviewModal";try{MediaPreviewModal.displayName="MediaPreviewModal",MediaPreviewModal.__docgenInfo={description:"",displayName:"MediaPreviewModal",props:{medium:{defaultValue:null,description:"",name:"medium",required:!0,type:{name:"Medium"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},tenantID:{defaultValue:null,description:"",name:"tenantID",required:!1,type:{name:"string"}},baseURL:{defaultValue:null,description:"",name:"baseURL",required:!1,type:{name:"string"}},apiURL:{defaultValue:null,description:"",name:"apiURL",required:!1,type:{name:"string"}},customMediaRenderer:{defaultValue:null,description:"",name:"customMediaRenderer",required:!1,type:{name:"((mimeType: string) => Element | null)"}},descriptionOneLine:{defaultValue:null,description:"",name:"descriptionOneLine",required:!1,type:{name:"boolean"}},onLinkPreviewInfo:{defaultValue:null,description:"",name:"onLinkPreviewInfo",required:!1,type:{name:"((info: LinkPreviewInfo) => void)"}},onMediumClick:{defaultValue:null,description:"",name:"onMediumClick",required:!1,type:{name:"((mediumID: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MediaWidget/MediaPreviewModal.tsx#MediaPreviewModal"]={docgenInfo:MediaPreviewModal.__docgenInfo,name:"MediaPreviewModal",path:"src/components/MediaWidget/MediaPreviewModal.tsx#MediaPreviewModal"})}catch(__react_docgen_typescript_loader_error){}const MediaItemWidget_CODE_MIME_TYPES=constants.prismSyntaxLangs.map(l=>l.mimeType),IMAGE_MODAL_MIME_TYPES=["image/jpeg","image/png","image/jpg","image/gif"];const RenderMediaItem=(0,react.memo)(function RenderMediaItem({isChild:_isChild=!1,item,sessionID,tenantID,preview=!1,baseURL,apiURL,onClick:_onClick,customMediaRenderer,descriptionOneLine=!1,onLinkPreviewInfo}){const[copyNotification,setCopyNotification]=(0,react.useState)(!1),[imageError,setImageError]=(0,react.useState)(!1),[link,setLink]=(0,react.useState)(null),onLinkPreviewInfoRef=(0,react.useRef)(onLinkPreviewInfo);onLinkPreviewInfoRef.current=onLinkPreviewInfo;const resourceUrl=(0,media.A)({resourceURI:item.url,sessionID,tenantID,baseURL,apiURL}),normURL=function normalizeUrl(url){return url&&0!==url.length?url.startsWith("http")?url:`https://${url}`:url}(item.url);(0,react.useEffect)(()=>{if("text/html"!==item.mimeType||!normURL||normURL===link?.urlKey||!baseURL)return;let cancelled=!1;return async function fetchLinkPreview(url,baseUrl){try{const res=await fetch(`${baseUrl||"https://aisuru.com"}/api/linkpreview/${encodeURIComponent(url)}`);return await res.json()}catch(err){return console.error("fetchLinkPreview",err),null}}(normURL,baseURL).then(siteInfo=>{cancelled||(setLink(siteInfo?{...siteInfo,urlKey:normURL}:null),siteInfo&&onLinkPreviewInfoRef.current&&onLinkPreviewInfoRef.current(siteInfo))}),()=>{cancelled=!0}},[item?.url,baseURL,item.mimeType,normURL,link?.urlKey]);const customRenderer=customMediaRenderer?.(item.mimeType);if(customRenderer)return customRenderer;const isCodeSnippet=MediaItemWidget_CODE_MIME_TYPES.includes(item.mimeType),isHTML="text/html"===item.mimeType,isDocumentAttachment=!0===item.properties?.isDocumentAttachment,isAttachedFile=!0===item.properties?.isAttachedFile,imageDisplay=getImageDisplaySource(item,resourceUrl),{src:imageSrc,isRgb:isImageRGB}=imageDisplay,linkTitle=item.title&&item.title.length>0?item.title:link?.title,linkDescription=link?.description,linkVideo=link?.video,linkImage=link?.image??link?.images?.[0],renderMediaContent=(0,react.useCallback)(medium=>{const url=(0,media.A)({resourceURI:medium.url,sessionID,tenantID,baseURL,apiURL});switch(medium.mimeType){case"image/jpeg":case"image/png":case"image/jpg":case"image/gif":return isImageRGB?(0,jsx_runtime.jsx)("picture",{className:"memori-media-item--figure",children:(0,jsx_runtime.jsx)("div",{className:"memori-media-item--rgb-item",style:{backgroundColor:medium.url}})}):(0,jsx_runtime.jsxs)("picture",{className:"memori-media-item--figure",children:[!preview&&imageSrc&&(0,jsx_runtime.jsx)("source",{srcSet:imageSrc,type:medium.mimeType}),(0,jsx_runtime.jsx)("img",{alt:medium.title,src:imageError||!imageSrc?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YwZjBmMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBub3QgYXZhaWxhYmxlPC90ZXh0Pjwvc3ZnPg==":imageSrc,onError:()=>setImageError(!0)})]});case"video/mp4":case"video/quicktime":case"video/avi":case"video/mpeg":return(0,jsx_runtime.jsxs)("div",{className:"memori-media-item--video-container",children:[(0,jsx_runtime.jsxs)("video",{className:"memori-media-item--video-player",controls:!0,src:url,title:medium.title,children:["video/quicktime"===medium.mimeType&&(0,jsx_runtime.jsx)("source",{src:medium.url,type:"video/mp4"}),(0,jsx_runtime.jsx)("source",{src:medium.url,type:medium.mimeType}),"Your browser does not support this video format."]}),(0,jsx_runtime.jsx)("div",{className:"memori-media-item--video-overlay hidden",children:(0,jsx_runtime.jsx)("svg",{className:"memori-media-item--play-icon",viewBox:"0 0 24 24",fill:"currentColor",children:(0,jsx_runtime.jsx)("path",{d:"M8 5v14l11-7z"})})})]});case"audio/mpeg3":case"audio/wav":case"audio/mpeg":return(0,jsx_runtime.jsxs)("div",{className:"memori-media-item--audio-container",children:[(0,jsx_runtime.jsx)("div",{className:"memori-media-item--audio-icon",children:(0,jsx_runtime.jsx)(Sound.default,{})}),(0,jsx_runtime.jsx)("audio",{className:"memori-media-item--audio-player",controls:!0,src:url})]});case"model/gltf-binary":return(0,jsx_runtime.jsx)("div",{className:"memori-media-item--model-container",children:(0,jsx_runtime.jsx)("div",{className:"memori-media-item--model-viewer",children:(0,jsx_runtime.jsx)(ModelViewer.A,{src:url,alt:"",poster:"data:image/png;base64,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"})})});case"text/html":return(0,jsx_runtime.jsx)(DocumentCard,{title:medium.title||"File",badge:getFileExtensionFromMime(medium.mimeType),meta:(()=>{const size=getContentSize(medium);return null!=size&&size>0?formatBytes(size):null})(),icon:(0,jsx_runtime.jsx)(Link.default,{className:"memori-media-item--document-icon-svg"})});default:return(0,jsx_runtime.jsx)(DocumentCard,{title:medium.title||"File",badge:getFileExtensionFromMime(medium.mimeType),meta:(()=>{const size=getContentSize(medium);return null!=size&&size>0?formatBytes(size):null})(),icon:(0,jsx_runtime.jsx)(File.default,{className:"memori-media-item--document-icon-svg"})})}},[sessionID,tenantID,baseURL,apiURL,preview,imageSrc,imageError,isImageRGB,linkImage,linkVideo]),fileExtensionFromUrl=function getFileExtensionFromUrl(url){if(!url)return null;const match=url.match(/\.([a-zA-Z0-9]+)(?:\?|$)/);return match?match[1].toUpperCase():null}(normURL||item.url),fileExtensionFromMime=getFileExtensionFromMime(item.mimeType),fileExtension=fileExtensionFromUrl||fileExtensionFromMime,isFile=function shouldUseDarkFileCard(_item,fileExtension,mimeType){return!(!fileExtension||!FILE_EXTENSIONS_DARK_CARD.includes(fileExtension))||FILE_MIME_TYPES_DARK_CARD.includes(mimeType)}(0,fileExtensionFromUrl,item.mimeType),lineCount=TEXT_FILE_EXTENSIONS.includes(fileExtension||"")&&item.content?countLines(item.content):null,lineText=null!==lineCount?1===lineCount?"1 line":`${lineCount} lines`:null;if(isFile&&!isCodeSnippet){const contentSize=getContentSize(item),sizeText=null!=contentSize&&contentSize>0?formatBytes(contentSize):null,displayName=item.title||linkTitle||"File",metaParts=[lineText,sizeText].filter(Boolean),metaLine=metaParts.length>0?metaParts.join(" · "):null;if((isDocumentAttachment||isAttachedFile)&&item.mediumID&&_onClick)return(0,jsx_runtime.jsx)("div",{onClick:()=>_onClick(item),className:"memori-media-item--link memori-media-item--document-link",style:{cursor:"pointer"},title:displayName,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),_onClick(item))},children:(0,jsx_runtime.jsx)(DocumentCard,{title:displayName,badge:"text/html"===item.mimeType&&item.url?"Link":fileExtension,meta:metaLine,icon:"text/html"===item.mimeType?(0,jsx_runtime.jsx)(Link.default,{className:"memori-media-item--document-icon-svg"}):(0,jsx_runtime.jsx)(File.default,{className:"memori-media-item--document-icon-svg"})})});const hrefUrl=(()=>{if(item.url)return(0,media.A)({resourceURI:item.url,sessionID,tenantID,baseURL,apiURL})||item.url||"#";if(isHTML&&item.content){let htmlContent=item.content;if(item.properties?.isDocumentAttachment||htmlContent.includes("document_attachment")||htmlContent.includes("<document_attachment")){if(htmlContent.includes("&lt;")||htmlContent.includes("&quot;")){const div=document.createElement("div");div.innerHTML=htmlContent,htmlContent=div.textContent||div.innerText||htmlContent}htmlContent=(0,utils.mo)(htmlContent)}const blob=new Blob([htmlContent],{type:"text/html"});return URL.createObjectURL(blob)}if(item.content){const blob=new Blob([item.content],{type:item.mimeType||"text/plain"});return URL.createObjectURL(blob)}return"#"})();return(0,jsx_runtime.jsx)("a",{href:hrefUrl,target:"_blank",rel:"noopener noreferrer",className:"memori-media-item--link memori-media-item--document-link",title:displayName,children:(0,jsx_runtime.jsx)(DocumentCard,{title:displayName,badge:"text/html"===item.mimeType&&item.url?"Link":fileExtension,meta:metaLine,icon:"text/html"===item.mimeType?(0,jsx_runtime.jsx)(Link.default,{className:"memori-media-item--document-icon-svg"}):(0,jsx_runtime.jsx)(File.default,{className:"memori-media-item--document-icon-svg"})})})}if(isCodeSnippet&&item.content&&item.mediumID&&_onClick)return(0,jsx_runtime.jsx)("div",{className:"memori-media-item--link",style:{cursor:"pointer"},onClick:()=>_onClick(item),title:item.title,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),_onClick(item))},children:(0,jsx_runtime.jsx)(Card.A,{hoverable:!0,cover:renderMediaContent(item),title:item.title})});if(isHTML&&(linkImage||linkVideo||linkDescription)){const coverSrc=!0===linkImage?.includes("data:image")?void 0:linkImage?.startsWith("https")?linkImage:linkImage?`https://${linkImage.replace("http://","")}`:void 0;return(0,jsx_runtime.jsx)("a",{href:item.url||"#",target:"_blank",rel:"noopener noreferrer",className:"memori-media-item--link",title:linkTitle,children:(0,jsx_runtime.jsx)(Card.A,{hoverable:!0,className:classnames_default()("memori-media-item--card",{"memori-media-item--card-description-oneline":descriptionOneLine,"memori-media-item--card-has-image":!!linkImage,"memori-media-item--card-has-video":!!linkVideo}),cover:linkVideo?(0,jsx_runtime.jsx)("iframe",{width:"100%",height:"100%",src:linkVideo,title:"Video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):linkImage?(0,jsx_runtime.jsx)("img",{className:"memori-media-item--card-cover-img",src:coverSrc,alt:linkTitle}):(0,jsx_runtime.jsx)("div",{className:"memori-media-item--card-cover-icon",children:(0,jsx_runtime.jsx)(Link.default,{className:"memori-media-item--icon"})}),title:linkTitle,description:linkDescription})})}if((0,react.useEffect)(()=>{if(!linkDescription)return;const t=setTimeout(()=>{(0,ellipsed.ellipsis)(".memori-media-item--card .memori-card--description",3,{responsive:!0})},300);return()=>clearTimeout(t)},[linkDescription,item.mediumID]),function isImageMime(mimeType){return IMAGE_MODAL_MIME_TYPES.includes(mimeType)}(item.mimeType))return isImageRGB?(0,jsx_runtime.jsx)(Card.A,{hoverable:!0,className:"memori-media-item--card memori-media-item--image",cover:renderMediaContent(item)}):item.mediumID&&_onClick?(0,jsx_runtime.jsx)("div",{onClick:()=>_onClick(item),className:"memori-media-item--link memori-media-item--image-link",style:{cursor:"pointer"},title:item.title,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),_onClick(item))},children:(0,jsx_runtime.jsx)(Card.A,{hoverable:!0,className:"memori-media-item--card memori-media-item--image",cover:renderMediaContent(item)})}):(0,jsx_runtime.jsx)(Card.A,{hoverable:!0,className:"memori-media-item--card memori-media-item--image",cover:renderMediaContent(item)});switch(item.mimeType){case"video/mp4":case"video/quicktime":case"video/avi":case"video/mpeg":default:return(0,jsx_runtime.jsx)("a",{className:"memori-media-item--link",href:resourceUrl||"#",target:"_blank",rel:"noopener noreferrer",title:item.title,children:renderMediaContent(item)});case"audio/mpeg3":case"audio/wav":case"audio/mpeg":case"model/gltf-binary":return resourceUrl?(0,jsx_runtime.jsx)("a",{className:"memori-media-item--link",href:resourceUrl,target:"_blank",rel:"noopener noreferrer",title:item.title,children:renderMediaContent(item)}):renderMediaContent(item)}}),RenderSnippetItem=(0,react.memo)(function RenderSnippetItem({item,onClick:_onClick,sessionID,tenantID,baseURL,apiURL}){const resourceUrl=(0,media.A)({resourceURI:item.url,sessionID,tenantID,baseURL,apiURL}),hasUrl=!(!resourceUrl||"#"===resourceUrl),lineCount=countLines(item.content),contentLength=item.content?.length??0,lineText=1===lineCount?"1 riga":`${lineCount} righe`;if(lineCount<=5&&contentLength<=200)return(0,jsx_runtime.jsx)("div",{className:"memori-media-item--snippet-direct",children:(0,jsx_runtime.jsx)(Card.A,{className:"memori-media-item--card memori-media-item--snippet",children:(0,jsx_runtime.jsxs)("div",{className:"memori-media-item--snippet-body",children:[(0,jsx_runtime.jsx)("div",{className:"memori-media-item--snippet-header",children:(0,jsx_runtime.jsx)("span",{className:"memori-media-item--snippet-meta",children:lineText})}),(0,jsx_runtime.jsx)("div",{className:"memori-media-item--snippet-preview",children:(0,jsx_runtime.jsx)(Snippet.A,{showCopyButton:!0,preview:!1,medium:item})})]})})});hasUrl||item.content&&(()=>{const blob=new Blob([item.content],{type:item.mimeType||"text/plain"});URL.createObjectURL(blob)})();return(0,jsx_runtime.jsx)("div",{onClick:()=>{item.mediumID&&_onClick&&_onClick(item)},style:{cursor:"pointer"},role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),item.mediumID&&_onClick&&_onClick(item))},className:"memori-media-item--link",title:item.title,children:(0,jsx_runtime.jsx)(Card.A,{hoverable:!0,className:"memori-media-item--card memori-media-item--snippet",children:(0,jsx_runtime.jsxs)("div",{className:"memori-media-item--snippet-body",children:[(0,jsx_runtime.jsx)("div",{className:"memori-media-item--snippet-header",children:(0,jsx_runtime.jsx)("span",{className:"memori-media-item--snippet-meta",children:lineText})}),(0,jsx_runtime.jsx)("div",{className:"memori-media-item--snippet-preview",children:(0,jsx_runtime.jsx)(Snippet.A,{showCopyButton:!1,preview:!0,medium:item})})]})})})}),MediaItemWidget=({items,sessionID,tenantID,translateTo,baseURL,apiURL,customMediaRenderer,fromUser=!1,descriptionOneLine=!1,onLinkPreviewInfo})=>{const[media,setMedia]=(0,react.useState)(items),[openModalMedium,setOpenModalMedium]=(0,react.useState)();(0,react.useEffect)(()=>{setMedia(items)},[items]);const translateMediaCaptions=(0,react.useCallback)(async()=>{if(!translateTo)return;const translated=await Promise.all((items??[]).map(async m=>{if(!m.title)return m;try{const t=await(0,translations.s)(m.title,translateTo);return{...m,title:t.text??m.title}}catch(e){return console.error(e),m}}));setMedia(translated)},[translateTo,items]);(0,react.useEffect)(()=>{translateTo&&translateMediaCaptions()},[translateTo,translateMediaCaptions]);const nonCodeDisplayMedia=(0,react.useMemo)(()=>media.filter(m=>!m.properties?.executable&&!MediaItemWidget_CODE_MIME_TYPES.includes(m.mimeType)).sort((a,b)=>{const at=a.creationTimestamp??0,bt=b.creationTimestamp??0;return at>bt?1:at<bt?-1:0}),[media]),codeSnippets=(0,react.useMemo)(()=>media.filter(m=>!m.properties?.executable&&MediaItemWidget_CODE_MIME_TYPES.includes(m.mimeType)),[media]),cssExecutableCode=(0,react.useMemo)(()=>media.filter(m=>"text/css"===m.mimeType&&!!m.properties?.executable),[media]),imageCount=(0,react.useMemo)(()=>nonCodeDisplayMedia.filter(m=>IMAGE_MIME_TYPES.includes(m.mimeType)).length,[nonCodeDisplayMedia]),handleMediaItemClick=(0,react.useCallback)(item=>{setOpenModalMedium(item)},[]),handleSnippetClick=(0,react.useCallback)(item=>{setOpenModalMedium(item)},[]),handleCloseModal=(0,react.useCallback)(()=>{setOpenModalMedium(void 0)},[]),handleModalNavigate=(0,react.useCallback)(mediumID=>{setOpenModalMedium(media.find(m=>m.mediumID===mediumID))},[media]);return(0,jsx_runtime.jsxs)(transition.e,{appear:!0,show:!0,as:"div",className:"memori-media-items",children:[nonCodeDisplayMedia.length>0&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("memori-media-items--grid memori-chat-scroll-item",{"memori-media-items--user":fromUser,"memori-media-items--agent":!fromUser,"memori-media-items--single":1===imageCount,"memori-media-items--few":imageCount>=2&&imageCount<=4,"memori-media-items--many":imageCount>=5}),children:nonCodeDisplayMedia.map((item,index)=>(0,jsx_runtime.jsx)(transition.e.Child,{as:"div",className:"memori-media-item",enter:"ease-out duration-500 delay-"+100*index,enterFrom:"opacity-0 scale-95",enterTo:"opacity-1 scale-100",leave:"ease-in duration-300",leaveFrom:"opacity-1 scale-100",leaveTo:"opacity-0 scale-95",children:(0,jsx_runtime.jsx)(RenderMediaItem,{isChild:!0,sessionID,tenantID,baseURL,apiURL,onClick:handleMediaItemClick,item:{...item,title:item.title,url:item.url,content:item.content,type:"document"},customMediaRenderer,descriptionOneLine,onLinkPreviewInfo})},`media-${index}-${item.mediumID??item.url??"n"}`))}),codeSnippets.length>0&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("memori-media-items--grid memori-chat-scroll-item",{"memori-media-items--user":fromUser,"memori-media-items--agent":!fromUser}),children:codeSnippets.map((item,index)=>(0,jsx_runtime.jsx)(transition.e.Child,{as:"div",className:"memori-media-item",enter:"ease-out duration-500 delay-"+100*index,enterFrom:"opacity-0 scale-95",enterTo:"opacity-1 scale-100",leave:"ease-in duration-300",leaveFrom:"opacity-1 scale-100",leaveTo:"opacity-0 scale-95",children:(0,jsx_runtime.jsx)(RenderSnippetItem,{sessionID,tenantID,baseURL,apiURL,onClick:handleSnippetClick,item:{...item,title:item.title,url:item.url,content:item.content,type:"document"}})},`snippet-${index}-${item.mediumID??item.url??"n"}`))}),cssExecutableCode.map(m=>(0,jsx_runtime.jsx)("style",{dangerouslySetInnerHTML:{__html:m.content||""}},m.mediumID)),openModalMedium&&(0,jsx_runtime.jsx)(MediaPreviewModal,{medium:openModalMedium,onClose:handleCloseModal,sessionID,tenantID,baseURL,apiURL,customMediaRenderer,descriptionOneLine,onLinkPreviewInfo,onMediumClick:handleModalNavigate})]})};MediaItemWidget.displayName="MediaItemWidget";const MediaWidget_MediaItemWidget=(0,react.memo)(MediaItemWidget);try{RenderMediaItem.displayName="RenderMediaItem",RenderMediaItem.__docgenInfo={description:"",displayName:"RenderMediaItem",props:{isChild:{defaultValue:null,description:"",name:"isChild",required:!1,type:{name:"boolean"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"MediaItem"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},tenantID:{defaultValue:null,description:"",name:"tenantID",required:!1,type:{name:"string"}},preview:{defaultValue:null,description:"",name:"preview",required:!1,type:{name:"boolean"}},baseURL:{defaultValue:null,description:"",name:"baseURL",required:!1,type:{name:"string"}},apiURL:{defaultValue:null,description:"",name:"apiURL",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"Called when user opens a media item (e.g. image) in the preview modal. Receives the clicked item so the correct one opens even when mediumIDs duplicate.",name:"onClick",required:!1,type:{name:"((item: MediaItem) => void)"}},customMediaRenderer:{defaultValue:null,description:"",name:"customMediaRenderer",required:!1,type:{name:"((mimeType: string) => Element | null)"}},descriptionOneLine:{defaultValue:{value:"false"},description:"",name:"descriptionOneLine",required:!1,type:{name:"boolean"}},onLinkPreviewInfo:{defaultValue:null,description:"",name:"onLinkPreviewInfo",required:!1,type:{name:"((linkPreviewInfo: LinkPreviewInfo) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MediaWidget/MediaItemWidget.tsx#RenderMediaItem"]={docgenInfo:RenderMediaItem.__docgenInfo,name:"RenderMediaItem",path:"src/components/MediaWidget/MediaItemWidget.tsx#RenderMediaItem"})}catch(__react_docgen_typescript_loader_error){}try{RenderSnippetItem.displayName="RenderSnippetItem",RenderSnippetItem.__docgenInfo={description:"",displayName:"RenderSnippetItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Medium & { type: string; }"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},tenantID:{defaultValue:null,description:"",name:"tenantID",required:!1,type:{name:"string"}},baseURL:{defaultValue:null,description:"",name:"baseURL",required:!1,type:{name:"string"}},apiURL:{defaultValue:null,description:"",name:"apiURL",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"Called when user opens a snippet in the preview modal. Receives the clicked item.",name:"onClick",required:!1,type:{name:"((item: Medium & { type: string; }) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MediaWidget/MediaItemWidget.tsx#RenderSnippetItem"]={docgenInfo:RenderSnippetItem.__docgenInfo,name:"RenderSnippetItem",path:"src/components/MediaWidget/MediaItemWidget.tsx#RenderSnippetItem"})}catch(__react_docgen_typescript_loader_error){}try{MediaItemWidget.displayName="MediaItemWidget",MediaItemWidget.__docgenInfo={description:"",displayName:"MediaItemWidget",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"MediaItem[]"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},tenantID:{defaultValue:null,description:"",name:"tenantID",required:!1,type:{name:"string"}},translateTo:{defaultValue:null,description:"",name:"translateTo",required:!1,type:{name:"string"}},baseURL:{defaultValue:null,description:"",name:"baseURL",required:!1,type:{name:"string"}},apiURL:{defaultValue:null,description:"",name:"apiURL",required:!1,type:{name:"string"}},customMediaRenderer:{defaultValue:null,description:"",name:"customMediaRenderer",required:!1,type:{name:"((mimeType: string) => Element | null)"}},fromUser:{defaultValue:{value:"false"},description:"",name:"fromUser",required:!1,type:{name:"boolean"}},descriptionOneLine:{defaultValue:{value:"false"},description:"",name:"descriptionOneLine",required:!1,type:{name:"boolean"}},onLinkPreviewInfo:{defaultValue:null,description:"",name:"onLinkPreviewInfo",required:!1,type:{name:"((linkPreviewInfo: LinkPreviewInfo) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MediaWidget/MediaItemWidget.tsx#MediaItemWidget"]={docgenInfo:MediaItemWidget.__docgenInfo,name:"MediaItemWidget",path:"src/components/MediaWidget/MediaItemWidget.tsx#MediaItemWidget"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/File.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const File=({className,title})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className,"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"})});File.displayName="File";const __WEBPACK_DEFAULT_EXPORT__=File;try{File.displayName="File",File.__docgenInfo={description:"",displayName:"File",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/File.tsx#File"]={docgenInfo:File.__docgenInfo,name:"File",path:"src/components/icons/File.tsx#File"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Link.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Link=({className,title})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className,"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M574 665.4a8.03 8.03 0 0 0-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 0 0-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 0 0 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 0 0 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 0 0-11.3 0L372.3 598.7a8.03 8.03 0 0 0 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"})});Link.displayName="Link";const __WEBPACK_DEFAULT_EXPORT__=Link;try{Link.displayName="Link",Link.__docgenInfo={description:"",displayName:"Link",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Link.tsx#Link"]={docgenInfo:Link.__docgenInfo,name:"Link",path:"src/components/icons/Link.tsx#Link"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Sound.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Sound=({className,title})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className,"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"})});Sound.displayName="Sound";const __WEBPACK_DEFAULT_EXPORT__=Sound;try{Sound.displayName="Sound",Sound.__docgenInfo={description:"",displayName:"Sound",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Sound.tsx#Sound"]={docgenInfo:Sound.__docgenInfo,name:"Sound",path:"src/components/icons/Sound.tsx#Sound"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Card.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_Spin__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/Spin.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Card=({loading=!1,className,title,description,cover,hoverable=!1,children,onClick})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{onClick,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("memori-card",className,{"memori-card--loading":loading,"memori-card--with-cover":cover,"memori-card--hoverable":hoverable,"memori-card--pointer":!!onClick}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(_Spin__WEBPACK_IMPORTED_MODULE_2__.A,{spinning:loading,children:[cover&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"memori-card--cover",children:cover}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"memori-card--content",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("h3",{className:"memori-card--title",children:title}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("p",{className:"memori-card--description",children:description}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"memori-card--children",children})]})]})});Card.displayName="Card";const __WEBPACK_DEFAULT_EXPORT__=Card;try{Card.displayName="Card",Card.__docgenInfo={description:"",displayName:"Card",props:{loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},cover:{defaultValue:null,description:"",name:"cover",required:!1,type:{name:"Element | ReactNode"}},hoverable:{defaultValue:{value:"false"},description:"",name:"hoverable",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Card.tsx#Card"]={docgenInfo:Card.__docgenInfo,name:"Card",path:"src/components/ui/Card.tsx#Card"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@headlessui/react/dist/components/dialog/dialog.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),_Spin__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Spin.tsx"),_Button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/Button.tsx"),_icons_Close__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/icons/Close.tsx"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),classnames__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Modal=({open=!1,onClose,className,title,description,children,footer,loading=!1,closable=!0,width="100%",widthMd="100%"})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.B)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e,{appear:!0,show:open,as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l,{open,onClose,className:classnames__WEBPACK_IMPORTED_MODULE_7___default()("memori-modal",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e.Child,{as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori-modal--backdrop"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori-modal--container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori-modal--container-scrollable",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e.Child,{as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Panel,{className:"memori-modal--panel",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("style",{dangerouslySetInnerHTML:{__html:`\n                    .memori-modal--panel {\n                      --memori-modal--width: ${width};\n                      --memori-modal--width-md: ${widthMd};\n                    }\n                  `}}),closable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori-modal--close",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_4__.A,{ghost:!0,padded:!0,shape:"circle",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_icons_Close__WEBPACK_IMPORTED_MODULE_5__.default,{}),title:t("close")||"Close",onClick:()=>onClose(!1)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_Spin__WEBPACK_IMPORTED_MODULE_3__.A,{spinning:loading,children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Title,{className:"memori-modal--title",children:title}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Description,{className:"memori-modal--description",children:description}),children,footer&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori-modal--footer",children:footer})]})]})})})})]})})};Modal.displayName="Modal";const __WEBPACK_DEFAULT_EXPORT__=Modal;try{Modal.displayName="Modal",Modal.__docgenInfo={description:"",displayName:"Modal",props:{open:{defaultValue:{value:"false"},description:"",name:"open",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(value: boolean) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"Element | ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"Element | ReactNode"}},footer:{defaultValue:null,description:"",name:"footer",required:!1,type:{name:"Element | ReactNode"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},closable:{defaultValue:{value:"true"},description:"",name:"closable",required:!1,type:{name:"boolean"}},width:{defaultValue:{value:"100%"},description:"",name:"width",required:!1,type:{name:"string"}},widthMd:{defaultValue:{value:"100%"},description:"",name:"widthMd",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Modal.tsx#Modal"]={docgenInfo:Modal.__docgenInfo,name:"Modal",path:"src/components/ui/Modal.tsx#Modal"})}catch(__react_docgen_typescript_loader_error){}},"./src/helpers/media.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>getResourceUrl});const getResourceUrl=({type,resourceURI,sessionID,baseURL="",apiURL=""})=>{let defaultUri="cover"===type?`${baseURL}/images/memoriCover.png`:`${baseURL}/images/memoriAvatar.png?v=20231208`;try{return resourceURI&&0!==resourceURI.length?resourceURI.includes("memoriai/memory")&&!resourceURI.includes("memori-ai-session-id")&&sessionID?`${resourceURI}?memori-ai-session-id=${sessionID}`:(resourceURI.startsWith("https://")||resourceURI.startsWith("http://"))&&(new URL(resourceURI).hostname.includes("memori.ai")||new URL(resourceURI).hostname.includes("aclambda.online")||new URL(resourceURI).hostname.includes("localhost"))?`${resourceURI}${resourceURI.endsWith("/")||!sessionID?"":"/"}${sessionID||""}`:resourceURI.startsWith("cloud://")?`${apiURL?.replace(/v2/,"v1")||""}/CloudAsset/${resourceURI.replace("cloud://","")}`:resourceURI.startsWith("guid://")?`${apiURL?.replace(/v2/,"v1")||""}/GuidAsset/${resourceURI.replace("guid://","")}`:resourceURI||defaultUri:defaultUri}catch(e){return resourceURI||defaultUri}}},"./src/helpers/translations.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>getTranslation});const dialogKeywords=["va bene","no grazie","si","no","sì","arrivederci","non c'entrava","non mi è piaciuto"],getTranslation=async(text,to,from,_baseUrl)=>{let textToTranslate=(text=>text.replaceAll(/<output.*?>(.*?)<\/output>/g,""))((text=>text.replaceAll(/<think.*?>(.*?)<\/think>/gs,""))(text));text.match(/<think.*?>(.*?)<\/think>/gs),dialogKeywords.indexOf(text.toLowerCase())>-1||from?.toUpperCase(),to.toUpperCase();return Promise.resolve({text:textToTranslate})}}}]);