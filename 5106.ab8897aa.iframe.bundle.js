"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[5106],{"./src/components/FilePreview/FilePreview.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_icons_Document__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/icons/Document.tsx"),_icons_Close__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/icons/Close.tsx"),_ui_Button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Button.tsx"),_ui_Modal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/Modal.tsx"),_helpers_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/helpers/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const FilePreview=({previewFiles,removeFile,allowRemove=!0})=>{const[selectedFile,setSelectedFile]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[hoveredId,setHoveredId]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),getFileType=(filename,type)=>{if("image"===type){const extension=filename.split(".").pop()?.toLowerCase();switch(extension){case"jpg":case"jpeg":return"JPEG";case"png":return"PNG";default:return"Image"}}const extension=filename.split(".").pop()?.toLowerCase();switch(extension){case"pdf":return"PDF";case"txt":return"Text";case"json":return"JSON";case"xlsx":return"Excel";case"csv":return"CSV";case"jpg":case"jpeg":return"JPEG";case"png":return"PNG";default:return"Document"}};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const chat=document.getElementsByClassName("memori-chat--content");if(chat){chat[chat.length-1]&&chat[0].scrollTo({top:chat[0].scrollHeight,behavior:"smooth"})}},[previewFiles]);const isImageContent=(content,type)=>{if("image"===type)return!0;const hasImageExtension=/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(content);return content.startsWith("http")&&(content.includes("/image/")||content.includes("/img/")||hasImageExtension)||hasImageExtension};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[previewFiles.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori--preview-container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori--preview-list",children:previewFiles.map(file=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"memori--preview-item "+(isImageContent(file.content,file.type)?"memori--preview-item--image":"memori--preview-item--document"),onMouseEnter:()=>setHoveredId(file.id),onMouseLeave:()=>setHoveredId(null),onClick:()=>setSelectedFile(file),children:[isImageContent(file.content,file.type)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori--preview-thumbnail",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("img",{src:file.content,alt:file.name})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_icons_Document__WEBPACK_IMPORTED_MODULE_1__.DocumentIcon,{className:"memori--preview-icon"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"memori--preview-file-info",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{className:"memori--preview-filename",children:file.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("span",{className:"memori--preview-filetype",children:getFileType(file.name,file.type)})]}),allowRemove&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_3__.A,{shape:"rounded",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_icons_Close__WEBPACK_IMPORTED_MODULE_2__.default,{}),danger:!0,className:"memori--remove-button "+(hoveredId===file.id?"visible":""),onClick:e=>{e.stopPropagation(),removeFile(file.id,file?.mediumID)}})]},file.id))})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Modal__WEBPACK_IMPORTED_MODULE_4__.A,{width:"80%",widthMd:"80%",open:!!selectedFile,className:"memori--modal-preview-file",onClose:()=>setSelectedFile(null),closable:!0,title:selectedFile?.name,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori--preview-content",style:{maxHeight:"70vh",overflowY:"auto",textAlign:"center",whiteSpace:selectedFile&&!isImageContent(selectedFile.content,selectedFile.type)?"pre-wrap":"normal"},children:selectedFile&&isImageContent(selectedFile.content,selectedFile.type)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("img",{src:selectedFile.content,alt:selectedFile.name,style:{maxWidth:"100%",maxHeight:"60vh"}})}):(0,_helpers_utils__WEBPACK_IMPORTED_MODULE_5__._e)(selectedFile?.content||"")})})]})},__WEBPACK_DEFAULT_EXPORT__=FilePreview;try{FilePreview.displayName="FilePreview",FilePreview.__docgenInfo={description:"",displayName:"FilePreview",props:{previewFiles:{defaultValue:null,description:"",name:"previewFiles",required:!0,type:{name:"any"}},removeFile:{defaultValue:null,description:"",name:"removeFile",required:!0,type:{name:"(id: string, mediumID: string | undefined) => void"}},allowRemove:{defaultValue:{value:"true"},description:"",name:"allowRemove",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FilePreview/FilePreview.tsx#FilePreview"]={docgenInfo:FilePreview.__docgenInfo,name:"FilePreview",path:"src/components/FilePreview/FilePreview.tsx#FilePreview"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/UploadButton/UploadButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>UploadButton_UploadButton});var react=__webpack_require__("./node_modules/react/index.js"),Upload=__webpack_require__("./src/components/icons/Upload.tsx"),Spin=__webpack_require__("./src/components/ui/Spin.tsx"),Alert=__webpack_require__("./src/components/ui/Alert.tsx"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Document=__webpack_require__("./src/components/icons/Document.tsx"),Modal=__webpack_require__("./src/components/ui/Modal.tsx"),constants=__webpack_require__("./src/helpers/constants.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const UploadDocuments=({setDocumentPreviewFiles,maxDocuments,documentPreviewFiles,onLoadingChange,onDocumentError,onValidateFile,onValidatePayloadSize})=>{const[isLoading,setIsLoading]=(0,react.useState)(!1),[selectedFile,setSelectedFile]=(0,react.useState)(null),documentInputRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{onLoadingChange&&onLoadingChange(isLoading)},[isLoading,onLoadingChange]);const validateDocumentFile=file=>!onValidateFile||onValidateFile(file),processDocumentFile=async file=>{const fileExt=file.name.split(".").pop()?.toLowerCase()||"";try{let text=null;return"pdf"===fileExt?text=await(async file=>{try{window.pdfjsLib||await new Promise((resolve,reject)=>{const script=document.createElement("script");script.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",script.onload=()=>{window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",resolve(!0)},script.onerror=reject,document.head.appendChild(script)});const arrayBuffer=await file.arrayBuffer(),pdf=await window.pdfjsLib.getDocument({data:arrayBuffer}).promise;let text="";for(let i=1;i<=pdf.numPages;i++){const page=await pdf.getPage(i);text+=(await page.getTextContent()).items.filter(item=>item.str&&"string"==typeof item.str).map(item=>item.str).join(" ")+"\n"}return text}catch(error){throw console.error("PDF extraction failed:",error),new Error(`PDF extraction failed: ${error instanceof Error?error.message:"Unknown error"}`)}})(file):["txt","md","json","csv","html"].includes(fileExt)?text=await file.text():"xlsx"===fileExt&&(text=await(async file=>{try{window.XLSX||await new Promise((resolve,reject)=>{const script=document.createElement("script");script.src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js",script.onload=resolve,script.onerror=reject,document.head.appendChild(script)});const arrayBuffer=await file.arrayBuffer(),workbook=window.XLSX.read(arrayBuffer,{type:"array",cellFormula:!0,cellNF:!0,cellText:!0,cellDates:!0});let text="";for(const sheetName of workbook.SheetNames){const worksheet=workbook.Sheets[sheetName],data=window.XLSX.utils.sheet_to_json(worksheet,{header:1,raw:!1}),colWidths=data.reduce((widths,row)=>(row.forEach((cell,i)=>{const cellWidth=(cell||"").toString().length;widths[i]=Math.max(widths[i]||0,cellWidth)}),widths),[]),formattedText=data.map(row=>row.map((cell,i)=>(cell||"").toString().padEnd(colWidths[i]+2)).join("|").trim());if(formattedText.length>0){const separator=colWidths.map(w=>"-".repeat(w+2)).join("+");formattedText.splice(1,0,separator)}text+=`Sheet: ${sheetName}\n${formattedText.join("\n")}\n\n`}return text}catch(error){throw console.error("XLSX extraction failed:",error),new Error(`XLSX extraction failed: ${error instanceof Error?error.message:"Unknown error"}`)}})(file)),text&&text.length>constants.MAX_DOCUMENT_CONTENT_LENGTH&&(console.warn("Document content exceeds length limit:",text.length,">",constants.MAX_DOCUMENT_CONTENT_LENGTH),onDocumentError?.({message:`File "${file.name}" content exceeds ${constants.MAX_DOCUMENT_CONTENT_LENGTH} characters and was truncated`,severity:"warning"}),text=text.substring(0,constants.MAX_DOCUMENT_CONTENT_LENGTH)+"\n\n[Content truncated due to size limits]"),text}catch(error){throw console.error("Document processing failed:",error),new Error(`Failed to process "${file.name}": ${error instanceof Error?error.message:"Unknown error"}`)}};return(0,jsx_runtime.jsxs)("div",{className:"memori--document-upload-wrapper",children:[(0,jsx_runtime.jsx)("input",{ref:documentInputRef,type:"file",accept:".pdf,.txt,.md,.json,.xlsx,.csv,.html",multiple:!0,className:"memori--upload-file-input",onChange:async e=>{const files=Array.from(e.target.files||[]);if(0===files.length)return;const currentMediaCount=documentPreviewFiles.length;if(maxDocuments&&currentMediaCount+files.length>maxDocuments)return onDocumentError?.({message:`Maximum ${maxDocuments} media files allowed. You can upload ${Math.max(0,maxDocuments-currentMediaCount)} more file${maxDocuments-currentMediaCount!==1?"s":""}.`,severity:"error"}),void(documentInputRef.current&&(documentInputRef.current.value=""));setIsLoading(!0);const processedFiles=[];for(const file of files){if(!validateDocumentFile(file))continue;const fileId=Math.random().toString(36).substr(2,9);try{const text=await processDocumentFile(file);text&&processedFiles.push({name:file.name,id:fileId,content:text,mimeType:file.type})}catch(error){console.error("File processing error:",error),onDocumentError?.({message:`${error instanceof Error?error.message:"Unknown error"}`,severity:"error"})}}if(processedFiles.length>0){if(newDocuments=processedFiles,onValidatePayloadSize&&!onValidatePayloadSize(newDocuments))return setIsLoading(!1),void(documentInputRef.current&&(documentInputRef.current.value=""));const existingDocuments=documentPreviewFiles.filter(file=>"document"===file.type);documentPreviewFiles.filter(file=>"image"===file.type);setDocumentPreviewFiles([...existingDocuments,...processedFiles.map(file=>({...file,type:"document"}))])}var newDocuments;setIsLoading(!1),documentInputRef.current&&(documentInputRef.current.value="")}}),(0,jsx_runtime.jsx)("button",{className:classnames_default()("memori-button","memori-button--circle","memori-button--icon-only","memori-share-button--button","memori--conversation-button","memori--document-upload-button",{"memori--error":!1}),onClick:()=>documentInputRef.current?.click(),disabled:isLoading||maxDocuments&&documentPreviewFiles.length>=maxDocuments||!1,title:"Upload documents",children:isLoading?(0,jsx_runtime.jsx)(Spin.A,{spinning:!0,className:"memori--upload-icon"}):(0,jsx_runtime.jsx)(react.Fragment,{children:(0,jsx_runtime.jsx)(Document.DocumentIcon,{className:"memori--upload-icon"})})}),(0,jsx_runtime.jsx)(Modal.A,{width:"80%",widthMd:"80%",open:!!selectedFile,className:"memori--modal-preview-file",onClose:()=>setSelectedFile(null),closable:!0,title:selectedFile?.name,children:(0,jsx_runtime.jsx)("div",{className:"memori--preview-content",style:{maxHeight:"70vh",overflowY:"auto",textAlign:"center",whiteSpace:"pre-wrap"},children:selectedFile?.content})})]})};UploadDocuments.displayName="UploadDocuments";const UploadDocuments_UploadDocuments=UploadDocuments;try{UploadDocuments.displayName="UploadDocuments",UploadDocuments.__docgenInfo={description:"",displayName:"UploadDocuments",props:{setDocumentPreviewFiles:{defaultValue:null,description:"",name:"setDocumentPreviewFiles",required:!0,type:{name:"(files: { name: string; id: string; content: string; mimeType: string; }[]) => void"}},maxDocuments:{defaultValue:null,description:"",name:"maxDocuments",required:!1,type:{name:"number"}},documentPreviewFiles:{defaultValue:null,description:"",name:"documentPreviewFiles",required:!0,type:{name:"any"}},onLoadingChange:{defaultValue:null,description:"",name:"onLoadingChange",required:!1,type:{name:"((loading: boolean) => void)"}},onDocumentError:{defaultValue:null,description:"",name:"onDocumentError",required:!1,type:{name:'((error: { message: string; severity: "warning" | "error" | "info"; }) => void)'}},onValidateFile:{defaultValue:null,description:"",name:"onValidateFile",required:!1,type:{name:"((file: File) => boolean)"}},onValidatePayloadSize:{defaultValue:null,description:"",name:"onValidatePayloadSize",required:!1,type:{name:"((newDocuments: { name: string; id: string; content: string; mimeType: string; }[]) => boolean)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/UploadButton/UploadDocuments/UploadDocuments.tsx#UploadDocuments"]={docgenInfo:UploadDocuments.__docgenInfo,name:"UploadDocuments",path:"src/components/UploadButton/UploadDocuments/UploadDocuments.tsx#UploadDocuments"})}catch(__react_docgen_typescript_loader_error){}var icons_Image=__webpack_require__("./src/components/icons/Image.tsx"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),Button=__webpack_require__("./src/components/ui/Button.tsx");const DEFAULT_OPTIONS={maxWidth:1920,maxHeight:1920,quality:.85,maxSizeMB:2},loadImage=file=>new Promise((resolve,reject)=>{const img=new Image,url=URL.createObjectURL(file);img.onload=()=>{URL.revokeObjectURL(url),resolve(img)},img.onerror=()=>{URL.revokeObjectURL(url),reject(new Error("Failed to load image"))},img.src=url}),compressImage=async(file,options={})=>{const opts={...DEFAULT_OPTIONS,...options};if(!(file.size/1048576>1))try{const img=await loadImage(file);if(!(img.width>opts.maxWidth||img.height>opts.maxHeight))return file}catch(error){return file}try{const img=await loadImage(file),orientation=1,{width,height}=((width,height,maxWidth,maxHeight)=>{if(width<=maxWidth&&height<=maxHeight)return{width,height};const scaleWidth=maxWidth/width,scaleHeight=maxHeight/height,scale=Math.min(scaleWidth,scaleHeight,1);return{width:Math.round(width*scale),height:Math.round(height*scale)}})(img.width,img.height,opts.maxWidth,opts.maxHeight),canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;const ctx=canvas.getContext("2d");if(!ctx)throw new Error("Failed to get canvas context");return((ctx,orientation,width,height)=>{switch(orientation){case 2:ctx.transform(-1,0,0,1,width,0);break;case 3:ctx.transform(-1,0,0,-1,width,height);break;case 4:ctx.transform(1,0,0,-1,0,height);break;case 5:ctx.transform(0,1,1,0,0,0);break;case 6:ctx.transform(0,1,-1,0,height,0);break;case 7:ctx.transform(0,-1,-1,0,height,width);break;case 8:ctx.transform(0,-1,1,0,0,width)}})(ctx,orientation,width,height),ctx.drawImage(img,0,0,width,height),new Promise((resolve,reject)=>{canvas.toBlob(blob=>{if(!blob)return void reject(new Error("Failed to compress image"));if(blob.size/1048576>opts.maxSizeMB)canvas.toBlob(lowerQualityBlob=>{if(!lowerQualityBlob){const compressedFile=new File([blob],file.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg"});return void resolve(compressedFile)}const compressedFile=new File([lowerQualityBlob],file.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg"});resolve(compressedFile)},"image/jpeg",Math.max(.5,opts.quality-.2));else{const compressedFile=new File([blob],file.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg"});resolve(compressedFile)}},"image/jpeg",opts.quality)})}catch(error){return file}},UploadImages=({authToken="",sessionID="",client,isMediaAccepted=!1,setDocumentPreviewFiles,documentPreviewFiles,onLoadingChange,maxImages=5,memoriID="",onImageError,onValidateImageFile})=>{const{t,i18n}=(0,useTranslation.B)(),{backend,dialog}=client||{backend:{uploadAsset:null,uploadAssetUnlogged:null},dialog:{postMediumSelectedEvent:null,postMediumDeselectedEvent:null}},[isLoading,setIsLoading]=(0,react.useState)(!1),[selectedFile,setSelectedFile]=(0,react.useState)(null),[filePreview,setFilePreview]=(0,react.useState)(null),[imageTitle,setImageTitle]=(0,react.useState)(""),[showUploadModal,setShowUploadModal]=(0,react.useState)(!1),imageInputRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{onLoadingChange&&onLoadingChange(isLoading)},[isLoading,onLoadingChange]);const currentMediaCount=documentPreviewFiles.length,uploadMultipleImages=async files=>{setIsLoading(!0);try{const uploadPromises=files.map(async file=>{let fileToUpload=file;try{fileToUpload=await compressImage(file)}catch(error){console.warn("Image compression failed, using original file",error),fileToUpload=file}return new Promise(resolve=>{const reader=new FileReader;reader.onload=async e=>{const fileDataUrl=e.target?.result,fileId=Math.random().toString(36).substr(2,9),fileName=fileToUpload.name.split(".").slice(0,-1).join(".");if(client)try{let asset,response;if(authToken&&backend?.uploadAsset)response=await backend.uploadAsset(fileToUpload.name,fileDataUrl,authToken);else{if(!(memoriID&&sessionID&&backend?.uploadAssetUnlogged))throw new Error("Missing required parameters for upload");if(response=await backend.uploadAssetUnlogged(fileToUpload.name,fileDataUrl,memoriID,sessionID),!response)throw new Error("Upload failed")}if(asset=response.asset,0!==response.resultCode)throw new Error(response.resultMessage||"Upload failed");let finalMediumID,medium=null;if(dialog?.postMediumSelectedEvent&&sessionID&&(medium=await dialog.postMediumSelectedEvent(sessionID,{url:asset.assetURL,mimeType:asset.mimeType})),medium?.currentState?.currentMedia){const existingMediumIDs=new Set(documentPreviewFiles.map(file=>file.mediumID));finalMediumID=medium.currentState.currentMedia.find(media=>!existingMediumIDs.has(media.mediumID))?.mediumID}resolve({name:fileName,id:fileId,url:asset.assetURL,content:asset.assetURL,type:"image",mediumID:finalMediumID,mimeType:asset.mimeType})}catch(error){onImageError?.({message:t("upload.uploadFailed")??"Upload failed",severity:"error"}),resolve(null)}else onImageError?.({message:t("upload.apiClientNotConfigured")??"API client not configured properly for media upload",severity:"warning"}),resolve(null)},reader.onerror=()=>{onImageError?.({message:t("upload.fileReadingFailed")??"File reading failed",severity:"error"}),resolve(null)},reader.readAsDataURL(fileToUpload)})}),successfulUploads=(await Promise.all(uploadPromises)).filter(result=>null!==result);successfulUploads.length>0&&setDocumentPreviewFiles(prevFiles=>[...prevFiles,...successfulUploads])}catch(error){onImageError?.({message:t("upload.uploadFailed")??"Upload failed",severity:"error"})}finally{setIsLoading(!1)}},handleCancelUpload=()=>{setShowUploadModal(!1),setSelectedFile(null),setFilePreview(null),setImageTitle("")};return(0,jsx_runtime.jsxs)("div",{className:"memori--image-upload-wrapper",children:[(0,jsx_runtime.jsx)("input",{ref:imageInputRef,type:"file",accept:".jpg,.jpeg,.png",multiple:!0,className:"memori--upload-file-input",onChange:async e=>{const files=Array.from(e.target.files||[]);if(0===files.length)return;if(currentMediaCount+files.length>maxImages)return void onImageError?.({message:`Maximum ${maxImages} media files allowed. You can upload ${Math.max(0,maxImages-currentMediaCount)} more file${maxImages-currentMediaCount!==1?"s":""}.`,severity:"error"});const validFiles=files.filter(file=>!!(file=>!onValidateImageFile||onValidateImageFile(file))(file));if(0!==validFiles.length){if(1===validFiles.length){const file=validFiles[0];setSelectedFile(file),setFilePreview(URL.createObjectURL(file));const fileName=file.name.split(".").slice(0,-1).join(".");setImageTitle(fileName),setShowUploadModal(!0)}else await uploadMultipleImages(validFiles);imageInputRef.current&&(imageInputRef.current.value="")}else imageInputRef.current&&(imageInputRef.current.value="")},disabled:isLoading||!isMediaAccepted||currentMediaCount>=maxImages}),(0,jsx_runtime.jsx)("button",{className:classnames_default()("memori-button","memori-button--circle","memori-button--icon-only","memori-share-button--button","memori--conversation-button","memori--image-upload-button"),onClick:()=>imageInputRef.current?.click(),disabled:isLoading||!isMediaAccepted||currentMediaCount>=maxImages,children:isLoading?(0,jsx_runtime.jsx)(Spin.A,{spinning:!0,className:"memori--upload-icon"}):(0,jsx_runtime.jsx)(icons_Image.ImageIcon,{className:"memori--upload-icon"})}),(0,jsx_runtime.jsx)(Modal.A,{width:"80%",widthMd:"80%",open:showUploadModal&&!!selectedFile,className:"memori--modal-preview-file",onClose:handleCancelUpload,closable:!0,children:(0,jsx_runtime.jsxs)("div",{className:"memori--preview-content",style:{maxHeight:"70vh",overflowY:"auto",textAlign:"center"},children:[filePreview&&(0,jsx_runtime.jsx)("img",{src:filePreview,alt:selectedFile?.name||"Preview",style:{maxWidth:"100%",maxHeight:"40vh",marginBottom:"20px"}}),(0,jsx_runtime.jsxs)("div",{style:{maxWidth:"400px",margin:"0 auto",textAlign:"left"},children:[(0,jsx_runtime.jsx)("p",{style:{marginBottom:"10px",color:"#666"},children:t("upload.titleHelp")}),(0,jsx_runtime.jsx)("input",{value:imageTitle,onChange:e=>setImageTitle(e.target.value),placeholder:t("upload.titlePlaceholder")??"Enter image title",style:{width:"90%",marginBottom:"20px"},className:"memori--upload-title-input"}),(0,jsx_runtime.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"center",alignItems:"center"},children:[(0,jsx_runtime.jsx)(Button.A,{onClick:handleCancelUpload,className:"memori-button memori-button--outline memori--upload-image",children:t("cancel")??"Cancel"}),(0,jsx_runtime.jsx)(Button.A,{onClick:async()=>{if(selectedFile&&imageTitle.trim()){setIsLoading(!0),setShowUploadModal(!1);try{let fileToUpload=selectedFile;try{fileToUpload=await compressImage(selectedFile)}catch(error){console.warn("Image compression failed, using original file",error),fileToUpload=selectedFile}const reader=new FileReader;reader.onload=async e=>{const fileDataUrl=e.target?.result,fileId=Math.random().toString(36).substr(2,9);if(client)try{let asset,response;if(authToken&&backend?.uploadAsset)response=await backend.uploadAsset(fileToUpload.name,fileDataUrl,authToken);else{if(!(memoriID&&sessionID&&backend?.uploadAssetUnlogged))throw new Error("Missing required parameters for upload");if(response=await backend.uploadAssetUnlogged(fileToUpload.name,fileDataUrl,memoriID,sessionID),!response)throw new Error("Upload failed")}if(asset=response.asset,0!==response.resultCode)throw new Error(response.resultMessage||"Upload failed");let finalMediumID,medium=null;if(dialog?.postMediumSelectedEvent&&sessionID&&(medium=await dialog.postMediumSelectedEvent(sessionID,{url:asset.assetURL,mimeType:asset.mimeType})),medium?.currentState?.currentMedia){const existingMediumIDs=new Set(documentPreviewFiles.map(file=>file.mediumID));finalMediumID=medium.currentState.currentMedia.find(media=>!existingMediumIDs.has(media.mediumID))?.mediumID}setDocumentPreviewFiles(prevFiles=>[...prevFiles,{name:imageTitle,id:fileId,url:asset.assetURL,content:asset.assetURL,type:"image",mediumID:finalMediumID,mimeType:asset.mimeType}])}catch(error){onImageError?.({message:t("upload.uploadFailed")??"Upload failed",severity:"error"})}else onImageError?.({message:t("upload.apiClientNotConfigured")??"API client not configured properly for media upload",severity:"warning"});setIsLoading(!1)},reader.onerror=()=>{onImageError?.({message:t("upload.fileReadingFailed")??"File reading failed",severity:"error"}),setIsLoading(!1)},reader.readAsDataURL(fileToUpload)}catch(error){onImageError?.({message:t("upload.uploadFailed")??"Upload failed",severity:"error"}),setIsLoading(!1)}}},disabled:!selectedFile||!imageTitle.trim(),className:"memori-button memori-button--primary memori-button--image-confirm memori--upload-image",children:t("confirm")??"Confirm"})]})]})]})})]})};UploadImages.displayName="UploadImages";const UploadImages_UploadImages=UploadImages;try{UploadImages.displayName="UploadImages",UploadImages.__docgenInfo={description:"",displayName:"UploadImages",props:{authToken:{defaultValue:{value:""},description:"",name:"authToken",required:!1,type:{name:"string"}},client:{defaultValue:null,description:"",name:"client",required:!1,type:{name:'{ constants: { BACKEND_URL: string; ENGINE_URL: string; allowedMediaTypes: string[]; anonTag: "ðŸ‘¤"; }; asset: { getResourceUrl: ({ type, resourceURI, sessionID, baseURL, }: ResourceURLParams) => string; }; getAllFunctions: (sessionId: string) => Promise<...>; ... 137 more ...; backend: { ...; }; }'}},sessionID:{defaultValue:{value:""},description:"",name:"sessionID",required:!1,type:{name:"string"}},isMediaAccepted:{defaultValue:{value:"false"},description:"",name:"isMediaAccepted",required:!1,type:{name:"boolean"}},setDocumentPreviewFiles:{defaultValue:null,description:"",name:"setDocumentPreviewFiles",required:!0,type:{name:"any"}},documentPreviewFiles:{defaultValue:null,description:"",name:"documentPreviewFiles",required:!0,type:{name:"any"}},onLoadingChange:{defaultValue:null,description:"",name:"onLoadingChange",required:!1,type:{name:"((loading: boolean) => void)"}},maxImages:{defaultValue:{value:"5"},description:"",name:"maxImages",required:!1,type:{name:"number"}},memoriID:{defaultValue:{value:""},description:"",name:"memoriID",required:!1,type:{name:"string"}},onImageError:{defaultValue:null,description:"",name:"onImageError",required:!1,type:{name:'((error: { message: string; severity: "warning" | "error" | "info"; }) => void)'}},onValidateImageFile:{defaultValue:null,description:"",name:"onValidateImageFile",required:!1,type:{name:"((file: File) => boolean)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/UploadButton/UploadImages/UploadImages.tsx#UploadImages"]={docgenInfo:UploadImages.__docgenInfo,name:"UploadImages",path:"src/components/UploadButton/UploadImages/UploadImages.tsx#UploadImages"})}catch(__react_docgen_typescript_loader_error){}const UploadButton=({authToken="",client,sessionID="",isMediaAccepted=!1,setDocumentPreviewFiles,documentPreviewFiles,memoriID=""})=>{const[isLoading,setIsLoading]=(0,react.useState)(!1),[errors,setErrors]=(0,react.useState)([]),[isDragging,setIsDragging]=(0,react.useState)(!1),{t,i18n}=(0,useTranslation.B)(),buttonRef=(0,react.useRef)(null),documentRef=(0,react.useRef)(null),imageRef=(0,react.useRef)(null),unifiedInputRef=(0,react.useRef)(null),wrapperRef=(0,react.useRef)(null),currentMediaCount=documentPreviewFiles.length,hasReachedMediaLimit=10-currentMediaCount<=0,removeError=errorMessage=>{setErrors(prev=>prev.filter(e=>e.message!==errorMessage))},addError=error=>{setErrors(prev=>[...prev,error]),setTimeout(()=>removeError(error.message),5e3)},isMediaAcceptedRef=(0,react.useRef)(isMediaAccepted),currentMediaCountRef=(0,react.useRef)(currentMediaCount),addErrorRef=(0,react.useRef)(addError);(0,react.useEffect)(()=>{isMediaAcceptedRef.current=isMediaAccepted,currentMediaCountRef.current=currentMediaCount,addErrorRef.current=addError},[isMediaAccepted,currentMediaCount,addError]);const handleUnifiedFileSelection=(0,react.useCallback)(files=>{const fileArray=Array.from(files);if(0===fileArray.length)return;const imageFiles=[],documentFiles=[];fileArray.forEach(file=>{(file=>{const fileExt=`.${file.name.split(".").pop()?.toLowerCase()}`;return["image/jpeg","image/jpg","image/png"].includes(file.type)||[".jpg",".jpeg",".png"].includes(fileExt)})(file)?imageFiles.push(file):(file=>{const fileExt=`.${file.name.split(".").pop()?.toLowerCase()}`;return[".pdf",".txt",".json",".xlsx",".csv",".md",".html"].includes(fileExt)})(file)?documentFiles.push(file):addErrorRef.current({message:`File "${file.name}" is not a supported image or document type`,severity:"error"})});const totalFilesToAdd=imageFiles.length+documentFiles.length;if(currentMediaCountRef.current+totalFilesToAdd>10)addErrorRef.current({message:"Maximum 10 media files allowed.",severity:"error"});else{if(imageFiles.length>0)if(isMediaAcceptedRef.current){const imageInput=imageRef.current?.querySelector('input[type="file"]');if(imageInput){const dataTransfer=new DataTransfer;if(imageFiles.forEach(file=>{try{dataTransfer.items.add(file)}catch(err){console.warn("Failed to add image file to DataTransfer:",err)}}),dataTransfer.files.length>0){imageInput.files=dataTransfer.files;const changeEvent=new Event("change",{bubbles:!0});imageInput.dispatchEvent(changeEvent)}}}else addErrorRef.current({message:t("upload.mediaNotAccepted")??"Media uploads are not accepted",severity:"info"});if(documentFiles.length>0){const documentInput=documentRef.current?.querySelector('input[type="file"]');if(documentInput){const dataTransfer=new DataTransfer;if(documentFiles.forEach(file=>{try{dataTransfer.items.add(file)}catch(err){console.warn("Failed to add document file to DataTransfer:",err)}}),dataTransfer.files.length>0){documentInput.files=dataTransfer.files;const changeEvent=new Event("change",{bubbles:!0});documentInput.dispatchEvent(changeEvent)}}}}},[t]);(0,react.useEffect)(()=>{const handlePaste=e=>{const clipboardData=e.clipboardData;if(!clipboardData)return void console.log("[UploadButton] handlePaste: No clipboardData available.");const files=[],isDuplicate=file=>files.some(f=>f.name===file.name&&f.size===file.size&&f.lastModified===file.lastModified);if(clipboardData.files&&clipboardData.files.length>0){const clipboardFiles=Array.from(clipboardData.files);console.log("[UploadButton] handlePaste: clipboardData.files found",clipboardFiles),clipboardFiles.forEach(file=>{isDuplicate(file)?console.log("[UploadButton] handlePaste: Duplicate file skipped from clipboardData.files:",file):files.push(file)})}const items=clipboardData.items;if(items)for(let i=0;i<items.length;i++){const item=items[i];if("file"===item.kind){const file=item.getAsFile();file&&!isDuplicate(file)?(console.log("[UploadButton] handlePaste: Adding file from items array:",file),files.push(file)):file&&console.log("[UploadButton] handlePaste: Duplicate file skipped from items array:",file)}}files.length>0?(console.log(`[UploadButton] handlePaste: ${files.length} file(s) to process from paste`,files),e.preventDefault(),handleUnifiedFileSelection(files)):console.log("[UploadButton] handlePaste: No files found in paste event.")};return document.addEventListener("paste",handlePaste),()=>{document.removeEventListener("paste",handlePaste)}},[handleUnifiedFileSelection]),(0,react.useEffect)(()=>{let dragCounter=0;const handleDragEnter=e=>{e.preventDefault(),e.stopPropagation(),dragCounter++,1===dragCounter&&setIsDragging(!0)},handleDragLeave=e=>{e.preventDefault(),e.stopPropagation(),dragCounter--,0===dragCounter&&setIsDragging(!1)},handleDragOver=e=>{e.preventDefault(),e.stopPropagation()},handleDrop=e=>{e.preventDefault(),e.stopPropagation(),dragCounter=0,setIsDragging(!1);const files=e.dataTransfer?.files;files&&files.length>0&&handleUnifiedFileSelection(files)};return document.addEventListener("dragenter",handleDragEnter),document.addEventListener("dragleave",handleDragLeave),document.addEventListener("dragover",handleDragOver),document.addEventListener("drop",handleDrop),()=>{document.removeEventListener("dragenter",handleDragEnter),document.removeEventListener("dragleave",handleDragLeave),document.removeEventListener("dragover",handleDragOver),document.removeEventListener("drop",handleDrop)}},[handleUnifiedFileSelection]);const handleLoadingChange=loading=>{setIsLoading(loading)};return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("memori--unified-upload-wrapper",{"memori--dragging":isDragging}),ref:wrapperRef,children:[(0,jsx_runtime.jsx)("input",{ref:unifiedInputRef,type:"file",accept:".jpg,.jpeg,.png,.pdf,.txt,.json,.xlsx,.csv,.md,.html",multiple:!0,className:"memori--upload-file-input",onChange:e=>{const files=e.target.files;files&&files.length>0&&handleUnifiedFileSelection(files),unifiedInputRef.current&&(unifiedInputRef.current.value="")},style:{display:"none"}}),(0,jsx_runtime.jsx)("button",{ref:buttonRef,className:classnames_default()("memori-button","memori-button--circle","memori-button--icon-only","memori-share-button--button","memori--conversation-button","memori--unified-upload-button",{"memori--error":errors.length>0}),onClick:()=>{unifiedInputRef.current&&unifiedInputRef.current.click()},disabled:isLoading||hasReachedMediaLimit,title:t("upload.uploadFiles",{shortcut:/Mac|iPhone|iPod|iPad/i.test(navigator.platform)||navigator.userAgent.includes("Mac")?"Cmd":"Ctrl"})??"Upload files (drag & drop)",children:isLoading?(0,jsx_runtime.jsx)(Spin.A,{spinning:!0,className:"memori--upload-icon"}):(0,jsx_runtime.jsx)(Upload.UploadIcon,{className:"memori--upload-icon"})}),currentMediaCount>0&&(0,jsx_runtime.jsxs)("div",{className:classnames_default()("memori--document-count",{"memori--document-count-full":hasReachedMediaLimit}),children:[currentMediaCount,"/",10]}),(0,jsx_runtime.jsx)("div",{className:"memori--hidden-uploader",ref:documentRef,children:(0,jsx_runtime.jsx)(UploadDocuments_UploadDocuments,{setDocumentPreviewFiles:files=>{if(0===files.length)return;const processedDocuments=files.map(file=>{const formattedContent=`<document_attachment filename="${file.name.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}" type="${file.mimeType}">\n\n${file.content}\n\n</document_attachment>`;return{name:file.name,id:file.id,content:formattedContent,type:"document",mimeType:file.mimeType}}),imageFiles=documentPreviewFiles.filter(file=>"image"===file.type);setDocumentPreviewFiles([...processedDocuments,...imageFiles]),setIsLoading(!1)},maxDocuments:10,documentPreviewFiles,onLoadingChange:handleLoadingChange,onDocumentError:error=>{addError(error)},onValidateFile:file=>{const fileExt=`.${file.name.split(".").pop()?.toLowerCase()}`,ALLOWED_FILE_TYPES=[".pdf",".txt",".json",".xlsx",".csv",".md",".html"];return ALLOWED_FILE_TYPES.includes(fileExt)?!(file.size>10485760)||(addError({message:`File "${file.name}" exceeds 10MB limit`,severity:"error"}),!1):(addError({message:`File type "${fileExt}" is not supported. Please use: ${ALLOWED_FILE_TYPES.join(", ")}`,severity:"error"}),!1)},onValidatePayloadSize:newDocuments=>{const{MAX_TOTAL_MESSAGE_PAYLOAD}=__webpack_require__("./src/helpers/constants.ts");return!([...documentPreviewFiles.filter(file=>"document"===file.type),...newDocuments].reduce((total,doc)=>total+doc.content.length,0)>MAX_TOTAL_MESSAGE_PAYLOAD)||(addError({message:`Total document content exceeds ${MAX_TOTAL_MESSAGE_PAYLOAD} characters limit. Please remove some documents.`,severity:"error"}),!1)}})}),(0,jsx_runtime.jsx)("div",{className:"memori--hidden-uploader",ref:imageRef,children:(0,jsx_runtime.jsx)(UploadImages_UploadImages,{authToken,client,setDocumentPreviewFiles,sessionID,documentPreviewFiles,isMediaAccepted,onLoadingChange:handleLoadingChange,maxImages:10,memoriID,onImageError:error=>{addError(error)},onValidateImageFile:file=>{const fileExt=`.${file.name.split(".").pop()?.toLowerCase()}`,ALLOWED_FILE_TYPES=[".jpg",".jpeg",".png"];return ALLOWED_FILE_TYPES.includes(fileExt)||file.type.startsWith("image/")?!(file.size>10485760)||(addError({message:`File "${file.name}" exceeds 10MB limit`,severity:"error"}),!1):(addError({message:`File type "${fileExt}" is not supported. Please use: ${ALLOWED_FILE_TYPES.join(", ")}`,severity:"error"}),!1)}})}),(0,jsx_runtime.jsx)("div",{className:"memori--error-message-container",children:errors.map((error,index)=>(0,jsx_runtime.jsx)(Alert.A,{className:"memori--error-message-alert",open:!0,type:error.severity,title:"Upload notification",description:error.message,onClose:()=>removeError(error.message),width:"350px"},`${error.message}-${index}`))})]})};UploadButton.displayName="UploadButton";const UploadButton_UploadButton=UploadButton;try{UploadButton.displayName="UploadButton",UploadButton.__docgenInfo={description:"",displayName:"UploadButton",props:{authToken:{defaultValue:{value:""},description:"",name:"authToken",required:!1,type:{name:"string"}},client:{defaultValue:null,description:"",name:"client",required:!1,type:{name:'{ constants: { BACKEND_URL: string; ENGINE_URL: string; allowedMediaTypes: string[]; anonTag: "ðŸ‘¤"; }; asset: { getResourceUrl: ({ type, resourceURI, sessionID, baseURL, }: ResourceURLParams) => string; }; getAllFunctions: (sessionId: string) => Promise<...>; ... 137 more ...; backend: { ...; }; }'}},sessionID:{defaultValue:{value:""},description:"",name:"sessionID",required:!1,type:{name:"string"}},isMediaAccepted:{defaultValue:{value:"false"},description:"",name:"isMediaAccepted",required:!1,type:{name:"boolean"}},setDocumentPreviewFiles:{defaultValue:null,description:"",name:"setDocumentPreviewFiles",required:!0,type:{name:"any"}},documentPreviewFiles:{defaultValue:null,description:"",name:"documentPreviewFiles",required:!0,type:{name:"{ name: string; id: string; content: string; mediumID?: string | undefined; type?: string | undefined; }[]"}},memoriID:{defaultValue:{value:""},description:"",name:"memoriID",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/UploadButton/UploadButton.tsx#UploadButton"]={docgenInfo:UploadButton.__docgenInfo,name:"UploadButton",path:"src/components/UploadButton/UploadButton.tsx#UploadButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Document.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DocumentIcon:()=>DocumentIcon,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const DocumentIcon=({className})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{className,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M14 2.5H6C5.60218 2.5 5.22064 2.65804 4.93934 2.93934C4.65804 3.22064 4.5 3.60218 4.5 4V20C4.5 20.3978 4.65804 20.7794 4.93934 21.0607C5.22064 21.342 5.60218 21.5 6 21.5H18C18.3978 21.5 18.7794 21.342 19.0607 21.0607C19.342 20.7794 19.5 20.3978 19.5 20V8L14 2.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M14 2.5V8H19.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M16 13H8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M16 17H8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M10 9H8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});DocumentIcon.displayName="DocumentIcon";const __WEBPACK_DEFAULT_EXPORT__=DocumentIcon;try{DocumentIcon.displayName="DocumentIcon",DocumentIcon.__docgenInfo={description:"",displayName:"DocumentIcon",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Document.tsx#DocumentIcon"]={docgenInfo:DocumentIcon.__docgenInfo,name:"DocumentIcon",path:"src/components/icons/Document.tsx#DocumentIcon"})}catch(__react_docgen_typescript_loader_error){}try{Document.displayName="Document",Document.__docgenInfo={description:"",displayName:"Document",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Document.tsx#Document"]={docgenInfo:Document.__docgenInfo,name:"Document",path:"src/components/icons/Document.tsx#Document"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Image.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ImageIcon:()=>ImageIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ImageIcon=({className})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{className,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M21 15L16 10L5 21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});ImageIcon.displayName="ImageIcon";try{ImageIcon.displayName="ImageIcon",ImageIcon.__docgenInfo={description:"",displayName:"ImageIcon",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Image.tsx#ImageIcon"]={docgenInfo:ImageIcon.__docgenInfo,name:"ImageIcon",path:"src/components/icons/Image.tsx#ImageIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Upload.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UploadIcon:()=>UploadIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const UploadIcon=({className})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{className,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M17 8L12 3L7 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M12 3V15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});UploadIcon.displayName="UploadIcon";try{UploadIcon.displayName="UploadIcon",UploadIcon.__docgenInfo={description:"",displayName:"UploadIcon",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Upload.tsx#UploadIcon"]={docgenInfo:UploadIcon.__docgenInfo,name:"UploadIcon",path:"src/components/icons/Upload.tsx#UploadIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Alert.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),_icons_Close__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/icons/Close.tsx"),_Button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/Button.tsx"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Alert=({open=!1,onClose,className,title,description,children,type="info",icon,closable=!0,duration=null,action,width="400px"})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.B)();react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{if(duration&&open){const timer=setTimeout(()=>{onClose(!1)},duration);return()=>clearTimeout(timer)}},[duration,open,onClose]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.e,{show:open,as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,appear:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()("memori-alert",(type=>{switch(type){case"success":return"memori-alert--success";case"warning":return"memori-alert--warning";case"error":return"memori-alert--error";default:return"memori-alert--info"}})(type),className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("style",{dangerouslySetInnerHTML:{__html:`\n              .memori-alert {\n                --memori-alert--width: ${width};\n              }\n            `}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.e.Child,{as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"memori-alert--container",children:[icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori-alert--icon",children:icon}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"memori-alert--content",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori-alert--title",children:title}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori-alert--description",children:description}),children]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"memori-alert--actions",children:[action&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori-alert--action",children:action}),closable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_4__.A,{ghost:!0,padded:!0,shape:"circle",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_icons_Close__WEBPACK_IMPORTED_MODULE_3__.default,{}),title:t("close")||"Close",onClick:()=>onClose(!1),className:"memori-alert--close"})]})]})})]})})};Alert.displayName="Alert";const __WEBPACK_DEFAULT_EXPORT__=Alert;try{Alert.displayName="Alert",Alert.__docgenInfo={description:"",displayName:"Alert",props:{open:{defaultValue:{value:"false"},description:"",name:"open",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(value: boolean) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"Element | ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"Element | ReactNode"}},type:{defaultValue:{value:"info"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"success"'},{value:'"warning"'},{value:'"error"'},{value:'"info"'}]}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"Element | ReactNode"}},closable:{defaultValue:{value:"true"},description:"",name:"closable",required:!1,type:{name:"boolean"}},duration:{defaultValue:{value:"null"},description:"",name:"duration",required:!1,type:{name:"number | null"}},action:{defaultValue:null,description:"",name:"action",required:!1,type:{name:"Element | ReactNode"}},width:{defaultValue:{value:"400px"},description:"",name:"width",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Alert.tsx#Alert"]={docgenInfo:Alert.__docgenInfo,name:"Alert",path:"src/components/ui/Alert.tsx#Alert"})}catch(__react_docgen_typescript_loader_error){}}}]);