"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[8550],{"./src/components/Header/Header.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Header_Header});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Button=__webpack_require__("./src/components/ui/Button.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Dropdown=({open=!1,onClose,children,className,trigger,placement="bottom-right"})=>{const dropdownRef=(0,react.useRef)(null),[isOpen,setIsOpen]=(0,react.useState)(open);(0,react.useEffect)(()=>{setIsOpen(open)},[open]),(0,react.useEffect)(()=>{const handleClickOutside=event=>{dropdownRef.current&&!dropdownRef.current.contains(event.target)&&(setIsOpen(!1),onClose?.())};return isOpen&&document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[isOpen,onClose]);return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("memori-dropdown",className),ref:dropdownRef,children:[(0,jsx_runtime.jsx)("div",{className:"memori-dropdown--trigger",onClick:()=>{setIsOpen(!isOpen)},children:trigger}),isOpen&&(0,jsx_runtime.jsx)("div",{className:classnames_default()("memori-dropdown--content",`memori-dropdown--content--${placement}`),children})]})};Dropdown.displayName="Dropdown";const ui_Dropdown=Dropdown;try{Dropdown.displayName="Dropdown",Dropdown.__docgenInfo={description:"",displayName:"Dropdown",props:{open:{defaultValue:{value:"false"},description:"",name:"open",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},trigger:{defaultValue:null,description:"",name:"trigger",required:!1,type:{name:"ReactNode"}},placement:{defaultValue:{value:"bottom-right"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom-left"'},{value:'"bottom-right"'},{value:'"top-left"'},{value:'"top-right"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Dropdown.tsx#Dropdown"]={docgenInfo:Dropdown.__docgenInfo,name:"Dropdown",path:"src/components/ui/Dropdown.tsx#Dropdown"})}catch(__react_docgen_typescript_loader_error){}var MapMarker=__webpack_require__("./src/components/icons/MapMarker.tsx"),SoundDeactivated=__webpack_require__("./src/components/icons/SoundDeactivated.tsx"),Sound=__webpack_require__("./src/components/icons/Sound.tsx"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),Setting=__webpack_require__("./src/components/icons/Setting.tsx"),ShareButton=__webpack_require__("./src/components/ShareButton/ShareButton.tsx"),FullscreenExit=__webpack_require__("./src/components/icons/FullscreenExit.tsx"),Fullscreen=__webpack_require__("./src/components/icons/Fullscreen.tsx"),Refresh=__webpack_require__("./src/components/icons/Refresh.tsx"),Clear=__webpack_require__("./src/components/icons/Clear.tsx"),DeepThought=__webpack_require__("./src/components/icons/DeepThought.tsx"),Group=__webpack_require__("./src/components/icons/Group.tsx"),User=__webpack_require__("./src/components/icons/User.tsx"),Message=__webpack_require__("./src/components/icons/Message.tsx"),Logout=__webpack_require__("./src/components/icons/Logout.tsx"),error=__webpack_require__("./src/helpers/error.ts"),dist=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs");const imgMimeTypes=["image/jpeg","image/png","image/jpg","image/gif"],Header=({className,memori,tenant,position,setShowPositionDrawer,setShowSettingsDrawer,setShowChatHistoryDrawer,setShowKnownFactsDrawer,setShowExpertsDrawer,enableAudio=!0,speakerMuted,setSpeakerMuted,hasUserActivatedSpeak=!1,showShare=!0,showSettings=!0,showReload=!1,showClear=!1,showLogin=!0,setShowLoginDrawer,clearHistory,loginToken,user,sessionID,showChatHistory=!0,fullScreenHandler,baseUrl,onLogout,apiClient})=>{const{t}=(0,useTranslation.B)(),{uploadAsset,pwlUpdateUser}=apiClient.backend,[fullScreenAvailable,setFullScreenAvailable]=(0,react.useState)(!1),[fullScreen,setFullScreen]=(0,react.useState)(!1);(0,react.useEffect)(()=>{document.fullscreenEnabled&&setFullScreenAvailable(!0)},[]);const updateAvatar=async avatar=>{if(console.log("[updateAvatar] Starting avatar update",{avatar}),avatar&&loginToken){const reader=new FileReader;reader.onload=async e=>{console.log("[updateAvatar] FileReader loaded",{result:e.target?.result});try{console.log("[updateAvatar] Uploading asset...");const{asset:avatarAsset,...resp}=await uploadAsset(avatar.name??"avatar",e.target?.result,loginToken??"");if(console.log("[updateAvatar] Upload response:",{avatarAsset,resp}),0!==resp.resultCode)console.error("[updateAvatar] Upload failed:",resp),dist.Ay.error(t((0,error._)(resp.resultCode)));else if(avatarAsset){console.log("[updateAvatar] Upload successful, updating user...");let newUser={userID:user?.userID,avatarURL:avatarAsset.assetURL};const{user:patchedUser,...resp}=await pwlUpdateUser(loginToken??"",user?.userID??"",newUser);console.log("[updateAvatar] User update complete",{patchedUser,resp})}}catch(e){let err=e;console.error("[updateAvatar] Error:",err),err?.message&&dist.Ay.error(err.message)}},reader.readAsDataURL(avatar)}else console.error("[updateAvatar] Missing avatar or login token",{avatar,loginToken}),dist.Ay.error(t("login.avatarUploadError"))};return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("memori-header",className),children:[memori.needsPosition&&position&&(0,jsx_runtime.jsxs)("div",{className:"memori-header--position",children:[0!==position.latitude&&0!==position.longitude&&(0,jsx_runtime.jsx)("span",{className:"memori-header--position-placeName",children:position.placeName}),(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--position",title:t("widget.position")||"Position",icon:(0,jsx_runtime.jsx)(MapMarker.default,{}),onClick:()=>setShowPositionDrawer(!0)})]}),showReload&&(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--reload",title:t("reload")||"Reload",icon:(0,jsx_runtime.jsx)(Refresh.default,{}),onClick:()=>{window.location.reload()}}),showClear&&(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--clear",title:t("clearHistory")||"Clear chat",icon:(0,jsx_runtime.jsx)(Clear.default,{}),onClick:clearHistory}),showChatHistory&&!!loginToken&&(0,jsx_runtime.jsx)(Button.A,{primary:!0,disabled:!loginToken,shape:"circle",className:"memori-header--button memori-header--button--chat-history",title:t("write_and_speak.chatHistory")||"Chat history",icon:(0,jsx_runtime.jsx)(Message.default,{}),onClick:()=>setShowChatHistoryDrawer(!0)}),fullScreenAvailable&&(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--fullscreen",title:fullScreen?t("fullscreenExit")||"Exit fullscreen":t("fullscreenEnter")||"Enter fullscreen",icon:fullScreen?(0,jsx_runtime.jsx)(FullscreenExit.default,{}):(0,jsx_runtime.jsx)(Fullscreen.default,{}),onClick:fullScreenHandler||(()=>{if(document.fullscreenElement)document.exitFullscreen&&(document.exitFullscreen().catch(err=>{console.warn("Error attempting to exit fullscreen:",err)}),setFullScreen(!1));else{const mainContent=document.querySelector("main#content")||document.querySelector("body"),memoriWidget=document.querySelector(".memori-widget");mainContent&&(memoriWidget&&(memoriWidget.style.backgroundColor="#FFFFFF"),mainContent.requestFullscreen().catch(err=>{console.warn("Error attempting to enable fullscreen:",err)})),setFullScreen(!0)}})}),memori.enableDeepThought&&!!loginToken&&user?.pAndCUAccepted&&(0,jsx_runtime.jsx)(Button.A,{primary:!!sessionID&&!!hasUserActivatedSpeak,shape:"circle",icon:(0,jsx_runtime.jsx)(DeepThought.default,{}),className:"memori-header--button memori-header--button--knownfacts",disabled:!hasUserActivatedSpeak||!sessionID,onClick:()=>setShowKnownFactsDrawer(!0),title:t("knownFacts.title")||"Known facts"}),memori.enableBoardOfExperts&&(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",icon:(0,jsx_runtime.jsx)(Group.default,{}),className:"memori-header--button memori-header--button--experts",disabled:!hasUserActivatedSpeak||!sessionID,onClick:()=>setShowExpertsDrawer(!0),title:t("widget.showExpertsInTheBoard")||"Experts in this board"}),enableAudio&&(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button--speaker",icon:speakerMuted?(0,jsx_runtime.jsx)(SoundDeactivated.default,{}):(0,jsx_runtime.jsx)(Sound.default,{}),onClick:()=>setSpeakerMuted(!speakerMuted),title:t("widget.sound")||"Sound"}),showSettings&&(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button-settings",icon:(0,jsx_runtime.jsx)(Setting.default,{}),onClick:()=>setShowSettingsDrawer(!0),title:t("widget.settings")||"Settings"}),showShare&&(0,jsx_runtime.jsx)(ShareButton.A,{className:"memori-header--button memori-header--button-share",title:memori.name,memori,sessionID,tenant,showQrCode:!0,align:"left",baseUrl}),showLogin&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:loginToken&&user?(0,jsx_runtime.jsxs)(ui_Dropdown,{placement:"bottom-right",trigger:(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button-login",icon:(0,jsx_runtime.jsx)(User.default,{}),title:t("login.user")||"User"}),children:[(0,jsx_runtime.jsx)("div",{className:"memori-dropdown--user-profile",children:(0,jsx_runtime.jsxs)("div",{className:"memori-dropdown--user-info",children:[user.avatarURL?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("img",{src:user.avatarURL,alt:user.userName||user.eMail,className:"memori-dropdown--avatar"}),(0,jsx_runtime.jsx)("input",{type:"file",name:"avatar",id:"avatar",className:"memori-dropdown--avatar-input",onChange:e=>updateAvatar(e.target.files?.[0]??null),accept:imgMimeTypes.join(", ")})]}):(0,jsx_runtime.jsxs)("div",{className:"memori-dropdown--avatar-placeholder",children:[(0,jsx_runtime.jsx)("span",{children:(user.userName||user.eMail||"U").charAt(0).toUpperCase()}),(0,jsx_runtime.jsx)("input",{type:"file",name:"avatar",id:"avatar",className:"memori-dropdown--avatar-input",onChange:e=>updateAvatar(e.target.files?.[0]??null),accept:imgMimeTypes.join(", ")})]}),(0,jsx_runtime.jsxs)("div",{className:"memori-dropdown--user-details",children:[(0,jsx_runtime.jsx)("h3",{className:"memori-dropdown--user-name",children:user.userName||t("login.welcomeUser")}),(0,jsx_runtime.jsx)("p",{className:"memori-dropdown--user-email",children:user.eMail}),(0,jsx_runtime.jsx)("div",{className:"memori-dropdown--user-badge",children:user.birthDate?new Date(user.birthDate).toLocaleDateString():t("login.notSet")})]})]})}),(0,jsx_runtime.jsx)("div",{className:"memori-dropdown--actions",children:(0,jsx_runtime.jsxs)("button",{className:"memori-dropdown--action-button memori-dropdown--action-button--logout",onClick:onLogout,children:[(0,jsx_runtime.jsx)(Logout.default,{className:"memori-dropdown--action-icon"}),t("login.logout")||"Logout"]})})]}):(0,jsx_runtime.jsx)(Button.A,{primary:!0,shape:"circle",className:"memori-header--button memori-header--button-login",icon:(0,jsx_runtime.jsx)(User.default,{}),onClick:()=>setShowLoginDrawer(!0),title:t("login.login")||"Login"})})]})};Header.displayName="Header";const Header_Header=Header;try{Header.displayName="Header",Header.__docgenInfo={description:"",displayName:"Header",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},memori:{defaultValue:null,description:"",name:"memori",required:!0,type:{name:"Memori"}},tenant:{defaultValue:null,description:"",name:"tenant",required:!1,type:{name:"Tenant"}},history:{defaultValue:null,description:"",name:"history",required:!0,type:{name:"Message[]"}},position:{defaultValue:null,description:"",name:"position",required:!1,type:{name:"Venue"}},setShowPositionDrawer:{defaultValue:null,description:"",name:"setShowPositionDrawer",required:!0,type:{name:"(show: boolean) => void"}},setShowSettingsDrawer:{defaultValue:null,description:"",name:"setShowSettingsDrawer",required:!0,type:{name:"(show: boolean) => void"}},setShowChatHistoryDrawer:{defaultValue:null,description:"",name:"setShowChatHistoryDrawer",required:!0,type:{name:"(show: boolean) => void"}},setShowKnownFactsDrawer:{defaultValue:null,description:"",name:"setShowKnownFactsDrawer",required:!0,type:{name:"(show: boolean) => void"}},setShowExpertsDrawer:{defaultValue:null,description:"",name:"setShowExpertsDrawer",required:!0,type:{name:"(show: boolean) => void"}},enableAudio:{defaultValue:{value:"true"},description:"",name:"enableAudio",required:!1,type:{name:"boolean"}},speakerMuted:{defaultValue:null,description:"",name:"speakerMuted",required:!0,type:{name:"boolean"}},setSpeakerMuted:{defaultValue:null,description:"",name:"setSpeakerMuted",required:!0,type:{name:"(mute: boolean) => void"}},hasUserActivatedSpeak:{defaultValue:{value:"false"},description:"",name:"hasUserActivatedSpeak",required:!1,type:{name:"boolean"}},showShare:{defaultValue:{value:"true"},description:"",name:"showShare",required:!1,type:{name:"boolean"}},showSettings:{defaultValue:{value:"true"},description:"",name:"showSettings",required:!1,type:{name:"boolean"}},showChatHistory:{defaultValue:{value:"true"},description:"",name:"showChatHistory",required:!1,type:{name:"boolean"}},showReload:{defaultValue:{value:"false"},description:"",name:"showReload",required:!1,type:{name:"boolean"}},showClear:{defaultValue:{value:"false"},description:"",name:"showClear",required:!1,type:{name:"boolean"}},showLogin:{defaultValue:{value:"true"},description:"",name:"showLogin",required:!1,type:{name:"boolean"}},setShowLoginDrawer:{defaultValue:null,description:"",name:"setShowLoginDrawer",required:!0,type:{name:"(show: boolean) => void"}},clearHistory:{defaultValue:null,description:"",name:"clearHistory",required:!0,type:{name:"() => void"}},loginToken:{defaultValue:null,description:"",name:"loginToken",required:!1,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!1,type:{name:"User"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},baseUrl:{defaultValue:null,description:"",name:"baseUrl",required:!1,type:{name:"string"}},fullScreenHandler:{defaultValue:null,description:"",name:"fullScreenHandler",required:!1,type:{name:"((e: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onLogout:{defaultValue:null,description:"",name:"onLogout",required:!1,type:{name:"(() => void)"}},apiClient:{defaultValue:null,description:"",name:"apiClient",required:!0,type:{name:'{ constants: { BACKEND_URL: string; ENGINE_URL: string; allowedMediaTypes: string[]; anonTag: "ðŸ‘¤"; }; asset: { getResourceUrl: ({ type, resourceURI, sessionID, baseURL, }: ResourceURLParams) => string; }; getAllFunctions: (sessionId: string) => Promise<...>; ... 137 more ...; backend: { ...; }; }'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Header/Header.tsx#Header"]={docgenInfo:Header.__docgenInfo,name:"Header",path:"src/components/Header/Header.tsx#Header"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/SettingsDrawer/SettingsDrawer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _ui_Drawer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/ui/Drawer.tsx"),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),_ui_Checkbox__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/Checkbox.tsx"),_helpers_configuration__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/helpers/configuration.ts"),_headlessui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@headlessui/react/dist/components/radio-group/radio-group.js"),_ui_Button__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/ui/Button.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const SettingsDrawer=({open,layout="DEFAULT",onClose,microphoneMode="HOLD_TO_TALK",continuousSpeechTimeout,setMicrophoneMode,setContinuousSpeechTimeout,controlsPosition,setControlsPosition,hideEmissions,setHideEmissions,additionalSettings,avatarType,setAvatarType,enablePositionControls,setEnablePositionControls,isAvatar3d})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.B)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_ui_Drawer__WEBPACK_IMPORTED_MODULE_0__.A,{className:"memori-settings-drawer",open,onClose,title:t("widget.settings")||"Settings",description:t("write_and_speak.settingsHeaderLabel"),children:["TOTEM"===layout&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"memori-settings-drawer--field controls",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("label",{htmlFor:"#controlsPosition",children:[t("write_and_speak.controlsPosition")||"Controls",":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_4__.z,{id:"controlsPosition",name:"controlsPosition",value:controlsPosition,defaultValue:controlsPosition,className:"memori-settings-drawer--controlsposition-radio",onChange:value=>{setControlsPosition(value),(0,_helpers_configuration__WEBPACK_IMPORTED_MODULE_3__.yY)("controlsPosition",value)},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_4__.z.Option,{value:"center",className:"memori-settings-drawer--controlsposition-radio-button",children:({checked})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_5__.A,{primary:checked,outlined:!checked,children:t("center")||"Center"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_4__.z.Option,{value:"bottom",className:"memori-settings-drawer--controlsposition-radio-button",children:({checked})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_5__.A,{primary:checked,outlined:!checked,children:t("bottom")||"Bottom"})})]})]}),isAvatar3d&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"memori-settings-drawer--field controls",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("label",{htmlFor:"avatarType",className:"memori-settings-drawer-label",children:[t("write_and_speak.avatarType")||"Avatar type",":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_4__.z,{id:"avatarType",name:"avatarType",value:avatarType,defaultValue:avatarType,className:"memori-settings-drawer--avatarType-radio",onChange:value=>{setAvatarType&&setAvatarType(value),(0,_helpers_configuration__WEBPACK_IMPORTED_MODULE_3__.yY)("avatarType",value)},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_4__.z.Option,{value:"blob",className:"memori-settings-drawer--avatarType-radio-button",children:({checked})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_5__.A,{primary:checked,outlined:!checked,children:t("write_and_speak.blob")||"Blob"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_4__.z.Option,{value:"avatar3d",className:"memori-settings-drawer--avatarType-radio-button",children:({checked})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_5__.A,{primary:checked,outlined:!checked,children:t("write_and_speak.avatar3d")||"Avatar 3D"})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori-settings-drawer--field",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Checkbox__WEBPACK_IMPORTED_MODULE_2__.A,{label:t("write_and_speak.enablePositionControls")||"Enable position controls",name:"enablePositionControls",checked:enablePositionControls,onChange:e=>{setEnablePositionControls(e.target.checked)}})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori-settings-drawer--field",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Checkbox__WEBPACK_IMPORTED_MODULE_2__.A,{label:t("write_and_speak.hideEmissionsLabel")||"Hide emissions",name:"hideControls",checked:hideEmissions,onChange:e=>{setHideEmissions(e.target.checked),(0,_helpers_configuration__WEBPACK_IMPORTED_MODULE_3__.yY)("hideEmissions",e.target.checked)}})})]}),additionalSettings&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori-settings-drawer--field controls",children:additionalSettings})]})};SettingsDrawer.displayName="SettingsDrawer";const __WEBPACK_DEFAULT_EXPORT__=SettingsDrawer;try{SettingsDrawer.displayName="SettingsDrawer",SettingsDrawer.__docgenInfo={description:"",displayName:"SettingsDrawer",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},layout:{defaultValue:{value:"DEFAULT"},description:"",name:"layout",required:!1,type:{name:"enum",value:[{value:'"DEFAULT"'},{value:'"FULLPAGE"'},{value:'"TOTEM"'},{value:'"CHAT"'},{value:'"WEBSITE_ASSISTANT"'},{value:'"HIDDEN_CHAT"'},{value:'"ZOOMED_FULL_BODY"'}]}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},microphoneMode:{defaultValue:{value:"HOLD_TO_TALK"},description:"",name:"microphoneMode",required:!1,type:{name:"enum",value:[{value:'"HOLD_TO_TALK"'},{value:'"CONTINUOUS"'}]}},continuousSpeechTimeout:{defaultValue:null,description:"",name:"continuousSpeechTimeout",required:!1,type:{name:"number"}},setMicrophoneMode:{defaultValue:null,description:"",name:"setMicrophoneMode",required:!0,type:{name:'(value: "HOLD_TO_TALK" | "CONTINUOUS") => void'}},setContinuousSpeechTimeout:{defaultValue:null,description:"",name:"setContinuousSpeechTimeout",required:!0,type:{name:"(value: number) => void"}},controlsPosition:{defaultValue:null,description:"",name:"controlsPosition",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"bottom"'}]}},setControlsPosition:{defaultValue:null,description:"",name:"setControlsPosition",required:!0,type:{name:'(value: "center" | "bottom") => void'}},hideEmissions:{defaultValue:null,description:"",name:"hideEmissions",required:!1,type:{name:"boolean"}},setHideEmissions:{defaultValue:null,description:"",name:"setHideEmissions",required:!0,type:{name:"(value: boolean) => void"}},additionalSettings:{defaultValue:null,description:"",name:"additionalSettings",required:!1,type:{name:"Element | null"}},avatarType:{defaultValue:null,description:"",name:"avatarType",required:!1,type:{name:'"blob" | "avatar3d" | null'}},setAvatarType:{defaultValue:null,description:"",name:"setAvatarType",required:!0,type:{name:'(value: "blob" | "avatar3d" | null) => void'}},enablePositionControls:{defaultValue:null,description:"",name:"enablePositionControls",required:!1,type:{name:"boolean"}},setEnablePositionControls:{defaultValue:null,description:"",name:"setEnablePositionControls",required:!0,type:{name:"(value: boolean) => void"}},isAvatar3d:{defaultValue:null,description:"",name:"isAvatar3d",required:!1,type:{name:"boolean"}},speakerMuted:{defaultValue:null,description:"",name:"speakerMuted",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/SettingsDrawer/SettingsDrawer.tsx#SettingsDrawer"]={docgenInfo:SettingsDrawer.__docgenInfo,name:"SettingsDrawer",path:"src/components/SettingsDrawer/SettingsDrawer.tsx#SettingsDrawer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ShareButton/ShareButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),_icons_Facebook__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/icons/Facebook.tsx"),_icons_Twitter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/icons/Twitter.tsx"),_icons_Linkedin__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/icons/Linkedin.tsx"),_icons_WhatsApp__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/icons/WhatsApp.tsx"),_icons_Mail__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/icons/Mail.tsx"),_icons_Link__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/icons/Link.tsx"),_icons_Share__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/icons/Share.tsx"),_icons_Download__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/icons/Download.tsx"),_icons_Telegram__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/icons/Telegram.tsx"),qrcode_react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/qrcode.react/lib/esm/index.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@headlessui/react/dist/components/menu/menu.js"),_ui_Button__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/ui/Button.tsx"),classnames__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_14__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ShareButton=({tenant,memori,sessionID,url,title="",className,baseUrl,primary=!0,showQrCode=!0,align="right"})=>{const{t,i18n}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.B)(),[targetUrl,setTargetUrl]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(url),qrImageURL=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>tenant?.theme?`${baseUrl??"https://aisuru.com"}/images/${tenant.theme}/square_logo.png`:`${baseUrl??"https://aisuru.com"}/images/memori_logo.png`,[tenant,baseUrl]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{url||setTargetUrl(window.location.href)},[url]);const socialShare=[{id:"facebook",title:"Facebook",url:`https://www.facebook.com/sharer/sharer.php?u=${targetUrl}`,icon:_icons_Facebook__WEBPACK_IMPORTED_MODULE_2__.default},{id:"twitter",title:"Twitter",url:`https://twitter.com/intent/tweet?url=${targetUrl}`,icon:_icons_Twitter__WEBPACK_IMPORTED_MODULE_3__.default},{id:"linkedin",title:"LinkedIn",url:`https://www.linkedin.com/shareArticle?mini=true&title=${title}&url=${targetUrl}`,icon:_icons_Linkedin__WEBPACK_IMPORTED_MODULE_4__.default},{id:"whatsapp",title:"Whatsapp",url:`https://api.whatsapp.com/send?phone=&text=${targetUrl}`,icon:_icons_WhatsApp__WEBPACK_IMPORTED_MODULE_5__.default},{id:"telegram",title:"Telegram",url:`https://t.me/share/url?text=${title}&url=${targetUrl}`,icon:_icons_Telegram__WEBPACK_IMPORTED_MODULE_10__.default},{id:"email",title:"Email",url:`mailto:?subject=${title?.length>0?title:url}&body=${targetUrl}`,icon:_icons_Mail__WEBPACK_IMPORTED_MODULE_6__.default}],sharedUrl=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{if(memori&&sessionID)return memori.ownerUserID?`${baseUrl??"https://www.aisuru.com"}/${"it"===i18n.language?"it":"en"}/shared/${memori.ownerUserID}/${memori.memoriID}/${sessionID}`:memori.exposed?`${baseUrl??"https://www.aisuru.com"}/${"it"===i18n.language?"it":"en"}/shared/${memori.ownerUserName}/${memori.name}/${sessionID}`:void 0},[memori,sessionID,baseUrl,i18n.language]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_12__.W,{as:"div",className:classnames__WEBPACK_IMPORTED_MODULE_14___default()("memori-share-button",{"memori-share-button--align-left":"left"===align}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_12__.W.Button,{className:classnames__WEBPACK_IMPORTED_MODULE_14___default()("memori-button","memori-button--circle","memori-button--icon-only","memori-share-button--button",className,{"memori-button--primary":primary}),title:t("widget.share")||void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"memori-button--icon",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_icons_Share__WEBPACK_IMPORTED_MODULE_8__.default,{})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_12__.W.Items,{className:"memori-share-button--overlay",as:"ul",children:[memori&&sessionID&&sharedUrl&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_12__.W.Item,{as:"li",className:"memori-share-button--li memori-share-button--li-shared",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("a",{className:classnames__WEBPACK_IMPORTED_MODULE_14___default()("memori-button","memori-button--with-icon","memori-button--ghost","memori-button--padded","memori-share-button--link"),href:sharedUrl,target:"_blank",rel:"noopener noreferrer",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"memori-button--icon",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_icons_Share__WEBPACK_IMPORTED_MODULE_8__.default,{})}),t("widget.shareChat")||"Share chat"]})},"shared"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_12__.W.Item,{as:"li",className:"memori-share-button--li",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_13__.A,{className:"memori-share-button--link",ghost:!0,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_icons_Link__WEBPACK_IMPORTED_MODULE_7__.default,{}),onClick:()=>{targetUrl&&navigator.clipboard.writeText(targetUrl)},children:t("copyToClipboard")||void 0})},"copy"),socialShare.map(item=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_12__.W.Item,{as:"li",className:"memori-share-button--li",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("a",{className:classnames__WEBPACK_IMPORTED_MODULE_14___default()("memori-button","memori-button--with-icon","memori-button--ghost","memori-button--padded","memori-share-button--link"),href:item.url??"",target:"_blank",rel:"noopener noreferrer",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"memori-button--icon",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(item.icon,{})}),item.title]})},item.id)),showQrCode&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_12__.W.Item,{as:"li",className:"memori-share-button--li-qr-code",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(qrcode_react__WEBPACK_IMPORTED_MODULE_11__.Xe,{id:"qr-canvas",value:targetUrl??"",size:128,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!1,imageSettings:{src:qrImageURL,x:void 0,y:void 0,height:32,width:32,excavate:!0}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_13__.A,{onClick:()=>{const canvas=document.getElementById("qr-canvas");if(!canvas)return;const link=document.createElement("a");link.href=canvas.toDataURL(),link.download=`memori-${title}-share.png`,document.body.appendChild(link),link.click(),document.body.removeChild(link)},icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_icons_Download__WEBPACK_IMPORTED_MODULE_9__.default,{}),title:"Download QR",children:"Download"})})]},"qrcode")]})]})};ShareButton.displayName="ShareButton";const __WEBPACK_DEFAULT_EXPORT__=ShareButton;try{ShareButton.displayName="ShareButton",ShareButton.__docgenInfo={description:"",displayName:"ShareButton",props:{tenant:{defaultValue:null,description:"",name:"tenant",required:!1,type:{name:"Tenant"}},memori:{defaultValue:null,description:"",name:"memori",required:!1,type:{name:"Memori"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},title:{defaultValue:{value:""},description:"",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},primary:{defaultValue:{value:"true"},description:"",name:"primary",required:!1,type:{name:"boolean"}},baseUrl:{defaultValue:null,description:"",name:"baseUrl",required:!1,type:{name:"string"}},showQrCode:{defaultValue:{value:"true"},description:"",name:"showQrCode",required:!1,type:{name:"boolean"}},align:{defaultValue:{value:"right"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ShareButton/ShareButton.tsx#ShareButton"]={docgenInfo:ShareButton.__docgenInfo,name:"ShareButton",path:"src/components/ShareButton/ShareButton.tsx#ShareButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Checkbox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Checkbox=({label,className,disabled=!1,indeterminate=!1,checked,children,onChange,name,...props})=>{const inputRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{inputRef.current&&(inputRef.current.indeterminate=indeterminate)},[inputRef,indeterminate]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("label",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("memori-checkbox",className,{"memori-checkbox--disabled":disabled,"memori-checkbox--indeterminate":indeterminate}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("span",{className:"memori-checkbox--input-wrapper",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{ref:inputRef,type:"checkbox",...props,name,disabled,checked:checked||indeterminate,className:"memori-checkbox--input",onChange}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"memori-checkbox--inner"})]}),!!label?.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"memori-checkbox--text",children:label})]})};Checkbox.displayName="Checkbox";const __WEBPACK_DEFAULT_EXPORT__=Checkbox;try{Checkbox.displayName="Checkbox",Checkbox.__docgenInfo={description:"",displayName:"Checkbox",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},checked:{defaultValue:null,description:"",name:"checked",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},indeterminate:{defaultValue:{value:"false"},description:"",name:"indeterminate",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement>) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Checkbox.tsx#Checkbox"]={docgenInfo:Checkbox.__docgenInfo,name:"Checkbox",path:"src/components/ui/Checkbox.tsx#Checkbox"})}catch(__react_docgen_typescript_loader_error){}}}]);