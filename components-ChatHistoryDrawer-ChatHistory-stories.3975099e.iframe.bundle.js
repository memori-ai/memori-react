"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[2204],{"./src/components/ChatHistoryDrawer/ChatHistory.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,EmptyState:()=>EmptyState,LoadingState:()=>LoadingState,WithCurrentChatDisabled:()=>WithCurrentChatDisabled,WithPagination:()=>WithPagination,WithSearch:()=>WithSearch,WithSelectedChat:()=>WithSelectedChat,WithTranslation:()=>WithTranslation,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _ChatHistory__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ChatHistoryDrawer/ChatHistory.tsx"),_I18nWrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/I18nWrapper.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const mockApiClient={chatLogs:{getUserChatLogsByToken:(loginToken,memoriID,dateFrom,dateTo)=>Promise.resolve({chatLogs:mockChatLogs}),getUserChatLogsByTokenPaged:requestBody=>Promise.resolve({chatLogs:mockChatLogs,totalItems:mockChatLogs.length})}},mockChatLogs=[{chatLogID:"chat123456",memoriID:"mem123",sessionID:"session123",timestamp:"2023-01-01T10:00:00Z",lines:[{text:"Hello, how can I help?",inbound:!0,timestamp:"2023-01-01T10:00:00Z",contextVars:{},media:[],memoryID:"mem123"},{text:"I need information about your services",inbound:!1,timestamp:"2023-01-01T10:01:00Z",contextVars:{},media:[],memoryID:"mem123"},{text:"We offer a range of services including consultation, implementation, and support.",inbound:!0,timestamp:"2023-01-01T10:02:00Z",contextVars:{},media:[],memoryID:"mem123"}],boardOfExperts:!1},{chatLogID:"chat456789",memoriID:"mem123",sessionID:"session123",timestamp:"2023-01-02T14:00:00Z",lines:[{text:"What are your business hours?",inbound:!1,timestamp:"2023-01-02T14:00:00Z",contextVars:{},media:[],memoryID:"mem123"},{text:"We are open from 9 AM to 5 PM weekdays.",inbound:!0,timestamp:"2023-01-02T14:01:00Z",contextVars:{},media:[],memoryID:"mem123"}],boardOfExperts:!0},{chatLogID:"chat789012",memoriID:"mem123",sessionID:"session123",timestamp:"2023-01-03T11:00:00Z",lines:[{text:"Do you offer remote services?",inbound:!1,timestamp:"2023-01-03T11:00:00Z",contextVars:{},media:[],memoryID:"mem123"},{text:"Yes, we offer both in-person and remote services to accommodate your needs.",inbound:!0,timestamp:"2023-01-03T11:01:00Z",contextVars:{},media:[],memoryID:"mem123"}],boardOfExperts:!1},{chatLogID:"chat345678",memoriID:"mem123",sessionID:"session1234",timestamp:"2023-01-04T09:30:00Z",lines:[{text:"What is your pricing structure?",inbound:!1,timestamp:"2023-01-04T09:30:00Z",contextVars:{},media:[],memoryID:"mem123"},{text:"Our pricing is based on project scope. We offer packages starting at $499 for basic services, with custom quotes for larger projects.",inbound:!0,timestamp:"2023-01-04T09:31:00Z",contextVars:{},media:[],memoryID:"mem123"},{text:"Do you offer any discounts?",inbound:!1,timestamp:"2023-01-04T09:32:00Z",contextVars:{},media:[],memoryID:"mem123"},{text:"Yes, we offer discounts for non-profits and educational institutions. We also have loyalty programs for returning customers.",inbound:!0,timestamp:"2023-01-04T09:33:00Z",contextVars:{},media:[],memoryID:"mem123"}],boardOfExperts:!1}],mockParams={open:!0,sessionId:"session12345",memori:{memoriID:"mem123",name:"Test Memori",avatar:{url:"https://example.com/avatar.jpg"},description:"A test memori",isPublic:!0,integrationEnabled:!1,enableBoardOfExperts:!0,memoriConfigurationID:"mem123",privacyType:"PUBLIC",voiceType:"FEMALE"},apiClient:mockApiClient,onClose:()=>console.log("Close button clicked"),history:mockChatLogs.map(chatLog=>({text:chatLog.lines[0].text,fromUser:chatLog.lines[0].inbound,timestamp:chatLog.lines[0].timestamp})),resumeSession:chatLog=>{console.log("Resume session called with:",chatLog)},loginToken:"mock-login-token",language:"EN",userLang:"EN"},__WEBPACK_DEFAULT_EXPORT__={title:"Widget/Chat History Drawer",component:_ChatHistory__WEBPACK_IMPORTED_MODULE_1__.A,decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_I18nWrapper__WEBPACK_IMPORTED_MODULE_2__.A,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Story,{})})],parameters:{layout:"fullscreen"},args:mockParams,argTypes:{open:{control:"boolean",description:"Whether the drawer is open"},onClose:{action:"closed"},resumeSession:{action:"resumed session"}}},Default={args:{}},WithSelectedChat={args:{},play:async({canvasElement})=>{const canvas=canvasElement.ownerDocument.body;setTimeout(()=>{const chatCard=canvas.querySelector(".memori-chat-history-drawer--card");chatCard&&chatCard.click()},300)}},EmptyState={args:{apiClient:{chatLogs:{getUserChatLogsByToken:(loginToken,memoriID,dateFrom,dateTo)=>Promise.resolve({chatLogs:[]}),getUserChatLogsByTokenPaged:requestBody=>Promise.resolve({chatLogs:[],totalItems:0})}}}},LoadingState={args:{apiClient:{chatLogs:{getUserChatLogsByToken:(loginToken,memoriID,dateFrom,dateTo)=>new Promise(resolve=>{setTimeout(()=>{resolve({chatLogs:mockChatLogs})},2e3)}),getUserChatLogsByTokenPaged:requestBody=>new Promise(resolve=>{setTimeout(()=>{resolve({chatLogs:mockChatLogs,totalItems:mockChatLogs.length})},2e3)})}}}},WithSearch={args:{},play:async({canvasElement})=>{const canvas=canvasElement.ownerDocument.body;setTimeout(()=>{const searchInput=canvas.querySelector('input[type="text"]');searchInput&&(searchInput.value="pricing",searchInput.dispatchEvent(new Event("change",{bubbles:!0})))},300)}},WithPagination={args:{apiClient:{chatLogs:{getUserChatLogsByToken:(loginToken,memoriID,dateFrom,dateTo)=>{const manyLogs=Array.from({length:20},(_,i)=>({chatLogID:`chat${i}`,lines:[{text:`Question ${i}`,inbound:!1,timestamp:`2023-01-0${i%9+1}T10:00:00Z`,contextVars:{},media:[],memoryID:"mem123",sessionID:"session123"},{text:`Answer ${i}`,inbound:!0,timestamp:`2023-01-0${i%9+1}T10:01:00Z`,contextVars:{},media:[],memoryID:"memori.memoriID",sessionID:"session123"}],boardOfExperts:i%3==0}));return Promise.resolve({chatLogs:manyLogs})},getUserChatLogsByTokenPaged:requestBody=>{const manyLogs=Array.from({length:20},(_,i)=>({chatLogID:`chat${i}`,lines:[{text:`Question ${i}`,inbound:!1,timestamp:`2023-01-0${i%9+1}T10:00:00Z`,contextVars:{},media:[],memoryID:"mem123",sessionID:"session123"},{text:`Answer ${i}`,inbound:!0,timestamp:`2023-01-0${i%9+1}T10:01:00Z`,contextVars:{},media:[],memoryID:"memori.memoriID",sessionID:"session123"}],boardOfExperts:i%3==0}));return Promise.resolve({chatLogs:manyLogs,totalItems:20})}}}}},WithTranslation={args:{...mockParams,language:"EN",userLang:"IT",isMultilanguageEnabled:!0}},WithCurrentChatDisabled={args:{...mockParams,sessionId:"session1234"}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Default.parameters?.docs?.source}}},WithSelectedChat.parameters={...WithSelectedChat.parameters,docs:{...WithSelectedChat.parameters?.docs,source:{originalSource:"{\n  args: {},\n  play: async ({\n    canvasElement\n  }) => {\n    // We need to use the play function to simulate clicking on a chat\n    const canvas = canvasElement.ownerDocument.body;\n    setTimeout(() => {\n      const chatCard = canvas.querySelector('.memori-chat-history-drawer--card');\n      if (chatCard) {\n        (chatCard as HTMLElement).click();\n      }\n    }, 300);\n  }\n}",...WithSelectedChat.parameters?.docs?.source}}},EmptyState.parameters={...EmptyState.parameters,docs:{...EmptyState.parameters?.docs,source:{originalSource:"{\n  args: {\n    apiClient: {\n      chatLogs: {\n        getUserChatLogsByToken: (loginToken: string, memoriID: string, dateFrom: string, dateTo: string) => Promise.resolve({\n          chatLogs: []\n        }),\n        getUserChatLogsByTokenPaged: (requestBody: any) => Promise.resolve({\n          chatLogs: [],\n          totalItems: 0\n        })\n      }\n    } as any\n  }\n}",...EmptyState.parameters?.docs?.source}}},LoadingState.parameters={...LoadingState.parameters,docs:{...LoadingState.parameters?.docs,source:{originalSource:"{\n  args: {\n    apiClient: {\n      chatLogs: {\n        getUserChatLogsByToken: (loginToken: string, memoriID: string, dateFrom: string, dateTo: string) => new Promise(resolve => {\n          // Simulate a slow network\n          setTimeout(() => {\n            resolve({\n              chatLogs: mockChatLogs\n            });\n          }, 2000);\n        }),\n        getUserChatLogsByTokenPaged: (requestBody: any) => new Promise(resolve => {\n          // Simulate a slow network\n          setTimeout(() => {\n            resolve({\n              chatLogs: mockChatLogs,\n              totalItems: mockChatLogs.length\n            });\n          }, 2000);\n        })\n      }\n    } as any\n  }\n}",...LoadingState.parameters?.docs?.source}}},WithSearch.parameters={...WithSearch.parameters,docs:{...WithSearch.parameters?.docs,source:{originalSource:"{\n  args: {},\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = canvasElement.ownerDocument.body;\n    setTimeout(() => {\n      const searchInput = canvas.querySelector('input[type=\"text\"]');\n      if (searchInput) {\n        (searchInput as HTMLInputElement).value = 'pricing';\n        (searchInput as HTMLInputElement).dispatchEvent(new Event('change', {\n          bubbles: true\n        }));\n      }\n    }, 300);\n  }\n}",...WithSearch.parameters?.docs?.source}}},WithPagination.parameters={...WithPagination.parameters,docs:{...WithPagination.parameters?.docs,source:{originalSource:"{\n  args: {\n    apiClient: {\n      chatLogs: {\n        getUserChatLogsByToken: (loginToken: string, memoriID: string, dateFrom: string, dateTo: string) => {\n          // Create 20 mock chat logs to trigger pagination\n          const manyLogs = Array.from({\n            length: 20\n          }, (_, i) => ({\n            chatLogID: `chat${i}`,\n            lines: [{\n              text: `Question ${i}`,\n              inbound: false,\n              timestamp: `2023-01-0${i % 9 + 1}T10:00:00Z`,\n              contextVars: {},\n              media: [],\n              memoryID: 'mem123',\n              sessionID: 'session123'\n            }, {\n              text: `Answer ${i}`,\n              inbound: true,\n              timestamp: `2023-01-0${i % 9 + 1}T10:01:00Z`,\n              contextVars: {},\n              media: [],\n              memoryID: 'memori.memoriID',\n              sessionID: 'session123'\n            }],\n            boardOfExperts: i % 3 === 0\n          }));\n          return Promise.resolve({\n            chatLogs: manyLogs\n          });\n        },\n        getUserChatLogsByTokenPaged: (requestBody: any) => {\n          // Create 20 mock chat logs to trigger pagination\n          const manyLogs = Array.from({\n            length: 20\n          }, (_, i) => ({\n            chatLogID: `chat${i}`,\n            lines: [{\n              text: `Question ${i}`,\n              inbound: false,\n              timestamp: `2023-01-0${i % 9 + 1}T10:00:00Z`,\n              contextVars: {},\n              media: [],\n              memoryID: 'mem123',\n              sessionID: 'session123'\n            }, {\n              text: `Answer ${i}`,\n              inbound: true,\n              timestamp: `2023-01-0${i % 9 + 1}T10:01:00Z`,\n              contextVars: {},\n              media: [],\n              memoryID: 'memori.memoriID',\n              sessionID: 'session123'\n            }],\n            boardOfExperts: i % 3 === 0\n          }));\n          return Promise.resolve({\n            chatLogs: manyLogs,\n            totalItems: 20\n          });\n        }\n      }\n    } as any\n  }\n}",...WithPagination.parameters?.docs?.source}}},WithTranslation.parameters={...WithTranslation.parameters,docs:{...WithTranslation.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...mockParams,\n    language: 'EN',\n    userLang: 'IT',\n    isMultilanguageEnabled: true\n  }\n}",...WithTranslation.parameters?.docs?.source}}},WithCurrentChatDisabled.parameters={...WithCurrentChatDisabled.parameters,docs:{...WithCurrentChatDisabled.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...mockParams,\n    sessionId: 'session1234'\n  }\n}",...WithCurrentChatDisabled.parameters?.docs?.source}}};const __namedExportsOrder=["Default","WithSelectedChat","EmptyState","LoadingState","WithSearch","WithPagination","WithTranslation","WithCurrentChatDisabled"]}}]);