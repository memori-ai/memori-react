"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[6141],{"./src/components/icons/Loading.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Loading=({className,title,loading=!0})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(className,{"memori-loading-icon":loading}),"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("path",{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"})});Loading.displayName="Loading";const __WEBPACK_DEFAULT_EXPORT__=Loading;try{Loading.displayName="Loading",Loading.__docgenInfo={description:"",displayName:"Loading",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},loading:{defaultValue:{value:"true"},description:"",name:"loading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Loading.tsx#Loading"]={docgenInfo:Loading.__docgenInfo,name:"Loading",path:"src/components/icons/Loading.tsx#Loading"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_icons_Loading__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/icons/Loading.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Button=({primary=!1,outlined=!1,ghost=!1,padded=!0,shape="rounded",danger=!1,loading=!1,disabled=!1,block=!1,icon,className,title,id,htmlType,onClick,onMouseDown,onMouseUp,onMouseLeave,onTouchStart,onTouchEnd,children,isActive})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("button",{id,type:htmlType,onClick,onMouseDown,onMouseUp,onMouseLeave,onTouchStart,onTouchEnd,title,disabled:loading||disabled,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("memori-button",{"memori-button--primary":primary,"memori-button--outlined":outlined,"memori-button--ghost":ghost,"memori-button--square":"square"===shape,"memori-button--rounded":"rounded"===shape,"memori-button--circle":"circle"===shape,"memori-button--padded":padded,"memori-button--block":block,"memori-button--with-icon":(icon||loading)&&children,"memori-button--icon-only":(icon||loading)&&!children,"memori-button--danger":danger,"memori-button--loading":loading,"memori-button--active":isActive},className),children:[icon&&!loading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{className:"memori-button--icon",children:icon}),loading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{className:"memori-button--icon loading-icon",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_icons_Loading__WEBPACK_IMPORTED_MODULE_2__.default,{loading:!0})}),children]});Button.displayName="Button";const __WEBPACK_DEFAULT_EXPORT__=Button;try{Button.displayName="Button",Button.__docgenInfo={description:"",displayName:"Button",props:{primary:{defaultValue:{value:"false"},description:"",name:"primary",required:!1,type:{name:"boolean"}},outlined:{defaultValue:{value:"false"},description:"",name:"outlined",required:!1,type:{name:"boolean"}},ghost:{defaultValue:{value:"false"},description:"",name:"ghost",required:!1,type:{name:"boolean"}},padded:{defaultValue:{value:"true"},description:"",name:"padded",required:!1,type:{name:"boolean"}},block:{defaultValue:{value:"false"},description:"",name:"block",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"ReactNode"}},shape:{defaultValue:{value:"rounded"},description:"",name:"shape",required:!1,type:{name:"enum",value:[{value:'"square"'},{value:'"rounded"'},{value:'"circle"'}]}},danger:{defaultValue:{value:"false"},description:"",name:"danger",required:!1,type:{name:"boolean"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},htmlType:{defaultValue:null,description:"",name:"htmlType",required:!1,type:{name:"enum",value:[{value:'"button"'},{value:'"submit"'},{value:'"reset"'}]}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"((event: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onTouchStart:{defaultValue:null,description:"",name:"onTouchStart",required:!1,type:{name:"((event: TouchEvent<HTMLButtonElement> | MouseEvent<Element, MouseEvent>) => void)"}},onTouchEnd:{defaultValue:null,description:"",name:"onTouchEnd",required:!1,type:{name:"((event: TouchEvent<HTMLButtonElement> | MouseEvent<Element, MouseEvent>) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Button.tsx#Button"]={docgenInfo:Button.__docgenInfo,name:"Button",path:"src/components/ui/Button.tsx#Button"})}catch(__react_docgen_typescript_loader_error){}},"./src/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WithChatHistory:()=>WithChatHistory,WithInitialContextAndQuestion:()=>WithInitialContextAndQuestion,WithInitialContextAndQuestionFromIntegration:()=>WithInitialContextAndQuestionFromIntegration,WithMaxTextareaCharacters:()=>WithMaxTextareaCharacters,WithPiiDetection:()=>WithPiiDetection,WithPreviousSession:()=>WithPreviousSession,WithPrivateAgent:()=>WithPrivateAgent,WithUploadWithMaxTotalMessagePayload:()=>WithUploadWithMaxTotalMessagePayload,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"General/Functionalities",component:_index__WEBPACK_IMPORTED_MODULE_1__.A,argTypes:{AZURE_COGNITIVE_SERVICES_TTS_KEY:{control:{type:"text"}}},parameters:{controls:{expanded:!0},layout:"fullscreen"}},Template=args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index__WEBPACK_IMPORTED_MODULE_1__.A,{...args});Template.displayName="Template";const WithInitialContextAndQuestion=Template.bind({});WithInitialContextAndQuestion.args={ownerUserName:"nzambello",memoriName:"Nicola",tenantID:"www.aisuru.com",engineURL:"https://engine.memori.ai",apiURL:"https://backend.memori.ai",baseURL:"https://www.aisuru.com",uiLang:"IT",spokenLang:"IT",enableAudio:!0,autoStart:!0,initialQuestion:"Ciao",context:{STORYBOOK:"true"}};const WithInitialContextAndQuestionFromIntegration=Template.bind({});WithInitialContextAndQuestionFromIntegration.args={ownerUserName:"nzambello",memoriName:"Nicola",tenantID:"www.aisuru.com",engineURL:"https://engine.memori.ai",apiURL:"https://backend.memori.ai",baseURL:"https://www.aisuru.com",uiLang:"IT",spokenLang:"IT",enableAudio:!0,autoStart:!0,integration:{integrationID:"test",customData:JSON.stringify({initialQuestion:"Ciao",contextVars:"STORYBOOK:true"})}};const WithPreviousSession=Template.bind({});WithPreviousSession.args={ownerUserName:"nzambello",memoriName:"Nicola",tenantID:"www.aisuru.com",engineURL:"https://engine.memori.ai",apiURL:"https://backend.memori.ai",baseURL:"https://www.aisuru.com",sessionID:"1234567890",uiLang:"IT",spokenLang:"IT"};const WithChatHistory=Template.bind({});WithChatHistory.args={ownerUserName:"nzambello",memoriName:"Nicola",tenantID:"www.aisuru.com",engineURL:"https://engine.memori.ai",apiURL:"https://backend.memori.ai",baseURL:"https://www.aisuru.com",uiLang:"IT",spokenLang:"IT",showChatHistory:!0};const WithUploadWithMaxTotalMessagePayload=Template.bind({});WithUploadWithMaxTotalMessagePayload.args={ownerUserName:"nzambello",memoriName:"Nicola",tenantID:"www.aisuru.com",engineURL:"https://engine.memori.ai",apiURL:"https://backend.memori.ai",baseURL:"https://www.aisuru.com",uiLang:"IT",spokenLang:"IT",enableAudio:!0,showUpload:!0,maxTotalMessagePayload:3e5};const WithMaxTextareaCharacters=Template.bind({});WithMaxTextareaCharacters.args={ownerUserName:"nzambello",memoriName:"Nicola",tenantID:"www.aisuru.com",engineURL:"https://engine.memori.ai",apiURL:"https://backend.memori.ai",baseURL:"https://www.aisuru.com",uiLang:"IT",spokenLang:"IT",enableAudio:!0,showUpload:!0,maxTextareaCharacters:500};const WithPrivateAgent=Template.bind({});WithPrivateAgent.args={memoriName:"Test Private",ownerUserName:"Andrea-Patini",memoriID:"c58cd5f9-43c4-4a3b-9fb6-56aedf58ff7a",ownerUserID:"91dbc9ba-b684-4fbe-9828-b5980af6cda9",tenantID:"aisuru-staging.aclambda.online",apiURL:"https://backend-staging.memori.ai/api/v2",engineURL:"https://engine-staging.memori.ai/memori/v2",baseURL:"https://aisuru-staging.aclambda.online",uiLang:"EN",spokenLang:"IT",layout:"FULLPAGE",multilingual:!0,showSettings:!0,showShare:!0,integrationID:"19f95abe-3493-4568-971d-14471480e5bc"};const WithPiiDetection=Template.bind({});WithPiiDetection.args={memoriName:"Layout Storybook",ownerUserName:"andrea.patini",memoriID:"ae20fc5a-cc15-4db9-b7dd-2cd4a621b85e",ownerUserID:"91dbc9ba-b684-4fbe-9828-b5980af6cda9",tenantID:"aisuru-staging.aclambda.online",engineURL:"https://engine-staging.memori.ai/memori/v2",apiURL:"https://backend-staging.memori.ai/api/v2",uiLang:"IT",spokenLang:"IT",integration:{integrationID:"pii-demo",customData:JSON.stringify({layout:{name:"DEFAULT",piiDetection:{enabled:!0,rules:[{id:"email",label:{it:"Email",en:"Email"},pattern:"\\b[A-Za-z0-9._%+\\-]+@[A-Za-z0-9.\\-]+\\.[A-Za-z]{2,}\\b",message:{it:"Il messaggio contiene un indirizzo email.",en:"The message contains an email address."}},{id:"iban",label:{it:"IBAN",en:"IBAN"},pattern:"\\b[A-Z]{2}\\d{2}(?:[ ]?[A-Z0-9]{4}){3,7}(?:[ ]?[A-Z0-9]{1,4})?\\b",message:{it:"Il messaggio contiene un codice IBAN.",en:"The message contains an IBAN code."}}],errorMessage:{it:"Il messaggio contiene dati personali o sensibili.",en:"The message contains personal or sensitive data."}}},lang:"it"})}},WithInitialContextAndQuestion.parameters={...WithInitialContextAndQuestion.parameters,docs:{...WithInitialContextAndQuestion.parameters?.docs,source:{originalSource:"args => <Memori {...args} />",...WithInitialContextAndQuestion.parameters?.docs?.source}}},WithInitialContextAndQuestionFromIntegration.parameters={...WithInitialContextAndQuestionFromIntegration.parameters,docs:{...WithInitialContextAndQuestionFromIntegration.parameters?.docs,source:{originalSource:"args => <Memori {...args} />",...WithInitialContextAndQuestionFromIntegration.parameters?.docs?.source}}},WithPreviousSession.parameters={...WithPreviousSession.parameters,docs:{...WithPreviousSession.parameters?.docs,source:{originalSource:"args => <Memori {...args} />",...WithPreviousSession.parameters?.docs?.source}}},WithChatHistory.parameters={...WithChatHistory.parameters,docs:{...WithChatHistory.parameters?.docs,source:{originalSource:"args => <Memori {...args} />",...WithChatHistory.parameters?.docs?.source}}},WithUploadWithMaxTotalMessagePayload.parameters={...WithUploadWithMaxTotalMessagePayload.parameters,docs:{...WithUploadWithMaxTotalMessagePayload.parameters?.docs,source:{originalSource:"args => <Memori {...args} />",...WithUploadWithMaxTotalMessagePayload.parameters?.docs?.source}}},WithMaxTextareaCharacters.parameters={...WithMaxTextareaCharacters.parameters,docs:{...WithMaxTextareaCharacters.parameters?.docs,source:{originalSource:"args => <Memori {...args} />",...WithMaxTextareaCharacters.parameters?.docs?.source}}},WithPrivateAgent.parameters={...WithPrivateAgent.parameters,docs:{...WithPrivateAgent.parameters?.docs,source:{originalSource:"args => <Memori {...args} />",...WithPrivateAgent.parameters?.docs?.source}}},WithPiiDetection.parameters={...WithPiiDetection.parameters,docs:{...WithPiiDetection.parameters?.docs,source:{originalSource:"args => <Memori {...args} />",...WithPiiDetection.parameters?.docs?.source},description:{story:"Story: PII detection via integration config only. Send a message containing an email (e.g. test@example.com) or IBAN to see the red error bubble.",...WithPiiDetection.parameters?.docs?.description}}};const __namedExportsOrder=["WithInitialContextAndQuestion","WithInitialContextAndQuestionFromIntegration","WithPreviousSession","WithChatHistory","WithUploadWithMaxTotalMessagePayload","WithMaxTextareaCharacters","WithPrivateAgent","WithPiiDetection"];try{WithPiiDetection.displayName="WithPiiDetection",WithPiiDetection.__docgenInfo={description:"Story: PII detection via integration config only. Send a message containing an email (e.g. test@example.com) or IBAN to see the red error bubble.",displayName:"WithPiiDetection",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.stories.tsx#WithPiiDetection"]={docgenInfo:WithPiiDetection.__docgenInfo,name:"WithPiiDetection",path:"src/index.stories.tsx#WithPiiDetection"})}catch(__react_docgen_typescript_loader_error){}},"./src/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>src_0});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),esm=__webpack_require__("./node_modules/@memori.ai/memori-api-client/esm/index.js"),MemoriWidget=__webpack_require__("./src/components/MemoriWidget/MemoriWidget.tsx"),visemeContext=__webpack_require__("./src/context/visemeContext.tsx"),dist=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),utils=__webpack_require__("./src/helpers/utils.ts"),i18n=__webpack_require__("./src/i18n.ts"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),I18nWrapper=__webpack_require__("./src/I18nWrapper.tsx"),ArtifactContext=__webpack_require__("./src/components/MemoriArtifactSystem/context/ArtifactContext.tsx");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const getParsedContext=context=>{if(!context)return{};const parsedContext=context?.split(",")?.reduce((acc,cur)=>{const[key,value]=cur.split(":").map(t=>t.trim());return{...acc,[key]:value}},{});return parsedContext},Memori=({ownerUserName,ownerUserID,memoriName,memoriID,integration,integrationID,tenantID,secretToken,sessionID,layout,customLayout,showShare,showCopyButton=!0,showTranslationOriginal=!1,showSettings,showTypingText=!1,showClear=!1,showOnlyLastMessages,showInputs=!0,showDates=!1,showContextPerLine=!1,showUpload,showLogin,showReasoning,height="100%",baseURL,apiURL="https://backend.memori.ai",engineURL="https://engine.memori.ai",tag,pin,context,initialQuestion,showChatHistory=!0,uiLang,spokenLang,multilingual,authToken,enableAudio,defaultSpeakerActive=!0,disableTextEnteredEvents=!1,onStateChange,additionalInfo,customMediaRenderer,additionalSettings,userAvatar,useMathFormatting=!1,autoStart,applyVarsToRoot=!1,__WEBCOMPONENT__=!1,maxTotalMessagePayload,maxTextareaCharacters})=>{const[memori,setMemori]=(0,react.useState)(),[tenant,setTenant]=(0,react.useState)(),[provider,setProvider]=(0,react.useState)(),[sessionId,setSessionId]=(0,react.useState)(),{t}=(0,useTranslation.B)();if(!(memoriID&&ownerUserID||memoriName&&ownerUserName))throw new Error("Identifier pair required: please provide either memoriID and ownerUserID or memoriName and ownerUserName");const client=(0,esm.A)(apiURL,engineURL),fetchSpeechKey=(0,react.useCallback)(async()=>{const url=baseURL||(tenantID.startsWith("https://")?tenantID:`https://${tenantID}`);try{const result=await fetch(`${url}/api/speechkey?tenant=${tenantID}`,{method:"GET",headers:{"Content-Type":"application/json"}}),data=await result.json();data.provider?setProvider(data.provider):console.warn("Provider not found in speech key response")}catch(error){console.error("Error fetching speech key:",error)}},[baseURL,tenantID]);(0,react.useEffect)(()=>{fetchSpeechKey()},[]);const fetchMemori=(0,react.useCallback)(async()=>{if(memoriID&&ownerUserID){const{memori,...resp}=await client.backend.getMemoriByUserAndId(tenantID,ownerUserID,memoriID);0===resp.resultCode&&memori?setMemori(memori):console.error("[MEMORI]",resp,memori)}else if(memoriName&&ownerUserName){const{memori,...resp}=await client.backend.getMemori(tenantID,ownerUserName,memoriName);0===resp.resultCode&&memori?(!memori.ownerUserID&&ownerUserID&&(memori.ownerUserID=ownerUserID),setMemori(memori)):console.error("[MEMORI]",resp,memori)}},[memoriID,ownerUserID,memoriName,ownerUserName,tenantID]);(0,react.useEffect)(()=>{fetchMemori()},[fetchMemori,tenantID]);const fetchTenant=(0,react.useCallback)(async()=>{const{tenant,...resp}=await client.backend.tenant.getTenant(tenantID);tenant&&0===resp.resultCode?setTenant(tenant):console.debug("[TENANT]",resp,tenant)},[tenantID,apiURL]);(0,react.useEffect)(()=>{fetchTenant()},[fetchTenant]),(0,react.useEffect)(()=>{const targetNode=document.querySelector(`memori-client[memoriname="${memori?.name}"]`)||document.querySelector(`memori-client[memoriid="${memori?.memoriID}"]`)||document.querySelector("memori-client");if(!targetNode)return;const observer=new MutationObserver((mutationList,_observer)=>{for(const mutation of mutationList)if("attributes"===mutation.type){const target="MEMORI-CLIENT"===mutation.target.nodeName?mutation.target:mutation.target.parentElement,targetSessionId=target.getAttribute("sessionid")||void 0;target&&targetSessionId&&setSessionId(targetSessionId)}});return observer.observe(targetNode,{attributes:!0,childList:!1,subtree:!1}),()=>{observer.disconnect()}},[]),(0,react.useEffect)(()=>{if(uiLang)i18n.A.changeLanguage(uiLang.toLowerCase());else{const{lng,fallbackLng}=(()=>{const browserLanguage=navigator.language;if(browserLanguage){let lng=browserLanguage.split("-")[0];if(["en","it"].includes(lng))return{lng,fallbackLng:"en"===lng?"it":"en"}}return{lng:"en",fallbackLng:"it"}})();i18n.A.changeLanguage(lng).catch(()=>{i18n.A.changeLanguage(fallbackLng)})}},[uiLang]);const layoutIntegration=integration??memori?.integrations?.find(i=>integrationID?i.integrationID===integrationID:!!i.publish&&"LANDING_EXPERIENCE"===i.type),layoutIntegrationConfig=(0,utils.N8)(layoutIntegration?.customData??"{}"),whiteListedDomains=[tenant?.name,...tenant?.aliases||[],...layoutIntegrationConfig.whiteListedDomains||[]];if(layoutIntegrationConfig?.whiteListedDomains?.length&&"undefined"!=typeof window&&!whiteListedDomains.some(domain=>new RegExp(domain).test(window.location.hostname)))return null;const clientAttributes=layoutIntegrationConfig.ignoreClientAttributes??!1?{initialContextVars:getParsedContext(layoutIntegrationConfig.contextVars),initialQuestion:layoutIntegrationConfig.initialQuestion,showLogin:memori?.enableDeepThought,memoriLang:memori?.culture?.split("-")?.[0],autoStart:"HIDDEN_CHAT"===layout||"WEBSITE_ASSISTANT"!==layout&&autoStart}:{...tag&&pin?{personification:{tag,pin}}:{},multilingual,showCopyButton,showTranslationOriginal,showSettings,showChatHistory,showShare,showTypingText,showClear,showLogin:showLogin??memori?.enableDeepThought,showUpload,showReasoning,showContextPerLine,initialContextVars:context??getParsedContext(layoutIntegrationConfig.contextVars),initialQuestion:initialQuestion??layoutIntegrationConfig.initialQuestion,autoStart:"WEBSITE_ASSISTANT"!==layout&&(void 0!==autoStart?autoStart:"HIDDEN_CHAT"===layout||autoStart),enableAudio,defaultSpeakerActive,useMathFormatting,memoriLang:uiLang??spokenLang??memori?.culture?.split("-")?.[0]},[pulseSent,setPulseSent]=(0,react.useState)(!1),sendPulse=(0,react.useCallback)(()=>{if((memori?.memoriID||memoriID)&&!pulseSent){let origin=window?.location.origin;if(!origin||origin.includes("localhost")||origin.includes("memori-ai.github.io"))return void setPulseSent(!0);setPulseSent(!0),fetch("https://pulse.aisuru.com/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pulse:{clientType:__WEBCOMPONENT__?"memori-webcomponent":"memori-react",clientVersion:"v8.21.0",userAgent:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,memoriID:memori?.memoriID??memoriID,tenant:tenantID,referrer:origin}})})}},[memori?.memoriID,memoriID,tenantID,__WEBCOMPONENT__,pulseSent]);return(0,react.useEffect)(()=>{sendPulse()},[sendPulse]),(0,jsx_runtime.jsx)(I18nWrapper.A,{children:(0,jsx_runtime.jsx)(visemeContext.fy,{children:(0,jsx_runtime.jsxs)(ArtifactContext.k,{children:[(0,jsx_runtime.jsx)(dist.l$,{position:"top-center",reverseOrder:!0}),memori?(0,jsx_runtime.jsx)(MemoriWidget.A,{layout,customLayout,height,baseUrl:baseURL||(tenantID.startsWith("https://")||tenantID.startsWith("http://")?tenantID:`https://${tenantID}`),apiURL,engineURL,memori:{...memori,secretToken},__WEBCOMPONENT__,ownerUserName:ownerUserName??memori.ownerUserName,ownerUserID:ownerUserID??memori.ownerUserID,tenant,tenantID,sessionID:sessionID??sessionId,secret:secretToken,ttsProvider:provider||"azure",integration:layoutIntegration,authToken,onStateChange,additionalInfo,customMediaRenderer,additionalSettings,userAvatar,applyVarsToRoot,maxTotalMessagePayload,maxTextareaCharacters,disableTextEnteredEvents,...clientAttributes,showOnlyLastMessages,showInputs,showDates}):(0,jsx_runtime.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,jsx_runtime.jsxs)("p",{style:{textAlign:"center",margin:"2rem auto",textTransform:"capitalize"},children:[t("loading")||"Loading","..."]})})]})})})};Memori.displayName="Memori",Memori.propTypes={memoriName:prop_types_default().string,memoriID:prop_types_default().string,ownerUserName:prop_types_default().string,ownerUserID:prop_types_default().string,integrationID:prop_types_default().string,integration:prop_types_default().any,tenantID:prop_types_default().string.isRequired,secretToken:prop_types_default().string,sessionID:prop_types_default().string,layout:prop_types_default().oneOf(["DEFAULT","FULLPAGE","TOTEM","WEBSITE_ASSISTANT","CHAT","HIDDEN_CHAT","ZOOMED_FULL_BODY"]),customLayout:prop_types_default().any,showShare:prop_types_default().bool,showCopyButton:prop_types_default().bool,showTranslationOriginal:prop_types_default().bool,showInputs:prop_types_default().bool,showDates:prop_types_default().bool,showContextPerLine:prop_types_default().bool,showSettings:prop_types_default().bool,showClear:prop_types_default().bool,showOnlyLastMessages:prop_types_default().bool,showTypingText:prop_types_default().bool,showLogin:prop_types_default().bool,showUpload:prop_types_default().bool,showReasoning:prop_types_default().bool,height:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),baseURL:prop_types_default().string,apiURL:prop_types_default().string,engineURL:prop_types_default().string,tag:prop_types_default().string,pin:prop_types_default().string,context:prop_types_default().objectOf(prop_types_default().any),initialQuestion:prop_types_default().string,uiLang:prop_types_default().oneOf(["en","it","fr","es","de","EN","IT","FR","ES","DE"]),spokenLang:prop_types_default().string,multilingual:prop_types_default().bool,authToken:prop_types_default().string,enableAudio:prop_types_default().bool,defaultSpeakerActive:prop_types_default().bool,disableTextEnteredEvents:prop_types_default().bool,onStateChange:prop_types_default().func,additionalInfo:prop_types_default().objectOf(prop_types_default().any),customMediaRenderer:prop_types_default().func,additionalSettings:prop_types_default().any,userAvatar:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().any]),useMathFormatting:prop_types_default().bool,autoStart:prop_types_default().bool,applyVarsToRoot:prop_types_default().bool,maxTotalMessagePayload:prop_types_default().number,maxTextareaCharacters:prop_types_default().number};const src_0=Memori;try{src.displayName="src",src.__docgenInfo={description:"",displayName:"src",props:{memoriName:{defaultValue:null,description:"",name:"memoriName",required:!1,type:{name:"string | null"}},memoriID:{defaultValue:null,description:"",name:"memoriID",required:!1,type:{name:"string | null"}},ownerUserName:{defaultValue:null,description:"",name:"ownerUserName",required:!1,type:{name:"string | null"}},ownerUserID:{defaultValue:null,description:"",name:"ownerUserID",required:!1,type:{name:"string | null"}},integration:{defaultValue:null,description:"",name:"integration",required:!1,type:{name:"Integration"}},integrationID:{defaultValue:null,description:"",name:"integrationID",required:!1,type:{name:"string"}},tenantID:{defaultValue:null,description:"",name:"tenantID",required:!0,type:{name:"string"}},secretToken:{defaultValue:null,description:"",name:"secretToken",required:!1,type:{name:"string"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},layout:{defaultValue:null,description:"",name:"layout",required:!1,type:{name:"enum",value:[{value:'"DEFAULT"'},{value:'"FULLPAGE"'},{value:'"TOTEM"'},{value:'"CHAT"'},{value:'"WEBSITE_ASSISTANT"'},{value:'"HIDDEN_CHAT"'},{value:'"ZOOMED_FULL_BODY"'}]}},customLayout:{defaultValue:null,description:"",name:"customLayout",required:!1,type:{name:"FC<LayoutProps>"}},showShare:{defaultValue:null,description:"",name:"showShare",required:!1,type:{name:"boolean"}},showChatHistory:{defaultValue:{value:"true"},description:"",name:"showChatHistory",required:!1,type:{name:"boolean"}},showCopyButton:{defaultValue:{value:"true"},description:"",name:"showCopyButton",required:!1,type:{name:"boolean"}},showTranslationOriginal:{defaultValue:{value:"false"},description:"",name:"showTranslationOriginal",required:!1,type:{name:"boolean"}},showInputs:{defaultValue:{value:"true"},description:"",name:"showInputs",required:!1,type:{name:"boolean"}},showDates:{defaultValue:{value:"false"},description:"",name:"showDates",required:!1,type:{name:"boolean"}},showContextPerLine:{defaultValue:{value:"false"},description:"",name:"showContextPerLine",required:!1,type:{name:"boolean"}},showSettings:{defaultValue:null,description:"",name:"showSettings",required:!1,type:{name:"boolean"}},__WEBCOMPONENT__:{defaultValue:{value:"false"},description:"",name:"__WEBCOMPONENT__",required:!1,type:{name:"boolean"}},showClear:{defaultValue:{value:"false"},description:"",name:"showClear",required:!1,type:{name:"boolean"}},showOnlyLastMessages:{defaultValue:null,description:"",name:"showOnlyLastMessages",required:!1,type:{name:"boolean"}},showTypingText:{defaultValue:{value:"false"},description:"",name:"showTypingText",required:!1,type:{name:"boolean"}},showLogin:{defaultValue:null,description:"",name:"showLogin",required:!1,type:{name:"boolean"}},showUpload:{defaultValue:null,description:"",name:"showUpload",required:!1,type:{name:"boolean"}},showReasoning:{defaultValue:null,description:"",name:"showReasoning",required:!1,type:{name:"boolean"}},height:{defaultValue:{value:"100%"},description:"",name:"height",required:!1,type:{name:"string | number"}},baseURL:{defaultValue:null,description:"",name:"baseURL",required:!1,type:{name:"string"}},apiURL:{defaultValue:{value:"https://backend.memori.ai"},description:"",name:"apiURL",required:!1,type:{name:"string"}},engineURL:{defaultValue:{value:"https://engine.memori.ai"},description:"",name:"engineURL",required:!1,type:{name:"string"}},tag:{defaultValue:null,description:"",name:"tag",required:!1,type:{name:"string"}},pin:{defaultValue:null,description:"",name:"pin",required:!1,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!1,type:{name:"{ [key: string]: string; }"}},initialQuestion:{defaultValue:null,description:"",name:"initialQuestion",required:!1,type:{name:"string"}},uiLang:{defaultValue:null,description:"",name:"uiLang",required:!1,type:{name:"enum",value:[{value:'"en"'},{value:'"it"'},{value:'"fr"'},{value:'"es"'},{value:'"de"'},{value:'"IT"'},{value:'"EN"'},{value:'"FR"'},{value:'"ES"'},{value:'"DE"'}]}},spokenLang:{defaultValue:null,description:"",name:"spokenLang",required:!1,type:{name:"string"}},multilingual:{defaultValue:null,description:"",name:"multilingual",required:!1,type:{name:"boolean"}},authToken:{defaultValue:null,description:"",name:"authToken",required:!1,type:{name:"string"}},enableAudio:{defaultValue:null,description:"",name:"enableAudio",required:!1,type:{name:"boolean"}},defaultSpeakerActive:{defaultValue:{value:"true"},description:"",name:"defaultSpeakerActive",required:!1,type:{name:"boolean"}},disableTextEnteredEvents:{defaultValue:{value:"false"},description:"",name:"disableTextEnteredEvents",required:!1,type:{name:"boolean"}},onStateChange:{defaultValue:null,description:"",name:"onStateChange",required:!1,type:{name:"((state?: DialogState) => void)"}},additionalInfo:{defaultValue:null,description:"",name:"additionalInfo",required:!1,type:{name:"({ [key: string]: string; loginToken?: string; language?: string | undefined; referral?: string | undefined; timeZoneOffset?: string | undefined; } & { [key: string]: string; }) | undefined"}},customMediaRenderer:{defaultValue:null,description:"",name:"customMediaRenderer",required:!1,type:{name:"((mimeType: string) => Element | null)"}},additionalSettings:{defaultValue:null,description:"",name:"additionalSettings",required:!1,type:{name:"Element | null"}},userAvatar:{defaultValue:null,description:"",name:"userAvatar",required:!1,type:{name:"string | Element"}},useMathFormatting:{defaultValue:{value:"false"},description:"",name:"useMathFormatting",required:!1,type:{name:"boolean"}},autoStart:{defaultValue:null,description:"",name:"autoStart",required:!1,type:{name:"boolean"}},applyVarsToRoot:{defaultValue:{value:"false"},description:"",name:"applyVarsToRoot",required:!1,type:{name:"boolean"}},maxTotalMessagePayload:{defaultValue:null,description:"Override total document payload and per-document content limit (character count). Default from constants (200000).",name:"maxTotalMessagePayload",required:!1,type:{name:"number"}},maxTextareaCharacters:{defaultValue:null,description:'Max characters allowed in the chat textarea. When set, shows a counter (e.g. "0 / 500") and enforces that pasted content + existing text does not exceed this limit.',name:"maxTextareaCharacters",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.tsx#src"]={docgenInfo:src.__docgenInfo,name:"src",path:"src/index.tsx#src"})}catch(__react_docgen_typescript_loader_error){}}}]);