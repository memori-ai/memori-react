"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[7235],{"./src/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Anonymous:()=>Anonymous,DemoSophia:()=>DemoSophia,DemoStefano:()=>DemoStefano,Localhost:()=>Localhost,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),esm=__webpack_require__("./node_modules/@memori.ai/memori-api-client/esm/index.js"),MemoriWidget=__webpack_require__("./src/components/MemoriWidget/MemoriWidget.tsx"),i18n=__webpack_require__("./src/i18n.ts"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Memori=({ownerUserName,ownerUserID,memoriName,memoriID,integrationID,tenantID,secretToken,sessionID,layout="DEFAULT",customLayout,showShare=!0,showSettings=!0,showInstruct=!1,height="100%",baseURL,apiURL="https://backend.memori.ai",tag,pin,context,initialQuestion,uiLang,spokenLang,multilingual=!1,authToken,AZURE_COGNITIVE_SERVICES_TTS_KEY,onStateChange})=>{const[memori,setMemori]=(0,react.useState)(),[speechKey,setSpeechKey]=(0,react.useState)(AZURE_COGNITIVE_SERVICES_TTS_KEY),{t}=(0,useTranslation.$)();if(!(memoriID&&ownerUserID||memoriName&&ownerUserName))throw new Error("Identifier pair required: please provide either memoriID and ownerUserID or memoriName and ownerUserName");const client=(0,esm.Z)(apiURL),fetchSpeechKey=(0,react.useCallback)((async()=>{const url=baseURL||(tenantID.startsWith("https://")?tenantID:`https://${tenantID}`),result=await fetch(`${url}/api/speechkey`),data=await result.json();data.AZURE_COGNITIVE_SERVICES_TTS_KEY&&setSpeechKey(data.AZURE_COGNITIVE_SERVICES_TTS_KEY)}),[]);(0,react.useEffect)((()=>{AZURE_COGNITIVE_SERVICES_TTS_KEY||fetchSpeechKey()}),[AZURE_COGNITIVE_SERVICES_TTS_KEY]);const fetchMemori=(0,react.useCallback)((async()=>{if(memoriID&&ownerUserID){const{memori,...resp}=await client.backend.getMemoriByUserAndId(tenantID,ownerUserID,memoriID);0===resp.resultCode&&memori?setMemori(memori):console.error("[MEMORI]",resp,memori)}else if(memoriName&&ownerUserName){const{memori,...resp}=await client.backend.getMemori(tenantID,ownerUserName,memoriName);0===resp.resultCode&&memori?setMemori(memori):console.error("[MEMORI]",resp,memori)}}),[memoriID,ownerUserID,memoriName,ownerUserName,tenantID]);return(0,react.useEffect)((()=>{fetchMemori()}),[fetchMemori,tenantID]),(0,react.useEffect)((()=>{if(uiLang)i18n.Z.changeLanguage(uiLang.toLowerCase());else{const{lng,fallbackLng}=(()=>{const browserLanguage=navigator.language;if(browserLanguage){let lng=browserLanguage.split("-")[0];if(["en","it"].includes(lng))return{lng,fallbackLng:"en"===lng?"it":"en"}}return{lng:"en",fallbackLng:"it"}})();i18n.Z.changeLanguage(lng).catch((()=>{i18n.Z.changeLanguage(fallbackLng)}))}}),[uiLang]),memori?(0,jsx_runtime.jsx)(MemoriWidget.Z,{layout,customLayout,height,baseUrl:baseURL||(tenantID.startsWith("https://")?tenantID:`https://${tenantID}`),apiUrl:apiURL,memori:{...memori,secretToken},memoriLang:spokenLang??memori.culture?.split("-")?.[0],multilingual,tenant:{id:tenantID,theme:"twincreator",config:{name:tenantID,showNewUser:!1,requirePosition:!!memori.needsPosition}},secret:secretToken,sessionID,showShare,showSettings,showInstruct,integration:memori?.integrations?.find((i=>integrationID?i.integrationID===integrationID:!!i.publish&&"LANDING_EXPERIENCE"===i.type)),initialContextVars:context,initialQuestion,authToken,AZURE_COGNITIVE_SERVICES_TTS_KEY:speechKey||AZURE_COGNITIVE_SERVICES_TTS_KEY,onStateChange,...tag&&pin?{personification:{tag,pin}}:{}}):(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("p",{style:{textAlign:"center",margin:"2rem auto"},children:[t("loading"),"..."]})})};Memori.propTypes={memoriName:prop_types_default().string,memoriID:prop_types_default().string,ownerUserName:prop_types_default().string,ownerUserID:prop_types_default().string,integrationID:prop_types_default().string,tenantID:prop_types_default().string.isRequired,secretToken:prop_types_default().string,sessionID:prop_types_default().string,showShare:prop_types_default().bool,showSettings:prop_types_default().bool,showInstruct:prop_types_default().bool,layout:prop_types_default().oneOf(["DEFAULT","FULLPAGE","TOTEM"]),height:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),baseURL:prop_types_default().string,apiURL:prop_types_default().string,tag:prop_types_default().string,pin:prop_types_default().string,context:prop_types_default().objectOf(prop_types_default().any),initialQuestion:prop_types_default().string,uiLang:prop_types_default().oneOf(["en","it"]),spokenLang:prop_types_default().string,authToken:prop_types_default().string,AZURE_COGNITIVE_SERVICES_TTS_KEY:prop_types_default().string,onStateChange:prop_types_default().func};const src_0=Memori;try{src.displayName="src",src.__docgenInfo={description:"",displayName:"src",props:{memoriName:{defaultValue:null,description:"",name:"memoriName",required:!1,type:{name:"string | null"}},memoriID:{defaultValue:null,description:"",name:"memoriID",required:!1,type:{name:"string | null"}},ownerUserName:{defaultValue:null,description:"",name:"ownerUserName",required:!1,type:{name:"string | null"}},ownerUserID:{defaultValue:null,description:"",name:"ownerUserID",required:!1,type:{name:"string | null"}},integrationID:{defaultValue:null,description:"",name:"integrationID",required:!1,type:{name:"string"}},tenantID:{defaultValue:null,description:"",name:"tenantID",required:!0,type:{name:"string"}},secretToken:{defaultValue:null,description:"",name:"secretToken",required:!1,type:{name:"string"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},layout:{defaultValue:{value:"DEFAULT"},description:"",name:"layout",required:!1,type:{name:"enum",value:[{value:'"DEFAULT"'},{value:'"FULLPAGE"'},{value:'"TOTEM"'},{value:'"CHAT"'}]}},customLayout:{defaultValue:null,description:"",name:"customLayout",required:!1,type:{name:"FC<LayoutProps>"}},showShare:{defaultValue:{value:"true"},description:"",name:"showShare",required:!1,type:{name:"boolean"}},showSettings:{defaultValue:{value:"true"},description:"",name:"showSettings",required:!1,type:{name:"boolean"}},showInstruct:{defaultValue:{value:"false"},description:"",name:"showInstruct",required:!1,type:{name:"boolean"}},height:{defaultValue:{value:"100%"},description:"",name:"height",required:!1,type:{name:"string | number"}},baseURL:{defaultValue:null,description:"",name:"baseURL",required:!1,type:{name:"string"}},apiURL:{defaultValue:{value:"https://backend.memori.ai"},description:"",name:"apiURL",required:!1,type:{name:"string"}},tag:{defaultValue:null,description:"",name:"tag",required:!1,type:{name:"string"}},pin:{defaultValue:null,description:"",name:"pin",required:!1,type:{name:"string"}},context:{defaultValue:null,description:"",name:"context",required:!1,type:{name:"{ [key: string]: string; }"}},initialQuestion:{defaultValue:null,description:"",name:"initialQuestion",required:!1,type:{name:"string"}},uiLang:{defaultValue:null,description:"",name:"uiLang",required:!1,type:{name:"enum",value:[{value:'"en"'},{value:'"it"'}]}},spokenLang:{defaultValue:null,description:"",name:"spokenLang",required:!1,type:{name:"string"}},multilingual:{defaultValue:{value:"false"},description:"",name:"multilingual",required:!1,type:{name:"boolean"}},authToken:{defaultValue:null,description:"",name:"authToken",required:!1,type:{name:"string"}},AZURE_COGNITIVE_SERVICES_TTS_KEY:{defaultValue:null,description:"",name:"AZURE_COGNITIVE_SERVICES_TTS_KEY",required:!1,type:{name:"string"}},onStateChange:{defaultValue:null,description:"",name:"onStateChange",required:!1,type:{name:"((state?: DialogState) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.tsx#src"]={docgenInfo:src.__docgenInfo,name:"src",path:"src/index.tsx#src"})}catch(__react_docgen_typescript_loader_error){}const index_stories={title:"General/Default",component:src_0,argTypes:{AZURE_COGNITIVE_SERVICES_TTS_KEY:{control:{type:"text"}}},parameters:{controls:{expanded:!0},layout:"fullscreen"}},Template=args=>(0,jsx_runtime.jsx)(src_0,{...args});Template.displayName="Template";const Anonymous=Template.bind({});Anonymous.args={ownerUserName:"nzambello",memoriName:"Nicola",tenantID:"app.memorytwin.com",apiURL:"https://backend.memori.ai",baseURL:"https://app.memorytwin.com",uiLang:"it",showShare:!0,showSettings:!0};const Localhost=Template.bind({});Localhost.args={memoriName:"test memori",ownerUserName:"nicola",memoriID:"1a9c75e8-57aa-4ce3-8ea5-256185fa79a7",ownerUserID:"04a8cff9-13d6-4367-9cb2-72b9af9ee494",tenantID:"app.memorytwin.com",apiURL:"http://localhost:7778",baseURL:"http://localhost:3000",uiLang:"EN",lang:"IT",layout:"FULLPAGE",showShare:"true",integrationID:"82f017cc-450b-4c47-acf5-47910d336ce9"};const DemoSophia=Template.bind({});DemoSophia.args={layout:"TOTEM",memoriName:"Sophia",ownerUserName:"francescoimpellizzeri",memoriID:"57405959-a2c5-4499-adb8-bb8dcc848ad5",ownerUserID:"44ccefdb-d7a2-447e-9851-2a76be055a40",tenantID:"nextpresent.aclambda.online",apiURL:"https://backend.memori.ai",baseURL:"https://nextpresent.aclambda.online",uiLang:"it",lang:"it",showShare:!0,showSettings:!0,integrationID:"d10bbffd-26f3-4614-a092-15b215d04ffa",initialQuestion:"Welcome Totem",contextVars:"CONTEXT:TOTEM"};const DemoStefano=Template.bind({});DemoStefano.args={layout:"TOTEM",memoriName:"Stefano Zingoni",ownerUserName:"roberta.bianchi",memoriID:"d6df4c75-8dfb-4e6d-b19f-193fa8a9bcce",ownerUserID:"b242160e-c19c-468f-b7f8-b2dc1ce51045",tenantID:"gruppoe.aclambda.online",apiURL:"https://backend.memori.ai",baseURL:"https://gruppoe.aclambda.online",uiLang:"it",lang:"it",showShare:!0,showSettings:!0,contextVars:"CONTEXT:TOTEM",integrationID:"5712601d-6174-45e7-bfb1-b4ac71c4ff80"};const __namedExportsOrder=["Anonymous","Localhost","DemoSophia","DemoStefano"];Anonymous.parameters={...Anonymous.parameters,docs:{...Anonymous.parameters?.docs,source:{originalSource:"args => /*#__PURE__*/_jsx(Memori, {\n  ...args\n})",...Anonymous.parameters?.docs?.source}}},Localhost.parameters={...Localhost.parameters,docs:{...Localhost.parameters?.docs,source:{originalSource:"args => /*#__PURE__*/_jsx(Memori, {\n  ...args\n})",...Localhost.parameters?.docs?.source}}},DemoSophia.parameters={...DemoSophia.parameters,docs:{...DemoSophia.parameters?.docs,source:{originalSource:"args => /*#__PURE__*/_jsx(Memori, {\n  ...args\n})",...DemoSophia.parameters?.docs?.source}}},DemoStefano.parameters={...DemoStefano.parameters,docs:{...DemoStefano.parameters?.docs,source:{originalSource:"args => /*#__PURE__*/_jsx(Memori, {\n  ...args\n})",...DemoStefano.parameters?.docs?.source}}}}}]);