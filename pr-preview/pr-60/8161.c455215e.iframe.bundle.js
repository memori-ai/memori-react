(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[8161],{"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":module=>{module.exports=function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":module=>{module.exports=function _arrayWithHoles(r){if(Array.isArray(r))return r},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":module=>{module.exports=function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/createClass.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toPropertyKey=__webpack_require__("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,toPropertyKey(o.key),o)}}module.exports=function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":module=>{module.exports=function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":module=>{module.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/slicedToArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayWithHoles=__webpack_require__("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),iterableToArrayLimit=__webpack_require__("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),unsupportedIterableToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),nonIterableRest=__webpack_require__("./node_modules/@babel/runtime/helpers/nonIterableRest.js");module.exports=function _slicedToArray(r,e){return arrayWithHoles(r)||iterableToArrayLimit(r,e)||unsupportedIterableToArray(r,e)||nonIterableRest()},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js").default;module.exports=function toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js").default,toPrimitive=__webpack_require__("./node_modules/@babel/runtime/helpers/toPrimitive.js");module.exports=function toPropertyKey(t){var i=toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/typeof.js":module=>{function _typeof(o){return module.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},module.exports.__esModule=!0,module.exports.default=module.exports,_typeof(o)}module.exports=_typeof,module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":(module,__unused_webpack_exports,__webpack_require__)=>{var arrayLikeToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");module.exports=function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?arrayLikeToArray(r,a):void 0}},module.exports.__esModule=!0,module.exports.default=module.exports},"./node_modules/@headlessui/react/dist/components/popover/popover.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>mt});var n,f,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_utils_match_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@headlessui/react/dist/utils/match.js"),_utils_render_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@headlessui/react/dist/utils/render.js"),_hooks_use_sync_refs_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-sync-refs.js"),_hooks_use_id_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-id.js"),_keyboard_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@headlessui/react/dist/components/keyboard.js"),_utils_bugs_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@headlessui/react/dist/utils/bugs.js"),_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@headlessui/react/dist/utils/focus-management.js"),_internal_open_closed_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@headlessui/react/dist/internal/open-closed.js"),_hooks_use_resolve_button_type_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-resolve-button-type.js"),_hooks_use_outside_click_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-outside-click.js"),_utils_owner_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@headlessui/react/dist/utils/owner.js"),_hooks_use_owner_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-owner.js"),_hooks_use_event_listener_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-event-listener.js"),_internal_hidden_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@headlessui/react/dist/internal/hidden.js"),_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-event.js"),_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-tab-direction.js"),Ae=((f=Ae||{})[f.Open=0]="Open",f[f.Closed=1]="Closed",f),Ce=((n=Ce||{})[n.TogglePopover=0]="TogglePopover",n[n.ClosePopover=1]="ClosePopover",n[n.SetButton=2]="SetButton",n[n.SetButtonId=3]="SetButtonId",n[n.SetPanel=4]="SetPanel",n[n.SetPanelId=5]="SetPanelId",n);let Re={0:r=>({...r,popoverState:(0,_utils_match_js__WEBPACK_IMPORTED_MODULE_1__.Y)(r.popoverState,{0:1,1:0})}),1:r=>1===r.popoverState?r:{...r,popoverState:1},2:(r,t)=>r.button===t.button?r:{...r,button:t.button},3:(r,t)=>r.buttonId===t.buttonId?r:{...r,buttonId:t.buttonId},4:(r,t)=>r.panel===t.panel?r:{...r,panel:t.panel},5:(r,t)=>r.panelId===t.panelId?r:{...r,panelId:t.panelId}},te=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null);function Q(r){let t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(te);if(null===t){let f=new Error(`<${r} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(f,Q),f}return t}te.displayName="PopoverContext";let oe=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null);function re(r){let t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(oe);if(null===t){let f=new Error(`<${r} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(f,re),f}return t}oe.displayName="PopoverAPIContext";let ne=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null);function ce(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ne)}ne.displayName="PopoverGroupContext";let le=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null);function Me(r,t){return(0,_utils_match_js__WEBPACK_IMPORTED_MODULE_1__.Y)(t.type,Re,r,t)}le.displayName="PopoverPanelContext";let Ie=(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.FX)((function(t,f){var O;let o=`headlessui-popover-button-${(0,_hooks_use_id_js__WEBPACK_IMPORTED_MODULE_3__.B)()}`,v=`headlessui-popover-panel-${(0,_hooks_use_id_js__WEBPACK_IMPORTED_MODULE_3__.B)()}`,a=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),n=(0,_hooks_use_sync_refs_js__WEBPACK_IMPORTED_MODULE_4__.P)(f,(0,_hooks_use_sync_refs_js__WEBPACK_IMPORTED_MODULE_4__.a)((e=>{a.current=e}))),g=(0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(Me,{popoverState:1,button:null,buttonId:o,panel:null,panelId:v,beforePanelSentinel:(0,react__WEBPACK_IMPORTED_MODULE_0__.createRef)(),afterPanelSentinel:(0,react__WEBPACK_IMPORTED_MODULE_0__.createRef)()}),[{popoverState:y,button:l,panel:P,beforePanelSentinel:s,afterPanelSentinel:B},i]=g,T=(0,_hooks_use_owner_js__WEBPACK_IMPORTED_MODULE_5__.g)(null!=(O=a.current)?O:l);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>i({type:3,buttonId:o})),[o,i]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>i({type:5,panelId:v})),[v,i]);let c=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>{if(!l||!P)return!1;for(let M of document.querySelectorAll("body > *"))if(Number(null==M?void 0:M.contains(l))^Number(null==M?void 0:M.contains(P)))return!0;let e=(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.iq)(),p=e.indexOf(l),m=(p+e.length-1)%e.length,C=(p+1)%e.length,D=e[m],V=e[C];return!P.contains(D)&&!P.contains(V)}),[l,P]),d=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({buttonId:o,panelId:v,close:()=>i({type:1})})),[o,v,i]),E=ce(),A=null==E?void 0:E.registerPopover,L=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((()=>{var e;return null!=(e=null==E?void 0:E.isFocusWithinPopoverGroup())?e:(null==T?void 0:T.activeElement)&&((null==l?void 0:l.contains(T.activeElement))||(null==P?void 0:P.contains(T.activeElement)))}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>null==A?void 0:A(d)),[A,d]),(0,_hooks_use_event_listener_js__WEBPACK_IMPORTED_MODULE_8__.M)(null==T?void 0:T.defaultView,"focus",(e=>{var p,m,C,D;0===y&&(L()||!l||!P||null!=(m=null==(p=s.current)?void 0:p.contains)&&m.call(p,e.target)||null!=(D=null==(C=B.current)?void 0:C.contains)&&D.call(C,e.target)||i({type:1}))}),!0),(0,_hooks_use_outside_click_js__WEBPACK_IMPORTED_MODULE_9__.j)([l,P],((e,p)=>{i({type:1}),(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.Bm)(p,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.MZ.Loose)||(e.preventDefault(),null==l||l.focus())}),0===y);let I=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((e=>{i({type:1});let p=e?e instanceof HTMLElement?e:"current"in e&&e.current instanceof HTMLElement?e.current:l:l;null==p||p.focus()})),H=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({close:I,isPortalled:c})),[I,c]),u=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({open:0===y,close:I})),[y,I]),S=t,R={ref:n};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(te.Provider,{value:g},react__WEBPACK_IMPORTED_MODULE_0__.createElement(oe.Provider,{value:H},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_internal_open_closed_js__WEBPACK_IMPORTED_MODULE_10__.El,{value:(0,_utils_match_js__WEBPACK_IMPORTED_MODULE_1__.Y)(y,{0:_internal_open_closed_js__WEBPACK_IMPORTED_MODULE_10__.Uw.Open,1:_internal_open_closed_js__WEBPACK_IMPORTED_MODULE_10__.Uw.Closed})},(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.XX)({ourProps:R,theirProps:S,slot:u,defaultTag:"div",name:"Popover"}))))})),he=(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.FX)((function(t,f){let[o,v]=Q("Popover.Button"),{isPortalled:a}=re("Popover.Button"),n=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),g=`headlessui-focus-sentinel-${(0,_hooks_use_id_js__WEBPACK_IMPORTED_MODULE_3__.B)()}`,y=ce(),l=null==y?void 0:y.closeOthers,P=function Oe(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(le)}(),s=null!==P&&P===o.panelId,B=(0,_hooks_use_sync_refs_js__WEBPACK_IMPORTED_MODULE_4__.P)(n,f,s?null:e=>e&&v({type:2,button:e})),i=(0,_hooks_use_sync_refs_js__WEBPACK_IMPORTED_MODULE_4__.P)(n,f),T=(0,_hooks_use_owner_js__WEBPACK_IMPORTED_MODULE_5__.g)(n),c=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((e=>{var p,m,C;if(s){if(1===o.popoverState)return;switch(e.key){case _keyboard_js__WEBPACK_IMPORTED_MODULE_11__.D.Space:case _keyboard_js__WEBPACK_IMPORTED_MODULE_11__.D.Enter:e.preventDefault(),null==(m=(p=e.target).click)||m.call(p),v({type:1}),null==(C=o.button)||C.focus()}}else switch(e.key){case _keyboard_js__WEBPACK_IMPORTED_MODULE_11__.D.Space:case _keyboard_js__WEBPACK_IMPORTED_MODULE_11__.D.Enter:e.preventDefault(),e.stopPropagation(),1===o.popoverState&&(null==l||l(o.buttonId)),v({type:0});break;case _keyboard_js__WEBPACK_IMPORTED_MODULE_11__.D.Escape:if(0!==o.popoverState)return null==l?void 0:l(o.buttonId);if(!n.current||(null==T?void 0:T.activeElement)&&!n.current.contains(T.activeElement))return;e.preventDefault(),e.stopPropagation(),v({type:1})}})),d=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((e=>{s||e.key===_keyboard_js__WEBPACK_IMPORTED_MODULE_11__.D.Space&&e.preventDefault()})),E=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((e=>{var p,m;(0,_utils_bugs_js__WEBPACK_IMPORTED_MODULE_12__.l)(e.currentTarget)||t.disabled||(s?(v({type:1}),null==(p=o.button)||p.focus()):(e.preventDefault(),e.stopPropagation(),1===o.popoverState&&(null==l||l(o.buttonId)),v({type:0}),null==(m=o.button)||m.focus()))})),A=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((e=>{e.preventDefault(),e.stopPropagation()})),L=0===o.popoverState,I=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({open:L})),[L]),H=(0,_hooks_use_resolve_button_type_js__WEBPACK_IMPORTED_MODULE_13__.c)(t,n),u=t,S=s?{ref:i,type:H,onKeyDown:c,onClick:E}:{ref:B,id:o.buttonId,type:H,"aria-expanded":t.disabled?void 0:0===o.popoverState,"aria-controls":o.panel?o.panelId:void 0,onKeyDown:c,onKeyUp:d,onClick:E,onMouseDown:A},R=(0,_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__.u)(),O=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((()=>{let e=o.panel;e&&function p(){(0,_utils_match_js__WEBPACK_IMPORTED_MODULE_1__.Y)(R.current,{[_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__.O.Forwards]:()=>(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.CU)(e,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.BD.First),[_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__.O.Backwards]:()=>(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.CU)(e,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.BD.Last)})}()}));return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.XX)({ourProps:S,theirProps:u,slot:I,defaultTag:"button",name:"Popover.Button"}),L&&!s&&a&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_internal_hidden_js__WEBPACK_IMPORTED_MODULE_15__.j,{id:g,features:_internal_hidden_js__WEBPACK_IMPORTED_MODULE_15__.O.Focusable,as:"button",type:"button",onFocus:O}))})),De=_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.O5.RenderStrategy|_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.O5.Static,xe=(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.FX)((function(t,f){let[{popoverState:o},v]=Q("Popover.Overlay"),a=(0,_hooks_use_sync_refs_js__WEBPACK_IMPORTED_MODULE_4__.P)(f),n=`headlessui-popover-overlay-${(0,_hooks_use_id_js__WEBPACK_IMPORTED_MODULE_3__.B)()}`,g=(0,_internal_open_closed_js__WEBPACK_IMPORTED_MODULE_10__.O_)(),y=null!==g?g===_internal_open_closed_js__WEBPACK_IMPORTED_MODULE_10__.Uw.Open:0===o,l=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((i=>{if((0,_utils_bugs_js__WEBPACK_IMPORTED_MODULE_12__.l)(i.currentTarget))return i.preventDefault();v({type:1})})),P=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({open:0===o})),[o]);return(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.XX)({ourProps:{ref:a,id:n,"aria-hidden":!0,onClick:l},theirProps:t,slot:P,defaultTag:"div",features:De,visible:y,name:"Popover.Overlay"})})),Ge=_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.O5.RenderStrategy|_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.O5.Static,ke=(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.FX)((function(t,f){let{focus:o=!1,...v}=t,[a,n]=Q("Popover.Panel"),{close:g,isPortalled:y}=re("Popover.Panel"),l=`headlessui-focus-sentinel-before-${(0,_hooks_use_id_js__WEBPACK_IMPORTED_MODULE_3__.B)()}`,P=`headlessui-focus-sentinel-after-${(0,_hooks_use_id_js__WEBPACK_IMPORTED_MODULE_3__.B)()}`,s=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),B=(0,_hooks_use_sync_refs_js__WEBPACK_IMPORTED_MODULE_4__.P)(s,f,(u=>{n({type:4,panel:u})})),i=(0,_hooks_use_owner_js__WEBPACK_IMPORTED_MODULE_5__.g)(s),T=(0,_internal_open_closed_js__WEBPACK_IMPORTED_MODULE_10__.O_)(),c=null!==T?T===_internal_open_closed_js__WEBPACK_IMPORTED_MODULE_10__.Uw.Open:0===a.popoverState,d=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((u=>{var S;if(u.key===_keyboard_js__WEBPACK_IMPORTED_MODULE_11__.D.Escape){if(0!==a.popoverState||!s.current||(null==i?void 0:i.activeElement)&&!s.current.contains(i.activeElement))return;u.preventDefault(),u.stopPropagation(),n({type:1}),null==(S=a.button)||S.focus()}}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{var u;t.static||1===a.popoverState&&(null==(u=t.unmount)||u)&&n({type:4,panel:null})}),[a.popoverState,t.unmount,t.static,n]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!o||0!==a.popoverState||!s.current)return;let u=null==i?void 0:i.activeElement;s.current.contains(u)||(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.CU)(s.current,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.BD.First)}),[o,s,a.popoverState]);let E=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({open:0===a.popoverState,close:g})),[a,g]),A={ref:B,id:a.panelId,onKeyDown:d,onBlur:o&&0===a.popoverState?u=>{var R,O,e,p,m;let S=u.relatedTarget;!S||!s.current||null!=(R=s.current)&&R.contains(S)||(n({type:1}),((null==(e=null==(O=a.beforePanelSentinel.current)?void 0:O.contains)?void 0:e.call(O,S))||(null==(m=null==(p=a.afterPanelSentinel.current)?void 0:p.contains)?void 0:m.call(p,S)))&&S.focus({preventScroll:!0}))}:void 0,tabIndex:-1},L=(0,_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__.u)(),I=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((()=>{let u=s.current;u&&function S(){(0,_utils_match_js__WEBPACK_IMPORTED_MODULE_1__.Y)(L.current,{[_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__.O.Forwards]:()=>{(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.CU)(u,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.BD.First)},[_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__.O.Backwards]:()=>{var R;null==(R=a.button)||R.focus({preventScroll:!0})}})}()})),H=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((()=>{let u=s.current;u&&function S(){(0,_utils_match_js__WEBPACK_IMPORTED_MODULE_1__.Y)(L.current,{[_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__.O.Forwards]:()=>{var C,D,V;if(!a.button)return;let R=(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.iq)(),O=R.indexOf(a.button),e=R.slice(0,O+1),m=[...R.slice(O+1),...e];for(let M of m.slice())if((null==(D=null==(C=null==M?void 0:M.id)?void 0:C.startsWith)?void 0:D.call(C,"headlessui-focus-sentinel-"))||(null==(V=a.panel)?void 0:V.contains(M))){let ae=m.indexOf(M);-1!==ae&&m.splice(ae,1)}(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.CU)(m,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.BD.First,!1)},[_hooks_use_tab_direction_js__WEBPACK_IMPORTED_MODULE_14__.O.Backwards]:()=>(0,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.CU)(u,_utils_focus_management_js__WEBPACK_IMPORTED_MODULE_6__.BD.Last)})}()}));return react__WEBPACK_IMPORTED_MODULE_0__.createElement(le.Provider,{value:a.panelId},c&&y&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_internal_hidden_js__WEBPACK_IMPORTED_MODULE_15__.j,{id:l,ref:a.beforePanelSentinel,features:_internal_hidden_js__WEBPACK_IMPORTED_MODULE_15__.O.Focusable,as:"button",type:"button",onFocus:I}),(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.XX)({ourProps:A,theirProps:v,slot:E,defaultTag:"div",features:Ge,visible:c,name:"Popover.Panel"}),c&&y&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_internal_hidden_js__WEBPACK_IMPORTED_MODULE_15__.j,{id:P,ref:a.afterPanelSentinel,features:_internal_hidden_js__WEBPACK_IMPORTED_MODULE_15__.O.Focusable,as:"button",type:"button",onFocus:H}))})),we=(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.FX)((function(t,f){let o=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),v=(0,_hooks_use_sync_refs_js__WEBPACK_IMPORTED_MODULE_4__.P)(o,f),[a,n]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),g=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((c=>{n((d=>{let E=d.indexOf(c);if(-1!==E){let A=d.slice();return A.splice(E,1),A}return d}))})),y=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((c=>(n((d=>[...d,c])),()=>g(c)))),l=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((()=>{var E;let c=(0,_utils_owner_js__WEBPACK_IMPORTED_MODULE_16__.T)(o);if(!c)return!1;let d=c.activeElement;return!(null==(E=o.current)||!E.contains(d))||a.some((A=>{var L,I;return(null==(L=c.getElementById(A.buttonId))?void 0:L.contains(d))||(null==(I=c.getElementById(A.panelId))?void 0:I.contains(d))}))})),P=(0,_hooks_use_event_js__WEBPACK_IMPORTED_MODULE_7__._)((c=>{for(let d of a)d.buttonId!==c&&d.close()})),s=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({registerPopover:y,unregisterPopover:g,isFocusWithinPopoverGroup:l,closeOthers:P})),[y,g,l,P]),B=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({})),[]),i=t,T={ref:v};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ne.Provider,{value:s},(0,_utils_render_js__WEBPACK_IMPORTED_MODULE_2__.XX)({ourProps:T,theirProps:i,slot:B,defaultTag:"div",name:"Popover.Group"}))})),mt=Object.assign(Ie,{Button:he,Overlay:xe,Panel:ke,Group:we})},"./node_modules/@headlessui/react/dist/components/radio-group/radio-group.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>et});var react=__webpack_require__("./node_modules/react/index.js"),render=__webpack_require__("./node_modules/@headlessui/react/dist/utils/render.js"),use_id=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-id.js"),match=__webpack_require__("./node_modules/@headlessui/react/dist/utils/match.js"),use_iso_morphic_effect=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-iso-morphic-effect.js"),keyboard=__webpack_require__("./node_modules/@headlessui/react/dist/components/keyboard.js"),focus_management=__webpack_require__("./node_modules/@headlessui/react/dist/utils/focus-management.js");var use_sync_refs=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-sync-refs.js"),use_event=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-event.js");let u=(0,react.createContext)(null);function c(){let o=(0,react.useContext)(u);if(null===o){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,c),t}return o}function label_M(){let[o,t]=(0,react.useState)([]);return[o.length>0?o.join(" "):void 0,(0,react.useMemo)((()=>function(e){let l=(0,use_event._)((a=>(t((i=>[...i,a])),()=>t((i=>{let n=i.slice(),d=n.indexOf(a);return-1!==d&&n.splice(d,1),n}))))),r=(0,react.useMemo)((()=>({register:l,slot:e.slot,name:e.name,props:e.props})),[l,e.slot,e.name,e.props]);return react.createElement(u.Provider,{value:r},e.children)}),[t])]}let F=(0,render.FX)((function(t,s){let{passive:e=!1,...l}=t,r=c(),a=`headlessui-label-${(0,use_id.B)()}`,i=(0,use_sync_refs.P)(s);(0,use_iso_morphic_effect.s)((()=>r.register(a)),[a,r.register]);let n={ref:i,...r.props,id:a};return e&&("onClick"in n&&delete n.onClick,"onClick"in l&&delete l.onClick),(0,render.XX)({ourProps:n,theirProps:l,slot:r.slot||{},defaultTag:"label",name:r.name||"Label"})}));var t,description=__webpack_require__("./node_modules/@headlessui/react/dist/components/description/description.js"),use_tree_walker=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-tree-walker.js"),internal_hidden=__webpack_require__("./node_modules/@headlessui/react/dist/internal/hidden.js"),utils_form=__webpack_require__("./node_modules/@headlessui/react/dist/utils/form.js"),owner=__webpack_require__("./node_modules/@headlessui/react/dist/utils/owner.js"),use_controllable=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-controllable.js"),bugs=__webpack_require__("./node_modules/@headlessui/react/dist/utils/bugs.js"),ye=((t=ye||{})[t.RegisterOption=0]="RegisterOption",t[t.UnregisterOption=1]="UnregisterOption",t);let ge={0(a,n){let t=[...a.options,{id:n.id,element:n.element,propsRef:n.propsRef}];return{...a,options:(0,focus_management.wl)(t,(l=>l.element.current))}},1(a,n){let t=a.options.slice(),l=a.options.findIndex((O=>O.id===n.id));return-1===l?a:(t.splice(l,1),{...a,options:t})}},V=(0,react.createContext)(null);function te(a){let n=(0,react.useContext)(V);if(null===n){let t=new Error(`<${a} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,te),t}return n}function ve(a,n){return(0,match.Y)(n.type,ge,a,n)}V.displayName="RadioGroupContext";let Ee=(0,render.FX)((function(n,t){let{value:l,defaultValue:O,name:c,onChange:M,by:E=(e,r)=>e===r,disabled:P=!1,...S}=n,u=(0,use_event._)("string"==typeof E?(e,r)=>{let o=E;return(null==e?void 0:e[o])===(null==r?void 0:r[o])}:E),[_,A]=(0,react.useReducer)(ve,{options:[]}),i=_.options,[R,U]=label_M(),[f,D]=(0,description.r)(),H=`headlessui-radiogroup-${(0,use_id.B)()}`,h=(0,react.useRef)(null),G=(0,use_sync_refs.P)(h,t),[p,k]=(0,use_controllable.P)(l,M,O),F=(0,react.useMemo)((()=>i.find((e=>!e.propsRef.current.disabled))),[i]),L=(0,react.useMemo)((()=>i.some((e=>u(e.propsRef.current.value,p)))),[i,p]),T=(0,use_event._)((e=>{var o;if(P||u(e,p))return!1;let r=null==(o=i.find((w=>u(w.propsRef.current.value,e))))?void 0:o.propsRef.current;return(null==r||!r.disabled)&&(null==k||k(e),!0)}));(0,use_tree_walker.i)({container:h.current,accept:e=>"radio"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let N=(0,use_event._)((e=>{let r=h.current;if(!r)return;let o=(0,owner.T)(r),w=i.filter((d=>!1===d.propsRef.current.disabled)).map((d=>d.element.current));switch(e.key){case keyboard.D.Enter:(0,utils_form.q)(e.currentTarget);break;case keyboard.D.ArrowLeft:case keyboard.D.ArrowUp:if(e.preventDefault(),e.stopPropagation(),(0,focus_management.CU)(w,focus_management.BD.Previous|focus_management.BD.WrapAround)===focus_management.Me.Success){let m=i.find((K=>K.element.current===(null==o?void 0:o.activeElement)));m&&T(m.propsRef.current.value)}break;case keyboard.D.ArrowRight:case keyboard.D.ArrowDown:if(e.preventDefault(),e.stopPropagation(),(0,focus_management.CU)(w,focus_management.BD.Next|focus_management.BD.WrapAround)===focus_management.Me.Success){let m=i.find((K=>K.element.current===(null==o?void 0:o.activeElement)));m&&T(m.propsRef.current.value)}break;case keyboard.D.Space:{e.preventDefault(),e.stopPropagation();let d=i.find((m=>m.element.current===(null==o?void 0:o.activeElement)));d&&T(d.propsRef.current.value)}}})),x=(0,use_event._)((e=>(A({type:0,...e}),()=>A({type:1,id:e.id})))),s=(0,react.useMemo)((()=>({registerOption:x,firstOption:F,containsCheckedOption:L,change:T,disabled:P,value:p,compare:u})),[x,F,L,T,P,p,u]),y={ref:G,id:H,role:"radiogroup","aria-labelledby":R,"aria-describedby":f,onKeyDown:N},W=(0,react.useMemo)((()=>({value:p})),[p]);return react.createElement(D,{name:"RadioGroup.Description"},react.createElement(U,{name:"RadioGroup.Label"},react.createElement(V.Provider,{value:s},null!=c&&null!=p&&(0,utils_form.h)({[c]:p}).map((([e,r])=>react.createElement(internal_hidden.j,{features:internal_hidden.O.Hidden,...(0,render.oE)({key:e,as:"input",type:"radio",checked:null!=r,hidden:!0,readOnly:!0,name:e,value:r})}))),(0,render.XX)({ourProps:y,theirProps:S,slot:W,defaultTag:"div",name:"RadioGroup"}))))}));var Pe=(t=>(t[t.Empty=1]="Empty",t[t.Active=2]="Active",t))(Pe||{});let he=(0,render.FX)((function(n,t){let l=(0,react.useRef)(null),O=(0,use_sync_refs.P)(l,t),c=`headlessui-radiogroup-option-${(0,use_id.B)()}`,[M,E]=label_M(),[P,S]=(0,description.r)(),{addFlag:u,removeFlag:_,hasFlag:A}=function b(g=0){let[r,l]=(0,react.useState)(g);return{addFlag:(0,react.useCallback)((e=>l((a=>a|e))),[r]),hasFlag:(0,react.useCallback)((e=>Boolean(r&e)),[r]),removeFlag:(0,react.useCallback)((e=>l((a=>a&~e))),[l]),toggleFlag:(0,react.useCallback)((e=>l((a=>a^e))),[l])}}(1),{value:i,disabled:R=!1,...U}=n,f=(0,react.useRef)({value:i,disabled:R});(0,use_iso_morphic_effect.s)((()=>{f.current.value=i}),[i,f]),(0,use_iso_morphic_effect.s)((()=>{f.current.disabled=R}),[R,f]);let{registerOption:D,disabled:H,change:h,firstOption:G,containsCheckedOption:p,value:k,compare:F}=te("RadioGroup.Option");(0,use_iso_morphic_effect.s)((()=>D({id:c,element:l,propsRef:f})),[c,D,l,n]);let L=(0,use_event._)((r=>{var o;if((0,bugs.l)(r.currentTarget))return r.preventDefault();!h(i)||(u(2),null==(o=l.current)||o.focus())})),T=(0,use_event._)((r=>{if((0,bugs.l)(r.currentTarget))return r.preventDefault();u(2)})),N=(0,use_event._)((()=>_(2))),x=(null==G?void 0:G.id)===c,s=H||R,y=F(k,i),W={ref:O,id:c,role:"radio","aria-checked":y?"true":"false","aria-labelledby":M,"aria-describedby":P,"aria-disabled":!!s||void 0,tabIndex:s?-1:y||!p&&x?0:-1,onClick:s?void 0:L,onFocus:s?void 0:T,onBlur:s?void 0:N},e=(0,react.useMemo)((()=>({checked:y,disabled:s,active:A(2)})),[y,s,A]);return react.createElement(S,{name:"RadioGroup.Description"},react.createElement(E,{name:"RadioGroup.Label"},(0,render.XX)({ourProps:W,theirProps:U,slot:e,defaultTag:"div",name:"RadioGroup.Option"})))})),et=Object.assign(Ee,{Option:he,Label:F,Description:description.V})},"./node_modules/automation-events/build/es5/bundle.js":function(__unused_webpack_module,exports,__webpack_require__){!function(exports,_slicedToArray,_classCallCheck,_createClass){"use strict";function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var _slicedToArray__default=_interopDefaultLegacy(_slicedToArray),_classCallCheck__default=_interopDefaultLegacy(_classCallCheck),_createClass__default=_interopDefaultLegacy(_createClass),createExtendedExponentialRampToValueAutomationEvent=function createExtendedExponentialRampToValueAutomationEvent(value,endTime,insertTime){return{endTime,insertTime,type:"exponentialRampToValue",value}},createExtendedLinearRampToValueAutomationEvent=function createExtendedLinearRampToValueAutomationEvent(value,endTime,insertTime){return{endTime,insertTime,type:"linearRampToValue",value}},createSetValueAutomationEvent=function createSetValueAutomationEvent(value,startTime){return{startTime,type:"setValue",value}},createSetValueCurveAutomationEvent=function createSetValueCurveAutomationEvent(values,startTime,duration){return{duration,startTime,type:"setValueCurve",values}},getTargetValueAtTime=function getTargetValueAtTime(time,valueAtStartTime,_ref){var startTime=_ref.startTime,target=_ref.target,timeConstant=_ref.timeConstant;return target+(valueAtStartTime-target)*Math.exp((startTime-time)/timeConstant)},isExponentialRampToValueAutomationEvent=function isExponentialRampToValueAutomationEvent(automationEvent){return"exponentialRampToValue"===automationEvent.type},isLinearRampToValueAutomationEvent=function isLinearRampToValueAutomationEvent(automationEvent){return"linearRampToValue"===automationEvent.type},isAnyRampToValueAutomationEvent=function isAnyRampToValueAutomationEvent(automationEvent){return isExponentialRampToValueAutomationEvent(automationEvent)||isLinearRampToValueAutomationEvent(automationEvent)},isSetValueAutomationEvent=function isSetValueAutomationEvent(automationEvent){return"setValue"===automationEvent.type},isSetValueCurveAutomationEvent=function isSetValueCurveAutomationEvent(automationEvent){return"setValueCurve"===automationEvent.type},getValueOfAutomationEventAtIndexAtTime=function getValueOfAutomationEventAtIndexAtTime(automationEvents,index,time,defaultValue){var automationEvent=automationEvents[index];return void 0===automationEvent?defaultValue:isAnyRampToValueAutomationEvent(automationEvent)||isSetValueAutomationEvent(automationEvent)?automationEvent.value:isSetValueCurveAutomationEvent(automationEvent)?automationEvent.values[automationEvent.values.length-1]:getTargetValueAtTime(time,getValueOfAutomationEventAtIndexAtTime(automationEvents,index-1,automationEvent.startTime,defaultValue),automationEvent)},getEndTimeAndValueOfPreviousAutomationEvent=function getEndTimeAndValueOfPreviousAutomationEvent(automationEvents,index,currentAutomationEvent,nextAutomationEvent,defaultValue){return void 0===currentAutomationEvent?[nextAutomationEvent.insertTime,defaultValue]:isAnyRampToValueAutomationEvent(currentAutomationEvent)?[currentAutomationEvent.endTime,currentAutomationEvent.value]:isSetValueAutomationEvent(currentAutomationEvent)?[currentAutomationEvent.startTime,currentAutomationEvent.value]:isSetValueCurveAutomationEvent(currentAutomationEvent)?[currentAutomationEvent.startTime+currentAutomationEvent.duration,currentAutomationEvent.values[currentAutomationEvent.values.length-1]]:[currentAutomationEvent.startTime,getValueOfAutomationEventAtIndexAtTime(automationEvents,index-1,currentAutomationEvent.startTime,defaultValue)]},isCancelAndHoldAutomationEvent=function isCancelAndHoldAutomationEvent(automationEvent){return"cancelAndHold"===automationEvent.type},isCancelScheduledValuesAutomationEvent=function isCancelScheduledValuesAutomationEvent(automationEvent){return"cancelScheduledValues"===automationEvent.type},getEventTime=function getEventTime(automationEvent){return isCancelAndHoldAutomationEvent(automationEvent)||isCancelScheduledValuesAutomationEvent(automationEvent)?automationEvent.cancelTime:isExponentialRampToValueAutomationEvent(automationEvent)||isLinearRampToValueAutomationEvent(automationEvent)?automationEvent.endTime:automationEvent.startTime},getExponentialRampValueAtTime=function getExponentialRampValueAtTime(time,startTime,valueAtStartTime,_ref){var endTime=_ref.endTime,value=_ref.value;return valueAtStartTime===value?value:0<valueAtStartTime&&0<value||valueAtStartTime<0&&value<0?valueAtStartTime*Math.pow(value/valueAtStartTime,(time-startTime)/(endTime-startTime)):0},getLinearRampValueAtTime=function getLinearRampValueAtTime(time,startTime,valueAtStartTime,_ref){return valueAtStartTime+(time-startTime)/(_ref.endTime-startTime)*(_ref.value-valueAtStartTime)},interpolateValue=function interpolateValue(values,theoreticIndex){var lowerIndex=Math.floor(theoreticIndex),upperIndex=Math.ceil(theoreticIndex);return lowerIndex===upperIndex?values[lowerIndex]:(1-(theoreticIndex-lowerIndex))*values[lowerIndex]+(1-(upperIndex-theoreticIndex))*values[upperIndex]},getValueCurveValueAtTime=function getValueCurveValueAtTime(time,_ref){var duration=_ref.duration,startTime=_ref.startTime,values=_ref.values,theoreticIndex=(time-startTime)/duration*(values.length-1);return interpolateValue(values,theoreticIndex)},isSetTargetAutomationEvent=function isSetTargetAutomationEvent(automationEvent){return"setTarget"===automationEvent.type},AutomationEventList=function(_Symbol$iterator){function AutomationEventList(defaultValue){_classCallCheck__default.default(this,AutomationEventList),this._automationEvents=[],this._currenTime=0,this._defaultValue=defaultValue}return _createClass__default.default(AutomationEventList,[{key:_Symbol$iterator,value:function value(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function add(automationEvent){var eventTime=getEventTime(automationEvent);if(isCancelAndHoldAutomationEvent(automationEvent)||isCancelScheduledValuesAutomationEvent(automationEvent)){var index=this._automationEvents.findIndex((function(currentAutomationEvent){return isCancelScheduledValuesAutomationEvent(automationEvent)&&isSetValueCurveAutomationEvent(currentAutomationEvent)?currentAutomationEvent.startTime+currentAutomationEvent.duration>=eventTime:getEventTime(currentAutomationEvent)>=eventTime})),removedAutomationEvent=this._automationEvents[index];if(-1!==index&&(this._automationEvents=this._automationEvents.slice(0,index)),isCancelAndHoldAutomationEvent(automationEvent)){var lastAutomationEvent=this._automationEvents[this._automationEvents.length-1];if(void 0!==removedAutomationEvent&&isAnyRampToValueAutomationEvent(removedAutomationEvent)){if(isSetTargetAutomationEvent(lastAutomationEvent))throw new Error("The internal list is malformed.");var startTime=isSetValueCurveAutomationEvent(lastAutomationEvent)?lastAutomationEvent.startTime+lastAutomationEvent.duration:getEventTime(lastAutomationEvent),startValue=isSetValueCurveAutomationEvent(lastAutomationEvent)?lastAutomationEvent.values[lastAutomationEvent.values.length-1]:lastAutomationEvent.value,value=isExponentialRampToValueAutomationEvent(removedAutomationEvent)?getExponentialRampValueAtTime(eventTime,startTime,startValue,removedAutomationEvent):getLinearRampValueAtTime(eventTime,startTime,startValue,removedAutomationEvent),truncatedAutomationEvent=isExponentialRampToValueAutomationEvent(removedAutomationEvent)?createExtendedExponentialRampToValueAutomationEvent(value,eventTime,this._currenTime):createExtendedLinearRampToValueAutomationEvent(value,eventTime,this._currenTime);this._automationEvents.push(truncatedAutomationEvent)}void 0!==lastAutomationEvent&&isSetTargetAutomationEvent(lastAutomationEvent)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(eventTime),eventTime)),void 0!==lastAutomationEvent&&isSetValueCurveAutomationEvent(lastAutomationEvent)&&lastAutomationEvent.startTime+lastAutomationEvent.duration>eventTime&&(this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(new Float32Array([6,7]),lastAutomationEvent.startTime,eventTime-lastAutomationEvent.startTime))}}else{var _index=this._automationEvents.findIndex((function(currentAutomationEvent){return getEventTime(currentAutomationEvent)>eventTime})),previousAutomationEvent=-1===_index?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[_index-1];if(void 0!==previousAutomationEvent&&isSetValueCurveAutomationEvent(previousAutomationEvent)&&getEventTime(previousAutomationEvent)+previousAutomationEvent.duration>eventTime)return!1;var persistentAutomationEvent=isExponentialRampToValueAutomationEvent(automationEvent)?createExtendedExponentialRampToValueAutomationEvent(automationEvent.value,automationEvent.endTime,this._currenTime):isLinearRampToValueAutomationEvent(automationEvent)?createExtendedLinearRampToValueAutomationEvent(automationEvent.value,eventTime,this._currenTime):automationEvent;if(-1===_index)this._automationEvents.push(persistentAutomationEvent);else{if(isSetValueCurveAutomationEvent(automationEvent)&&eventTime+automationEvent.duration>getEventTime(this._automationEvents[_index]))return!1;this._automationEvents.splice(_index,0,persistentAutomationEvent)}}return!0}},{key:"flush",value:function flush(time){var index=this._automationEvents.findIndex((function(currentAutomationEvent){return getEventTime(currentAutomationEvent)>time}));if(index>1){var remainingAutomationEvents=this._automationEvents.slice(index-1),firstRemainingAutomationEvent=remainingAutomationEvents[0];isSetTargetAutomationEvent(firstRemainingAutomationEvent)&&remainingAutomationEvents.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,index-2,firstRemainingAutomationEvent.startTime,this._defaultValue),firstRemainingAutomationEvent.startTime)),this._automationEvents=remainingAutomationEvents}}},{key:"getValue",value:function getValue(time){if(0===this._automationEvents.length)return this._defaultValue;var indexOfNextEvent=this._automationEvents.findIndex((function(automationEvent){return getEventTime(automationEvent)>time})),nextAutomationEvent=this._automationEvents[indexOfNextEvent],indexOfCurrentEvent=(-1===indexOfNextEvent?this._automationEvents.length:indexOfNextEvent)-1,currentAutomationEvent=this._automationEvents[indexOfCurrentEvent];if(void 0!==currentAutomationEvent&&isSetTargetAutomationEvent(currentAutomationEvent)&&(void 0===nextAutomationEvent||!isAnyRampToValueAutomationEvent(nextAutomationEvent)||nextAutomationEvent.insertTime>time))return getTargetValueAtTime(time,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,indexOfCurrentEvent-1,currentAutomationEvent.startTime,this._defaultValue),currentAutomationEvent);if(void 0!==currentAutomationEvent&&isSetValueAutomationEvent(currentAutomationEvent)&&(void 0===nextAutomationEvent||!isAnyRampToValueAutomationEvent(nextAutomationEvent)))return currentAutomationEvent.value;if(void 0!==currentAutomationEvent&&isSetValueCurveAutomationEvent(currentAutomationEvent)&&(void 0===nextAutomationEvent||!isAnyRampToValueAutomationEvent(nextAutomationEvent)||currentAutomationEvent.startTime+currentAutomationEvent.duration>time))return time<currentAutomationEvent.startTime+currentAutomationEvent.duration?getValueCurveValueAtTime(time,currentAutomationEvent):currentAutomationEvent.values[currentAutomationEvent.values.length-1];if(void 0!==currentAutomationEvent&&isAnyRampToValueAutomationEvent(currentAutomationEvent)&&(void 0===nextAutomationEvent||!isAnyRampToValueAutomationEvent(nextAutomationEvent)))return currentAutomationEvent.value;if(void 0!==nextAutomationEvent&&isExponentialRampToValueAutomationEvent(nextAutomationEvent)){var _getEndTimeAndValueOf=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,indexOfCurrentEvent,currentAutomationEvent,nextAutomationEvent,this._defaultValue),_getEndTimeAndValueOf2=_slicedToArray__default.default(_getEndTimeAndValueOf,2),startTime=_getEndTimeAndValueOf2[0],value=_getEndTimeAndValueOf2[1];return getExponentialRampValueAtTime(time,startTime,value,nextAutomationEvent)}if(void 0!==nextAutomationEvent&&isLinearRampToValueAutomationEvent(nextAutomationEvent)){var _getEndTimeAndValueOf3=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,indexOfCurrentEvent,currentAutomationEvent,nextAutomationEvent,this._defaultValue),_getEndTimeAndValueOf4=_slicedToArray__default.default(_getEndTimeAndValueOf3,2),_startTime=_getEndTimeAndValueOf4[0],_value=_getEndTimeAndValueOf4[1];return getLinearRampValueAtTime(time,_startTime,_value,nextAutomationEvent)}return this._defaultValue}}]),AutomationEventList}(Symbol.iterator),createCancelAndHoldAutomationEvent=function createCancelAndHoldAutomationEvent(cancelTime){return{cancelTime,type:"cancelAndHold"}},createCancelScheduledValuesAutomationEvent=function createCancelScheduledValuesAutomationEvent(cancelTime){return{cancelTime,type:"cancelScheduledValues"}},createExponentialRampToValueAutomationEvent=function createExponentialRampToValueAutomationEvent(value,endTime){return{endTime,type:"exponentialRampToValue",value}},createLinearRampToValueAutomationEvent=function createLinearRampToValueAutomationEvent(value,endTime){return{endTime,type:"linearRampToValue",value}},createSetTargetAutomationEvent=function createSetTargetAutomationEvent(target,startTime,timeConstant){return{startTime,target,timeConstant,type:"setTarget"}};exports.AutomationEventList=AutomationEventList,exports.createCancelAndHoldAutomationEvent=createCancelAndHoldAutomationEvent,exports.createCancelScheduledValuesAutomationEvent=createCancelScheduledValuesAutomationEvent,exports.createExponentialRampToValueAutomationEvent=createExponentialRampToValueAutomationEvent,exports.createLinearRampToValueAutomationEvent=createLinearRampToValueAutomationEvent,exports.createSetTargetAutomationEvent=createSetTargetAutomationEvent,exports.createSetValueAutomationEvent=createSetValueAutomationEvent,exports.createSetValueCurveAutomationEvent=createSetValueCurveAutomationEvent,Object.defineProperty(exports,"__esModule",{value:!0})}(exports,__webpack_require__("./node_modules/@babel/runtime/helpers/slicedToArray.js"),__webpack_require__("./node_modules/@babel/runtime/helpers/classCallCheck.js"),__webpack_require__("./node_modules/@babel/runtime/helpers/createClass.js"))},"./node_modules/bent/src/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const core=__webpack_require__("./node_modules/bent/src/core.js");class StatusError extends Error{constructor(res,...params){let buffer;super(...params),Error.captureStackTrace&&Error.captureStackTrace(this,StatusError),this.name="StatusError",this.message=res.statusMessage,this.statusCode=res.status,this.res=res,this.json=res.json.bind(res),this.text=res.text.bind(res),this.arrayBuffer=res.arrayBuffer.bind(res);Object.defineProperty(this,"responseBody",{get:()=>(buffer||(buffer=this.arrayBuffer()),buffer)}),this.headers={};for(const[key,value]of res.headers.entries())this.headers[key.toLowerCase()]=value}}module.exports=core(((statusCodes,method,encoding,headers,baseurl)=>async(_url,body,_headers={})=>{_url=baseurl+(_url||"");let parsed=new URL(_url);if(headers||(headers={}),parsed.username&&(headers.Authorization="Basic "+btoa(parsed.username+":"+parsed.password),parsed=new URL(parsed.protocol+"//"+parsed.host+parsed.pathname+parsed.search)),"https:"!==parsed.protocol&&"http:"!==parsed.protocol)throw new Error(`Unknown protocol, ${parsed.protocol}`);if(body)if(body instanceof ArrayBuffer||ArrayBuffer.isView(body)||"string"==typeof body);else{if("object"!=typeof body)throw new Error("Unknown body type.");body=JSON.stringify(body),headers["Content-Type"]="application/json"}_headers=new Headers({...headers||{},..._headers});const resp=await fetch(parsed,{method,headers:_headers,body});if(resp.statusCode=resp.status,!statusCodes.has(resp.status))throw new StatusError(resp);return"json"===encoding?resp.json():"buffer"===encoding?resp.arrayBuffer():"string"===encoding?resp.text():resp}))},"./node_modules/bent/src/core.js":module=>{"use strict";const encodings=new Set(["json","buffer","string"]);module.exports=mkrequest=>(...args)=>{const statusCodes=new Set;let method,encoding,headers,baseurl="";return args.forEach((arg=>{if("string"==typeof arg)if(arg.toUpperCase()===arg){if(method){throw new Error(`Can't set method to ${arg}, already set to ${method}.`)}method=arg}else if(arg.startsWith("http:")||arg.startsWith("https:"))baseurl=arg;else{if(!encodings.has(arg))throw new Error(`Unknown encoding, ${arg}`);encoding=arg}else if("number"==typeof arg)statusCodes.add(arg);else{if("object"!=typeof arg)throw new Error("Unknown type: "+typeof arg);if(Array.isArray(arg)||arg instanceof Set)arg.forEach((code=>statusCodes.add(code)));else{if(headers)throw new Error("Cannot set headers twice.");headers=arg}}})),method||(method="GET"),0===statusCodes.size&&statusCodes.add(200),mkrequest(statusCodes,method,encoding,headers,baseurl)}},"./node_modules/lodash/_baseTrim.js":(module,__unused_webpack_exports,__webpack_require__)=>{var trimmedEndIndex=__webpack_require__("./node_modules/lodash/_trimmedEndIndex.js"),reTrimStart=/^\s+/;module.exports=function baseTrim(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}},"./node_modules/lodash/_trimmedEndIndex.js":module=>{var reWhitespace=/\s/;module.exports=function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}},"./node_modules/lodash/debounce.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isObject=__webpack_require__("./node_modules/lodash/isObject.js"),now=__webpack_require__("./node_modules/lodash/now.js"),toNumber=__webpack_require__("./node_modules/lodash/toNumber.js"),nativeMax=Math.max,nativeMin=Math.min;module.exports=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}},"./node_modules/lodash/now.js":(module,__unused_webpack_exports,__webpack_require__)=>{var root=__webpack_require__("./node_modules/lodash/_root.js");module.exports=function(){return root.Date.now()}},"./node_modules/lodash/toNumber.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseTrim=__webpack_require__("./node_modules/lodash/_baseTrim.js"),isObject=__webpack_require__("./node_modules/lodash/isObject.js"),isSymbol=__webpack_require__("./node_modules/lodash/isSymbol.js"),reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/microsoft.cognitiveservices.speech.sdk.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0});new(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js").AgentConfig),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),exports)},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ConsoleLoggingListener.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConsoleLoggingListener=void 0;const fs=__importStar(__webpack_require__("?f824")),LogLevel_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LogLevel.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");exports.ConsoleLoggingListener=class ConsoleLoggingListener{constructor(logLevelFilter=LogLevel_js_1.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=logLevelFilter}set logPath(path){Contracts_js_1.Contracts.throwIfNullOrUndefined(fs.openSync,"\nFile System access not available"),this.privLogPath=path}set enableConsoleOutput(enableOutput){this.privEnableConsoleOutput=enableOutput}onEvent(event){if(event.eventType>=this.privLogLevelFilter){const log=this.toString(event);if(this.privLogPath&&fs.writeFileSync(this.privLogPath,log+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(event.eventType){case LogLevel_js_1.LogLevel.Debug:console.debug(log);break;case LogLevel_js_1.LogLevel.Info:console.info(log);break;case LogLevel_js_1.LogLevel.Warning:console.warn(log);break;case LogLevel_js_1.LogLevel.Error:console.error(log);break;default:console.log(log)}}}toString(event){const logFragments=[`${event.eventTime}`,`${event.name}`],e=event;for(const prop in e)if(prop&&event.hasOwnProperty(prop)&&"eventTime"!==prop&&"eventType"!==prop&&"eventId"!==prop&&"name"!==prop&&"constructor"!==prop){const value=e[prop];let valueToLog="<NULL>";null!=value&&(valueToLog="number"==typeof value||"string"==typeof value?value.toString():JSON.stringify(value)),logFragments.push(`${prop}: ${valueToLog}`)}return logFragments.join(" | ")}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ConsoleLoggingListener.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/IRecorder.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/MicAudioSource.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/FileAudioSource.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/PCMRecorder.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketConnection.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketMessageAdapter.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ReplayableAudioNode.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ProxyInfo.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/RestMessageAdapter.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/RestConfigBase.js"),exports)},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/FileAudioSource.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileAudioSource=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),AudioStreamFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");exports.FileAudioSource=class FileAudioSource{constructor(file,filename,audioSourceId){this.privStreams={},this.privHeaderEnd=44,this.privId=audioSourceId||Exports_js_2.createNoDashGuid(),this.privEvents=new Exports_js_2.EventSource,this.privSource=file,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=file.name:this.privFilename=filename||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const errorMsg=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new Exports_js_2.AudioSourceErrorEvent(errorMsg,"")),Promise.reject(errorMsg)}this.onEvent(new Exports_js_2.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Exports_js_2.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(audioNodeId){return __awaiter(this,void 0,void 0,(function*(){this.onEvent(new Exports_js_2.AudioStreamNodeAttachingEvent(this.privId,audioNodeId));const stream=yield this.upload(audioNodeId);return this.onEvent(new Exports_js_2.AudioStreamNodeAttachedEvent(this.privId,audioNodeId)),Promise.resolve({detach:()=>__awaiter(this,void 0,void 0,(function*(){stream.readEnded(),delete this.privStreams[audioNodeId],this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId)),yield this.turnOff()})),id:()=>audioNodeId,read:()=>stream.read()})}))}detach(audioNodeId){audioNodeId&&this.privStreams[audioNodeId]&&(this.privStreams[audioNodeId].close(),delete this.privStreams[audioNodeId],this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId)))}turnOff(){for(const streamId in this.privStreams)if(streamId){const stream=this.privStreams[streamId];stream&&!stream.isClosed&&stream.close()}return this.onEvent(new Exports_js_2.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then((result=>Promise.resolve({bitspersample:result.bitsPerSample,channelcount:result.channels,connectivity:Exports_js_1.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:result.samplesPerSec,type:Exports_js_1.type.File})))}readHeader(){const header=this.privSource.slice(0,4296),headerResult=new Exports_js_2.Deferred,processHeader=header=>{const view=new DataView(header),getWord=index=>String.fromCharCode(view.getUint8(index),view.getUint8(index+1),view.getUint8(index+2),view.getUint8(index+3));if("RIFF"!==getWord(0))return void headerResult.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==getWord(8)||"fmt "!==getWord(12))return void headerResult.reject("Invalid WAV header in file, WAVEfmt was not found");const formatSize=view.getInt32(16,!0),channelCount=view.getUint16(22,!0),sampleRate=view.getUint32(24,!0),bitsPerSample=view.getUint16(34,!0);let pos=36+Math.max(formatSize-16,0);for(;"data"!==getWord(pos);pos+=2)if(pos>4288)return void headerResult.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=pos+8,headerResult.resolve(AudioStreamFormat_js_1.AudioStreamFormat.getWaveFormatPCM(sampleRate,bitsPerSample,channelCount))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&header instanceof Blob){const reader=new FileReader;reader.onload=event=>{const header=event.target.result;processHeader(header)},reader.readAsArrayBuffer(header)}else{const h=header;processHeader(h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength))}return headerResult.promise}upload(audioNodeId){return __awaiter(this,void 0,void 0,(function*(){const onerror=error=>{const errorMsg=`Error occurred while processing '${this.privFilename}'. ${error}`;throw this.onEvent(new Exports_js_2.AudioStreamNodeErrorEvent(this.privId,audioNodeId,errorMsg)),new Error(errorMsg)};try{yield this.turnOn();const format=yield this.privAudioFormatPromise,stream=new Exports_js_2.ChunkedArrayBufferStream(format.avgBytesPerSec/10,audioNodeId);this.privStreams[audioNodeId]=stream;const chunk=this.privSource.slice(this.privHeaderEnd),processFile=buff=>{stream.isClosed||(stream.writeStreamChunk({buffer:buff,isEnd:!1,timeReceived:Date.now()}),stream.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&chunk instanceof Blob){const reader=new FileReader;reader.onerror=ev=>onerror(ev.toString()),reader.onload=event=>{const fileBuffer=event.target.result;processFile(fileBuffer)},reader.readAsArrayBuffer(chunk)}else{const c=chunk;processFile(c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength))}return stream}catch(e){onerror(e)}}))}onEvent(event){this.privEvents.onEvent(event),Exports_js_2.Events.instance.onEvent(event)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/IRecorder.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/MicAudioSource.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MicAudioSource=exports.AudioWorkletSourceURLPropertyName=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),AudioStreamFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");exports.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class MicAudioSource{constructor(privRecorder,deviceId,audioSourceId,mediaStream){this.privRecorder=privRecorder,this.deviceId=deviceId,this.privStreams={},this.privOutputChunkSize=MicAudioSource.AUDIOFORMAT.avgBytesPerSec/10,this.privId=audioSourceId||Exports_js_2.createNoDashGuid(),this.privEvents=new Exports_js_2.EventSource,this.privMediaStream=mediaStream||null,this.privIsClosing=!1}get format(){return Promise.resolve(MicAudioSource.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new Exports_js_2.Deferred;try{this.createAudioContext()}catch(error){if(error instanceof Error){const typedError=error;this.privInitializeDeferral.reject(typedError.name+": "+typedError.message)}else this.privInitializeDeferral.reject(error);return this.privInitializeDeferral.promise}const nav=window.navigator;let getUserMedia=nav.getUserMedia||nav.webkitGetUserMedia||nav.mozGetUserMedia||nav.msGetUserMedia;if(nav.mediaDevices&&(getUserMedia=(constraints,successCallback,errorCallback)=>{nav.mediaDevices.getUserMedia(constraints).then(successCallback).catch(errorCallback)}),getUserMedia){const next=()=>{this.onEvent(new Exports_js_2.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new Exports_js_2.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):getUserMedia({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},(mediaStream=>{this.privMediaStream=mediaStream,this.onEvent(new Exports_js_2.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()}),(error=>{const errorMsg=`Error occurred during microphone initialization: ${error}`;this.privInitializeDeferral.reject(errorMsg),this.onEvent(new Exports_js_2.AudioSourceErrorEvent(this.privId,errorMsg))}))};"suspended"===this.privContext.state?this.privContext.resume().then(next).catch((reason=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${reason}`)})):next()}else{const errorMsg="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(errorMsg),this.onEvent(new Exports_js_2.AudioSourceErrorEvent(errorMsg,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(audioNodeId){return this.onEvent(new Exports_js_2.AudioStreamNodeAttachingEvent(this.privId,audioNodeId)),this.listen(audioNodeId).then((stream=>(this.onEvent(new Exports_js_2.AudioStreamNodeAttachedEvent(this.privId,audioNodeId)),{detach:()=>__awaiter(this,void 0,void 0,(function*(){return stream.readEnded(),delete this.privStreams[audioNodeId],this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId)),this.turnOff()})),id:()=>audioNodeId,read:()=>stream.read()})))}detach(audioNodeId){audioNodeId&&this.privStreams[audioNodeId]&&(this.privStreams[audioNodeId].close(),delete this.privStreams[audioNodeId],this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId)))}turnOff(){return __awaiter(this,void 0,void 0,(function*(){for(const streamId in this.privStreams)if(streamId){const stream=this.privStreams[streamId];stream&&stream.close()}this.onEvent(new Exports_js_2.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()}))}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then((label=>({bitspersample:MicAudioSource.AUDIOFORMAT.bitsPerSample,channelcount:MicAudioSource.AUDIOFORMAT.channels,connectivity:Exports_js_1.connectivity.Unknown,manufacturer:"Speech SDK",model:label,samplerate:MicAudioSource.AUDIOFORMAT.samplesPerSec,type:Exports_js_1.type.Microphones})))}setProperty(name,value){if(name!==exports.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+name+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(value)}getMicrophoneLabel(){if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve("microphone");this.privMicrophoneLabel="microphone";const microphoneDeviceId=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===microphoneDeviceId)return Promise.resolve(this.privMicrophoneLabel);const deferred=new Exports_js_2.Deferred;return navigator.mediaDevices.enumerateDevices().then((devices=>{for(const device of devices)if(device.deviceId===microphoneDeviceId){this.privMicrophoneLabel=device.label;break}deferred.resolve(this.privMicrophoneLabel)}),(()=>deferred.resolve(this.privMicrophoneLabel))),deferred.promise}listen(audioNodeId){return __awaiter(this,void 0,void 0,(function*(){yield this.turnOn();const stream=new Exports_js_2.ChunkedArrayBufferStream(this.privOutputChunkSize,audioNodeId);this.privStreams[audioNodeId]=stream;try{this.privRecorder.record(this.privContext,this.privMediaStream,stream)}catch(error){throw this.onEvent(new Exports_js_2.AudioStreamNodeErrorEvent(this.privId,audioNodeId,error)),error}return stream}))}onEvent(event){this.privEvents.onEvent(event),Exports_js_2.Events.instance.onEvent(event)}createAudioContext(){this.privContext||(this.privContext=AudioStreamFormat_js_1.AudioStreamFormatImpl.getAudioContext(MicAudioSource.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return __awaiter(this,void 0,void 0,(function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let hasClose=!1;"close"in this.privContext&&(hasClose=!0),hasClose?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())}))}}exports.MicAudioSource=MicAudioSource,MicAudioSource.AUDIOFORMAT=AudioStreamFormat_js_1.AudioStreamFormat.getDefaultInputFormat()},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/PCMRecorder.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PcmRecorder=void 0;const Exports_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");exports.PcmRecorder=class PcmRecorder{constructor(stopInputOnRelease){this.privStopInputOnRelease=stopInputOnRelease}record(context,mediaStream,outputStream){const waveStreamEncoder=new Exports_1.RiffPcmEncoder(context.sampleRate,16e3),micInput=context.createMediaStreamSource(mediaStream),attachScriptProcessor=()=>{const scriptNode=(()=>{let bufferSize=0;try{return context.createScriptProcessor(bufferSize,1,1)}catch(error){bufferSize=2048;let audioSampleRate=context.sampleRate;for(;bufferSize<16384&&audioSampleRate>=32e3;)bufferSize<<=1,audioSampleRate>>=1;return context.createScriptProcessor(bufferSize,1,1)}})();scriptNode.onaudioprocess=event=>{const inputFrame=event.inputBuffer.getChannelData(0);if(outputStream&&!outputStream.isClosed){const waveFrame=waveStreamEncoder.encode(inputFrame);waveFrame&&outputStream.writeStreamChunk({buffer:waveFrame,isEnd:!1,timeReceived:Date.now()})}},micInput.connect(scriptNode),scriptNode.connect(context.destination),this.privMediaResources={scriptProcessorNode:scriptNode,source:micInput,stream:mediaStream}},skipAudioWorklet=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(context.audioWorklet&&!skipAudioWorklet){if(!this.privSpeechProcessorScript){const blob=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(blob)}context.audioWorklet.addModule(this.privSpeechProcessorScript).then((()=>{const workletNode=new AudioWorkletNode(context,"speech-processor");workletNode.port.onmessage=ev=>{const inputFrame=ev.data;if(outputStream&&!outputStream.isClosed){const waveFrame=waveStreamEncoder.encode(inputFrame);waveFrame&&outputStream.writeStreamChunk({buffer:waveFrame,isEnd:!1,timeReceived:Date.now()})}},micInput.connect(workletNode),workletNode.connect(context.destination),this.privMediaResources={scriptProcessorNode:workletNode,source:micInput,stream:mediaStream}})).catch((()=>{attachScriptProcessor()}))}else try{attachScriptProcessor()}catch(err){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${err}`)}}releaseMediaResources(context){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(context.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach((track=>track.stop())),this.privMediaResources.source=null))}setWorkletUrl(url){this.privSpeechProcessorScript=url}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ProxyInfo.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProxyInfo=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ProxyInfo{constructor(proxyHostName,proxyPort,proxyUserName,proxyPassword){this.privProxyHostName=proxyHostName,this.privProxyPort=proxyPort,this.privProxyUserName=proxyUserName,this.privProxyPassword=proxyPassword}static fromParameters(parameters){return new ProxyInfo(parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyPort),10),parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyUserName),parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(config){return this.fromParameters(config.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}exports.ProxyInfo=ProxyInfo},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/ReplayableAudioNode.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReplayableAudioNode=void 0;exports.ReplayableAudioNode=class ReplayableAudioNode{constructor(audioSource,bytesPerSecond){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=audioSource,this.privBytesPerSecond=bytesPerSecond}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){const offsetToSeek=this.privReplayOffset-this.privBufferStartOffset;let bytesToSeek=Math.round(offsetToSeek*this.privBytesPerSecond*1e-7);0!=bytesToSeek%2&&bytesToSeek++;let i=0;for(;i<this.privBuffers.length&&bytesToSeek>=this.privBuffers[i].chunk.buffer.byteLength;)bytesToSeek-=this.privBuffers[i++].chunk.buffer.byteLength;if(i<this.privBuffers.length){const retVal=this.privBuffers[i].chunk.buffer.slice(bytesToSeek);return this.privReplayOffset+=retVal.byteLength/this.privBytesPerSecond*1e7,i===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:retVal,isEnd:!1,timeReceived:this.privBuffers[i].chunk.timeReceived})}}return this.privAudioNode.read().then((result=>(result&&result.buffer&&(this.privBuffers.push(new BufferEntry(result,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=result.buffer.byteLength),result)))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(offset){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=offset;const offsetToSeek=offset-this.privBufferStartOffset;let bytesToSeek=Math.round(offsetToSeek*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&bytesToSeek>=this.privBuffers[i].chunk.buffer.byteLength;)bytesToSeek-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(offset-bytesToSeek/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(offset){if(offset<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const value of this.privBuffers){const startOffset=value.byteOffset/this.privBytesPerSecond*1e7,endOffset=startOffset+value.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(offset>=startOffset&&offset<=endOffset)return value.chunk.timeReceived}return 0}};class BufferEntry{constructor(chunk,serial,byteOffset){this.chunk=chunk,this.serial=serial,this.byteOffset=byteOffset}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/RestConfigBase.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RestConfigBase=void 0;class RestConfigBase{static get requestOptions(){return RestConfigBase.privDefaultRequestOptions}static get configParams(){return RestConfigBase.privDefaultParams}static get restErrors(){return RestConfigBase.privRestErrors}}exports.RestConfigBase=RestConfigBase,RestConfigBase.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},RestConfigBase.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},RestConfigBase.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/RestMessageAdapter.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RestMessageAdapter=exports.RestRequestType=void 0;const bent_1=__importDefault(__webpack_require__("./node_modules/bent/src/browser.js")),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");var RestRequestType;!function(RestRequestType){RestRequestType.Get="GET",RestRequestType.Post="POST",RestRequestType.Delete="DELETE",RestRequestType.File="file"}(RestRequestType=exports.RestRequestType||(exports.RestRequestType={}));exports.RestMessageAdapter=class RestMessageAdapter{constructor(configParams){if(!configParams)throw new Exports_js_1.ArgumentNullError("configParams");this.privHeaders=configParams.headers,this.privIgnoreCache=configParams.ignoreCache}static extractHeaderValue(headerKey,headers){let headerValue="";try{const arr=headers.trim().split(/[\r\n]+/),headerMap={};arr.forEach((line=>{const parts=line.split(": "),header=parts.shift().toLowerCase(),value=parts.join(": ");headerMap[header]=value})),headerValue=headerMap[headerKey.toLowerCase()]}catch(e){}return headerValue}set options(configParams){this.privHeaders=configParams.headers,this.privIgnoreCache=configParams.ignoreCache}setHeaders(key,value){this.privHeaders[key]=value}request(method,uri,queryParams={},body=null){const responseReceivedDeferral=new Exports_js_1.Deferred,requestCommand=method===RestRequestType.File?"POST":method,handleRestResponse=(data,j={})=>{const d=data;return{data:JSON.stringify(j),headers:JSON.stringify(data.headers),json:j,ok:data.statusCode>=200&&data.statusCode<300,status:data.statusCode,statusText:j.error?j.error.message:d.statusText?d.statusText:d.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),method===RestRequestType.Post&&body&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(postData=>{bent_1.default(uri,requestCommand,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(queryParams)?"":`?${this.queryParams(queryParams)}`,postData).then((data=>__awaiter(this,void 0,void 0,(function*(){if(method===RestRequestType.Delete||204===data.statusCode)responseReceivedDeferral.resolve(handleRestResponse(data));else try{const j=yield data.json();responseReceivedDeferral.resolve(handleRestResponse(data,j))}catch(_a){responseReceivedDeferral.resolve(handleRestResponse(data))}})))).catch((error=>{responseReceivedDeferral.reject(error)}))})(body),responseReceivedDeferral.promise}queryParams(params={}){return Object.keys(params).map((k=>encodeURIComponent(k)+"="+encodeURIComponent(params[k]))).join("&")}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketConnection.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebsocketConnection=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),WebsocketMessageAdapter_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketMessageAdapter.js");exports.WebsocketConnection=class WebsocketConnection{constructor(uri,queryParameters,headers,messageFormatter,proxyInfo,enableCompression=!1,connectionId){if(this.privIsDisposed=!1,!uri)throw new Exports_js_1.ArgumentNullError("uri");if(!messageFormatter)throw new Exports_js_1.ArgumentNullError("messageFormatter");this.privMessageFormatter=messageFormatter;let queryParams="",i=0;if(queryParameters)for(const paramName in queryParameters)if(paramName){queryParams+=0===i&&-1===uri.indexOf("?")?"?":"&";queryParams+=encodeURIComponent(paramName);let val=queryParameters[paramName];val&&(val=encodeURIComponent(val),queryParams+=`=${val}`),i++}if(headers)for(const headerName in headers)if(headerName){queryParams+=0===i&&-1===uri.indexOf("?")?"?":"&";queryParams+=`${headerName}=${encodeURIComponent(headers[headerName])}`,i++}this.privUri=uri+queryParams,this.privId=connectionId||Exports_js_1.createNoDashGuid(),this.privConnectionMessageAdapter=new WebsocketMessageAdapter_js_1.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,proxyInfo,headers,enableCompression)}dispose(){return __awaiter(this,void 0,void 0,(function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())}))}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(message){return this.privConnectionMessageAdapter.send(message)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/WebsocketMessageAdapter.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebsocketMessageAdapter=void 0;const net=__importStar(__webpack_require__("?540f")),tls=__importStar(__webpack_require__("?71f6")),agent_base_1=__importDefault(__webpack_require__("?875c")),https_proxy_agent_1=__importDefault(__webpack_require__("?a523")),ws_1=__importDefault(__webpack_require__("?3dbe")),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");class WebsocketMessageAdapter{constructor(uri,connectionId,messageFormatter,proxyInfo,headers,enableCompression){if(!uri)throw new Exports_js_1.ArgumentNullError("uri");if(!messageFormatter)throw new Exports_js_1.ArgumentNullError("messageFormatter");this.proxyInfo=proxyInfo,this.privConnectionEvents=new Exports_js_1.EventSource,this.privConnectionId=connectionId,this.privMessageFormatter=messageFormatter,this.privConnectionState=Exports_js_1.ConnectionState.None,this.privUri=uri,this.privHeaders=headers,this.privEnableCompression=enableCompression,this.privHeaders[HeaderNames_js_1.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===Exports_js_1.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new Exports_js_1.Deferred,this.privCertificateValidatedDeferral=new Exports_js_1.Deferred,this.privConnectionState=Exports_js_1.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||WebsocketMessageAdapter.forceNpmWebSocket){const options={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),options.agent=this.getAgent();let protocol=new URL(this.privUri).protocol;"wss:"===(null==protocol?void 0:protocol.toLocaleLowerCase())?protocol="https:":"ws:"===(null==protocol?void 0:protocol.toLocaleLowerCase())&&(protocol="http:"),options.agent.protocol=protocol,this.privWebsocketClient=new ws_1.default(this.privUri,options)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new Exports_js_1.Queue,this.privDisconnectDeferral=new Exports_js_1.Deferred,this.privSendMessageQueue=new Exports_js_1.Queue,this.processSendQueue().catch((reason=>{Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason))}))}catch(error){return this.privConnectionEstablishDeferral.resolve(new Exports_js_1.ConnectionOpenResponse(500,error)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new Exports_js_1.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then((()=>{this.privConnectionState=Exports_js_1.ConnectionState.Connected,this.onEvent(new Exports_js_1.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new Exports_js_1.ConnectionOpenResponse(200,""))}),(error=>{this.privConnectionEstablishDeferral.reject(error)}))},this.privWebsocketClient.onerror=e=>{this.onEvent(new Exports_js_1.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===Exports_js_1.ConnectionState.Connecting?(this.privConnectionState=Exports_js_1.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new Exports_js_1.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=Exports_js_1.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new Exports_js_1.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch((reason=>{Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason))}))},this.privWebsocketClient.onmessage=e=>{const networkReceivedTime=(new Date).toISOString();if(this.privConnectionState===Exports_js_1.ConnectionState.Connected){const deferred=new Exports_js_1.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(deferred.promise),e.data instanceof ArrayBuffer){const rawMessage=new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(rawMessage).then((connectionMessage=>{this.onEvent(new Exports_js_1.ConnectionMessageReceivedEvent(this.privConnectionId,networkReceivedTime,connectionMessage)),deferred.resolve(connectionMessage)}),(error=>{deferred.reject(`Invalid binary message format. Error: ${error}`)}))}else{const rawMessage=new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(rawMessage).then((connectionMessage=>{this.onEvent(new Exports_js_1.ConnectionMessageReceivedEvent(this.privConnectionId,networkReceivedTime,connectionMessage)),deferred.resolve(connectionMessage)}),(error=>{deferred.reject(`Invalid text message format. Error: ${error}`)}))}}},this.privConnectionEstablishDeferral.promise}send(message){if(this.privConnectionState!==Exports_js_1.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${Exports_js_1.ConnectionState[this.privConnectionState]} state`);const messageSendStatusDeferral=new Exports_js_1.Deferred,messageSendDeferral=new Exports_js_1.Deferred;return this.privSendMessageQueue.enqueueFromPromise(messageSendDeferral.promise),this.privMessageFormatter.fromConnectionMessage(message).then((rawMessage=>{messageSendDeferral.resolve({Message:message,RawWebsocketMessage:rawMessage,sendStatusDeferral:messageSendStatusDeferral})}),(error=>{messageSendDeferral.reject(`Error formatting the message. ${error}`)})),messageSendStatusDeferral.promise}read(){return this.privConnectionState!==Exports_js_1.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(reason){return this.privWebsocketClient?(this.privConnectionState!==Exports_js_1.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,reason||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(sendItem){try{return sendItem?(this.onEvent(new Exports_js_1.ConnectionMessageSentEvent(this.privConnectionId,(new Date).toISOString(),sendItem.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(sendItem.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+sendItem.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject(`websocket send error: ${e}`)}}onClose(code,reason){return __awaiter(this,void 0,void 0,(function*(){const closeReason=`Connection closed. ${code}: ${reason}`;this.privConnectionState=Exports_js_1.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose((()=>{}),closeReason),yield this.privSendMessageQueue.drainAndDispose((pendingSendItem=>{pendingSendItem.sendStatusDeferral.reject(closeReason)}),closeReason)}))}processSendQueue(){return __awaiter(this,void 0,void 0,(function*(){for(;;){const itemToSend=this.privSendMessageQueue.dequeue(),sendItem=yield itemToSend;if(!sendItem)return;try{yield this.sendRawMessage(sendItem),sendItem.sendStatusDeferral.resolve()}catch(sendError){sendItem.sendStatusDeferral.reject(sendError)}}}))}onEvent(event){this.privConnectionEvents.onEvent(event),Exports_js_1.Events.instance.onEvent(event)}getAgent(){const agent=new agent_base_1.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(agent.proxyInfo=this.proxyInfo),agent}static GetProxyAgent(proxyInfo){const httpProxyOptions={host:proxyInfo.HostName,port:proxyInfo.Port};proxyInfo.UserName?httpProxyOptions.headers={"Proxy-Authentication":"Basic "+new Buffer(`${proxyInfo.UserName}:${void 0===proxyInfo.Password?"":proxyInfo.Password}`).toString("base64")}:httpProxyOptions.headers={},httpProxyOptions.headers.requestOCSP="true";return new https_proxy_agent_1.default(httpProxyOptions)}createConnection(request,options){let socketPromise;if(options=Object.assign(Object.assign({},options),{requestOCSP:!0,servername:options.host}),this.proxyInfo){const baseAgent=WebsocketMessageAdapter.GetProxyAgent(this.proxyInfo);socketPromise=new Promise(((resolve,reject)=>{baseAgent.callback(request,options,((error,socket)=>{error?reject(error):resolve(socket)}))}))}else socketPromise=options.secureEndpoint?Promise.resolve(tls.connect(options)):Promise.resolve(net.connect(options));return socketPromise}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}exports.WebsocketMessageAdapter=WebsocketMessageAdapter,WebsocketMessageAdapter.forceNpmWebSocket=!1},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AddedLmIntent.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddedLmIntent=void 0;exports.AddedLmIntent=class AddedLmIntent{constructor(modelImpl,intentName){this.modelImpl=modelImpl,this.intentName=intentName}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AgentConfig.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AgentConfig=void 0;exports.AgentConfig=class AgentConfig{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(value){this.iPrivConfig=value}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AvatarSynthesisAdapter.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvatarSynthesisAdapter=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class AvatarSynthesisAdapter extends Exports_js_2.SynthesisAdapterBase{constructor(authentication,connectionFactory,synthesizerConfig,avatarSynthesizer,avatarConfig){super(authentication,connectionFactory,synthesizerConfig,void 0),this.privAvatarSynthesizer=avatarSynthesizer,this.privSynthesizer=avatarSynthesizer,this.privAvatarConfig=avatarConfig}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:null===(_a=this.privAvatarConfig.videoFormat)||void 0===_a?void 0:_a.bitrate,codec:null===(_b=this.privAvatarConfig.videoFormat)||void 0===_b?void 0:_b.codec,crop:{bottomRight:{x:null===(_e=null===(_d=null===(_c=this.privAvatarConfig.videoFormat)||void 0===_c?void 0:_c.cropRange)||void 0===_d?void 0:_d.bottomRight)||void 0===_e?void 0:_e.x,y:null===(_h=null===(_g=null===(_f=this.privAvatarConfig.videoFormat)||void 0===_f?void 0:_f.cropRange)||void 0===_g?void 0:_g.bottomRight)||void 0===_h?void 0:_h.y},topLeft:{x:null===(_l=null===(_k=null===(_j=this.privAvatarConfig.videoFormat)||void 0===_j?void 0:_j.cropRange)||void 0===_k?void 0:_k.topLeft)||void 0===_l?void 0:_l.x,y:null===(_p=null===(_o=null===(_m=this.privAvatarConfig.videoFormat)||void 0===_m?void 0:_m.cropRange)||void 0===_o?void 0:_o.topLeft)||void 0===_p?void 0:_p.y}},resolution:{height:null===(_q=this.privAvatarConfig.videoFormat)||void 0===_q?void 0:_q.height,width:null===(_r=this.privAvatarConfig.videoFormat)||void 0===_r?void 0:_r.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(Exports_js_1.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(metadata){if(this.privAvatarSynthesizer.avatarEventReceived){const avatarEventArgs=new Exports_js_1.AvatarEventArgs(metadata.Data.Offset,metadata.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,avatarEventArgs)}catch(error){}}}}exports.AvatarSynthesisAdapter=AvatarSynthesisAdapter},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveSubscriptionKeyAuthentication.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CognitiveSubscriptionKeyAuthentication=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),IAuthentication_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js");exports.CognitiveSubscriptionKeyAuthentication=class CognitiveSubscriptionKeyAuthentication{constructor(subscriptionKey){if(!subscriptionKey)throw new Exports_js_1.ArgumentNullError("subscriptionKey");this.privAuthInfo=new IAuthentication_js_1.AuthInfo(HeaderNames_js_1.HeaderNames.AuthKey,subscriptionKey)}fetch(authFetchEventId){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(authFetchEventId){return Promise.resolve(this.privAuthInfo)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveTokenAuthentication.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CognitiveTokenAuthentication=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),IAuthentication_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js");class CognitiveTokenAuthentication{constructor(fetchCallback,fetchOnExpiryCallback){if(!fetchCallback)throw new Exports_js_1.ArgumentNullError("fetchCallback");if(!fetchOnExpiryCallback)throw new Exports_js_1.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=fetchCallback,this.privFetchOnExpiryCallback=fetchOnExpiryCallback}fetch(authFetchEventId){return this.privFetchCallback(authFetchEventId).then((token=>new IAuthentication_js_1.AuthInfo(HeaderNames_js_1.HeaderNames.Authorization,void 0===token?void 0:CognitiveTokenAuthentication.privTokenPrefix+token)))}fetchOnExpiry(authFetchEventId){return this.privFetchOnExpiryCallback(authFetchEventId).then((token=>new IAuthentication_js_1.AuthInfo(HeaderNames_js_1.HeaderNames.Authorization,void 0===token?void 0:CognitiveTokenAuthentication.privTokenPrefix+token)))}}exports.CognitiveTokenAuthentication=CognitiveTokenAuthentication,CognitiveTokenAuthentication.privTokenPrefix="Bearer "},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionFactoryBase=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),QueryParameterNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js");exports.ConnectionFactoryBase=class ConnectionFactoryBase{static getHostSuffix(region){if(region){if(region.toLowerCase().startsWith("china"))return".azure.cn";if(region.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(config,queryParams,endpoint){new Map([[Exports_js_2.PropertyId.Speech_SegmentationSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.SegmentationSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceConnection_EnableAudioLogging,QueryParameterNames_js_1.QueryParameterNames.EnableAudioLogging],[Exports_js_2.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.EndSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.InitialSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceResponse_PostProcessingOption,QueryParameterNames_js_1.QueryParameterNames.Postprocessing],[Exports_js_2.PropertyId.SpeechServiceResponse_ProfanityOption,QueryParameterNames_js_1.QueryParameterNames.Profanity],[Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,QueryParameterNames_js_1.QueryParameterNames.EnableWordLevelTimestamps],[Exports_js_2.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,QueryParameterNames_js_1.QueryParameterNames.StableIntermediateThreshold]]).forEach(((parameterName,propertyId)=>{this.setUrlParameter(propertyId,parameterName,config,queryParams,endpoint)}));const serviceProperties=JSON.parse(config.parameters.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));Object.keys(serviceProperties).forEach((value=>{queryParams[value]=serviceProperties[value]}))}setUrlParameter(propId,parameterName,config,queryParams,endpoint){const value=config.parameters.getProperty(propId,void 0);!value||endpoint&&-1!==endpoint.search(parameterName)||(queryParams[parameterName]=value.toLocaleLowerCase())}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConversationServiceRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationServiceRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class ConversationServiceRecognizer extends Exports_js_2.ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){super(authentication,connectionFactory,audioSource,recognizerConfig,recognizer),this.handleSpeechPhraseMessage=textBody=>__awaiter(this,void 0,void 0,(function*(){return this.handleSpeechPhrase(textBody)})),this.handleSpeechHypothesisMessage=textBody=>this.handleSpeechHypothesis(textBody)}processTypeSpecificMessages(connectionMessage){}handleRecognizedCallback(result,offset,sessionId){}handleRecognizingCallback(result,duration,sessionId){}processSpeechMessages(connectionMessage){return __awaiter(this,void 0,void 0,(function*(){let processed=!1;switch(connectionMessage.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(connectionMessage.textBody),processed=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(connectionMessage.textBody)),processed=!0}return processed}))}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){}handleSpeechPhrase(textBody){return __awaiter(this,void 0,void 0,(function*(){const simple=Exports_js_2.SimpleSpeechPhrase.fromJSON(textBody),resultReason=Exports_js_2.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus);let result;const resultProps=new Exports_js_1.PropertyCollection;resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,textBody);const simpleOffset=simple.Offset+this.privRequestSession.currentTurnAudioOffset;let offset=simpleOffset;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+simple.Offset+simple.Duration),Exports_js_1.ResultReason.Canceled===resultReason){const cancelReason=Exports_js_2.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus),cancellationErrorCode=Exports_js_2.EnumTranslation.implTranslateCancelErrorCode(simple.RecognitionStatus);yield this.cancelRecognitionLocal(cancelReason,cancellationErrorCode,Exports_js_2.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode))}else if(!this.privRequestSession.isSpeechEnded||resultReason!==Exports_js_1.ResultReason.NoMatch||simple.RecognitionStatus===Exports_js_2.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(Exports_js_2.OutputFormatPropertyName)===Exports_js_1.OutputFormat[Exports_js_1.OutputFormat.Simple])result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,simple.DisplayText,simple.Duration,simpleOffset,simple.Language,simple.LanguageDetectionConfidence,simple.SpeakerId,void 0,textBody,resultProps);else{const detailed=Exports_js_2.DetailedSpeechPhrase.fromJSON(textBody),totalOffset=detailed.Offset+this.privRequestSession.currentTurnAudioOffset,offsetCorrectedJson=detailed.getJsonWithCorrectedOffsets(totalOffset);result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,detailed.Text,detailed.Duration,totalOffset,detailed.Language,detailed.LanguageDetectionConfidence,detailed.SpeakerId,void 0,offsetCorrectedJson,resultProps),offset=result.offset}this.handleRecognizedCallback(result,offset,this.privRequestSession.sessionId)}}))}handleSpeechHypothesis(textBody){const hypothesis=Exports_js_2.SpeechHypothesis.fromJSON(textBody),offset=hypothesis.Offset+this.privRequestSession.currentTurnAudioOffset,resultProps=new Exports_js_1.PropertyCollection;resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,textBody);const result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,Exports_js_1.ResultReason.RecognizingSpeech,hypothesis.Text,hypothesis.Duration,offset,hypothesis.Language,hypothesis.LanguageDetectionConfidence,hypothesis.SpeakerId,void 0,textBody,resultProps);this.privRequestSession.onHypothesis(offset),this.handleRecognizingCallback(result,hypothesis.Duration,this.privRequestSession.sessionId)}}exports.ConversationServiceRecognizer=ConversationServiceRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConversationTranscriberConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranscriberConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),QueryParameterNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js");class ConversationTranscriberConnectionFactory extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(config,authInfo,connectionId){let endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,void 0);const region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,void 0),hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region),host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://"+region+".stt.speech"+hostSuffix),queryParams={},endpointId=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,void 0),language=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);endpointId?endpoint&&-1!==endpoint.search(QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId)||(queryParams[QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId]=endpointId):language&&(endpoint&&-1!==endpoint.search(QueryParameterNames_js_1.QueryParameterNames.Language)||(queryParams[QueryParameterNames_js_1.QueryParameterNames.Language]=language)),void 0!==config.autoDetectSourceLanguages&&(queryParams[QueryParameterNames_js_1.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(config,queryParams,endpoint),endpoint||(endpoint=`${host}${this.universalUri}`);const headers={};void 0!==authInfo.token&&""!==authInfo.token&&(headers[authInfo.headerName]=authInfo.token),headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),webSocketConnection=new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_4.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId),uri=webSocketConnection.uri;return config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,uri),webSocketConnection}setV2UrlParams(config,queryParams,endpoint){new Map([[Exports_js_2.PropertyId.Speech_SegmentationSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.SegmentationSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceConnection_EnableAudioLogging,QueryParameterNames_js_1.QueryParameterNames.EnableAudioLogging],[Exports_js_2.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.EndSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.InitialSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceResponse_PostProcessingOption,QueryParameterNames_js_1.QueryParameterNames.Postprocessing],[Exports_js_2.PropertyId.SpeechServiceResponse_ProfanityOption,QueryParameterNames_js_1.QueryParameterNames.Profanity],[Exports_js_2.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,QueryParameterNames_js_1.QueryParameterNames.StableIntermediateThreshold]]).forEach(((parameterName,propertyId)=>{this.setUrlParameter(propertyId,parameterName,config,queryParams,endpoint)}));const serviceProperties=JSON.parse(config.parameters.getProperty(Exports_js_3.ServicePropertiesPropertyName,"{}"));Object.keys(serviceProperties).forEach((value=>{queryParams[value]=serviceProperties[value]}))}}exports.ConversationTranscriberConnectionFactory=ConversationTranscriberConnectionFactory},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConversationTranscriptionServiceRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranscriptionServiceRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class ConversationTranscriptionServiceRecognizer extends Exports_js_2.ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,conversationTranscriber){super(authentication,connectionFactory,audioSource,recognizerConfig,conversationTranscriber),this.privConversationTranscriber=conversationTranscriber,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const phraseDetection=this.privSpeechContext.getSection("phraseDetection");phraseDetection.mode="Conversation";const speakerDiarization={mode:"Anonymous"};speakerDiarization.audioSessionId=this.privDiarizationSessionId,speakerDiarization.audioOffsetMs=0,phraseDetection.speakerDiarization=speakerDiarization,this.privSpeechContext.setSection("phraseDetection",phraseDetection)}}processTypeSpecificMessages(connectionMessage){return __awaiter(this,void 0,void 0,(function*(){let result;const resultProps=new Exports_js_1.PropertyCollection;resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody);let processed=!1;switch(connectionMessage.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const hypothesis=Exports_js_2.SpeechHypothesis.fromJSON(connectionMessage.textBody),offset=hypothesis.Offset+this.privRequestSession.currentTurnAudioOffset;result=new Exports_js_1.ConversationTranscriptionResult(this.privRequestSession.requestId,Exports_js_1.ResultReason.RecognizingSpeech,hypothesis.Text,hypothesis.Duration,offset,hypothesis.Language,hypothesis.LanguageDetectionConfidence,void 0,void 0,connectionMessage.textBody,resultProps),this.privRequestSession.onHypothesis(offset);const ev=new Exports_js_1.ConversationTranscriptionEventArgs(result,hypothesis.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,ev)}catch(error){}processed=!0;break;case"speech.phrase":const simple=Exports_js_2.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody),resultReason=Exports_js_2.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+simple.Offset+simple.Duration),Exports_js_1.ResultReason.Canceled===resultReason){const cancelReason=Exports_js_2.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus),cancellationErrorCode=Exports_js_2.EnumTranslation.implTranslateCancelErrorCode(simple.RecognitionStatus);yield this.cancelRecognitionLocal(cancelReason,cancellationErrorCode,Exports_js_2.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode))}else if(!this.privRequestSession.isSpeechEnded||resultReason!==Exports_js_1.ResultReason.NoMatch||simple.RecognitionStatus===Exports_js_2.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(Exports_js_2.OutputFormatPropertyName)===Exports_js_1.OutputFormat[Exports_js_1.OutputFormat.Simple])result=new Exports_js_1.ConversationTranscriptionResult(this.privRequestSession.requestId,resultReason,simple.DisplayText,simple.Duration,simple.Offset+this.privRequestSession.currentTurnAudioOffset,simple.Language,simple.LanguageDetectionConfidence,simple.SpeakerId,void 0,connectionMessage.textBody,resultProps);else{const detailed=Exports_js_2.DetailedSpeechPhrase.fromJSON(connectionMessage.textBody),totalOffset=detailed.Offset+this.privRequestSession.currentTurnAudioOffset,offsetCorrectedJson=detailed.getJsonWithCorrectedOffsets(totalOffset);result=new Exports_js_1.ConversationTranscriptionResult(this.privRequestSession.requestId,resultReason,detailed.RecognitionStatus===Exports_js_2.RecognitionStatus.Success?detailed.NBest[0].Display:void 0,detailed.Duration,totalOffset,detailed.Language,detailed.LanguageDetectionConfidence,simple.SpeakerId,void 0,offsetCorrectedJson,resultProps)}const event=new Exports_js_1.ConversationTranscriptionEventArgs(result,result.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,event)}catch(error){}}processed=!0}return processed}))}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){if((new Exports_js_1.PropertyCollection).setProperty(Exports_js_2.CancellationErrorCodePropertyName,Exports_js_1.CancellationErrorCode[errorCode]),this.privConversationTranscriber.canceled){const cancelEvent=new Exports_js_1.ConversationTranscriptionCanceledEventArgs(cancellationReason,error,errorCode,void 0,sessionId);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,cancelEvent)}catch(_a){}}}}exports.ConversationTranscriptionServiceRecognizer=ConversationTranscriptionServiceRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DialogConnectorFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DialogConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),QueryParameterNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js");class DialogConnectionFactory extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{create(config,authInfo,connectionId){const applicationId=config.parameters.getProperty(Exports_js_3.PropertyId.Conversation_ApplicationId,""),dialogType=config.parameters.getProperty(Exports_js_3.PropertyId.Conversation_DialogType),region=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Region),language=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),requestTurnStatus=config.parameters.getProperty(Exports_js_3.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),queryParams={};queryParams[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId,queryParams[QueryParameterNames_js_1.QueryParameterNames.Format]=config.parameters.getProperty(Exports_js_2.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]).toLowerCase(),queryParams[QueryParameterNames_js_1.QueryParameterNames.Language]=language,queryParams[QueryParameterNames_js_1.QueryParameterNames.RequestBotStatusMessages]=requestTurnStatus,applicationId&&(queryParams[QueryParameterNames_js_1.QueryParameterNames.BotId]=applicationId,dialogType===Exports_js_3.DialogServiceConfig.DialogTypes.CustomCommands&&(queryParams[HeaderNames_js_1.HeaderNames.CustomCommandsAppId]=applicationId));const resourceInfix=dialogType===Exports_js_3.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",version=dialogType===Exports_js_3.DialogServiceConfig.DialogTypes.CustomCommands?"v1":dialogType===Exports_js_3.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",headers={};null!=authInfo.token&&""!==authInfo.token&&(headers[authInfo.headerName]=authInfo.token);let endpoint=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Endpoint,"");if(!endpoint){const hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region),host=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Host,`wss://${region}.${DialogConnectionFactory.BaseUrl}${hostSuffix}`);endpoint=`${host.endsWith("/")?host:host+"/"}${resourceInfix}${DialogConnectionFactory.ApiKey}/${version}`}this.setCommonUrlParams(config,queryParams,endpoint);const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_4.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId)}}exports.DialogConnectionFactory=DialogConnectionFactory,DialogConnectionFactory.ApiKey="api",DialogConnectionFactory.BaseUrl="convai.speech"},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DialogServiceAdapter.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DialogServiceAdapter=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),DialogEvents_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/DialogEvents.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),AudioOutputFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputFormat.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),DialogServiceTurnStateManager_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DialogServiceTurnStateManager.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),ActivityResponsePayload_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/ActivityResponsePayload.js"),SpeechConnectionMessage_Internal_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js");class DialogServiceAdapter extends Exports_js_4.ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,dialogServiceConnector){super(authentication,connectionFactory,audioSource,recognizerConfig,dialogServiceConnector),this.privEvents=new Exports_js_2.EventSource,this.privDialogServiceConnector=dialogServiceConnector,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new DialogServiceTurnStateManager_js_1.DialogServiceTurnStateManager,this.recognizeOverride=(recoMode,successCallback,errorCallback)=>this.listenOnce(recoMode,successCallback,errorCallback),this.postConnectImplOverride=connection=>this.dialogConnectImpl(connection),this.configConnectionOverride=connection=>this.configConnection(connection),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=audioSource,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach((connectionEvent=>{"ConnectionClosedEvent"===connectionEvent.name&&(this.terminateMessageLoop=!0)}))}sendMessage(message){return __awaiter(this,void 0,void 0,(function*(){const interactionGuid=Exports_js_2.createGuid(),requestId=Exports_js_2.createNoDashGuid(),agentMessage={context:{interactionId:interactionGuid},messagePayload:JSON.parse(message),version:.5},agentMessageJson=JSON.stringify(agentMessage),connection=yield this.fetchConnection();yield connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"agent",requestId,"application/json",agentMessageJson))}))}privDisconnect(){return __awaiter(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}))}processTypeSpecificMessages(connectionMessage){const resultProps=new Exports_js_3.PropertyCollection;let result,processed;switch(connectionMessage.messageType===Exports_js_2.MessageType.Text&&resultProps.setProperty(Exports_js_3.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody),connectionMessage.path.toLowerCase()){case"speech.phrase":const speechPhrase=Exports_js_4.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+speechPhrase.Offset+speechPhrase.Duration),speechPhrase.RecognitionStatus!==Exports_js_4.RecognitionStatus.TooManyRequests&&speechPhrase.RecognitionStatus!==Exports_js_4.RecognitionStatus.Error){const args=this.fireEventForResult(speechPhrase,resultProps);if(this.privLastResult=args.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,args)}catch(error){}}processed=!0;break;case"speech.hypothesis":const hypothesis=Exports_js_4.SpeechHypothesis.fromJSON(connectionMessage.textBody),offset=hypothesis.Offset+this.privRequestSession.currentTurnAudioOffset;result=new Exports_js_3.SpeechRecognitionResult(this.privRequestSession.requestId,Exports_js_3.ResultReason.RecognizingSpeech,hypothesis.Text,hypothesis.Duration,offset,hypothesis.Language,hypothesis.LanguageDetectionConfidence,void 0,void 0,connectionMessage.textBody,resultProps),this.privRequestSession.onHypothesis(offset);const ev=new Exports_js_3.SpeechRecognitionEventArgs(result,hypothesis.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,ev)}catch(error){}processed=!0;break;case"speech.keyword":const keyword=Exports_js_4.SpeechKeyword.fromJSON(connectionMessage.textBody);result=new Exports_js_3.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===keyword.Status?Exports_js_3.ResultReason.RecognizedKeyword:Exports_js_3.ResultReason.NoMatch,keyword.Text,keyword.Duration,keyword.Offset,void 0,void 0,void 0,void 0,connectionMessage.textBody,resultProps),"Accepted"!==keyword.Status&&(this.privLastResult=result);const event=new Exports_js_3.SpeechRecognitionEventArgs(result,result.duration,result.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,event)}catch(error){}processed=!0;break;case"audio":{const audioRequestId=connectionMessage.requestId.toUpperCase(),turn=this.privTurnStateManager.GetTurn(audioRequestId);try{connectionMessage.binaryBody?turn.audioStream.write(connectionMessage.binaryBody):turn.endAudioStream()}catch(error){}}processed=!0;break;case"response":this.handleResponseMessage(connectionMessage),processed=!0}const defferal=new Exports_js_2.Deferred;return defferal.resolve(processed),defferal.promise}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){return __awaiter(this,void 0,void 0,(function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const properties=new Exports_js_3.PropertyCollection;properties.setProperty(Exports_js_4.CancellationErrorCodePropertyName,Exports_js_3.CancellationErrorCode[errorCode]);const cancelEvent=new Exports_js_3.SpeechRecognitionCanceledEventArgs(cancellationReason,error,errorCode,void 0,sessionId);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,cancelEvent)}catch(_a){}if(this.privSuccessCallback){const result=new Exports_js_3.SpeechRecognitionResult(void 0,Exports_js_3.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,error,void 0,properties);try{this.privSuccessCallback(result),this.privSuccessCallback=void 0}catch(_b){}}}}))}listenOnce(recoMode,successCallback,errorCallback){return __awaiter(this,void 0,void 0,(function*(){this.privRecognizerConfig.recognitionMode=recoMode,this.privSuccessCallback=successCallback,this.privErrorCallback=errorCallback,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const conPromise=this.connectImpl(),preAudioPromise=this.sendPreAudioMessages(),node=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),format=yield this.privDialogAudioSource.format,deviceInfo=yield this.privDialogAudioSource.deviceInfo,audioNode=new Exports_js_1.ReplayableAudioNode(node,format.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:deviceInfo};try{yield conPromise,yield preAudioPromise}catch(error){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.ConnectionFailure,error),Promise.resolve()}const sessionStartEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,sessionStartEventArgs);this.sendAudio(audioNode).then((()=>{}),(error=>__awaiter(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error)}))))}))}dialogConnectImpl(connection){return this.privConnectionLoop=this.startMessageLoop(),connection}receiveDialogMessageOverride(){const communicationCustodian=new Exports_js_2.Deferred,loop=()=>__awaiter(this,void 0,void 0,(function*(){try{const isDisposed=this.isDisposed(),terminateMessageLoop=!this.isDisposed()&&this.terminateMessageLoop;if(isDisposed||terminateMessageLoop)return void communicationCustodian.resolve(void 0);const connection=yield this.fetchConnection(),message=yield connection.read();if(!message)return loop();const connectionMessage=SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage.fromConnectionMessage(message);switch(connectionMessage.path.toLowerCase()){case"turn.start":{const turnRequestId=connectionMessage.requestId.toUpperCase();turnRequestId!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(turnRequestId):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const speechStartDetected=Exports_js_4.SpeechDetected.fromJSON(connectionMessage.textBody),speechStartEventArgs=new Exports_js_3.RecognitionEventArgs(speechStartDetected.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,speechStartEventArgs);break;case"speech.enddetected":let json;json=connectionMessage.textBody.length>0?connectionMessage.textBody:"{ Offset: 0 }";const speechStopDetected=Exports_js_4.SpeechDetected.fromJSON(json);this.privRequestSession.onServiceRecognized(speechStopDetected.Offset+this.privRequestSession.currentTurnAudioOffset);const speechStopEventArgs=new Exports_js_3.RecognitionEventArgs(speechStopDetected.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,speechStopEventArgs);break;case"turn.end":{const turnEndRequestId=connectionMessage.requestId.toUpperCase();if(turnEndRequestId!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(turnEndRequestId);else{const sessionStopEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,sessionStopEventArgs),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(connectionMessage))||this.serviceEvents&&this.serviceEvents.onEvent(new Exports_js_2.ServiceEvent(connectionMessage.path.toLowerCase(),connectionMessage.textBody))}catch(e){}}return loop()}catch(error){this.terminateMessageLoop=!0,communicationCustodian.resolve()}}));return loop().catch((reason=>{Exports_js_2.Events.instance.onEvent(new Exports_js_2.BackgroundEvent(reason))})),communicationCustodian.promise}startMessageLoop(){return __awaiter(this,void 0,void 0,(function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(error){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error)}return Promise.resolve()}))}configConnection(connection){return __awaiter(this,void 0,void 0,(function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(connection,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(connection),connection)}))}sendPreAudioMessages(){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(connection,!0),yield this.sendAgentContext(connection),yield this.sendWaveHeader(connection)}))}sendAgentConfig(connection){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.Conversation_DialogType)===Exports_js_3.DialogServiceConfig.DialogTypes.CustomCommands){const config=this.agentConfig.get();config.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(config)}this.onEvent(new DialogEvents_js_1.SendingAgentContextMessageEvent(this.agentConfig));const agentConfigJson=this.agentConfig.toJsonString();return this.agentConfigSent=!0,connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",agentConfigJson))}}sendAgentContext(connection){const guid=Exports_js_2.createGuid(),speechActivityTemplate=this.privDialogServiceConnector.properties.getProperty(Exports_js_3.PropertyId.Conversation_Speech_Activity_Template),agentContext={channelData:"",context:{interactionId:guid},messagePayload:void 0===typeof speechActivityTemplate?void 0:speechActivityTemplate,version:.5},agentContextJson=JSON.stringify(agentContext);return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",agentContextJson))}fireEventForResult(serviceResult,properties){const resultReason=Exports_js_4.EnumTranslation.implTranslateRecognitionResult(serviceResult.RecognitionStatus),offset=serviceResult.Offset+this.privRequestSession.currentTurnAudioOffset,result=new Exports_js_3.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,serviceResult.DisplayText,serviceResult.Duration,offset,serviceResult.Language,serviceResult.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(serviceResult),properties);return new Exports_js_3.SpeechRecognitionEventArgs(result,offset,this.privRequestSession.sessionId)}handleResponseMessage(responseMessage){const responsePayload=JSON.parse(responseMessage.textBody);switch(responsePayload.messageType.toLowerCase()){case"message":const responseRequestId=responseMessage.requestId.toUpperCase(),activityPayload=ActivityResponsePayload_js_1.ActivityPayloadResponse.fromJSON(responseMessage.textBody),turn=this.privTurnStateManager.GetTurn(responseRequestId);if(activityPayload.conversationId){const updateAgentConfig=this.agentConfig.get();updateAgentConfig.botInfo.conversationId=activityPayload.conversationId,this.agentConfig.set(updateAgentConfig)}const pullAudioOutputStream=turn.processActivityPayload(activityPayload,AudioOutputFormat_js_1.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),activity=new Exports_js_3.ActivityReceivedEventArgs(activityPayload.messagePayload,pullAudioOutputStream);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,activity)}catch(error){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new Exports_js_3.TurnStatusReceivedEventArgs(responseMessage.textBody))}catch(error){}break;default:Exports_js_2.Events.instance.onEvent(new Exports_js_2.BackgroundEvent(`Unexpected response of type ${responsePayload.messageType}. Ignoring.`))}}onEvent(event){this.privEvents.onEvent(event),Exports_js_2.Events.instance.onEvent(event)}addKeywordContextData(){const keywordPropertyValue=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===keywordPropertyValue)return;const keywordOffsetPropertyValue=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),keywordDurationPropertyValue=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),keywords=keywordPropertyValue.split(";"),keywordOffsets=void 0===keywordOffsetPropertyValue?[]:keywordOffsetPropertyValue.split(";"),keywordDurations=void 0===keywordDurationPropertyValue?[]:keywordDurationPropertyValue.split(";"),keywordDefinitionArray=[];for(let i=0;i<keywords.length;i++){const definition={};definition.text=keywords[i],i<keywordOffsets.length&&(definition.offset=Number(keywordOffsets[i])),i<keywordDurations.length&&(definition.duration=Number(keywordDurations[i])),keywordDefinitionArray.push(definition)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:keywordDefinitionArray,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}}exports.DialogServiceAdapter=DialogServiceAdapter},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DialogServiceTurnState.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DialogServiceTurnState=void 0;const AudioOutputFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputFormat.js"),AudioOutputStream_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputStream.js"),ActivityResponsePayload_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/ActivityResponsePayload.js");exports.DialogServiceTurnState=class DialogServiceTurnState{constructor(manager,requestId){this.privRequestId=requestId,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=manager,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(payload,audioFormat){return payload.messageDataStreamType===ActivityResponsePayload_js_1.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=AudioOutputStream_js_1.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==audioFormat?audioFormat:AudioOutputFormat_js_1.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout((()=>{this.privTurnManager.CompleteTurn(this.privRequestId)}),2e3)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DialogServiceTurnStateManager.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DialogServiceTurnStateManager=void 0;const Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),DialogServiceTurnState_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DialogServiceTurnState.js");exports.DialogServiceTurnStateManager=class DialogServiceTurnStateManager{constructor(){this.privTurnMap=new Map}StartTurn(id){if(this.privTurnMap.has(id))throw new Error_js_1.InvalidOperationError("Service error: There is already a turn with id:"+id);const turnState=new DialogServiceTurnState_js_1.DialogServiceTurnState(this,id);return this.privTurnMap.set(id,turnState),this.privTurnMap.get(id)}GetTurn(id){return this.privTurnMap.get(id)}CompleteTurn(id){if(!this.privTurnMap.has(id))throw new Error_js_1.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+id);const turnState=this.privTurnMap.get(id);return turnState.complete(),this.privTurnMap.delete(id),turnState}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DynamicGrammarBuilder.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DynamicGrammarBuilder=void 0;exports.DynamicGrammarBuilder=class DynamicGrammarBuilder{addPhrase(phrase){this.privPhrases||(this.privPhrases=[]),phrase instanceof Array?this.privPhrases=this.privPhrases.concat(phrase):this.privPhrases.push(phrase)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(grammar){this.privGrammars||(this.privGrammars=[]),grammar instanceof Array?this.privGrammars=this.privGrammars.concat(grammar):this.privGrammars.push(grammar)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const retObj={};if(retObj.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const retPhrases=[];this.privPhrases.forEach((value=>{retPhrases.push({Text:value})})),retObj.Groups=[{Type:"Generic",Items:retPhrases}]}return retObj}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DynamicGrammarInterfaces.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/EnumTranslation.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EnumTranslation=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");exports.EnumTranslation=class EnumTranslation{static implTranslateRecognitionResult(recognitionStatus,expectEndOfDictation=!1){let reason=Exports_js_1.ResultReason.Canceled;switch(recognitionStatus){case Exports_js_2.RecognitionStatus.Success:reason=Exports_js_1.ResultReason.RecognizedSpeech;break;case Exports_js_2.RecognitionStatus.EndOfDictation:reason=expectEndOfDictation?Exports_js_1.ResultReason.RecognizedSpeech:Exports_js_1.ResultReason.NoMatch;break;case Exports_js_2.RecognitionStatus.NoMatch:case Exports_js_2.RecognitionStatus.InitialSilenceTimeout:case Exports_js_2.RecognitionStatus.BabbleTimeout:reason=Exports_js_1.ResultReason.NoMatch;break;case Exports_js_2.RecognitionStatus.Error:case Exports_js_2.RecognitionStatus.BadRequest:case Exports_js_2.RecognitionStatus.Forbidden:default:reason=Exports_js_1.ResultReason.Canceled}return reason}static implTranslateCancelResult(recognitionStatus){let reason=Exports_js_1.CancellationReason.EndOfStream;switch(recognitionStatus){case Exports_js_2.RecognitionStatus.Success:case Exports_js_2.RecognitionStatus.EndOfDictation:case Exports_js_2.RecognitionStatus.NoMatch:reason=Exports_js_1.CancellationReason.EndOfStream;break;case Exports_js_2.RecognitionStatus.InitialSilenceTimeout:case Exports_js_2.RecognitionStatus.BabbleTimeout:case Exports_js_2.RecognitionStatus.Error:case Exports_js_2.RecognitionStatus.BadRequest:case Exports_js_2.RecognitionStatus.Forbidden:default:reason=Exports_js_1.CancellationReason.Error}return reason}static implTranslateCancelErrorCode(recognitionStatus){let reason=Exports_js_1.CancellationErrorCode.NoError;switch(recognitionStatus){case Exports_js_2.RecognitionStatus.Error:reason=Exports_js_1.CancellationErrorCode.ServiceError;break;case Exports_js_2.RecognitionStatus.TooManyRequests:reason=Exports_js_1.CancellationErrorCode.TooManyRequests;break;case Exports_js_2.RecognitionStatus.BadRequest:reason=Exports_js_1.CancellationErrorCode.BadRequestParameters;break;case Exports_js_2.RecognitionStatus.Forbidden:reason=Exports_js_1.CancellationErrorCode.Forbidden;break;default:reason=Exports_js_1.CancellationErrorCode.NoError}return reason}static implTranslateErrorDetails(cancellationErrorCode){let errorDetails="The speech service encountered an internal error and could not continue.";switch(cancellationErrorCode){case Exports_js_1.CancellationErrorCode.Forbidden:errorDetails="The recognizer is using a free subscription that ran out of quota.";break;case Exports_js_1.CancellationErrorCode.BadRequestParameters:errorDetails="Invalid parameter or unsupported audio format in the request.";break;case Exports_js_1.CancellationErrorCode.TooManyRequests:errorDetails="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return errorDetails}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoDetectSourceLanguagesOpenRangeOptionName=exports.ForceDictationPropertyName=exports.ServicePropertiesPropertyName=exports.CancellationErrorCodePropertyName=exports.OutputFormatPropertyName=void 0,__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveSubscriptionKeyAuthentication.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/CognitiveTokenAuthentication.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ISynthesisConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeakerRecognitionConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceRecognizerBase.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConversationServiceRecognizer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognizerConfig.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceInterfaces.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/WebsocketMessageFormatter.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConversationTranscriberConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranscriberConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechSynthesisConnectionFactory.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/EnumTranslation.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/Enums.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationHypothesis.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationPhrase.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationServiceRecognizer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechDetected.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechHypothesis.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechKeyword.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceRecognizer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConversationTranscriptionServiceRecognizer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranscriptionServiceRecognizer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AddedLmIntent.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentServiceRecognizer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/IntentResponse.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeakerResponse.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RequestSession.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechContext.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DynamicGrammarBuilder.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DynamicGrammarInterfaces.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DialogServiceAdapter.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AgentConfig.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/Exports.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisTurn.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisAdapterBase.js"),exports);var AvatarSynthesisAdapter_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/AvatarSynthesisAdapter.js");Object.defineProperty(exports,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return AvatarSynthesisAdapter_js_1.AvatarSynthesisAdapter}});var SpeechSynthesisAdapter_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechSynthesisAdapter.js");Object.defineProperty(exports,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return SpeechSynthesisAdapter_js_1.SpeechSynthesisAdapter}}),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisRestAdapter.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesizerConfig.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisContext.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeakerRecognitionConfig.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeakerServiceRecognizer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/VoiceServiceRecognizer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceConfig.js"),exports),exports.OutputFormatPropertyName="OutputFormat",exports.CancellationErrorCodePropertyName="CancellationErrorCode",exports.ServicePropertiesPropertyName="ServiceProperties",exports.ForceDictationPropertyName="ForceDictation",exports.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HeaderNames=void 0;class HeaderNames{}exports.HeaderNames=HeaderNames,HeaderNames.AuthKey="Ocp-Apim-Subscription-Key",HeaderNames.Authorization="Authorization",HeaderNames.SpIDAuthKey="Apim-Subscription-Id",HeaderNames.ConnectionId="X-ConnectionId",HeaderNames.ContentType="Content-Type",HeaderNames.CustomCommandsAppId="X-CommandsAppId",HeaderNames.Path="Path",HeaderNames.RequestId="X-RequestId",HeaderNames.RequestStreamId="X-StreamId",HeaderNames.RequestTimestamp="X-Timestamp"},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IAuthentication.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthInfo=void 0;exports.AuthInfo=class AuthInfo{constructor(headerName,token){this.privHeaderName=headerName,this.privToken=token}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IConnectionFactory.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ISynthesisConnectionFactory.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntentConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js");class IntentConnectionFactory extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{create(config,authInfo,connectionId){let endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint);if(!endpoint){const region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_IntentRegion),hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://"+region+".sr.speech"+hostSuffix)+"/speech/recognition/interactive/cognitiveservices/v1"}const queryParams={format:"simple",language:config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(config,queryParams,endpoint);const headers={};void 0!==authInfo.token&&""!==authInfo.token&&(headers[authInfo.headerName]=authInfo.token),headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId,config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId)}getSpeechRegionFromIntentRegion(intentRegion){switch(intentRegion){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return intentRegion}}}exports.IntentConnectionFactory=IntentConnectionFactory},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/IntentServiceRecognizer.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntentServiceRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class IntentServiceRecognizer extends Exports_js_3.ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){super(authentication,connectionFactory,audioSource,recognizerConfig,recognizer),this.privIntentRecognizer=recognizer,this.privIntentDataSent=!1}setIntents(addedIntents,umbrellaIntent){this.privAddedLmIntents=addedIntents,this.privUmbrellaIntent=umbrellaIntent,this.privIntentDataSent=!0}processTypeSpecificMessages(connectionMessage){let result,ev,processed=!1;const resultProps=new Exports_js_2.PropertyCollection;switch(connectionMessage.messageType===Exports_js_1.MessageType.Text&&resultProps.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody),connectionMessage.path.toLowerCase()){case"speech.hypothesis":const speechHypothesis=Exports_js_3.SpeechHypothesis.fromJSON(connectionMessage.textBody);if(result=new Exports_js_2.IntentRecognitionResult(void 0,this.privRequestSession.requestId,Exports_js_2.ResultReason.RecognizingIntent,speechHypothesis.Text,speechHypothesis.Duration,speechHypothesis.Offset+this.privRequestSession.currentTurnAudioOffset,speechHypothesis.Language,speechHypothesis.LanguageDetectionConfidence,void 0,connectionMessage.textBody,resultProps),this.privRequestSession.onHypothesis(result.offset),ev=new Exports_js_2.IntentRecognitionEventArgs(result,speechHypothesis.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,ev)}catch(error){}processed=!0;break;case"speech.phrase":const simple=Exports_js_3.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody);result=new Exports_js_2.IntentRecognitionResult(void 0,this.privRequestSession.requestId,Exports_js_3.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus),simple.DisplayText,simple.Duration,simple.Offset+this.privRequestSession.currentTurnAudioOffset,simple.Language,simple.LanguageDetectionConfidence,void 0,connectionMessage.textBody,resultProps),ev=new Exports_js_2.IntentRecognitionEventArgs(result,result.offset,this.privRequestSession.sessionId);const sendEvent=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,ev)}catch(error){}if(this.privSuccessCallback){try{this.privSuccessCallback(result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||Exports_js_2.ResultReason.NoMatch===ev.result.reason?(this.privRequestSession.onPhraseRecognized(ev.offset+ev.result.duration),sendEvent()):this.privPendingIntentArgs=ev,processed=!0;break;case"response":if(ev=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===ev){if(""===connectionMessage.textBody)return;ev=new Exports_js_2.IntentRecognitionEventArgs(new Exports_js_2.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const intentResponse=Exports_js_3.IntentResponse.fromJSON(connectionMessage.textBody);if(null!==intentResponse&&intentResponse.topScoringIntent&&intentResponse.topScoringIntent.intent){let addedIntent=this.privAddedLmIntents[intentResponse.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(addedIntent=this.privUmbrellaIntent),addedIntent){const intentId=void 0===addedIntent||void 0===addedIntent.intentName?intentResponse.topScoringIntent.intent:addedIntent.intentName;let reason=ev.result.reason;void 0!==intentId&&(reason=Exports_js_2.ResultReason.RecognizedIntent);const properties=void 0!==ev.result.properties?ev.result.properties:new Exports_js_2.PropertyCollection;properties.setProperty(Exports_js_2.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,connectionMessage.textBody),ev=new Exports_js_2.IntentRecognitionEventArgs(new Exports_js_2.IntentRecognitionResult(intentId,ev.result.resultId,reason,ev.result.text,ev.result.duration,ev.result.offset,void 0,void 0,ev.result.errorDetails,ev.result.json,properties),ev.offset,ev.sessionId)}}if(this.privRequestSession.onPhraseRecognized(ev.offset+ev.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,ev)}catch(error){}if(this.privSuccessCallback){try{this.privSuccessCallback(ev.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}processed=!0}const defferal=new Exports_js_1.Deferred;return defferal.resolve(processed),defferal.promise}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){const properties=new Exports_js_2.PropertyCollection;if(properties.setProperty(Exports_js_3.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[errorCode]),this.privIntentRecognizer.canceled){const cancelEvent=new Exports_js_2.IntentRecognitionCanceledEventArgs(cancellationReason,error,errorCode,void 0,void 0,sessionId);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,cancelEvent)}catch(_a){}}if(this.privSuccessCallback){const result=new Exports_js_2.IntentRecognitionResult(void 0,requestId,Exports_js_2.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,error,void 0,properties);try{this.privSuccessCallback(result),this.privSuccessCallback=void 0}catch(_b){}}}}exports.IntentServiceRecognizer=IntentServiceRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QueryParameterNames=void 0;class QueryParameterNames{}exports.QueryParameterNames=QueryParameterNames,QueryParameterNames.BotId="botid",QueryParameterNames.CustomSpeechDeploymentId="cid",QueryParameterNames.CustomVoiceDeploymentId="deploymentId",QueryParameterNames.EnableAudioLogging="storeAudio",QueryParameterNames.EnableLanguageId="lidEnabled",QueryParameterNames.EnableWordLevelTimestamps="wordLevelTimestamps",QueryParameterNames.EndSilenceTimeoutMs="endSilenceTimeoutMs",QueryParameterNames.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",QueryParameterNames.Format="format",QueryParameterNames.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",QueryParameterNames.Language="language",QueryParameterNames.Profanity="profanity",QueryParameterNames.RequestBotStatusMessages="enableBotMessageStatus",QueryParameterNames.StableIntermediateThreshold="stableIntermediateThreshold",QueryParameterNames.StableTranslation="stableTranslation",QueryParameterNames.TestHooks="testhooks",QueryParameterNames.Postprocessing="postprocessing",QueryParameterNames.CtsMeetingId="meetingId",QueryParameterNames.CtsDeviceId="deviceId",QueryParameterNames.CtsIsParticipant="isParticipant",QueryParameterNames.EnableAvatar="enableTalkingAvatar"},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RecognitionEndedEvent=exports.RecognitionCompletionStatus=exports.RecognitionStartedEvent=exports.ConnectingToServiceEvent=exports.ListeningStartedEvent=exports.RecognitionTriggeredEvent=exports.SpeechRecognitionEvent=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");class SpeechRecognitionEvent extends Exports_js_1.PlatformEvent{constructor(eventName,requestId,sessionId,eventType=Exports_js_1.EventType.Info){super(eventName,eventType),this.privRequestId=requestId,this.privSessionId=sessionId}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}exports.SpeechRecognitionEvent=SpeechRecognitionEvent;exports.RecognitionTriggeredEvent=class RecognitionTriggeredEvent extends SpeechRecognitionEvent{constructor(requestId,sessionId,audioSourceId,audioNodeId){super("RecognitionTriggeredEvent",requestId,sessionId),this.privAudioSourceId=audioSourceId,this.privAudioNodeId=audioNodeId}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};exports.ListeningStartedEvent=class ListeningStartedEvent extends SpeechRecognitionEvent{constructor(requestId,sessionId,audioSourceId,audioNodeId){super("ListeningStartedEvent",requestId,sessionId),this.privAudioSourceId=audioSourceId,this.privAudioNodeId=audioNodeId}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};exports.ConnectingToServiceEvent=class ConnectingToServiceEvent extends SpeechRecognitionEvent{constructor(requestId,authFetchEventid,sessionId){super("ConnectingToServiceEvent",requestId,sessionId),this.privAuthFetchEventid=authFetchEventid}get authFetchEventid(){return this.privAuthFetchEventid}};var RecognitionCompletionStatus;exports.RecognitionStartedEvent=class RecognitionStartedEvent extends SpeechRecognitionEvent{constructor(requestId,audioSourceId,audioNodeId,authFetchEventId,sessionId){super("RecognitionStartedEvent",requestId,sessionId),this.privAudioSourceId=audioSourceId,this.privAudioNodeId=audioNodeId,this.privAuthFetchEventId=authFetchEventId}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}},function(RecognitionCompletionStatus){RecognitionCompletionStatus[RecognitionCompletionStatus.Success=0]="Success",RecognitionCompletionStatus[RecognitionCompletionStatus.AudioSourceError=1]="AudioSourceError",RecognitionCompletionStatus[RecognitionCompletionStatus.AudioSourceTimeout=2]="AudioSourceTimeout",RecognitionCompletionStatus[RecognitionCompletionStatus.AuthTokenFetchError=3]="AuthTokenFetchError",RecognitionCompletionStatus[RecognitionCompletionStatus.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",RecognitionCompletionStatus[RecognitionCompletionStatus.UnAuthorized=5]="UnAuthorized",RecognitionCompletionStatus[RecognitionCompletionStatus.ConnectTimeout=6]="ConnectTimeout",RecognitionCompletionStatus[RecognitionCompletionStatus.ConnectError=7]="ConnectError",RecognitionCompletionStatus[RecognitionCompletionStatus.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",RecognitionCompletionStatus[RecognitionCompletionStatus.UnknownError=9]="UnknownError"}(RecognitionCompletionStatus=exports.RecognitionCompletionStatus||(exports.RecognitionCompletionStatus={}));exports.RecognitionEndedEvent=class RecognitionEndedEvent extends SpeechRecognitionEvent{constructor(requestId,audioSourceId,audioNodeId,authFetchEventId,sessionId,serviceTag,status,error){super("RecognitionEndedEvent",requestId,sessionId,status===RecognitionCompletionStatus.Success?Exports_js_1.EventType.Info:Exports_js_1.EventType.Error),this.privAudioSourceId=audioSourceId,this.privAudioNodeId=audioNodeId,this.privAuthFetchEventId=authFetchEventId,this.privStatus=status,this.privError=error,this.privServiceTag=serviceTag}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognizerConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RecognizerConfig=exports.SpeechResultFormat=exports.RecognitionMode=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");var RecognitionMode;!function(RecognitionMode){RecognitionMode[RecognitionMode.Interactive=0]="Interactive",RecognitionMode[RecognitionMode.Conversation=1]="Conversation",RecognitionMode[RecognitionMode.Dictation=2]="Dictation"}(RecognitionMode=exports.RecognitionMode||(exports.RecognitionMode={})),function(SpeechResultFormat){SpeechResultFormat[SpeechResultFormat.Simple=0]="Simple",SpeechResultFormat[SpeechResultFormat.Detailed=1]="Detailed"}(exports.SpeechResultFormat||(exports.SpeechResultFormat={}));exports.RecognizerConfig=class RecognizerConfig{constructor(speechServiceConfig,parameters){this.privSpeechServiceConfig=speechServiceConfig||new Exports_js_2.SpeechServiceConfig(new Exports_js_2.Context(null)),this.privParameters=parameters,this.privMaxRetryCount=parseInt(parameters.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(value){this.privRecognitionMode=value,this.privRecognitionActivityTimeout=value===RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=RecognitionMode[value]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const models=[];let modelsExist=!1;if(void 0!==this.autoDetectSourceLanguages)for(const language of this.autoDetectSourceLanguages.split(",")){const customProperty=language+Exports_js_1.PropertyId.SpeechServiceConnection_EndpointId.toString(),modelId=this.parameters.getProperty(customProperty,void 0);void 0!==modelId?(models.push({language,endpoint:modelId}),modelsExist=!0):models.push({language,endpoint:""})}return modelsExist?models:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(value){this.privEnableSpeakerId=value}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RequestSession.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestSession=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),RecognitionEvents_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js"),ServiceTelemetryListener_Internal_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceTelemetryListener.Internal.js");exports.RequestSession=class RequestSession{constructor(audioSourceId){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=audioSourceId,this.privRequestId=Exports_js_1.createNoDashGuid(),this.privAudioNodeId=Exports_js_1.createNoDashGuid(),this.privTurnDeferral=new Exports_js_1.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(eventSource){this.privServiceTelemetryListener&&this.privDetachables.push(eventSource.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new ServiceTelemetryListener_Internal_js_1.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new RecognitionEvents_js_1.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(audioNode,isError){return __awaiter(this,void 0,void 0,(function*(){this.privAudioNode=audioNode,this.privIsAudioNodeDetached=!1,isError?yield this.onComplete():this.onEvent(new RecognitionEvents_js_1.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}))}onPreConnectionStart(authFetchEventId,connectionId){this.privAuthFetchEventId=authFetchEventId,this.privSessionId=connectionId,this.onEvent(new RecognitionEvents_js_1.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(isError){return __awaiter(this,void 0,void 0,(function*(){isError&&(yield this.onComplete())}))}onConnectionEstablishCompleted(statusCode,reason){return __awaiter(this,void 0,void 0,(function*(){if(200===statusCode)return this.onEvent(new RecognitionEvents_js_1.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===statusCode&&(yield this.onComplete())}))}onServiceTurnEndResponse(continuousRecognition){return __awaiter(this,void 0,void 0,(function*(){this.privTurnDeferral.resolve(),!continuousRecognition||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}))}onSpeechContext(){this.privRequestId=Exports_js_1.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new Exports_js_1.Deferred}onHypothesis(offset){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(offset)))}onPhraseRecognized(offset){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(offset)),this.onServiceRecognized(offset)}onServiceRecognized(offset){this.privLastRecoOffset=offset,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(offset),this.privConnectionAttempts=0}onAudioSent(bytesSent){this.privBytesSent+=bytesSent,this.privRecognitionBytesSent+=bytesSent}onRetryConnection(){this.privConnectionAttempts++}dispose(){return __awaiter(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const detachable of this.privDetachables)yield detachable.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}))}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return __awaiter(this,void 0,void 0,(function*(){yield this.onComplete()}))}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(event){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(event),Exports_js_1.Events.instance.onEvent(event)}onComplete(){return __awaiter(this,void 0,void 0,(function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())}))}detachAudioNode(){return __awaiter(this,void 0,void 0,(function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))}))}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/ActivityResponsePayload.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageDataStreamType=exports.ActivityPayloadResponse=void 0;class ActivityPayloadResponse{constructor(json){this.privActivityResponse=JSON.parse(json)}static fromJSON(json){return new ActivityPayloadResponse(json)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}exports.ActivityPayloadResponse=ActivityPayloadResponse,function(MessageDataStreamType){MessageDataStreamType[MessageDataStreamType.None=0]="None",MessageDataStreamType[MessageDataStreamType.TextToSpeechAudio=1]="TextToSpeechAudio"}(exports.MessageDataStreamType||(exports.MessageDataStreamType={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailedSpeechPhrase=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class DetailedSpeechPhrase{constructor(json){this.privDetailedSpeechPhrase=JSON.parse(json),this.privDetailedSpeechPhrase.RecognitionStatus=Exports_js_1.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(json){return new DetailedSpeechPhrase(json)}getJsonWithCorrectedOffsets(baseOffset){if(this.privDetailedSpeechPhrase.NBest){let firstWordOffset;for(const phrase of this.privDetailedSpeechPhrase.NBest)if(phrase.Words&&phrase.Words[0]){firstWordOffset=phrase.Words[0].Offset;break}if(firstWordOffset&&firstWordOffset<baseOffset){const offset=baseOffset-firstWordOffset;for(const details of this.privDetailedSpeechPhrase.NBest){if(details.Words)for(const word of details.Words)word.Offset+=offset;if(details.DisplayWords)for(const word of details.DisplayWords)word.Offset+=offset}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}}exports.DetailedSpeechPhrase=DetailedSpeechPhrase},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/Enums.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RecognitionStatus=exports.SynthesisStatus=void 0,function(SynthesisStatus){SynthesisStatus[SynthesisStatus.Success=0]="Success",SynthesisStatus[SynthesisStatus.SynthesisEnd=1]="SynthesisEnd",SynthesisStatus[SynthesisStatus.Error=2]="Error"}(exports.SynthesisStatus||(exports.SynthesisStatus={})),function(RecognitionStatus){RecognitionStatus[RecognitionStatus.Success=0]="Success",RecognitionStatus[RecognitionStatus.NoMatch=1]="NoMatch",RecognitionStatus[RecognitionStatus.InitialSilenceTimeout=2]="InitialSilenceTimeout",RecognitionStatus[RecognitionStatus.BabbleTimeout=3]="BabbleTimeout",RecognitionStatus[RecognitionStatus.Error=4]="Error",RecognitionStatus[RecognitionStatus.EndOfDictation=5]="EndOfDictation",RecognitionStatus[RecognitionStatus.TooManyRequests=6]="TooManyRequests",RecognitionStatus[RecognitionStatus.BadRequest=7]="BadRequest",RecognitionStatus[RecognitionStatus.Forbidden=8]="Forbidden"}(exports.RecognitionStatus||(exports.RecognitionStatus={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/IntentResponse.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntentResponse=void 0;class IntentResponse{constructor(json){this.privIntentResponse=""===json?{}:JSON.parse(json)}static fromJSON(json){return new IntentResponse(json)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}exports.IntentResponse=IntentResponse},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleSpeechPhrase=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class SimpleSpeechPhrase{constructor(json){this.privSimpleSpeechPhrase=JSON.parse(json),this.privSimpleSpeechPhrase.RecognitionStatus=Exports_js_1.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(json){return new SimpleSpeechPhrase(json)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}exports.SimpleSpeechPhrase=SimpleSpeechPhrase},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeakerResponse.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechDetected.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechDetected=void 0;class SpeechDetected{constructor(json){this.privSpeechStartDetected=JSON.parse(json)}static fromJSON(json){return new SpeechDetected(json)}get Offset(){return this.privSpeechStartDetected.Offset}}exports.SpeechDetected=SpeechDetected},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechHypothesis.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechHypothesis=void 0;class SpeechHypothesis{constructor(json){this.privSpeechHypothesis=JSON.parse(json)}static fromJSON(json){return new SpeechHypothesis(json)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}exports.SpeechHypothesis=SpeechHypothesis},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SpeechKeyword.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechKeyword=void 0;class SpeechKeyword{constructor(json){this.privSpeechKeyword=JSON.parse(json)}static fromJSON(json){return new SpeechKeyword(json)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}exports.SpeechKeyword=SpeechKeyword},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisAudioMetadata=exports.MetadataType=void 0,function(MetadataType){MetadataType.WordBoundary="WordBoundary",MetadataType.Bookmark="Bookmark",MetadataType.Viseme="Viseme",MetadataType.SentenceBoundary="SentenceBoundary",MetadataType.SessionEnd="SessionEnd",MetadataType.AvatarSignal="TalkingAvatarSignal"}(exports.MetadataType||(exports.MetadataType={}));class SynthesisAudioMetadata{constructor(json){this.privSynthesisAudioMetadata=JSON.parse(json)}static fromJSON(json){return new SynthesisAudioMetadata(json)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}exports.SynthesisAudioMetadata=SynthesisAudioMetadata},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationHypothesis.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationHypothesis=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),TranslationStatus_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js");class TranslationHypothesis{constructor(hypothesis){this.privTranslationHypothesis=hypothesis,this.privTranslationHypothesis.Translation.TranslationStatus=TranslationStatus_js_1.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(json){return new TranslationHypothesis(JSON.parse(json))}static fromTranslationResponse(translationHypothesis){Contracts_js_1.Contracts.throwIfNullOrUndefined(translationHypothesis,"translationHypothesis");const hypothesis=translationHypothesis.SpeechHypothesis;return translationHypothesis.SpeechHypothesis=void 0,hypothesis.Translation=translationHypothesis,new TranslationHypothesis(hypothesis)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var _a;return null===(_a=this.privTranslationHypothesis.PrimaryLanguage)||void 0===_a?void 0:_a.Language}}exports.TranslationHypothesis=TranslationHypothesis},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationPhrase.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationPhrase=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),TranslationStatus_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js");class TranslationPhrase{constructor(phrase){this.privTranslationPhrase=phrase,this.privTranslationPhrase.RecognitionStatus=Exports_js_1.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=TranslationStatus_js_1.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(json){return new TranslationPhrase(JSON.parse(json))}static fromTranslationResponse(translationResponse){Contracts_js_1.Contracts.throwIfNullOrUndefined(translationResponse,"translationResponse");const phrase=translationResponse.SpeechPhrase;return translationResponse.SpeechPhrase=void 0,phrase.Translation=translationResponse,phrase.Text=phrase.DisplayText,new TranslationPhrase(phrase)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var _a;return null===(_a=this.privTranslationPhrase.PrimaryLanguage)||void 0===_a?void 0:_a.Language}get Confidence(){var _a;return null===(_a=this.privTranslationPhrase.PrimaryLanguage)||void 0===_a?void 0:_a.Confidence}get Translation(){return this.privTranslationPhrase.Translation}}exports.TranslationPhrase=TranslationPhrase},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationSynthesisEnd=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class TranslationSynthesisEnd{constructor(json){this.privSynthesisEnd=JSON.parse(json),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=Exports_js_1.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=Exports_js_1.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(json){return new TranslationSynthesisEnd(json)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}exports.TranslationSynthesisEnd=TranslationSynthesisEnd},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TurnStatusPayload.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TurnStatusResponsePayload=void 0;class TurnStatusResponsePayload{constructor(json){this.privMessageStatusResponse=JSON.parse(json)}static fromJSON(json){return new TurnStatusResponsePayload(json)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}exports.TurnStatusResponsePayload=TurnStatusResponsePayload},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceRecognizerBase.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServiceRecognizerBase=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),SpeechConnectionMessage_Internal_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js");class ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!authentication)throw new Exports_js_2.ArgumentNullError("authentication");if(!connectionFactory)throw new Exports_js_2.ArgumentNullError("connectionFactory");if(!audioSource)throw new Exports_js_2.ArgumentNullError("audioSource");if(!recognizerConfig)throw new Exports_js_2.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=recognizerConfig.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=authentication,this.privConnectionFactory=connectionFactory,this.privAudioSource=audioSource,this.privRecognizerConfig=recognizerConfig,this.privIsDisposed=!1,this.privRecognizer=recognizer,this.privRequestSession=new Exports_js_4.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new Exports_js_2.EventSource,this.privServiceEvents=new Exports_js_2.EventSource,this.privDynamicGrammar=new Exports_js_4.DynamicGrammarBuilder,this.privSpeechContext=new Exports_js_4.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new Exports_js_4.AgentConfig;"on"===this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?this.privSetTimeout=Exports_js_2.Timeout.setTimeout:"undefined"!=typeof window&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach((connectionEvent=>{if("ConnectionClosedEvent"===connectionEvent.name){const connectionClosedEvent=connectionEvent;(1003===connectionClosedEvent.statusCode||1007===connectionClosedEvent.statusCode||1002===connectionClosedEvent.statusCode||4e3===connectionClosedEvent.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(Exports_js_3.CancellationReason.Error,1007===connectionClosedEvent.statusCode?Exports_js_3.CancellationErrorCode.BadRequestParameters:Exports_js_3.CancellationErrorCode.ConnectionFailure,`${connectionClosedEvent.reason} websocket error code: ${connectionClosedEvent.statusCode}`)}})),this.privEnableSpeakerId&&(this.privDiarizationSessionId=Exports_js_2.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const targetLanguages=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==targetLanguages){const languages=targetLanguages.split(","),translationVoice=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),action=void 0!==translationVoice?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action},output:{interimResults:{mode:"Always"}},targetLanguages:languages}),void 0!==translationVoice){const languageToVoiceMap={};for(const lang of languages)languageToVoiceMap[lang]=translationVoice;this.privSpeechContext.setSection("synthesis",{defaultVoices:languageToVoiceMap})}}}setSpeechSegmentationTimeoutJson(){const speechSegmentationTimeout=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==speechSegmentationTimeout){const mode=this.recognitionMode===Exports_js_4.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===Exports_js_4.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",segmentationSilenceTimeoutMs=parseInt(speechSegmentationTimeout,10),phraseDetection=this.privSpeechContext.getSection("phraseDetection");phraseDetection.mode=mode,phraseDetection[mode]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs}},this.privSpeechContext.setSection("phraseDetection",phraseDetection)}}setLanguageIdJson(){const phraseDetection=this.privSpeechContext.getSection("phraseDetection");if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){const sourceLanguages=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let speechContextLidMode;speechContextLidMode="Continuous"===this.privRecognizerConfig.languageIdMode?"DetectContinuous":"DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:sourceLanguages,mode:speechContextLidMode,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const customModels=this.privRecognizerConfig.sourceLanguageModels;void 0!==customModels&&(phraseDetection.customModels=customModels,phraseDetection.onInterim={action:"None"},phraseDetection.onSuccess={action:"None"})}void 0!==this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&(phraseDetection.onInterim={action:"Translate"},phraseDetection.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",phraseDetection)}setOutputDetailLevelJson(){if(this.privEnableSpeakerId){if("true"===this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase())this.privSpeechContext.setWordLevelTimings();else{this.privRecognizerConfig.parameters.getProperty(Exports_js_4.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]).toLowerCase()===Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat()}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(token){this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.ConversationTranslator_Token,token)}set voiceProfileType(type){this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SpeakerIdMode,type)}set authentication(auth){this.privAuthentication=auth}isDisposed(){return this.privIsDisposed}dispose(reason){return __awaiter(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privConnectionConfigurationPromise)try{const connection=yield this.privConnectionConfigurationPromise;yield connection.dispose(reason)}catch(error){return}}))}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(recoMode,successCallback,errorCallBack){return __awaiter(this,void 0,void 0,(function*(){if(void 0!==this.recognizeOverride)return void(yield this.recognizeOverride(recoMode,successCallback,errorCallBack));this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=recoMode,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=successCallback,this.privErrorCallback=errorCallBack,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const conPromise=this.connectImpl();let audioNode;try{const audioStreamNode=yield this.audioSource.attach(this.privRequestSession.audioNodeId),format=yield this.audioSource.format,deviceInfo=yield this.audioSource.deviceInfo;this.privIsLiveAudio=deviceInfo.type&&deviceInfo.type===Exports_js_4.type.Microphones,audioNode=new Exports_js_1.ReplayableAudioNode(audioStreamNode,format.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:deviceInfo}}catch(error){throw yield this.privRequestSession.onStopRecognizing(),error}try{yield conPromise}catch(error){return void(yield this.cancelRecognitionLocal(Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.ConnectionFailure,error))}const sessionStartEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,sessionStartEventArgs),this.receiveMessage();this.sendAudio(audioNode).catch((error=>__awaiter(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error)}))))}))}stopRecognizing(){return __awaiter(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}}))}connect(){return __awaiter(this,void 0,void 0,(function*(){return yield this.connectImpl(),Promise.resolve()}))}connectAsync(cb,err){this.connectImpl().then((()=>{try{cb&&cb()}catch(e){err&&err(e)}}),(reason=>{try{err&&err(reason)}catch(error){}}))}disconnect(){return __awaiter(this,void 0,void 0,(function*(){if(yield this.cancelRecognitionLocal(Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride()),void 0!==this.privConnectionPromise)try{yield(yield this.privConnectionPromise).dispose()}catch(error){}this.privConnectionPromise=void 0}))}sendMessage(message){}sendNetworkMessage(path,payload){return __awaiter(this,void 0,void 0,(function*(){const type="string"==typeof payload?Exports_js_2.MessageType.Text:Exports_js_2.MessageType.Binary,contentType="string"==typeof payload?"application/json":"";return(yield this.fetchConnection()).send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(type,path,this.privRequestSession.requestId,contentType,payload))}))}set activityTemplate(messagePayload){this.privActivityTemplate=messagePayload}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(value){this.privExpectContentAssessmentResponse=value}sendTelemetryData(){return __awaiter(this,void 0,void 0,(function*(){const telemetryData=this.privRequestSession.getTelemetry();if(!0!==ServiceRecognizerBase.telemetryDataEnabled||this.privIsDisposed||null===telemetryData)return;if(ServiceRecognizerBase.telemetryData)try{ServiceRecognizerBase.telemetryData(telemetryData)}catch(_a){}const connection=yield this.fetchConnection();yield connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",telemetryData))}))}cancelRecognitionLocal(cancellationReason,errorCode,error){return __awaiter(this,void 0,void 0,(function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,cancellationReason,errorCode,error))}))}receiveMessage(){return __awaiter(this,void 0,void 0,(function*(){try{if(this.privIsDisposed)return;let connection=yield this.fetchConnection();const message=yield connection.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!message)return this.receiveMessage();this.privServiceHasSentMessage=!0;const connectionMessage=SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage.fromConnectionMessage(message);if(connectionMessage.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(connectionMessage.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const speechStartDetected=Exports_js_4.SpeechDetected.fromJSON(connectionMessage.textBody),speechStartEventArgs=new Exports_js_3.RecognitionEventArgs(speechStartDetected.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,speechStartEventArgs);break;case"speech.enddetected":let json;json=connectionMessage.textBody.length>0?connectionMessage.textBody:"{ Offset: 0 }";const speechStopDetected=Exports_js_4.SpeechDetected.fromJSON(json),speechStopEventArgs=new Exports_js_3.RecognitionEventArgs(speechStopDetected.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,speechStopEventArgs);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(Exports_js_3.CancellationReason.EndOfStream,Exports_js_3.CancellationErrorCode.NoError,void 0));const sessionStopEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,sessionStopEventArgs));connection=yield this.fetchConnection(),yield this.sendPrePayloadJSON(connection);break;default:(yield this.processTypeSpecificMessages(connectionMessage))||this.privServiceEvents&&this.serviceEvents.onEvent(new Exports_js_2.ServiceEvent(connectionMessage.path.toLowerCase(),connectionMessage.textBody))}return this.receiveMessage()}catch(error){return null}}))}updateSpeakerDiarizationAudioOffset(){const audioOffsetMs=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(audioOffsetMs)}sendSpeechContext(connection,generateNewRequestId){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const speechContextJson=this.speechContext.toJSON();if(generateNewRequestId&&this.privRequestSession.onSpeechContext(),speechContextJson)return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",speechContextJson))}noOp(){}sendPrePayloadJSON(connection,generateNewRequestId=!0){return __awaiter(this,void 0,void 0,(function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(connection);yield this.sendSpeechContext(connection,generateNewRequestId),yield this.sendWaveHeader(connection)}))}sendWaveHeader(connection){return __awaiter(this,void 0,void 0,(function*(){const format=yield this.audioSource.format;return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",format.header))}))}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then((connection=>connection.state()===Exports_js_2.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()))):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch((()=>{})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(connection,requestSession,SpeechServiceConfigJson){if(requestSession.onSpeechContext(),!0!==ServiceRecognizerBase.telemetryDataEnabled){const replacement={context:{system:JSON.parse(SpeechServiceConfigJson).context.system}};SpeechServiceConfigJson=JSON.stringify(replacement)}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const json=JSON.parse(SpeechServiceConfigJson);json.context.DisableReferenceChannel="True",json.context.MicSpec="1_0_0",SpeechServiceConfigJson=JSON.stringify(json)}if(SpeechServiceConfigJson)return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speech.config",requestSession.requestId,"application/json",SpeechServiceConfigJson))}fetchConnection(){return __awaiter(this,void 0,void 0,(function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((connection=>connection.state()===Exports_js_2.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}sendAudio(audioStreamNode){return __awaiter(this,void 0,void 0,(function*(){const audioFormat=yield this.audioSource.format;this.privAverageBytesPerMs=audioFormat.avgBytesPerSec/1e3;let nextSendTime=Date.now();const fastLaneSizeMs=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),maxSendUnthrottledBytes=audioFormat.avgBytesPerSec/1e3*parseInt(fastLaneSizeMs,10),startRecogNumber=this.privRequestSession.recogNumber,readAndUploadCycle=()=>__awaiter(this,void 0,void 0,(function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===startRecogNumber){const connection=yield this.fetchConnection(),audioStreamChunk=yield audioStreamNode.read();if(this.privRequestSession.isSpeechEnded)return;let payload,sendDelay;if(!audioStreamChunk||audioStreamChunk.isEnd?(payload=null,sendDelay=0):(payload=audioStreamChunk.buffer,this.privRequestSession.onAudioSent(payload.byteLength),sendDelay=maxSendUnthrottledBytes>=this.privRequestSession.bytesSent?0:Math.max(0,nextSendTime-Date.now())),0!==sendDelay&&(yield this.delay(sendDelay)),null!==payload&&(nextSendTime=Date.now()+1e3*payload.byteLength/(2*audioFormat.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===startRecogNumber){if(connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Binary,"audio",this.privRequestSession.requestId,null,payload)).catch((()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch((()=>{}))})),!(null==audioStreamChunk?void 0:audioStreamChunk.isEnd))return readAndUploadCycle();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}}));return readAndUploadCycle()}))}retryableConnect(){return __awaiter(this,void 0,void 0,(function*(){let isUnAuthorized=!1;this.privAuthFetchEventId=Exports_js_2.createNoDashGuid();const sessionId=this.privRequestSession.sessionId;this.privConnectionId=void 0!==sessionId?sessionId:Exports_js_2.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let lastStatusCode=0,lastReason="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const authPromise=isUnAuthorized?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),auth=yield authPromise;yield this.privRequestSession.onAuthCompleted(!1);const connection=this.privConnectionFactory.create(this.privRecognizerConfig,auth,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(connection.events),connection.events.attach((event=>{this.connectionEvents.onEvent(event)}));const response=yield connection.open();if(200===response.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(response.statusCode),Promise.resolve(connection);1006===response.statusCode&&(isUnAuthorized=!0),lastStatusCode=response.statusCode,lastReason=response.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(lastStatusCode,lastReason),Promise.reject(`Unable to contact server. StatusCode: ${lastStatusCode}, ${this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${lastReason}`)}))}delay(delayMs){return new Promise((resolve=>this.privSetTimeout(resolve,delayMs)))}writeBufferToConsole(buffer){let out="Buffer Size: ";if(null===buffer)out+="null";else{const readView=new Uint8Array(buffer);out+=`${buffer.byteLength}\r\n`;for(let i=0;i<buffer.byteLength;i++)out+=readView[i].toString(16).padStart(2,"0")+" ",(i+1)%16==0&&(console.info(out),out="")}console.info(out)}sendFinalAudio(){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.fetchConnection();yield connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}))}configureConnection(){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(connection):(yield this.sendSpeechServiceConfig(connection,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(connection,!1),connection)}))}}exports.ServiceRecognizerBase=ServiceRecognizerBase,ServiceRecognizerBase.telemetryDataEnabled=!0},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceTelemetryListener.Internal.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServiceTelemetryListener=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),RecognitionEvents_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/RecognitionEvents.js");exports.ServiceTelemetryListener=class ServiceTelemetryListener{constructor(requestId,audioSourceId,audioNodeId){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=requestId,this.privAudioSourceId=audioSourceId,this.privAudioNodeId=audioNodeId,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(audioReceivedTime){audioReceivedTime>0&&this.privPhraseLatencies.push(Date.now()-audioReceivedTime)}hypothesisReceived(audioReceivedTime){audioReceivedTime>0&&this.privHypothesisLatencies.push(Date.now()-audioReceivedTime)}onEvent(e){if(!this.privIsDisposed&&(e instanceof RecognitionEvents_js_1.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof Exports_js_1.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Exports_js_1.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Exports_js_1.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Exports_js_1.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Exports_js_1.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof RecognitionEvents_js_1.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof Exports_js_1.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof Exports_js_1.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Exports_js_1.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Exports_js_1.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const maxMessagesToSend=50;this.privReceivedMessages[e.message.headers.path].length<maxMessagesToSend&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}}getTelemetry(){const metrics=new Array;this.privListeningTriggerMetric&&metrics.push(this.privListeningTriggerMetric),this.privMicMetric&&metrics.push(this.privMicMetric),this.privConnectionEstablishMetric&&metrics.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&metrics.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&metrics.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const telemetry={Metrics:metrics,ReceivedMessages:this.privReceivedMessages},json=JSON.stringify(telemetry);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],json}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(statusCode){switch(statusCode){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+statusCode.toString()}}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeakerRecognitionConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeakerRecognitionConfig=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");exports.SpeakerRecognitionConfig=class SpeakerRecognitionConfig{constructor(context,parameters){this.privContext=context||new Exports_js_1.Context(null),this.privParameters=parameters}get parameters(){return this.privParameters}get Context(){return this.privContext}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeakerRecognitionConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceProfileConnectionFactory=exports.SpeakerRecognitionConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js");class SpeakerRecognitionConnectionFactoryBase extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{create(config,authInfo,endpointPath,connectionId){let endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint);if(!endpoint){const region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region),hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region),host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,`wss://${region}.spr-frontend.speech${hostSuffix}`),scenario=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");endpoint=`${host}/speaker/ws/${this.scenarioToPath(scenario)}/${endpointPath}`}const queryParams={format:"simple",language:config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(config,queryParams,endpoint);const headers={};void 0!==authInfo.token&&""!==authInfo.token&&(headers[authInfo.headerName]=authInfo.token),headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId,headers[HeaderNames_js_1.HeaderNames.SpIDAuthKey]=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key),config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId)}scenarioToPath(mode){switch(mode){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}exports.SpeakerRecognitionConnectionFactory=class SpeakerRecognitionConnectionFactory extends SpeakerRecognitionConnectionFactoryBase{create(config,authInfo,connectionId){return super.create(config,authInfo,"recognition",connectionId)}};exports.VoiceProfileConnectionFactory=class VoiceProfileConnectionFactory extends SpeakerRecognitionConnectionFactoryBase{create(config,authInfo,connectionId){return super.create(config,authInfo,"profile",connectionId)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeakerServiceRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeakerServiceRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),SpeechConnectionMessage_Internal_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js");class SpeakerServiceRecognizer extends Exports_js_4.ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){super(authentication,connectionFactory,audioSource,recognizerConfig,recognizer),this.privSpeakerRecognizer=recognizer,this.privSpeakerAudioSource=audioSource,this.recognizeSpeaker=model=>this.recognizeSpeakerOnce(model),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(connectionMessage){let processed=!1;const resultProps=new Exports_js_3.PropertyCollection;if(connectionMessage.messageType===Exports_js_2.MessageType.Text&&resultProps.setProperty(Exports_js_3.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody),"speaker.response"===connectionMessage.path.toLowerCase()){const response=JSON.parse(connectionMessage.textBody);let result;result="success"!==response.status.statusCode.toLowerCase()?new Exports_js_3.SpeakerRecognitionResult(response,Exports_js_3.ResultReason.Canceled,Exports_js_3.CancellationErrorCode.ServiceError,response.status.reason):new Exports_js_3.SpeakerRecognitionResult(response,Exports_js_3.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(result),processed=!0}const defferal=new Exports_js_2.Deferred;return defferal.resolve(processed),defferal.promise}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){if((new Exports_js_3.PropertyCollection).setProperty(Exports_js_4.CancellationErrorCodePropertyName,Exports_js_3.CancellationErrorCode[errorCode]),this.privResultDeferral){const result=new Exports_js_3.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:error,reason:error}},Exports_js_3.ResultReason.Canceled,errorCode,error);try{this.privResultDeferral.resolve(result)}catch(error){this.privResultDeferral.reject(error)}}}recognizeSpeakerOnce(model){return __awaiter(this,void 0,void 0,(function*(){this.privSpeakerModel=model,this.voiceProfileType=model.scenario,this.privResultDeferral||(this.privResultDeferral=new Exports_js_2.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const conPromise=this.connectImpl(),preAudioPromise=this.sendPreAudioMessages(this.extractSpeakerContext(model)),node=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),format=yield this.privSpeakerAudioSource.format,deviceInfo=yield this.privSpeakerAudioSource.deviceInfo,audioNode=new Exports_js_1.ReplayableAudioNode(node,format.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:deviceInfo};try{yield conPromise,yield preAudioPromise}catch(err){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.ConnectionFailure,err)}const sessionStartEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,sessionStartEventArgs),this.receiveMessage();return this.sendAudio(audioNode).then((()=>{}),(error=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error)})),this.privResultDeferral.promise}))}sendPreAudioMessages(context){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.fetchConnection();yield this.sendSpeakerRecognition(connection,context)}))}sendSpeakerRecognition(connection,context){return __awaiter(this,void 0,void 0,(function*(){const speakerContextJson=JSON.stringify(context);return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",speakerContextJson))}))}extractSpeakerContext(model){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:model.profileIds,scenario:model.scenario}}}exports.SpeakerServiceRecognizer=SpeakerServiceRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),QueryParameterNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js");class SpeechConnectionFactory extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(config,authInfo,connectionId){let endpoint=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Endpoint,void 0);const region=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Region,void 0),hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region),host=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Host,"wss://"+region+".stt.speech"+hostSuffix),queryParams={},endpointId=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_EndpointId,void 0),language=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(endpointId?endpoint&&-1!==endpoint.search(QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId)||(queryParams[QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId]=endpointId):language&&(endpoint&&-1!==endpoint.search(QueryParameterNames_js_1.QueryParameterNames.Language)||(queryParams[QueryParameterNames_js_1.QueryParameterNames.Language]=language)),endpoint&&-1!==endpoint.search(QueryParameterNames_js_1.QueryParameterNames.Format)||(queryParams[QueryParameterNames_js_1.QueryParameterNames.Format]=config.parameters.getProperty(Exports_js_2.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]).toLowerCase()),void 0!==config.autoDetectSourceLanguages&&(queryParams[QueryParameterNames_js_1.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(config,queryParams,endpoint),!endpoint)switch(config.recognitionMode){case Exports_js_4.RecognitionMode.Conversation:endpoint="true"===config.parameters.getProperty(Exports_js_2.ForceDictationPropertyName,"false")?host+this.dictationRelativeUri:void 0!==config.recognitionEndpointVersion&&parseInt(config.recognitionEndpointVersion,10)>1?`${host}${this.universalUri}${config.recognitionEndpointVersion}`:host+this.conversationRelativeUri;break;case Exports_js_4.RecognitionMode.Dictation:endpoint=host+this.dictationRelativeUri;break;default:endpoint=void 0!==config.recognitionEndpointVersion&&parseInt(config.recognitionEndpointVersion,10)>1?`${host}${this.universalUri}${config.recognitionEndpointVersion}`:host+this.interactiveRelativeUri}const headers={};void 0!==authInfo.token&&""!==authInfo.token&&(headers[authInfo.headerName]=authInfo.token),headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),webSocketConnection=new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_4.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId),uri=webSocketConnection.uri;return config.parameters.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Url,uri),webSocketConnection}}exports.SpeechConnectionFactory=SpeechConnectionFactory},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechConnectionMessage=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js");class SpeechConnectionMessage extends Exports_js_1.ConnectionMessage{constructor(messageType,path,requestId,contentType,body,streamId,additionalHeaders,id){if(!path)throw new Exports_js_1.ArgumentNullError("path");if(!requestId)throw new Exports_js_1.ArgumentNullError("requestId");const headers={};if(headers[HeaderNames_js_1.HeaderNames.Path]=path,headers[HeaderNames_js_1.HeaderNames.RequestId]=requestId,headers[HeaderNames_js_1.HeaderNames.RequestTimestamp]=(new Date).toISOString(),contentType&&(headers[HeaderNames_js_1.HeaderNames.ContentType]=contentType),streamId&&(headers[HeaderNames_js_1.HeaderNames.RequestStreamId]=streamId),additionalHeaders)for(const headerName in additionalHeaders)headerName&&(headers[headerName]=additionalHeaders[headerName]);id?super(messageType,body,headers,id):super(messageType,body,headers),this.privPath=path,this.privRequestId=requestId,this.privContentType=contentType,this.privStreamId=streamId,this.privAdditionalHeaders=additionalHeaders}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(message){let path=null,requestId=null,contentType=null,streamId=null;const additionalHeaders={};if(message.headers)for(const headerName in message.headers)headerName&&(headerName.toLowerCase()===HeaderNames_js_1.HeaderNames.Path.toLowerCase()?path=message.headers[headerName]:headerName.toLowerCase()===HeaderNames_js_1.HeaderNames.RequestId.toLowerCase()?requestId=message.headers[headerName]:headerName.toLowerCase()===HeaderNames_js_1.HeaderNames.ContentType.toLowerCase()?contentType=message.headers[headerName]:headerName.toLowerCase()===HeaderNames_js_1.HeaderNames.RequestStreamId.toLowerCase()?streamId=message.headers[headerName]:additionalHeaders[headerName]=message.headers[headerName]);return new SpeechConnectionMessage(message.messageType,path,requestId,contentType,message.body,streamId,additionalHeaders,message.id)}}exports.SpeechConnectionMessage=SpeechConnectionMessage},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechContext.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechContext=void 0;exports.SpeechContext=class SpeechContext{constructor(dynamicGrammar){this.privContext={},this.privDynamicGrammar=dynamicGrammar}getSection(sectionName){return this.privContext[sectionName]||{}}setSection(sectionName,value){this.privContext[sectionName]=value}setPronunciationAssessmentParams(params,contentAssessmentTopic,isSpeakerDiarizationEnabled=!1){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(params),isSpeakerDiarizationEnabled&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR"),contentAssessmentTopic&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:contentAssessmentTopic},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(audioOffsetMs){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=audioOffsetMs}toJSON(){const dgi=this.privDynamicGrammar.generateGrammarObject();this.setSection("dgi",dgi);return JSON.stringify(this.privContext)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceConfig.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.type=exports.connectivity=exports.Device=exports.OS=exports.System=exports.Context=exports.SpeechServiceConfig=void 0;exports.SpeechServiceConfig=class SpeechServiceConfig{constructor(context){this.context=context}serialize(){return JSON.stringify(this,((key,value)=>{if(value&&"object"==typeof value&&!Array.isArray(value)){const replacement={};for(const k in value)Object.hasOwnProperty.call(value,k)&&(replacement[k&&k.charAt(0).toLowerCase()+k.substring(1)]=value[k]);return replacement}return value}))}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(value){this.recognition=value.toLowerCase()}};exports.Context=class Context{constructor(os){this.system=new System,this.os=os}};class System{constructor(){this.name="SpeechSDK",this.version="1.34.0",this.build="JavaScript",this.lang="JavaScript"}}exports.System=System;exports.OS=class OS{constructor(platform,name,version){this.platform=platform,this.name=name,this.version=version}};exports.Device=class Device{constructor(manufacturer,model,version){this.manufacturer=manufacturer,this.model=model,this.version=version}},function(connectivity){connectivity.Bluetooth="Bluetooth",connectivity.Wired="Wired",connectivity.WiFi="WiFi",connectivity.Cellular="Cellular",connectivity.InBuilt="InBuilt",connectivity.Unknown="Unknown"}(exports.connectivity||(exports.connectivity={})),function(type){type.Phone="Phone",type.Speaker="Speaker",type.Car="Car",type.Headset="Headset",type.Thermostat="Thermostat",type.Microphones="Microphones",type.Deskphone="Deskphone",type.RemoteControl="RemoteControl",type.Unknown="Unknown",type.File="File",type.Stream="Stream"}(exports.type||(exports.type={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceInterfaces.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechServiceRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechServiceRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class SpeechServiceRecognizer extends Exports_js_2.ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,speechRecognizer){super(authentication,connectionFactory,audioSource,recognizerConfig,speechRecognizer),this.privSpeechRecognizer=speechRecognizer}processTypeSpecificMessages(connectionMessage){return __awaiter(this,void 0,void 0,(function*(){let result;const resultProps=new Exports_js_1.PropertyCollection;resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody);let processed=!1;switch(connectionMessage.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const hypothesis=Exports_js_2.SpeechHypothesis.fromJSON(connectionMessage.textBody),offset=hypothesis.Offset+this.privRequestSession.currentTurnAudioOffset;result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,Exports_js_1.ResultReason.RecognizingSpeech,hypothesis.Text,hypothesis.Duration,offset,hypothesis.Language,hypothesis.LanguageDetectionConfidence,void 0,void 0,connectionMessage.textBody,resultProps),this.privRequestSession.onHypothesis(offset);const ev=new Exports_js_1.SpeechRecognitionEventArgs(result,hypothesis.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,ev)}catch(error){}processed=!0;break;case"speech.phrase":const simple=Exports_js_2.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody),resultReason=Exports_js_2.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+simple.Offset+simple.Duration),Exports_js_1.ResultReason.Canceled===resultReason){const cancelReason=Exports_js_2.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus),cancellationErrorCode=Exports_js_2.EnumTranslation.implTranslateCancelErrorCode(simple.RecognitionStatus);yield this.cancelRecognitionLocal(cancelReason,cancellationErrorCode,Exports_js_2.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode))}else{if(!this.privRequestSession.isSpeechEnded||resultReason!==Exports_js_1.ResultReason.NoMatch||simple.RecognitionStatus===Exports_js_2.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(Exports_js_2.OutputFormatPropertyName)===Exports_js_1.OutputFormat[Exports_js_1.OutputFormat.Simple])result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,simple.DisplayText,simple.Duration,simple.Offset+this.privRequestSession.currentTurnAudioOffset,simple.Language,simple.LanguageDetectionConfidence,void 0,void 0,connectionMessage.textBody,resultProps);else{const detailed=Exports_js_2.DetailedSpeechPhrase.fromJSON(connectionMessage.textBody),totalOffset=detailed.Offset+this.privRequestSession.currentTurnAudioOffset,offsetCorrectedJson=detailed.getJsonWithCorrectedOffsets(totalOffset);result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,detailed.RecognitionStatus===Exports_js_2.RecognitionStatus.Success?detailed.NBest[0].Display:void 0,detailed.Duration,totalOffset,detailed.Language,detailed.LanguageDetectionConfidence,void 0,void 0,offsetCorrectedJson,resultProps)}const event=new Exports_js_1.SpeechRecognitionEventArgs(result,result.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,event)}catch(error){}}if(this.privSuccessCallback){try{this.privSuccessCallback(result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}processed=!0}return processed}))}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){const properties=new Exports_js_1.PropertyCollection;if(properties.setProperty(Exports_js_2.CancellationErrorCodePropertyName,Exports_js_1.CancellationErrorCode[errorCode]),this.privSpeechRecognizer.canceled){const cancelEvent=new Exports_js_1.SpeechRecognitionCanceledEventArgs(cancellationReason,error,errorCode,void 0,sessionId);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,cancelEvent)}catch(_a){}}if(this.privSuccessCallback){const result=new Exports_js_1.SpeechRecognitionResult(requestId,Exports_js_1.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,error,void 0,properties);try{this.privSuccessCallback(result),this.privSuccessCallback=void 0}catch(_b){}}}}exports.SpeechServiceRecognizer=SpeechServiceRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechSynthesisAdapter.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisAdapter=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class SpeechSynthesisAdapter extends Exports_js_2.SynthesisAdapterBase{constructor(authentication,connectionFactory,synthesizerConfig,speechSynthesizer,audioDestination){super(authentication,connectionFactory,synthesizerConfig,audioDestination),this.privSpeechSynthesizer=speechSynthesizer,this.privSynthesizer=speechSynthesizer}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(requestId){const synthesisStartEventArgs=new Exports_js_1.SpeechSynthesisEventArgs(new Exports_js_1.SpeechSynthesisResult(requestId,Exports_js_1.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,synthesisStartEventArgs)}onSynthesizing(audio){if(this.privSpeechSynthesizer.synthesizing)try{const audioWithHeader=this.privSynthesisTurn.audioOutputFormat.addHeader(audio),ev=new Exports_js_1.SpeechSynthesisEventArgs(new Exports_js_1.SpeechSynthesisResult(this.privSynthesisTurn.requestId,Exports_js_1.ResultReason.SynthesizingAudio,audioWithHeader));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,ev)}catch(error){}}onSynthesisCancelled(result){if(this.privSpeechSynthesizer.SynthesisCanceled){const cancelEvent=new Exports_js_1.SpeechSynthesisEventArgs(result);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,cancelEvent)}catch(_a){}}}onSynthesisCompleted(result){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new Exports_js_1.SpeechSynthesisEventArgs(result))}catch(e){}}onWordBoundary(wordBoundaryEventArgs){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,wordBoundaryEventArgs)}catch(error){}}onVisemeReceived(visemeEventArgs){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,visemeEventArgs)}catch(error){}}onBookmarkReached(bookmarkEventArgs){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,bookmarkEventArgs)}catch(error){}}}exports.SpeechSynthesisAdapter=SpeechSynthesisAdapter},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechSynthesisConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),QueryParameterNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js");exports.SpeechSynthesisConnectionFactory=class SpeechSynthesisConnectionFactory{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(config,authInfo,connectionId){let endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,void 0);const region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,void 0),hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region),endpointId=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,void 0),hostPrefix=void 0===endpointId?"tts":"voice",host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://"+region+"."+hostPrefix+".speech"+hostSuffix),queryParams={},headers={};void 0!==authInfo.token&&""!==authInfo.token&&(headers[authInfo.headerName]=authInfo.token),headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId,void 0!==endpointId&&""!==endpointId&&(endpoint&&-1!==endpoint.search(QueryParameterNames_js_1.QueryParameterNames.CustomVoiceDeploymentId)||(queryParams[QueryParameterNames_js_1.QueryParameterNames.CustomVoiceDeploymentId]=endpointId)),config.avatarEnabled&&(endpoint&&-1!==endpoint.search(QueryParameterNames_js_1.QueryParameterNames.EnableAvatar)||(queryParams[QueryParameterNames_js_1.QueryParameterNames.EnableAvatar]="true")),endpoint||(endpoint=host+this.synthesisUri),config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromParameters(config.parameters),enableCompression,connectionId)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisAdapterBase.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisAdapterBase=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),SpeechConnectionMessage_Internal_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js");class SynthesisAdapterBase{constructor(authentication,connectionFactory,synthesizerConfig,audioDestination){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!authentication)throw new Exports_js_1.ArgumentNullError("authentication");if(!connectionFactory)throw new Exports_js_1.ArgumentNullError("connectionFactory");if(!synthesizerConfig)throw new Exports_js_1.ArgumentNullError("synthesizerConfig");this.privAuthentication=authentication,this.privConnectionFactory=connectionFactory,this.privSynthesizerConfig=synthesizerConfig,this.privIsDisposed=!1,this.privSessionAudioDestination=audioDestination,this.privSynthesisTurn=new Exports_js_3.SynthesisTurn,this.privConnectionEvents=new Exports_js_1.EventSource,this.privServiceEvents=new Exports_js_1.EventSource,this.privSynthesisContext=new Exports_js_3.SynthesisContext,this.privAgentConfig=new Exports_js_3.AgentConfig,this.connectionEvents.attach((connectionEvent=>{if("ConnectionClosedEvent"===connectionEvent.name){const connectionClosedEvent=connectionEvent;1e3!==connectionClosedEvent.statusCode&&this.cancelSynthesisLocal(Exports_js_2.CancellationReason.Error,1007===connectionClosedEvent.statusCode?Exports_js_2.CancellationErrorCode.BadRequestParameters:Exports_js_2.CancellationErrorCode.ConnectionFailure,`${connectionClosedEvent.reason} websocket error code: ${connectionClosedEvent.statusCode}`)}}))}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(messagePayload){this.privActivityTemplate=messagePayload}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(format){this.privAudioOutputFormat=format,this.privSynthesisTurn.audioOutputFormat=format,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=format),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=format)}isDisposed(){return this.privIsDisposed}dispose(reason){return __awaiter(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const connection=yield this.privConnectionConfigurationPromise;yield connection.dispose(reason)}}))}connect(){return __awaiter(this,void 0,void 0,(function*(){yield this.connectImpl()}))}sendNetworkMessage(path,payload){return __awaiter(this,void 0,void 0,(function*(){const type="string"==typeof payload?Exports_js_1.MessageType.Text:Exports_js_1.MessageType.Binary,contentType="string"==typeof payload?"application/json":"";return(yield this.fetchConnection()).send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(type,path,this.privSynthesisTurn.requestId,contentType,payload))}))}Speak(text,isSSML,requestId,successCallback,errorCallBack,audioDestination){return __awaiter(this,void 0,void 0,(function*(){let ssml;if(ssml=isSSML?text:this.privSynthesizer.buildSsml(text),void 0!==this.speakOverride)return this.speakOverride(ssml,requestId,successCallback,errorCallBack);this.privSuccessCallback=successCallback,this.privErrorCallback=errorCallBack,this.privSynthesisTurn.startNewSynthesis(requestId,text,isSSML,audioDestination);try{yield this.connectImpl();const connection=yield this.fetchConnection();yield this.sendSynthesisContext(connection),yield this.sendSsmlMessage(connection,ssml,requestId),this.onSynthesisStarted(requestId),this.receiveMessage()}catch(e){return this.cancelSynthesisLocal(Exports_js_2.CancellationReason.Error,Exports_js_2.CancellationErrorCode.ConnectionFailure,e),Promise.reject(e)}}))}stopSpeaking(){return __awaiter(this,void 0,void 0,(function*(){yield this.connectImpl();return(yield this.fetchConnection()).send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}))}cancelSynthesis(requestId,_cancellationReason,errorCode,error){const properties=new Exports_js_2.PropertyCollection;properties.setProperty(Exports_js_3.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[errorCode]);const result=new Exports_js_2.SpeechSynthesisResult(requestId,Exports_js_2.ResultReason.Canceled,void 0,error,properties);if(this.onSynthesisCancelled(result),this.privSuccessCallback)try{this.privSuccessCallback(result)}catch(_a){}}cancelSynthesisLocal(cancellationReason,errorCode,error){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,cancellationReason,errorCode,error))}processTypeSpecificMessages(_connectionMessage){return!0}receiveMessage(){return __awaiter(this,void 0,void 0,(function*(){try{const connection=yield this.fetchConnection(),message=yield connection.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!message)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const connectionMessage=SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage.fromConnectionMessage(message);if(connectionMessage.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(connectionMessage.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(connectionMessage.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(connectionMessage.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===connectionMessage.streamId.toLowerCase()&&connectionMessage.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(connectionMessage.binaryBody),this.onSynthesizing(connectionMessage.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(connectionMessage.binaryBody));break;case"audio.metadata":const metadataList=Exports_js_3.SynthesisAudioMetadata.fromJSON(connectionMessage.textBody).Metadata;for(const metadata of metadataList)switch(metadata.Type){case Exports_js_3.MetadataType.WordBoundary:case Exports_js_3.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(metadata);const wordBoundaryEventArgs=new Exports_js_2.SpeechSynthesisWordBoundaryEventArgs(metadata.Data.Offset,metadata.Data.Duration,metadata.Data.text.Text,metadata.Data.text.Length,metadata.Type===Exports_js_3.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,metadata.Data.text.BoundaryType);this.onWordBoundary(wordBoundaryEventArgs);break;case Exports_js_3.MetadataType.Bookmark:const bookmarkEventArgs=new Exports_js_2.SpeechSynthesisBookmarkEventArgs(metadata.Data.Offset,metadata.Data.Bookmark);this.onBookmarkReached(bookmarkEventArgs);break;case Exports_js_3.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(metadata),metadata.Data.IsLastAnimation){const visemeEventArgs=new Exports_js_2.SpeechSynthesisVisemeEventArgs(metadata.Data.Offset,metadata.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(visemeEventArgs)}break;case Exports_js_3.MetadataType.AvatarSignal:this.onAvatarEvent(metadata);break;case Exports_js_3.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(metadata)}break;case"turn.end":let result;this.privSynthesisTurn.onServiceTurnEndResponse();try{result=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(result)}catch(error){this.privErrorCallback&&this.privErrorCallback(error)}this.onSynthesisCompleted(result);break;default:this.processTypeSpecificMessages(connectionMessage)||this.privServiceEvents&&this.serviceEvents.onEvent(new Exports_js_1.ServiceEvent(connectionMessage.path.toLowerCase(),connectionMessage.textBody))}return this.receiveMessage()}catch(e){}}))}sendSynthesisContext(connection){this.setSynthesisContextSynthesisSection();const synthesisContextJson=this.synthesisContext.toJSON();if(synthesisContextJson)return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",synthesisContextJson))}setSpeechConfigSynthesisSection(){}connectImpl(isUnAuthorized=!1){if(null!=this.privConnectionPromise)return this.privConnectionPromise.then((connection=>connection.state()===Exports_js_1.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl())));this.privAuthFetchEventId=Exports_js_1.createNoDashGuid(),this.privConnectionId=Exports_js_1.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const authPromise=isUnAuthorized?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=authPromise.then((result=>__awaiter(this,void 0,void 0,(function*(){this.privSynthesisTurn.onAuthCompleted(!1);const connection=this.privConnectionFactory.create(this.privSynthesizerConfig,result,this.privConnectionId);connection.events.attach((event=>{this.connectionEvents.onEvent(event)}));const response=yield connection.open();return 200===response.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(response.statusCode),Promise.resolve(connection)):403!==response.statusCode||isUnAuthorized?(this.privSynthesisTurn.onConnectionEstablishCompleted(response.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${response.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${response.reason}`)):this.connectImpl(!0)}))),(error=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(error)})),this.privConnectionPromise.catch((()=>{})),this.privConnectionPromise}sendSpeechServiceConfig(connection,SpeechServiceConfigJson){if(SpeechServiceConfigJson)return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",SpeechServiceConfigJson))}sendSsmlMessage(connection,ssml,requestId){return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"ssml",requestId,"application/ssml+xml",ssml))}fetchConnection(){return __awaiter(this,void 0,void 0,(function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((connection=>connection.state()===Exports_js_1.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}configureConnection(){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(connection):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(connection,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),connection)}))}onAvatarEvent(_metadata){}onSynthesisStarted(_requestId){}onSynthesizing(_audio){}onSynthesisCancelled(_result){}onSynthesisCompleted(_result){}onWordBoundary(_wordBoundaryEventArgs){}onVisemeReceived(_visemeEventArgs){}onBookmarkReached(_bookmarkEventArgs){}}exports.SynthesisAdapterBase=SynthesisAdapterBase,SynthesisAdapterBase.telemetryDataEnabled=!0},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisContext.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisContext=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");exports.SynthesisContext=class SynthesisContext{constructor(){this.privContext={}}setSection(sectionName,value){this.privContext[sectionName]=value}set audioOutputFormat(format){this.privAudioOutputFormat=format}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(speechSynthesizer){const synthesisSection=this.buildSynthesisContext(speechSynthesizer);this.setSection("synthesis",synthesisSection)}buildSynthesisContext(speechSynthesizer){return{audio:{metadataOptions:{bookmarkEnabled:!!(null==speechSynthesizer?void 0:speechSynthesizer.bookmarkReached),punctuationBoundaryEnabled:null==speechSynthesizer?void 0:speechSynthesizer.properties.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(null==speechSynthesizer?void 0:speechSynthesizer.wordBoundary)),sentenceBoundaryEnabled:null==speechSynthesizer?void 0:speechSynthesizer.properties.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(null==speechSynthesizer?void 0:speechSynthesizer.visemeReceived),wordBoundaryEnabled:null==speechSynthesizer?void 0:speechSynthesizer.properties.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(null==speechSynthesizer?void 0:speechSynthesizer.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:null==speechSynthesizer?void 0:speechSynthesizer.autoDetectSourceLanguage}}}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisEvents.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisStartedEvent=exports.ConnectingToSynthesisServiceEvent=exports.SynthesisTriggeredEvent=exports.SpeechSynthesisEvent=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");class SpeechSynthesisEvent extends Exports_js_1.PlatformEvent{constructor(eventName,requestId,eventType=Exports_js_1.EventType.Info){super(eventName,eventType),this.privRequestId=requestId}get requestId(){return this.privRequestId}}exports.SpeechSynthesisEvent=SpeechSynthesisEvent;exports.SynthesisTriggeredEvent=class SynthesisTriggeredEvent extends SpeechSynthesisEvent{constructor(requestId,sessionAudioDestinationId,turnAudioDestinationId){super("SynthesisTriggeredEvent",requestId),this.privSessionAudioDestinationId=sessionAudioDestinationId,this.privTurnAudioDestinationId=turnAudioDestinationId}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};exports.ConnectingToSynthesisServiceEvent=class ConnectingToSynthesisServiceEvent extends SpeechSynthesisEvent{constructor(requestId,authFetchEventId){super("ConnectingToSynthesisServiceEvent",requestId),this.privAuthFetchEventId=authFetchEventId}get authFetchEventId(){return this.privAuthFetchEventId}};exports.SynthesisStartedEvent=class SynthesisStartedEvent extends SpeechSynthesisEvent{constructor(requestId,authFetchEventId){super("SynthesisStartedEvent",requestId),this.privAuthFetchEventId=authFetchEventId}get authFetchEventId(){return this.privAuthFetchEventId}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisRestAdapter.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisRestAdapter=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js");exports.SynthesisRestAdapter=class SynthesisRestAdapter{constructor(config,authentication){let endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!endpoint){const region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,"westus"),hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,`https://${region}.tts.speech${hostSuffix}`)}this.privUri=`${endpoint}/cognitiveservices/voices/list`;const options=Exports_js_1.RestConfigBase.requestOptions;this.privRestAdapter=new Exports_js_1.RestMessageAdapter(options),this.privAuthentication=authentication}getVoicesList(connectionId){return this.privRestAdapter.setHeaders(HeaderNames_js_1.HeaderNames.ConnectionId,connectionId),this.privAuthentication.fetch(connectionId).then((authInfo=>(this.privRestAdapter.setHeaders(authInfo.headerName,authInfo.token),this.privRestAdapter.request(Exports_js_1.RestRequestType.Get,this.privUri))))}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisTurn.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisTurn=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),AudioOutputStream_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputStream.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),SynthesisAudioMetadata_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js"),SynthesisEvents_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesisEvents.js");class SynthesisTurn{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=Exports_js_1.createNoDashGuid(),this.privTurnDeferral=new Exports_js_1.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(value){this.privStreamId=value}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(format){this.privAudioOutputFormat=format}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const properties=new Exports_js_2.PropertyCollection;return properties.setProperty(Exports_js_2.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),properties}}getAllReceivedAudio(){return __awaiter(this,void 0,void 0,(function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}))}getAllReceivedAudioWithHeader(){return __awaiter(this,void 0,void 0,(function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const audio=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(audio),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}))}startNewSynthesis(requestId,rawText,isSSML,audioDestination){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=requestId,this.privRawText=rawText,this.privIsSSML=isSSML,this.privAudioOutputStream=new AudioOutputStream_js_1.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==audioDestination&&(this.privTurnAudioDestination=audioDestination,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new SynthesisEvents_js_1.SynthesisTriggeredEvent(this.requestId,void 0,void 0===audioDestination?void 0:audioDestination.id()))}onPreConnectionStart(authFetchEventId){this.privAuthFetchEventId=authFetchEventId,this.onEvent(new SynthesisEvents_js_1.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(isError){isError&&this.onComplete()}onConnectionEstablishCompleted(statusCode){if(200===statusCode)return this.onEvent(new SynthesisEvents_js_1.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===statusCode&&this.onComplete()}onServiceResponseMessage(responseJson){const response=JSON.parse(responseJson);this.streamId=response.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(responseJson){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new Exports_js_1.Deferred;const response=JSON.parse(responseJson);response.webrtc&&(this.privWebRTCSDP=response.webrtc.connectionString)}onAudioChunkReceived(data){this.isSynthesizing&&(this.privAudioOutputStream.write(data),this.privBytesReceived+=data.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(data))}onTextBoundaryEvent(metadata){this.updateTextOffset(metadata.Data.text.Text,metadata.Type)}onVisemeMetadataReceived(metadata){void 0!==metadata.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=metadata.Data.AnimationChunk)}onSessionEnd(metadata){this.privAudioDuration=metadata.Data.Offset}constructSynthesisResult(){return __awaiter(this,void 0,void 0,(function*(){const audioBuffer=yield this.getAllReceivedAudioWithHeader();return new Exports_js_2.SpeechSynthesisResult(this.requestId,Exports_js_2.ResultReason.SynthesizingAudioCompleted,audioBuffer,void 0,this.extraProperties,this.audioDuration)}))}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const animation=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",animation}onEvent(event){Exports_js_1.Events.instance.onEvent(event)}static isXmlTag(text){return text.length>=2&&"<"===text[0]&&">"===text[text.length-1]}updateTextOffset(text,type){type===SynthesisAudioMetadata_js_1.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(text,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+text.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!SynthesisTurn.isXmlTag(text)&&this.updateTextOffset(text,type))):(this.privSentenceOffset=this.privRawText.indexOf(text,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+text.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!SynthesisTurn.isXmlTag(text)&&this.updateTextOffset(text,type)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return __awaiter(this,void 0,void 0,(function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}))}withinXmlTag(idx){return this.privRawText.indexOf("<",idx+1)>this.privRawText.indexOf(">",idx+1)}}exports.SynthesisTurn=SynthesisTurn},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SynthesizerConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesizerConfig=exports.SynthesisServiceType=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");var SynthesisServiceType;!function(SynthesisServiceType){SynthesisServiceType[SynthesisServiceType.Standard=0]="Standard",SynthesisServiceType[SynthesisServiceType.Custom=1]="Custom"}(SynthesisServiceType=exports.SynthesisServiceType||(exports.SynthesisServiceType={}));exports.SynthesizerConfig=class SynthesizerConfig{constructor(speechServiceConfig,parameters){this.privSynthesisServiceType=SynthesisServiceType.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=speechServiceConfig||new Exports_js_1.SpeechServiceConfig(new Exports_js_1.Context(null)),this.privParameters=parameters}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(value){this.privSynthesisServiceType=value}set synthesisVideoSection(value){this.privSpeechServiceConfig.Context.synthesis={video:value}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranscriberConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranscriberConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),QueryParameterNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js");class TranscriberConnectionFactory extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(config,authInfo,connectionId){let endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,void 0);const region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,"centralus"),hostDefault="wss://transcribe."+region+".cts.speech"+ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region)+this.multiaudioRelativeUri,host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,hostDefault),queryParams={};this.setQueryParams(queryParams,config,endpoint),endpoint||(endpoint=host);const headers={};void 0!==authInfo.token&&""!==authInfo.token&&(headers[authInfo.headerName]=authInfo.token),headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId,config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId)}setQueryParams(queryParams,config,endpointUrl){const endpointId=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,void 0),language=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);endpointId&&!(QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId in queryParams)&&(queryParams[QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId]=endpointId),language&&!(QueryParameterNames_js_1.QueryParameterNames.Language in queryParams)&&(queryParams[QueryParameterNames_js_1.QueryParameterNames.Language]=language);const wordLevelTimings="true"===config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),detailed=config.parameters.getProperty(Exports_js_3.OutputFormatPropertyName,Exports_js_2.OutputFormat[Exports_js_2.OutputFormat.Simple])!==Exports_js_2.OutputFormat[Exports_js_2.OutputFormat.Simple];(wordLevelTimings||detailed)&&(queryParams[QueryParameterNames_js_1.QueryParameterNames.Format]=Exports_js_2.OutputFormat[Exports_js_2.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(config,queryParams,endpointUrl)}}exports.TranscriberConnectionFactory=TranscriberConnectionFactory},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationConnectionConfig=void 0;const RestConfigBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/RestConfigBase.js");class ConversationConnectionConfig extends RestConfigBase_js_1.RestConfigBase{static get host(){return ConversationConnectionConfig.privHost}static get apiVersion(){return ConversationConnectionConfig.privApiVersion}static get clientAppId(){return ConversationConnectionConfig.privClientAppId}static get defaultLanguageCode(){return ConversationConnectionConfig.privDefaultLanguageCode}static get restPath(){return ConversationConnectionConfig.privRestPath}static get webSocketPath(){return ConversationConnectionConfig.privWebSocketPath}static get transcriptionEventKeys(){return ConversationConnectionConfig.privTranscriptionEventKeys}}exports.ConversationConnectionConfig=ConversationConnectionConfig,ConversationConnectionConfig.privHost="dev.microsofttranslator.com",ConversationConnectionConfig.privRestPath="/capito/room",ConversationConnectionConfig.privApiVersion="2.0",ConversationConnectionConfig.privDefaultLanguageCode="en-US",ConversationConnectionConfig.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",ConversationConnectionConfig.privWebSocketPath="/capito/translate",ConversationConnectionConfig.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),ConversationConnectionConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionConfig.js"),ConversationWebsocketMessageFormatter_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationWebsocketMessageFormatter.js");class ConversationConnectionFactory extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{create(config,authInfo,connectionId){const endpointHost=config.parameters.getProperty(Exports_js_3.PropertyId.ConversationTranslator_Host,ConversationConnectionConfig_js_1.ConversationConnectionConfig.host),correlationId=config.parameters.getProperty(Exports_js_3.PropertyId.ConversationTranslator_CorrelationId,Exports_js_2.createGuid()),endpoint=`wss://${endpointHost}${ConversationConnectionConfig_js_1.ConversationConnectionConfig.webSocketPath}`,token=config.parameters.getProperty(Exports_js_3.PropertyId.ConversationTranslator_Token,void 0);Contracts_js_1.Contracts.throwIfNullOrUndefined(token,"token");const queryParams={};queryParams[ConversationConnectionConfig_js_1.ConversationConnectionConfig.configParams.apiVersion]=ConversationConnectionConfig_js_1.ConversationConnectionConfig.apiVersion,queryParams[ConversationConnectionConfig_js_1.ConversationConnectionConfig.configParams.token]=token,queryParams[ConversationConnectionConfig_js_1.ConversationConnectionConfig.configParams.correlationId]=correlationId;const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Exports_js_1.WebsocketConnection(endpoint,queryParams,{},new ConversationWebsocketMessageFormatter_js_1.ConversationWebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId)}}exports.ConversationConnectionFactory=ConversationConnectionFactory},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionMessage.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationConnectionMessage=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");class ConversationConnectionMessage extends Exports_js_1.ConnectionMessage{constructor(messageType,body,headers,id){super(messageType,body,headers,id);const json=JSON.parse(this.textBody);void 0!==json.type&&(this.privConversationMessageType=json.type)}get conversationMessageType(){return this.privConversationMessageType}}exports.ConversationConnectionMessage=ConversationConnectionMessage},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationManager.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationManager=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConversationConnectionConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionConfig.js");exports.ConversationManager=class ConversationManager{constructor(){this.privRequestParams=ConversationConnectionConfig_js_1.ConversationConnectionConfig.configParams,this.privErrors=ConversationConnectionConfig_js_1.ConversationConnectionConfig.restErrors,this.privHost=ConversationConnectionConfig_js_1.ConversationConnectionConfig.host,this.privApiVersion=ConversationConnectionConfig_js_1.ConversationConnectionConfig.apiVersion,this.privRestPath=ConversationConnectionConfig_js_1.ConversationConnectionConfig.restPath,this.privRestAdapter=new Exports_js_1.RestMessageAdapter({})}createOrJoin(args,conversationCode,cb,err){try{Contracts_js_1.Contracts.throwIfNullOrUndefined(args,"args");const languageCode=args.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,ConversationConnectionConfig_js_1.ConversationConnectionConfig.defaultLanguageCode),nickname=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_Name,"conversation_host"),endpointHost=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_Host,this.privHost),correlationId=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_CorrelationId),subscriptionKey=args.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key),subscriptionRegion=args.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region),authToken=args.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token);Contracts_js_1.Contracts.throwIfNullOrWhitespace(languageCode,"languageCode"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,"nickname"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(endpointHost,"endpointHost");const queryParams={};queryParams[this.privRequestParams.apiVersion]=this.privApiVersion,queryParams[this.privRequestParams.languageCode]=languageCode,queryParams[this.privRequestParams.nickname]=nickname;const headers={};correlationId&&(headers[this.privRequestParams.correlationId]=correlationId),headers[this.privRequestParams.clientAppId]=ConversationConnectionConfig_js_1.ConversationConnectionConfig.clientAppId,void 0!==conversationCode?queryParams[this.privRequestParams.roomId]=conversationCode:(Contracts_js_1.Contracts.throwIfNullOrUndefined(subscriptionRegion,this.privErrors.authInvalidSubscriptionRegion),headers[this.privRequestParams.subscriptionRegion]=subscriptionRegion,subscriptionKey?headers[this.privRequestParams.subscriptionKey]=subscriptionKey:authToken?headers[this.privRequestParams.authorization]=`Bearer ${authToken}`:Contracts_js_1.Contracts.throwIfNullOrUndefined(subscriptionKey,this.privErrors.authInvalidSubscriptionKey));const config={};config.headers=headers,this.privRestAdapter.options=config;const endpoint=`https://${endpointHost}${this.privRestPath}`;this.privRestAdapter.request(Exports_js_1.RestRequestType.Post,endpoint,queryParams,null).then((response=>{const requestId=Exports_js_1.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,response.headers);if(!response.ok){if(err){let errMessageRaw,errorMessage=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",response.status.toString());try{errMessageRaw=JSON.parse(response.data),errorMessage+=` [${errMessageRaw.error.code}: ${errMessageRaw.error.message}]`}catch(e){errorMessage+=` [${response.data}]`}requestId&&(errorMessage+=` ${requestId}`),err(errorMessage)}return}const conversation=JSON.parse(response.data);if(conversation&&(conversation.requestId=requestId),cb){try{cb(conversation)}catch(e){err&&err(e)}cb=void 0}})).catch((()=>{}))}catch(error){if(err)if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error)}}leave(args,sessionToken){return new Promise(((resolve,reject)=>{try{Contracts_js_1.Contracts.throwIfNullOrUndefined(args,this.privErrors.invalidArgs.replace("{arg}","config")),Contracts_js_1.Contracts.throwIfNullOrWhitespace(sessionToken,this.privErrors.invalidArgs.replace("{arg}","token"));const endpointHost=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_Host,this.privHost),correlationId=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_CorrelationId),queryParams={};queryParams[this.privRequestParams.apiVersion]=this.privApiVersion,queryParams[this.privRequestParams.sessionToken]=sessionToken;const headers={};correlationId&&(headers[this.privRequestParams.correlationId]=correlationId);const config={};config.headers=headers,this.privRestAdapter.options=config;const endpoint=`https://${endpointHost}${this.privRestPath}`;this.privRestAdapter.request(Exports_js_1.RestRequestType.Delete,endpoint,queryParams,null).then((response=>{response.ok,resolve()})).catch((()=>{}))}catch(error){if(error instanceof Error){const typedError=error;reject(typedError.name+": "+typedError.message)}else reject(error)}}))}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationRequestSession.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationRequestSession=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");exports.ConversationRequestSession=class ConversationRequestSession{constructor(sessionId){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=sessionId,this.privRequestId=Exports_js_1.createNoDashGuid(),this.privRequestCompletionDeferral=new Exports_js_1.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(authFetchEventId,connectionId){this.privSessionId=connectionId}onAuthCompleted(isError){isError&&this.onComplete()}onConnectionEstablishCompleted(statusCode){200!==statusCode&&403===statusCode&&this.onComplete()}onServiceTurnEndResponse(continuousRecognition){continuousRecognition?this.privRequestId=Exports_js_1.createNoDashGuid():this.onComplete()}dispose(){return __awaiter(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const detachable of this.privDetachables)yield detachable.detach()}}))}onComplete(){}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationServiceAdapter.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationServiceAdapter=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),ConversationConnectionMessage_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionMessage.js"),ConversationRequestSession_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationRequestSession.js"),ConversationTranslatorEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorEventArgs.js"),ConversationTranslatorInterfaces_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorInterfaces.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ServiceMessages/Exports.js");class ConversationServiceAdapter extends Exports_js_3.ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,conversationServiceConnector){super(authentication,connectionFactory,audioSource,recognizerConfig,conversationServiceConnector),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=conversationServiceConnector,this.privConversationAuthentication=authentication,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=connection=>this.conversationConnectImpl(connection),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new ConversationRequestSession_js_1.ConversationRequestSession(Exports_js_1.createNoDashGuid()),this.privConversationConnectionFactory=connectionFactory,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(reason){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){const connection=yield this.privConnectionConfigPromise;yield connection.dispose(reason)}yield _super.dispose.call(this,reason)}))}sendMessage(message){return __awaiter(this,void 0,void 0,(function*(){return(yield this.fetchConnection()).send(new ConversationConnectionMessage_js_1.ConversationConnectionMessage(Exports_js_1.MessageType.Text,message))}))}sendMessageAsync(message){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.fetchConnection();yield connection.send(new ConversationConnectionMessage_js_1.ConversationConnectionMessage(Exports_js_1.MessageType.Text,message))}))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,Exports_js_2.CancellationReason.Error,Exports_js_2.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return __awaiter(this,void 0,void 0,(function*(){return!0}))}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){this.terminateMessageLoop=!0;const cancelEvent=new Exports_js_2.ConversationTranslationCanceledEventArgs(cancellationReason,error,errorCode,void 0,sessionId);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,cancelEvent)}catch(_a){}}conversationConnectImpl(connection){return __awaiter(this,void 0,void 0,(function*(){return this.privConnectionLoop=this.startMessageLoop(),connection}))}receiveConversationMessageOverride(){return __awaiter(this,void 0,void 0,(function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const communicationCustodian=new Exports_js_1.Deferred;try{const connection=yield this.fetchConnection(),message=yield connection.read();if(this.isDisposed()||this.terminateMessageLoop)return communicationCustodian.resolve(),Promise.resolve();if(!message)return this.receiveConversationMessageOverride();const sessionId=this.privConversationRequestSession.sessionId,conversationMessageType=message.conversationMessageType.toLowerCase();let sendFinal=!1;try{switch(conversationMessageType){case"info":case"participant_command":case"command":const commandPayload=Exports_js_4.CommandResponsePayload.fromJSON(message.textBody);switch(commandPayload.command.toLowerCase()){case"participantlist":const participantsPayload=Exports_js_4.ParticipantsListPayloadResponse.fromJSON(message.textBody),participantsResult=participantsPayload.participants.map((p=>({avatar:p.avatar,displayName:p.nickname,id:p.participantId,isHost:p.ishost,isMuted:p.ismuted,isUsingTts:p.usetts,preferredLanguage:p.locale})));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantsListEventArgs(participantsPayload.roomid,participantsPayload.token,participantsPayload.translateTo,participantsPayload.profanityFilter,participantsPayload.roomProfanityFilter,participantsPayload.roomLocked,participantsPayload.muteAll,participantsResult,sessionId));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages,commandPayload.value,sessionId));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.setProfanityFiltering,commandPayload.value,sessionId));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.setMute,commandPayload.value,sessionId));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.MuteAllEventArgs(commandPayload.value,sessionId));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new Exports_js_2.ConversationExpirationEventArgs(commandPayload.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.setUseTTS,commandPayload.value,sessionId));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.LockRoomEventArgs(commandPayload.value,sessionId));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.changeNickname,commandPayload.value,sessionId));break;case"joinsession":const joinParticipantPayload=Exports_js_4.ParticipantPayloadResponse.fromJSON(message.textBody),joiningParticipant={avatar:joinParticipantPayload.avatar,displayName:joinParticipantPayload.nickname,id:joinParticipantPayload.participantId,isHost:joinParticipantPayload.ishost,isMuted:joinParticipantPayload.ismuted,isUsingTts:joinParticipantPayload.usetts,preferredLanguage:joinParticipantPayload.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantEventArgs(joiningParticipant,sessionId));break;case"leavesession":const leavingParticipant={id:commandPayload.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantEventArgs(leavingParticipant,sessionId));break;case"disconnectsession":commandPayload.participantId;break;case"token":const token=new Exports_js_3.CognitiveTokenAuthentication((()=>{const authorizationToken=commandPayload.token;return Promise.resolve(authorizationToken)}),(()=>{const authorizationToken=commandPayload.token;return Promise.resolve(authorizationToken)}));this.authentication=token,this.privConversationServiceConnector.onToken(token)}break;case"partial":case"final":const speechPayload=Exports_js_4.SpeechResponsePayload.fromJSON(message.textBody),conversationResultReason="final"===conversationMessageType?Exports_js_2.ResultReason.TranslatedParticipantSpeech:Exports_js_2.ResultReason.TranslatingParticipantSpeech,speechResult=new Exports_js_2.ConversationTranslationResult(speechPayload.participantId,this.getTranslations(speechPayload.translations),speechPayload.language,speechPayload.id,conversationResultReason,speechPayload.recognition,void 0,void 0,message.textBody,void 0);speechPayload.isFinal?((void 0!==speechResult.text&&speechResult.text.length>0||speechPayload.id===this.privLastPartialUtteranceId)&&(sendFinal=!0),sendFinal&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ConversationReceivedTranslationEventArgs(ConversationTranslatorInterfaces_js_1.ConversationTranslatorMessageTypes.final,speechResult,sessionId))):void 0!==speechResult.text&&(this.privLastPartialUtteranceId=speechPayload.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ConversationReceivedTranslationEventArgs(ConversationTranslatorInterfaces_js_1.ConversationTranslatorMessageTypes.partial,speechResult,sessionId)));break;case"translated_message":const textPayload=Exports_js_4.TextResponsePayload.fromJSON(message.textBody),textResult=new Exports_js_2.ConversationTranslationResult(textPayload.participantId,this.getTranslations(textPayload.translations),textPayload.language,void 0,void 0,textPayload.originalText,void 0,void 0,void 0,message.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ConversationReceivedTranslationEventArgs(ConversationTranslatorInterfaces_js_1.ConversationTranslatorMessageTypes.instantMessage,textResult,sessionId))}}catch(e){}return this.receiveConversationMessageOverride()}catch(e){this.terminateMessageLoop=!0}return communicationCustodian.promise}))}startMessageLoop(){return __awaiter(this,void 0,void 0,(function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const messageRetrievalPromise=this.receiveConversationMessageOverride();try{return yield messageRetrievalPromise}catch(error){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",Exports_js_2.CancellationReason.Error,Exports_js_2.CancellationErrorCode.RuntimeError,error),null}}))}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then((connection=>connection.state()===Exports_js_1.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()))):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then((connection=>connection)),this.privConnectionConfigPromise)}getTranslations(serviceResultTranslations){let translations;if(void 0!==serviceResultTranslations){translations=new Exports_js_2.Translations;for(const translation of serviceResultTranslations)translations.set(translation.lang,translation.translation)}return translations}}exports.ConversationServiceAdapter=ConversationServiceAdapter},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranslatorConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),StringUtils_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/StringUtils.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),QueryParameterNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class ConversationTranslatorConnectionFactory extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{constructor(convGetter){super(),Contracts_js_1.Contracts.throwIfNullOrUndefined(convGetter,"convGetter"),this.privConvGetter=convGetter}create(config,authInfo,connectionId){const isVirtMicArrayEndpoint="TRUE"===config.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),convInfo=this.privConvGetter().room,region=convInfo.cognitiveSpeechRegion||config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,""),replacementValues={hostSuffix:ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region),path:ConversationTranslatorConnectionFactory.CTS_VIRT_MIC_PATH,region:encodeURIComponent(region)};replacementValues[QueryParameterNames_js_1.QueryParameterNames.Language]=encodeURIComponent(config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,"")),replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsMeetingId]=encodeURIComponent(convInfo.roomId),replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsDeviceId]=encodeURIComponent(convInfo.participantId),replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsIsParticipant]=convInfo.isHost?"":"&"+QueryParameterNames_js_1.QueryParameterNames.CtsIsParticipant;let endpointUrl="";const queryParams={},headers={};if(isVirtMicArrayEndpoint){if(endpointUrl=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint),!endpointUrl){endpointUrl="wss://"+config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"}endpointUrl=StringUtils_js_1.StringUtils.formatString(endpointUrl,replacementValues);const parsedUrl=new URL(endpointUrl);parsedUrl.searchParams.forEach(((val,key)=>{queryParams[key]=val}));(new Exports_js_3.TranscriberConnectionFactory).setQueryParams(queryParams,config,endpointUrl),queryParams[QueryParameterNames_js_1.QueryParameterNames.CtsMeetingId]=replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsMeetingId],queryParams[QueryParameterNames_js_1.QueryParameterNames.CtsDeviceId]=replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsDeviceId],convInfo.isHost||(queryParams[QueryParameterNames_js_1.QueryParameterNames.CtsIsParticipant]=""),QueryParameterNames_js_1.QueryParameterNames.Format in queryParams||(queryParams[QueryParameterNames_js_1.QueryParameterNames.Format]="simple"),parsedUrl.searchParams.forEach(((val,key)=>{parsedUrl.searchParams.set(key,queryParams[key]),delete queryParams[key]})),endpointUrl=parsedUrl.toString()}else{const connFactory=new Exports_js_3.TranslationConnectionFactory;endpointUrl=connFactory.getEndpointUrl(config,!0),endpointUrl=StringUtils_js_1.StringUtils.formatString(endpointUrl,replacementValues),connFactory.setQueryParams(queryParams,config,endpointUrl)}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId,headers[Exports_js_1.RestConfigBase.configParams.token]=convInfo.token,authInfo.token&&(headers[authInfo.headerName]=authInfo.token);const enableCompression="TRUE"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return new Exports_js_1.WebsocketConnection(endpointUrl,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId)}}exports.ConversationTranslatorConnectionFactory=ConversationTranslatorConnectionFactory,ConversationTranslatorConnectionFactory.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationReceivedTranslationEventArgs=exports.ParticipantsListEventArgs=exports.ParticipantAttributeEventArgs=exports.ParticipantEventArgs=exports.LockRoomEventArgs=exports.MuteAllEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class MuteAllEventArgs extends Exports_js_1.SessionEventArgs{constructor(isMuted,sessionId){super(sessionId),this.privIsMuted=isMuted}get isMuted(){return this.privIsMuted}}exports.MuteAllEventArgs=MuteAllEventArgs;class LockRoomEventArgs extends Exports_js_1.SessionEventArgs{constructor(isLocked,sessionId){super(sessionId),this.privIsLocked=isLocked}get isMuted(){return this.privIsLocked}}exports.LockRoomEventArgs=LockRoomEventArgs;class ParticipantEventArgs extends Exports_js_1.SessionEventArgs{constructor(participant,sessionId){super(sessionId),this.privParticipant=participant}get participant(){return this.privParticipant}}exports.ParticipantEventArgs=ParticipantEventArgs;class ParticipantAttributeEventArgs extends Exports_js_1.SessionEventArgs{constructor(participantId,key,value,sessionId){super(sessionId),this.privKey=key,this.privValue=value,this.privParticipantId=participantId}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}exports.ParticipantAttributeEventArgs=ParticipantAttributeEventArgs;class ParticipantsListEventArgs extends Exports_js_1.SessionEventArgs{constructor(conversationId,token,translateTo,profanityFilter,roomProfanityFilter,isRoomLocked,isMuteAll,participants,sessionId){super(sessionId),this.privRoomId=conversationId,this.privSessionToken=token,this.privTranslateTo=translateTo,this.privProfanityFilter=profanityFilter,this.privRoomProfanityFilter=roomProfanityFilter,this.privIsRoomLocked=isRoomLocked,this.privIsRoomLocked=isMuteAll,this.privParticipants=participants}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}exports.ParticipantsListEventArgs=ParticipantsListEventArgs;exports.ConversationReceivedTranslationEventArgs=class ConversationReceivedTranslationEventArgs{constructor(command,payload,sessionId){this.privPayload=payload,this.privCommand=command,this.privSessionId=sessionId}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorInterfaces.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranslatorCommandTypes=exports.ConversationTranslatorMessageTypes=exports.InternalParticipants=void 0;exports.InternalParticipants=class InternalParticipants{constructor(participants=[],meId){this.participants=participants,this.meId=meId}addOrUpdateParticipant(value){if(void 0===value)return;const exists=this.getParticipantIndex(value.id);return exists>-1?this.participants.splice(exists,1,value):this.participants.push(value),this.getParticipant(value.id)}getParticipantIndex(id){return this.participants.findIndex((p=>p.id===id))}getParticipant(id){return this.participants.find((p=>p.id===id))}deleteParticipant(id){this.participants=this.participants.filter((p=>p.id!==id))}get host(){return this.participants.find((p=>!0===p.isHost))}get me(){return this.getParticipant(this.meId)}},exports.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},exports.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranslatorRecognizer=exports.ConversationRecognizerFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConversationConnectionFactory_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionFactory.js"),ConversationServiceAdapter_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationServiceAdapter.js");exports.ConversationRecognizerFactory=class ConversationRecognizerFactory{static fromConfig(conversation,speechConfig,audioConfig){return new ConversationTranslatorRecognizer(conversation,speechConfig,audioConfig)}};class ConversationTranslatorRecognizer extends Exports_js_3.Recognizer{constructor(conversation,speechConfig,audioConfig){const serviceConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(serviceConfigImpl,"speechConfig");const conversationImpl=conversation;Contracts_js_1.Contracts.throwIfNull(conversationImpl,"conversationImpl"),super(audioConfig,serviceConfigImpl.properties,new ConversationConnectionFactory_js_1.ConversationConnectionFactory),this.privConversation=conversationImpl,this.privIsDisposed=!1,this.privProperties=serviceConfigImpl.properties.clone(),this.privConnection=Exports_js_3.Connection.fromRecognizer(this);"on"===this.privProperties.getProperty(Exports_js_3.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!=typeof Blob&&"undefined"!=typeof Worker?(this.privSetTimeout=Exports_js_2.Timeout.setTimeout,this.privClearTimeout=Exports_js_2.Timeout.clearTimeout):"undefined"!=typeof window?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(cb){this.privConnection.connected=cb}set disconnected(cb){this.privConnection.disconnected=cb}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(token,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.privReco.conversationTranslatorToken=token,this.resetConversationTimeout(),this.privReco.connectAsync(cb,err)}catch(error){if(err)if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error)}}disconnect(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then((()=>{cb&&cb()}),(error=>{err&&err(error)}))}catch(error){if(err)if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error);this.dispose(!0).catch((reason=>{Exports_js_2.Events.instance.onEvent(new Exports_js_2.BackgroundEvent(reason))}))}}sendRequest(command,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(command,cb,err)}catch(error){if(err)if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error);this.dispose(!0).catch((reason=>{Exports_js_2.Events.instance.onEvent(new Exports_js_2.BackgroundEvent(reason))}))}}onToken(token){this.privConversation.onToken(token)}close(){return __awaiter(this,void 0,void 0,(function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))}))}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privIsDisposed||disposing&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield _super.dispose.call(this,disposing))}))}createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties)}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const audioSource=audioConfig;return new ConversationServiceAdapter_js_1.ConversationServiceAdapter(authentication,connectionFactory,audioSource,recognizerConfig,this)}sendMessage(msg,cb,err){((promise,cb,err)=>{void 0!==promise?promise.then((()=>{try{cb&&cb()}catch(e){err&&err(`'Unhandled error on promise callback: ${e}'`)}}),(reason=>{try{err&&err(reason)}catch(error){}})):err&&err("Null promise")})(this.privReco.sendMessageAsync(msg),cb,err),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout((()=>{this.sendRequest(this.privConversation.getKeepAlive())}),6e4)}}exports.ConversationTranslatorRecognizer=ConversationTranslatorRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationWebsocketMessageFormatter.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationWebsocketMessageFormatter=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),ConversationConnectionMessage_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionMessage.js");exports.ConversationWebsocketMessageFormatter=class ConversationWebsocketMessageFormatter{toConnectionMessage(message){const deferral=new Exports_js_1.Deferred;try{if(message.messageType===Exports_js_1.MessageType.Text){const incomingMessage=new ConversationConnectionMessage_js_1.ConversationConnectionMessage(message.messageType,message.textContent,{},message.id);deferral.resolve(incomingMessage)}else message.messageType===Exports_js_1.MessageType.Binary&&deferral.resolve(new ConversationConnectionMessage_js_1.ConversationConnectionMessage(message.messageType,message.binaryContent,void 0,message.id))}catch(e){deferral.reject(`Error formatting the message. Error: ${e}`)}return deferral.promise}fromConnectionMessage(message){const deferral=new Exports_js_1.Deferred;try{if(message.messageType===Exports_js_1.MessageType.Text){const payload=`${message.textBody?message.textBody:""}`;deferral.resolve(new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Text,payload,message.id))}}catch(e){deferral.reject(`Error formatting the message. ${e}`)}return deferral.promise}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/Exports.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ConversationManager_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationManager.js");Object.defineProperty(exports,"ConversationManager",{enumerable:!0,get:function(){return ConversationManager_js_1.ConversationManager}});var ConversationConnectionConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationConnectionConfig.js");Object.defineProperty(exports,"ConversationConnectionConfig",{enumerable:!0,get:function(){return ConversationConnectionConfig_js_1.ConversationConnectionConfig}});var ConversationTranslatorRecognizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorRecognizer.js");Object.defineProperty(exports,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return ConversationTranslatorRecognizer_js_1.ConversationRecognizerFactory}});var TranscriberRecognizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/TranscriberRecognizer.js");Object.defineProperty(exports,"TranscriberRecognizer",{enumerable:!0,get:function(){return TranscriberRecognizer_js_1.TranscriberRecognizer}});var ConversationTranslatorEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorEventArgs.js");Object.defineProperty(exports,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return ConversationTranslatorEventArgs_js_1.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(exports,"LockRoomEventArgs",{enumerable:!0,get:function(){return ConversationTranslatorEventArgs_js_1.LockRoomEventArgs}}),Object.defineProperty(exports,"MuteAllEventArgs",{enumerable:!0,get:function(){return ConversationTranslatorEventArgs_js_1.MuteAllEventArgs}}),Object.defineProperty(exports,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs}}),Object.defineProperty(exports,"ParticipantEventArgs",{enumerable:!0,get:function(){return ConversationTranslatorEventArgs_js_1.ParticipantEventArgs}}),Object.defineProperty(exports,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return ConversationTranslatorEventArgs_js_1.ParticipantsListEventArgs}});var ConversationTranslatorInterfaces_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorInterfaces.js");Object.defineProperty(exports,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes}}),Object.defineProperty(exports,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return ConversationTranslatorInterfaces_js_1.ConversationTranslatorMessageTypes}}),Object.defineProperty(exports,"InternalParticipants",{enumerable:!0,get:function(){return ConversationTranslatorInterfaces_js_1.InternalParticipants}})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ServiceMessages/CommandResponsePayload.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommandResponsePayload=void 0;class CommandResponsePayload{constructor(json){this.privCommandResponse=(json=>JSON.parse(json))(json)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(json){return new CommandResponsePayload(json)}}exports.CommandResponsePayload=CommandResponsePayload},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ServiceMessages/Exports.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CommandResponsePayload_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ServiceMessages/CommandResponsePayload.js");Object.defineProperty(exports,"CommandResponsePayload",{enumerable:!0,get:function(){return CommandResponsePayload_js_1.CommandResponsePayload}});var ParticipantResponsePayload_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ServiceMessages/ParticipantResponsePayload.js");Object.defineProperty(exports,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return ParticipantResponsePayload_js_1.ParticipantsListPayloadResponse}}),Object.defineProperty(exports,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return ParticipantResponsePayload_js_1.ParticipantPayloadResponse}});var TranslationResponsePayload_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ServiceMessages/TranslationResponsePayload.js");Object.defineProperty(exports,"SpeechResponsePayload",{enumerable:!0,get:function(){return TranslationResponsePayload_js_1.SpeechResponsePayload}}),Object.defineProperty(exports,"TextResponsePayload",{enumerable:!0,get:function(){return TranslationResponsePayload_js_1.TextResponsePayload}})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ServiceMessages/ParticipantResponsePayload.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParticipantPayloadResponse=exports.ParticipantsListPayloadResponse=void 0;class ParticipantsListPayloadResponse{constructor(json){this.privParticipantsPayloadResponse=(json=>JSON.parse(json))(json)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(json){return new ParticipantsListPayloadResponse(json)}}exports.ParticipantsListPayloadResponse=ParticipantsListPayloadResponse;class ParticipantPayloadResponse{constructor(json){this.privParticipantPayloadResponse=(json=>JSON.parse(json))(json)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(json){return new ParticipantPayloadResponse(json)}}exports.ParticipantPayloadResponse=ParticipantPayloadResponse},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ServiceMessages/TranslationResponsePayload.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextResponsePayload=exports.SpeechResponsePayload=void 0;class SpeechResponsePayload{constructor(json){this.privSpeechResponse=(json=>JSON.parse(json))(json)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(json){return new SpeechResponsePayload(json)}}exports.SpeechResponsePayload=SpeechResponsePayload;class TextResponsePayload{constructor(json){this.privTextResponse=(json=>JSON.parse(json))(json)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(json){return new TextResponsePayload(json)}}exports.TextResponsePayload=TextResponsePayload},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/TranscriberRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranscriberRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class TranscriberRecognizer extends Exports_js_2.Recognizer{constructor(speechTranslationConfig,audioConfig){const speechTranslationConfigImpl=speechTranslationConfig;Contracts_js_1.Contracts.throwIfNull(speechTranslationConfigImpl,"speechTranslationConfig");const audioConfigImpl=audioConfig;Contracts_js_1.Contracts.throwIfNull(audioConfigImpl,"audioConfigImpl"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(speechTranslationConfigImpl.speechRecognitionLanguage,Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage]),super(audioConfig,speechTranslationConfigImpl.properties,new Exports_js_3.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,token)}set conversation(c){Contracts_js_1.Contracts.throwIfNullOrUndefined(c,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=c}getConversationInfo(){return Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(m){Contracts_js_1.Contracts.throwIfNullOrUndefined(m,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=m}getMeetingInfo(){return Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(cb,err){Exports_js_1.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_3.RecognitionMode.Conversation),cb,err)}stopContinuousRecognitionAsync(cb,err){Exports_js_1.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err)}close(){return __awaiter(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(yield this.dispose(!0))}))}pushConversationEvent(conversationInfo,command){return __awaiter(this,void 0,void 0,(function*(){const reco=this.privReco;Contracts_js_1.Contracts.throwIfNullOrUndefined(reco,"serviceRecognizer"),yield reco.sendSpeechEventAsync(conversationInfo,command)}))}pushMeetingEvent(meetingInfo,command){return __awaiter(this,void 0,void 0,(function*(){const reco=this.privReco;Contracts_js_1.Contracts.throwIfNullOrUndefined(reco,"serviceRecognizer"),yield reco.sendMeetingSpeechEventAsync(meetingInfo,command)}))}enforceAudioGating(){return __awaiter(this,void 0,void 0,(function*(){const audioConfigImpl=this.audioConfig,channels=(yield audioConfigImpl.format).channels;if(1===channels){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==channels)throw new Error(`Unsupported audio configuration: Detected ${channels}-channel audio`)}))}connectMeetingCallbacks(transcriber){this.isMeetingRecognizer=!0,this.canceled=(s,e)=>{transcriber.canceled&&transcriber.canceled(transcriber,e)},this.recognizing=(s,e)=>{transcriber.transcribing&&transcriber.transcribing(transcriber,e)},this.recognized=(s,e)=>{transcriber.transcribed&&transcriber.transcribed(transcriber,e)},this.sessionStarted=(s,e)=>{transcriber.sessionStarted&&transcriber.sessionStarted(transcriber,e)},this.sessionStopped=(s,e)=>{transcriber.sessionStopped&&transcriber.sessionStopped(transcriber,e)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(disposing&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield _super.dispose.call(this,disposing))}))}createRecognizerConfig(speechConfig){return new Exports_js_3.RecognizerConfig(speechConfig,this.properties)}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const configImpl=audioConfig;return new Exports_js_3.TranscriptionServiceRecognizer(authentication,connectionFactory,configImpl,recognizerConfig,this)}}exports.TranscriberRecognizer=TranscriberRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranscriptionServiceRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranscriptionServiceRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),SpeechConnectionMessage_Internal_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js");class TranscriptionServiceRecognizer extends Exports_js_3.ConversationServiceRecognizer{constructor(authentication,connectionFactory,audioSource,recognizerConfig,transcriber){super(authentication,connectionFactory,audioSource,recognizerConfig,transcriber),this.privTranscriberRecognizer=transcriber,this.sendPrePayloadJSONOverride=connection=>this.sendTranscriptionStartJSON(connection),"true"===this.privRecognizerConfig.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(info,command){return __awaiter(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing){const connection=yield this.fetchConnection();yield this.sendSpeechEvent(connection,this.createSpeechEventPayload(info,command))}}))}sendMeetingSpeechEventAsync(info,command){return __awaiter(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing){const connection=yield this.fetchConnection();yield this.sendSpeechEvent(connection,this.createMeetingSpeechEventPayload(info,command))}}))}processTypeSpecificMessages(connectionMessage){return this.processSpeechMessages(connectionMessage)}handleRecognizedCallback(result,offset,sessionId){try{const event=new Exports_js_2.SpeechRecognitionEventArgs(result,offset,sessionId);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,event),this.privSuccessCallback){try{this.privSuccessCallback(result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch(error){}}handleRecognizingCallback(result,duration,sessionId){try{const ev=new Exports_js_2.SpeechRecognitionEventArgs(result,duration,sessionId);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,ev)}catch(error){}}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){const properties=new Exports_js_2.PropertyCollection;if(properties.setProperty(Exports_js_3.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[errorCode]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const cancelEvent=new Exports_js_2.MeetingTranscriptionCanceledEventArgs(cancellationReason,error,errorCode,void 0,sessionId);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,cancelEvent)}catch(_a){}}}else if(this.privTranscriberRecognizer.canceled){const cancelEvent=new Exports_js_2.ConversationTranscriptionCanceledEventArgs(cancellationReason,error,errorCode,void 0,sessionId);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,cancelEvent)}catch(_b){}}if(this.privSuccessCallback){const result=new Exports_js_2.SpeechRecognitionResult(requestId,Exports_js_2.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,error,void 0,properties);try{this.privSuccessCallback(result),this.privSuccessCallback=void 0}catch(_c){}}}sendTranscriptionStartJSON(connection){return __awaiter(this,void 0,void 0,(function*(){if(yield this.sendSpeechContext(connection,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const info=this.privTranscriberRecognizer.getMeetingInfo(),payload=this.createMeetingSpeechEventPayload(info,"start");yield this.sendSpeechEvent(connection,payload)}else{const info=this.privTranscriberRecognizer.getConversationInfo(),payload=this.createSpeechEventPayload(info,"start");yield this.sendSpeechEvent(connection,payload)}yield this.sendWaveHeader(connection)}))}sendSpeechEvent(connection,payload){const speechEventJson=JSON.stringify(payload);if(speechEventJson)return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",speechEventJson))}createSpeechEventPayload(info,command){const eventDict={id:"meeting",name:command,meeting:info.conversationProperties};return eventDict.meeting.id=info.id,eventDict.meeting.attendees=info.participants,eventDict}createMeetingSpeechEventPayload(info,command){const eventDict={id:"meeting",name:command,meeting:info.meetingProperties};return eventDict.meeting.id=info.id,eventDict.meeting.attendees=info.participants,eventDict}}exports.TranscriptionServiceRecognizer=TranscriptionServiceRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationConnectionFactory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationConnectionFactory=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),StringUtils_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/StringUtils.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),ConnectionFactoryBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ConnectionFactoryBase.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),QueryParameterNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/QueryParameterNames.js");class TranslationConnectionFactory extends ConnectionFactoryBase_js_1.ConnectionFactoryBase{create(config,authInfo,connectionId){const endpoint=this.getEndpointUrl(config),queryParams={};void 0!==config.autoDetectSourceLanguages&&(queryParams[QueryParameterNames_js_1.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(queryParams,config,endpoint);const headers={};void 0!==authInfo.token&&""!==authInfo.token&&(headers[authInfo.headerName]=authInfo.token),headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId,config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);const enableCompression="true"===config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter,Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId)}getEndpointUrl(config,returnRegionPlaceholder){const region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region),hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);let endpointUrl=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!endpointUrl)if(void 0!==config.autoDetectSourceLanguages){endpointUrl=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+hostSuffix)+"/speech/universal/v2"}else{endpointUrl=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+hostSuffix)+"/speech/translation/cognitiveservices/v1"}return!0===returnRegionPlaceholder?endpointUrl:StringUtils_js_1.StringUtils.formatString(endpointUrl,{region})}setQueryParams(queryParams,config,endpointUrl){queryParams.from=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage),queryParams.to=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationToLanguages),queryParams.scenario=config.recognitionMode===Exports_js_3.RecognitionMode.Interactive?"interactive":config.recognitionMode===Exports_js_3.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(config,queryParams,endpointUrl),this.setUrlParameter(Exports_js_2.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,QueryParameterNames_js_1.QueryParameterNames.StableTranslation,config,queryParams,endpointUrl);const translationVoice=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==translationVoice&&(queryParams.voice=translationVoice,queryParams.features="texttospeech")}}exports.TranslationConnectionFactory=TranslationConnectionFactory},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationServiceRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationServiceRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js");class TranslationServiceRecognizer extends Exports_js_3.ConversationServiceRecognizer{constructor(authentication,connectionFactory,audioSource,recognizerConfig,translationRecognizer){super(authentication,connectionFactory,audioSource,recognizerConfig,translationRecognizer),this.privTranslationRecognizer=translationRecognizer,this.connectionEvents.attach((connectionEvent=>{"ConnectionEstablishedEvent"===connectionEvent.name&&this.privTranslationRecognizer.onConnection()}))}processTypeSpecificMessages(connectionMessage){return __awaiter(this,void 0,void 0,(function*(){const resultProps=new Exports_js_2.PropertyCollection;let processed=yield this.processSpeechMessages(connectionMessage);if(processed)return!0;const handleTranslationPhrase=translatedPhrase=>__awaiter(this,void 0,void 0,(function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+translatedPhrase.Offset+translatedPhrase.Duration),translatedPhrase.RecognitionStatus===Exports_js_3.RecognitionStatus.Success){const result=this.fireEventForResult(translatedPhrase,resultProps);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,result)}catch(error){}if(this.privSuccessCallback){try{this.privSuccessCallback(result.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const reason=Exports_js_3.EnumTranslation.implTranslateRecognitionResult(translatedPhrase.RecognitionStatus),result=new Exports_js_2.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,reason,translatedPhrase.Text,translatedPhrase.Duration,this.privRequestSession.currentTurnAudioOffset+translatedPhrase.Offset,translatedPhrase.Language,translatedPhrase.Confidence,void 0,connectionMessage.textBody,resultProps);if(reason===Exports_js_2.ResultReason.Canceled){const cancelReason=Exports_js_3.EnumTranslation.implTranslateCancelResult(translatedPhrase.RecognitionStatus),cancellationErrorCode=Exports_js_3.EnumTranslation.implTranslateCancelErrorCode(translatedPhrase.RecognitionStatus);yield this.cancelRecognitionLocal(cancelReason,cancellationErrorCode,Exports_js_3.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode))}else{if(!this.privRequestSession.isSpeechEnded||reason!==Exports_js_2.ResultReason.NoMatch||translatedPhrase.RecognitionStatus===Exports_js_3.RecognitionStatus.InitialSilenceTimeout){const ev=new Exports_js_2.TranslationRecognitionEventArgs(result,result.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,ev)}catch(error){}}if(this.privSuccessCallback){try{this.privSuccessCallback(result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}processed=!0}})),handleTranslationHypothesis=(hypothesis,resultProperties)=>{const result=this.fireEventForResult(hypothesis,resultProperties);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+result.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,result)}catch(error){}processed=!0};switch(connectionMessage.messageType===Exports_js_1.MessageType.Text&&resultProps.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody),connectionMessage.path.toLowerCase()){case"translation.hypothesis":handleTranslationHypothesis(Exports_js_3.TranslationHypothesis.fromJSON(connectionMessage.textBody),resultProps);break;case"translation.response":const phrase=JSON.parse(connectionMessage.textBody);if(phrase.SpeechPhrase)yield handleTranslationPhrase(Exports_js_3.TranslationPhrase.fromTranslationResponse(phrase));else{const hypothesis=JSON.parse(connectionMessage.textBody);hypothesis.SpeechHypothesis&&handleTranslationHypothesis(Exports_js_3.TranslationHypothesis.fromTranslationResponse(hypothesis),resultProps)}break;case"translation.phrase":yield handleTranslationPhrase(Exports_js_3.TranslationPhrase.fromJSON(connectionMessage.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(connectionMessage.binaryBody,this.privRequestSession.sessionId),processed=!0;break;case"audio.end":case"translation.synthesis.end":const synthEnd=Exports_js_3.TranslationSynthesisEnd.fromJSON(connectionMessage.textBody);switch(synthEnd.SynthesisStatus){case Exports_js_3.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const result=new Exports_js_2.TranslationSynthesisResult(Exports_js_2.ResultReason.Canceled,void 0),retEvent=new Exports_js_2.TranslationSynthesisEventArgs(result,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,retEvent)}catch(error){}}if(this.privTranslationRecognizer.canceled){const canceledResult=new Exports_js_2.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,Exports_js_2.CancellationReason.Error,synthEnd.FailureReason,Exports_js_2.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,canceledResult)}catch(error){}}break;case Exports_js_3.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}processed=!0}return processed}))}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){const properties=new Exports_js_2.PropertyCollection;if(properties.setProperty(Exports_js_3.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[errorCode]),this.privTranslationRecognizer.canceled){const cancelEvent=new Exports_js_2.TranslationRecognitionCanceledEventArgs(sessionId,cancellationReason,error,errorCode,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,cancelEvent)}catch(_a){}}if(this.privSuccessCallback){const result=new Exports_js_2.TranslationRecognitionResult(void 0,requestId,Exports_js_2.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,error,void 0,properties);try{this.privSuccessCallback(result),this.privSuccessCallback=void 0}catch(_b){}}}handleRecognizingCallback(result,duration,sessionId){try{const ev=new Exports_js_2.TranslationRecognitionEventArgs(Exports_js_2.TranslationRecognitionResult.fromSpeechRecognitionResult(result),duration,sessionId);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,ev)}catch(error){}}handleRecognizedCallback(result,offset,sessionId){try{const ev=new Exports_js_2.TranslationRecognitionEventArgs(Exports_js_2.TranslationRecognitionResult.fromSpeechRecognitionResult(result),offset,sessionId);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,ev)}catch(error){}}fireEventForResult(serviceResult,properties){let translations,resultReason,confidence;if(void 0!==serviceResult.Translation.Translations){translations=new Exports_js_2.Translations;for(const translation of serviceResult.Translation.Translations)translations.set(translation.Language,translation.Text||translation.DisplayText)}serviceResult instanceof Exports_js_3.TranslationPhrase?(resultReason=serviceResult.Translation&&serviceResult.Translation.TranslationStatus===Exports_js_1.TranslationStatus.Success?Exports_js_2.ResultReason.TranslatedSpeech:Exports_js_2.ResultReason.RecognizedSpeech,confidence=serviceResult.Confidence):resultReason=Exports_js_2.ResultReason.TranslatingSpeech;const language=serviceResult.Language,offset=serviceResult.Offset+this.privRequestSession.currentTurnAudioOffset,result=new Exports_js_2.TranslationRecognitionResult(translations,this.privRequestSession.requestId,resultReason,serviceResult.Text,serviceResult.Duration,offset,language,confidence,serviceResult.Translation.FailureReason,JSON.stringify(serviceResult),properties);return new Exports_js_2.TranslationRecognitionEventArgs(result,offset,this.privRequestSession.sessionId)}sendSynthesisAudio(audio,sessionId){const reason=void 0===audio?Exports_js_2.ResultReason.SynthesizingAudioCompleted:Exports_js_2.ResultReason.SynthesizingAudio,result=new Exports_js_2.TranslationSynthesisResult(reason,audio),retEvent=new Exports_js_2.TranslationSynthesisEventArgs(result,sessionId);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,retEvent)}catch(error){}}}exports.TranslationServiceRecognizer=TranslationServiceRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationStatus=void 0,function(TranslationStatus){TranslationStatus[TranslationStatus.Success=0]="Success",TranslationStatus[TranslationStatus.Error=1]="Error"}(exports.TranslationStatus||(exports.TranslationStatus={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/VoiceServiceRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceServiceRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),SpeechConnectionMessage_Internal_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechConnectionMessage.Internal.js");class VoiceServiceRecognizer extends Exports_js_4.ServiceRecognizerBase{constructor(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){super(authentication,connectionFactory,audioSource,recognizerConfig,recognizer),this.privDeferralMap=new Exports_js_2.DeferralMap,this.privSpeakerAudioSource=audioSource,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(audioSource){this.privSpeakerAudioSource=audioSource}processTypeSpecificMessages(connectionMessage){let processed=!1;const resultProps=new Exports_js_3.PropertyCollection;switch(connectionMessage.messageType===Exports_js_2.MessageType.Text&&resultProps.setProperty(Exports_js_3.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody),connectionMessage.path.toLowerCase()){case"speaker.profiles":const response=JSON.parse(connectionMessage.textBody);switch(response.operation.toLowerCase()){case"create":this.handleCreateResponse(response,connectionMessage.requestId);break;case"delete":case"reset":this.handleResultResponse(response,connectionMessage.requestId);break;case"fetch":const enrollmentResponse=JSON.parse(connectionMessage.textBody);this.handleFetchResponse(enrollmentResponse,connectionMessage.requestId)}processed=!0;break;case"speaker.phrases":const phraseResponse=JSON.parse(connectionMessage.textBody);this.handlePhrasesResponse(phraseResponse,connectionMessage.requestId),processed=!0;break;case"speaker.profile.enrollment":const enrollmentResponse=JSON.parse(connectionMessage.textBody),result=new Exports_js_3.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(enrollmentResponse.enrollment?enrollmentResponse.enrollment.enrollmentStatus:enrollmentResponse.status.statusCode),enrollmentResponse.enrollment?JSON.stringify(enrollmentResponse.enrollment):void 0,enrollmentResponse.status.reason);this.privDeferralMap.getId(connectionMessage.requestId)&&this.privDeferralMap.complete(connectionMessage.requestId,result),this.privRequestSession.onSpeechEnded(),processed=!0}const defferal=new Exports_js_2.Deferred;return defferal.resolve(processed),defferal.promise}cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){(new Exports_js_3.PropertyCollection).setProperty(Exports_js_4.CancellationErrorCodePropertyName,Exports_js_3.CancellationErrorCode[errorCode]);const result=new Exports_js_3.VoiceProfileEnrollmentResult(Exports_js_3.ResultReason.Canceled,error,error);this.privDeferralMap.getId(requestId)&&this.privDeferralMap.complete(requestId,result)}createProfile(profileType,locale){return __awaiter(this,void 0,void 0,(function*(){this.voiceProfileType=profileType.toString();const conPromise=this.connectImpl();try{const createProfileDeferral=new Exports_js_2.Deferred;return yield conPromise,yield this.sendCreateProfile(createProfileDeferral,profileType,locale),this.receiveMessage(),createProfileDeferral.promise}catch(err){throw err}}))}resetProfile(profile){return __awaiter(this,void 0,void 0,(function*(){return this.voiceProfileType=profile.profileType.toString(),this.sendCommonRequest("reset",profile.profileType,profile)}))}deleteProfile(profile){return __awaiter(this,void 0,void 0,(function*(){return this.voiceProfileType=profile.profileType.toString(),this.sendCommonRequest("delete",profile.profileType,profile)}))}retrieveEnrollmentResult(profile){return __awaiter(this,void 0,void 0,(function*(){return this.voiceProfileType=profile.profileType.toString(),this.privExpectedProfileId=profile.profileId,this.sendCommonRequest("fetch",profile.profileType,profile)}))}getAllProfiles(profileType){return __awaiter(this,void 0,void 0,(function*(){return this.voiceProfileType=profileType.toString(),this.sendCommonRequest("fetch",profileType)}))}getActivationPhrases(profileType,lang){return __awaiter(this,void 0,void 0,(function*(){this.voiceProfileType=profileType.toString();const conPromise=this.connectImpl();try{const getPhrasesDeferral=new Exports_js_2.Deferred;return yield conPromise,yield this.sendPhrasesRequest(getPhrasesDeferral,profileType,lang),this.receiveMessage(),getPhrasesDeferral.promise}catch(err){throw err}}))}enrollProfile(profile){return __awaiter(this,void 0,void 0,(function*(){this.voiceProfileType=profile.profileType.toString();const enrollmentDeferral=new Exports_js_2.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const conPromise=this.connectImpl(),preAudioPromise=this.sendPreAudioMessages(profile,enrollmentDeferral),node=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),format=yield this.privSpeakerAudioSource.format,deviceInfo=yield this.privSpeakerAudioSource.deviceInfo,audioNode=new Exports_js_1.ReplayableAudioNode(node,format.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:deviceInfo};try{yield conPromise,yield preAudioPromise}catch(err){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.ConnectionFailure,err)}const sessionStartEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,sessionStartEventArgs),this.receiveMessage();return this.sendAudio(audioNode).then((()=>{}),(error=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error)})),enrollmentDeferral.promise}))}sendPreAudioMessages(profile,enrollmentDeferral){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,enrollmentDeferral),yield this.sendBaseRequest(connection,"enroll",this.scenarioFrom(profile.profileType),profile)}))}sendPhrasesRequest(getPhrasesDeferral,profileType,locale){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,getPhrasesDeferral);const scenario=this.scenarioFrom(profileType),profileCreateRequest={locale,scenario};return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(profileCreateRequest)))}))}sendCreateProfile(createProfileDeferral,profileType,locale){return __awaiter(this,void 0,void 0,(function*(){const connection=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,createProfileDeferral);const scenario=profileType===Exports_js_3.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":profileType===Exports_js_3.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",profileCreateRequest={locale,number:"1",scenario};return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(profileCreateRequest)))}))}sendCommonRequest(operation,profileType,profile=void 0){return __awaiter(this,void 0,void 0,(function*(){const conPromise=this.connectImpl();try{const deferral=new Exports_js_2.Deferred;this.privRequestSession.onSpeechContext(),yield conPromise;const connection=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,deferral),yield this.sendBaseRequest(connection,operation,this.scenarioFrom(profileType),profile),this.receiveMessage(),deferral.promise}catch(err){throw err}}))}sendBaseRequest(connection,operation,scenario,profile){return __awaiter(this,void 0,void 0,(function*(){const profileRequest={scenario};return profile?profileRequest.profileIds=[profile.profileId]:profileRequest.maxPageSize=-1,connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,`speaker.profile.${operation}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(profileRequest)))}))}extractSpeakerContext(model){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:model.profileIds,scenario:model.scenario}}handlePhrasesResponse(response,requestId){if(!this.privDeferralMap.getId(requestId))throw new Error(`Voice Profile get activation phrases request for requestID ${requestId} not found`);if("success"!==response.status.statusCode.toLowerCase()){const reason=Exports_js_3.ResultReason.Canceled,result=new Exports_js_3.VoiceProfilePhraseResult(reason,response.status.statusCode,response.passPhraseType,[]);this.privDeferralMap.complete(requestId,result)}else{if(!(response.phrases&&response.phrases.length>0))throw new Error("Voice Profile get activation phrases failed, no phrases received");{const reason=Exports_js_3.ResultReason.EnrollingVoiceProfile,result=new Exports_js_3.VoiceProfilePhraseResult(reason,response.status.statusCode,response.passPhraseType,response.phrases);this.privDeferralMap.complete(requestId,result)}}}handleCreateResponse(response,requestId){if(!(response.profiles&&response.profiles.length>0))throw new Error("Voice Profile create failed, no profile id received");if(!this.privDeferralMap.getId(requestId))throw new Error(`Voice Profile create request for requestID ${requestId} not found`);{const profileIds=response.profiles.map((profile=>profile.profileId));this.privDeferralMap.complete(requestId,profileIds)}}handleResultResponse(response,requestId){if(!this.privDeferralMap.getId(requestId))throw new Error(`Voice Profile create request for requestID ${requestId} not found`);{const successReason="delete"===response.operation.toLowerCase()?Exports_js_3.ResultReason.DeletedVoiceProfile:Exports_js_3.ResultReason.ResetVoiceProfile,reason="success"===response.status.statusCode.toLowerCase()?successReason:Exports_js_3.ResultReason.Canceled,result=new Exports_js_3.VoiceProfileResult(reason,`statusCode: ${response.status.statusCode}, errorDetails: ${response.status.reason}`);this.privDeferralMap.complete(requestId,result)}}handleFetchResponse(enrollmentResponse,requestId){if(!this.privDeferralMap.getId(requestId)||!enrollmentResponse.profiles[0])throw new Error(`Voice Profile fetch request for requestID ${requestId} not found`);if(this.privExpectedProfileId&&1===enrollmentResponse.profiles.length&&enrollmentResponse.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const profileInfo=enrollmentResponse.profiles[0],result=new Exports_js_3.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(profileInfo.enrollmentStatus),JSON.stringify(profileInfo),enrollmentResponse.status.reason);this.privDeferralMap.complete(requestId,result)}else if(enrollmentResponse.profiles.length>0){const iProfiles=enrollmentResponse.profiles,profileResults=[];for(const profile of iProfiles)profileResults.push(new Exports_js_3.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(profile.enrollmentStatus),JSON.stringify(profile),enrollmentResponse.status.reason));this.privDeferralMap.complete(requestId,profileResults)}}enrollmentReasonFrom(statusCode){switch(statusCode.toLowerCase()){case"enrolled":return Exports_js_3.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return Exports_js_3.ResultReason.Canceled;default:return Exports_js_3.ResultReason.EnrollingVoiceProfile}}scenarioFrom(profileType){return profileType===Exports_js_3.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":profileType===Exports_js_3.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}}exports.VoiceServiceRecognizer=VoiceServiceRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/WebsocketMessageFormatter.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebsocketMessageFormatter=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");exports.WebsocketMessageFormatter=class WebsocketMessageFormatter{toConnectionMessage(message){const deferral=new Exports_js_1.Deferred;try{if(message.messageType===Exports_js_1.MessageType.Text){const textMessage=message.textContent;let headers={},body=null;if(textMessage){const headerBodySplit=textMessage.split("\r\n\r\n");headerBodySplit&&headerBodySplit.length>0&&(headers=this.parseHeaders(headerBodySplit[0]),headerBodySplit.length>1&&(body=headerBodySplit[1]))}deferral.resolve(new Exports_js_1.ConnectionMessage(message.messageType,body,headers,message.id))}else if(message.messageType===Exports_js_1.MessageType.Binary){const binaryMessage=message.binaryContent;let headers={},body=null;if(!binaryMessage||binaryMessage.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const dataView=new DataView(binaryMessage),headerLength=dataView.getInt16(0);if(binaryMessage.byteLength<headerLength+2)throw new Error("Invalid binary message format. Header content missing.");let headersString="";for(let i=0;i<headerLength;i++)headersString+=String.fromCharCode(dataView.getInt8(i+2));headers=this.parseHeaders(headersString),binaryMessage.byteLength>headerLength+2&&(body=binaryMessage.slice(2+headerLength)),deferral.resolve(new Exports_js_1.ConnectionMessage(message.messageType,body,headers,message.id))}}catch(e){deferral.reject(`Error formatting the message. Error: ${e}`)}return deferral.promise}fromConnectionMessage(message){const deferral=new Exports_js_1.Deferred;try{if(message.messageType===Exports_js_1.MessageType.Text){const payload=`${this.makeHeaders(message)}\r\n${message.textBody?message.textBody:""}`;deferral.resolve(new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Text,payload,message.id))}else if(message.messageType===Exports_js_1.MessageType.Binary){const headersString=this.makeHeaders(message),content=message.binaryBody,headerBuffer=this.stringToArrayBuffer(headersString),headerInt8Array=new Int8Array(headerBuffer),headerLength=headerInt8Array.byteLength,payloadInt8Array=new Int8Array(2+headerLength+(content?content.byteLength:0));if(payloadInt8Array[0]=headerLength>>8&255,payloadInt8Array[1]=255&headerLength,payloadInt8Array.set(headerInt8Array,2),content){const bodyInt8Array=new Int8Array(content);payloadInt8Array.set(bodyInt8Array,2+headerLength)}const payload=payloadInt8Array.buffer;deferral.resolve(new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Binary,payload,message.id))}}catch(e){deferral.reject(`Error formatting the message. ${e}`)}return deferral.promise}makeHeaders(message){let headersString="";if(message.headers)for(const header in message.headers)header&&(headersString+=`${header}: ${message.headers[header]}\r\n`);return headersString}parseHeaders(headersString){const headers={};if(headersString){const headerMatches=headersString.match(/[^\r\n]+/g);if(headers)for(const header of headerMatches)if(header){const separatorIndex=header.indexOf(":"),headerName=separatorIndex>0?header.substr(0,separatorIndex).trim().toLowerCase():header,headerValue=separatorIndex>0&&header.length>separatorIndex+1?header.substr(separatorIndex+1).trim():"";headers[headerName]=headerValue}}return headers}stringToArrayBuffer(str){const buffer=new ArrayBuffer(str.length),view=new DataView(buffer);for(let i=0;i<str.length;i++)view.setUint8(i,str.charCodeAt(i));return buffer}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/AudioSourceEvents.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioStreamNodeErrorEvent=exports.AudioStreamNodeDetachedEvent=exports.AudioStreamNodeAttachedEvent=exports.AudioStreamNodeAttachingEvent=exports.AudioStreamNodeEvent=exports.AudioSourceErrorEvent=exports.AudioSourceOffEvent=exports.AudioSourceReadyEvent=exports.AudioSourceInitializingEvent=exports.AudioSourceEvent=void 0;const PlatformEvent_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js");class AudioSourceEvent extends PlatformEvent_js_1.PlatformEvent{constructor(eventName,audioSourceId,eventType=PlatformEvent_js_1.EventType.Info){super(eventName,eventType),this.privAudioSourceId=audioSourceId}get audioSourceId(){return this.privAudioSourceId}}exports.AudioSourceEvent=AudioSourceEvent;exports.AudioSourceInitializingEvent=class AudioSourceInitializingEvent extends AudioSourceEvent{constructor(audioSourceId){super("AudioSourceInitializingEvent",audioSourceId)}};exports.AudioSourceReadyEvent=class AudioSourceReadyEvent extends AudioSourceEvent{constructor(audioSourceId){super("AudioSourceReadyEvent",audioSourceId)}};exports.AudioSourceOffEvent=class AudioSourceOffEvent extends AudioSourceEvent{constructor(audioSourceId){super("AudioSourceOffEvent",audioSourceId)}};exports.AudioSourceErrorEvent=class AudioSourceErrorEvent extends AudioSourceEvent{constructor(audioSourceId,error){super("AudioSourceErrorEvent",audioSourceId,PlatformEvent_js_1.EventType.Error),this.privError=error}get error(){return this.privError}};class AudioStreamNodeEvent extends AudioSourceEvent{constructor(eventName,audioSourceId,audioNodeId){super(eventName,audioSourceId),this.privAudioNodeId=audioNodeId}get audioNodeId(){return this.privAudioNodeId}}exports.AudioStreamNodeEvent=AudioStreamNodeEvent;exports.AudioStreamNodeAttachingEvent=class AudioStreamNodeAttachingEvent extends AudioStreamNodeEvent{constructor(audioSourceId,audioNodeId){super("AudioStreamNodeAttachingEvent",audioSourceId,audioNodeId)}};exports.AudioStreamNodeAttachedEvent=class AudioStreamNodeAttachedEvent extends AudioStreamNodeEvent{constructor(audioSourceId,audioNodeId){super("AudioStreamNodeAttachedEvent",audioSourceId,audioNodeId)}};exports.AudioStreamNodeDetachedEvent=class AudioStreamNodeDetachedEvent extends AudioStreamNodeEvent{constructor(audioSourceId,audioNodeId){super("AudioStreamNodeDetachedEvent",audioSourceId,audioNodeId)}};exports.AudioStreamNodeErrorEvent=class AudioStreamNodeErrorEvent extends AudioStreamNodeEvent{constructor(audioSourceId,audioNodeId,error){super("AudioStreamNodeErrorEvent",audioSourceId,audioNodeId),this.privError=error}get error(){return this.privError}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/BackgroundError.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackgroundEvent=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");class BackgroundEvent extends Exports_js_1.PlatformEvent{constructor(error){super("BackgroundEvent",Exports_js_1.EventType.Error),this.privError=error}get error(){return this.privError}}exports.BackgroundEvent=BackgroundEvent},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ChunkedArrayBufferStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChunkedArrayBufferStream=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");class ChunkedArrayBufferStream extends Exports_js_1.Stream{constructor(targetChunkSize,streamId){super(streamId),this.privTargetChunkSize=targetChunkSize,this.privNextBufferReadyBytes=0}writeStreamChunk(chunk){if(chunk.isEnd||0===this.privNextBufferReadyBytes&&chunk.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(chunk);let bytesCopiedFromBuffer=0;for(;bytesCopiedFromBuffer<chunk.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=chunk.timeReceived);const bytesToCopy=Math.min(chunk.buffer.byteLength-bytesCopiedFromBuffer,this.privTargetChunkSize-this.privNextBufferReadyBytes),targetView=new Uint8Array(this.privNextBufferToWrite),sourceView=new Uint8Array(chunk.buffer.slice(bytesCopiedFromBuffer,bytesToCopy+bytesCopiedFromBuffer));targetView.set(sourceView,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=bytesToCopy,bytesCopiedFromBuffer+=bytesToCopy,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}exports.ChunkedArrayBufferStream=ChunkedArrayBufferStream},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionEvents.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionMessageSentEvent=exports.ConnectionMessageReceivedEvent=exports.ConnectionEstablishErrorEvent=exports.ConnectionErrorEvent=exports.ConnectionClosedEvent=exports.ConnectionEstablishedEvent=exports.ConnectionStartEvent=exports.ConnectionEvent=exports.ServiceEvent=void 0;const PlatformEvent_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js");class ServiceEvent extends PlatformEvent_js_1.PlatformEvent{constructor(eventName,jsonstring,eventType=PlatformEvent_js_1.EventType.Info){super(eventName,eventType),this.privJsonResult=jsonstring}get jsonString(){return this.privJsonResult}}exports.ServiceEvent=ServiceEvent;class ConnectionEvent extends PlatformEvent_js_1.PlatformEvent{constructor(eventName,connectionId,eventType=PlatformEvent_js_1.EventType.Info){super(eventName,eventType),this.privConnectionId=connectionId}get connectionId(){return this.privConnectionId}}exports.ConnectionEvent=ConnectionEvent;exports.ConnectionStartEvent=class ConnectionStartEvent extends ConnectionEvent{constructor(connectionId,uri,headers){super("ConnectionStartEvent",connectionId),this.privUri=uri,this.privHeaders=headers}get uri(){return this.privUri}get headers(){return this.privHeaders}};exports.ConnectionEstablishedEvent=class ConnectionEstablishedEvent extends ConnectionEvent{constructor(connectionId){super("ConnectionEstablishedEvent",connectionId)}};exports.ConnectionClosedEvent=class ConnectionClosedEvent extends ConnectionEvent{constructor(connectionId,statusCode,reason){super("ConnectionClosedEvent",connectionId,PlatformEvent_js_1.EventType.Debug),this.privReason=reason,this.privStatusCode=statusCode}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};exports.ConnectionErrorEvent=class ConnectionErrorEvent extends ConnectionEvent{constructor(connectionId,message,type){super("ConnectionErrorEvent",connectionId,PlatformEvent_js_1.EventType.Debug),this.privMessage=message,this.privType=type}get message(){return this.privMessage}get type(){return this.privType}};exports.ConnectionEstablishErrorEvent=class ConnectionEstablishErrorEvent extends ConnectionEvent{constructor(connectionId,statuscode,reason){super("ConnectionEstablishErrorEvent",connectionId,PlatformEvent_js_1.EventType.Error),this.privStatusCode=statuscode,this.privReason=reason}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};exports.ConnectionMessageReceivedEvent=class ConnectionMessageReceivedEvent extends ConnectionEvent{constructor(connectionId,networkReceivedTimeISO,message){super("ConnectionMessageReceivedEvent",connectionId),this.privNetworkReceivedTime=networkReceivedTimeISO,this.privMessage=message}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};exports.ConnectionMessageSentEvent=class ConnectionMessageSentEvent extends ConnectionEvent{constructor(connectionId,networkSentTimeISO,message){super("ConnectionMessageSentEvent",connectionId),this.privNetworkSentTime=networkSentTimeISO,this.privMessage=message}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionMessage.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionMessage=exports.MessageType=void 0;const Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),Guid_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");var MessageType;!function(MessageType){MessageType[MessageType.Text=0]="Text",MessageType[MessageType.Binary=1]="Binary"}(MessageType=exports.MessageType||(exports.MessageType={}));exports.ConnectionMessage=class ConnectionMessage{constructor(messageType,body,headers,id){if(this.privBody=null,messageType===MessageType.Text&&body&&"string"!=typeof body)throw new Error_js_1.InvalidOperationError("Payload must be a string");if(messageType===MessageType.Binary&&body&&!(body instanceof ArrayBuffer))throw new Error_js_1.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=messageType,this.privBody=body,this.privHeaders=headers||{},this.privId=id||Guid_js_1.createNoDashGuid(),this.messageType){case MessageType.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case MessageType.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===MessageType.Binary)throw new Error_js_1.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===MessageType.Text)throw new Error_js_1.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionOpenResponse.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionOpenResponse=void 0;exports.ConnectionOpenResponse=class ConnectionOpenResponse{constructor(statusCode,reason){this.privStatusCode=statusCode,this.privReason=reason}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/DeferralMap.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeferralMap=void 0;exports.DeferralMap=class DeferralMap{constructor(){this.privMap={}}add(id,deferral){this.privMap[id]=deferral}getId(id){return this.privMap[id]}complete(id,result){try{this.privMap[id].resolve(result)}catch(error){this.privMap[id].reject(error)}finally{this.privMap[id]=void 0}}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/DialogEvents.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SendingAgentContextMessageEvent=exports.DialogEvent=void 0;const PlatformEvent_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js");class DialogEvent extends PlatformEvent_js_1.PlatformEvent{constructor(eventName,eventType=PlatformEvent_js_1.EventType.Info){super(eventName,eventType)}}exports.DialogEvent=DialogEvent;exports.SendingAgentContextMessageEvent=class SendingAgentContextMessageEvent extends DialogEvent{constructor(agentConfig){super("SendingAgentContextMessageEvent"),this.privAgentConfig=agentConfig}get agentConfig(){return this.privAgentConfig}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObjectDisposedError=exports.InvalidOperationError=exports.ArgumentNullError=void 0;class ArgumentNullError extends Error{constructor(argumentName){super(argumentName),this.name="ArgumentNull",this.message=argumentName}}exports.ArgumentNullError=ArgumentNullError;class InvalidOperationError extends Error{constructor(error){super(error),this.name="InvalidOperation",this.message=error}}exports.InvalidOperationError=InvalidOperationError;class ObjectDisposedError extends Error{constructor(objectName,error){super(error),this.name=objectName+"ObjectDisposed",this.message=error}}exports.ObjectDisposedError=ObjectDisposedError},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/EventSource.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventSource=void 0;const Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),Guid_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");exports.EventSource=class EventSource{constructor(metadata){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=metadata}onEvent(event){if(this.isDisposed())throw new Error_js_1.ObjectDisposedError("EventSource");if(this.metadata)for(const paramName in this.metadata)paramName&&event.metadata&&(event.metadata[paramName]||(event.metadata[paramName]=this.metadata[paramName]));for(const eventId in this.privEventListeners)eventId&&this.privEventListeners[eventId]&&this.privEventListeners[eventId](event)}attach(onEventCallback){const id=Guid_js_1.createNoDashGuid();return this.privEventListeners[id]=onEventCallback,{detach:()=>(delete this.privEventListeners[id],Promise.resolve())}}attachListener(listener){return this.attach((e=>listener.onEvent(e)))}attachConsoleListener(listener){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach((e=>listener.onEvent(e))),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Events.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Events=void 0;const Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),EventSource_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/EventSource.js");class Events{static setEventSource(eventSource){if(!eventSource)throw new Error_js_1.ArgumentNullError("eventSource");Events.privInstance=eventSource}static get instance(){return Events.privInstance}}exports.Events=Events,Events.privInstance=new EventSource_js_1.EventSource},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/AudioSourceEvents.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionEvents.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionMessage.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionOpenResponse.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/DeferralMap.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/DialogEvents.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Events.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/EventSource.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IAudioSource.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IConnection.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IDetachable.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IDictionary.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IDisposable.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IEventListener.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IEventSource.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IErrorMessages.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ITimer.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IWebsocketMessageFormatter.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/List.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Promise.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Queue.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RawWebsocketMessage.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RiffPcmEncoder.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Stream.js"),exports);var TranslationStatus_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/TranslationStatus.js");Object.defineProperty(exports,"TranslationStatus",{enumerable:!0,get:function(){return TranslationStatus_js_1.TranslationStatus}}),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ChunkedArrayBufferStream.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IAudioDestination.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Timeout.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/OCSPEvents.js"),exports),__exportStar(__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/BackgroundError.js"),exports)},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNoDashGuid=exports.createGuid=void 0;const uuid_1=__webpack_require__("./node_modules/uuid/dist/commonjs-browser/index.js"),createGuid=()=>uuid_1.v4();exports.createGuid=createGuid;exports.createNoDashGuid=()=>createGuid().replace(new RegExp("-","g"),"").toUpperCase()},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IAudioDestination.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IAudioSource.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IConnection.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionState=void 0,function(ConnectionState){ConnectionState[ConnectionState.None=0]="None",ConnectionState[ConnectionState.Connected=1]="Connected",ConnectionState[ConnectionState.Connecting=2]="Connecting",ConnectionState[ConnectionState.Disconnected=3]="Disconnected"}(exports.ConnectionState||(exports.ConnectionState={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IDetachable.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IDictionary.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IDisposable.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IErrorMessages.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IEventListener.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IEventSource.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ITimer.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/IWebsocketMessageFormatter.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/List.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.List=void 0;const Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js");class List{constructor(list){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],list)for(const item of list)this.privList.push(item)}get(itemIndex){return this.throwIfDisposed(),this.privList[itemIndex]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(item){this.throwIfDisposed(),this.insertAt(this.privList.length,item)}insertAt(index,item){this.throwIfDisposed(),0===index?this.privList.unshift(item):index===this.privList.length?this.privList.push(item):this.privList.splice(index,0,item),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(index){return this.throwIfDisposed(),this.remove(index,1)[0]}remove(index,count){this.throwIfDisposed();const removedElements=this.privList.splice(index,count);return this.triggerSubscriptions(this.privRemoveSubscriptions),removedElements}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(addedCallback){this.throwIfDisposed();const subscriptionId=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[subscriptionId]=addedCallback,{detach:()=>(delete this.privAddSubscriptions[subscriptionId],Promise.resolve())}}onRemoved(removedCallback){this.throwIfDisposed();const subscriptionId=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[subscriptionId]=removedCallback,{detach:()=>(delete this.privRemoveSubscriptions[subscriptionId],Promise.resolve())}}onDisposed(disposedCallback){this.throwIfDisposed();const subscriptionId=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[subscriptionId]=disposedCallback,{detach:()=>(delete this.privDisposedSubscriptions[subscriptionId],Promise.resolve())}}join(seperator){return this.throwIfDisposed(),this.privList.join(seperator)}toArray(){const cloneCopy=Array();return this.privList.forEach((val=>{cloneCopy.push(val)})),cloneCopy}any(callback){return this.throwIfDisposed(),callback?this.where(callback).length()>0:this.length()>0}all(callback){return this.throwIfDisposed(),this.where(callback).length()===this.length()}forEach(callback){this.throwIfDisposed();for(let i=0;i<this.length();i++)callback(this.privList[i],i)}select(callback){this.throwIfDisposed();const selectList=[];for(let i=0;i<this.privList.length;i++)selectList.push(callback(this.privList[i],i));return new List(selectList)}where(callback){this.throwIfDisposed();const filteredList=new List;for(let i=0;i<this.privList.length;i++)callback(this.privList[i],i)&&filteredList.add(this.privList[i]);return filteredList}orderBy(compareFn){this.throwIfDisposed();const orderedArray=this.toArray().sort(compareFn);return new List(orderedArray)}orderByDesc(compareFn){return this.throwIfDisposed(),this.orderBy(((a,b)=>compareFn(b,a)))}clone(){return this.throwIfDisposed(),new List(this.toArray())}concat(list){return this.throwIfDisposed(),new List(this.privList.concat(list.toArray()))}concatArray(array){return this.throwIfDisposed(),new List(this.privList.concat(array))}isDisposed(){return null==this.privList}dispose(reason){this.isDisposed()||(this.privDisposeReason=reason,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new Error_js_1.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(subscriptions){if(subscriptions)for(const subscriptionId in subscriptions)subscriptionId&&subscriptions[subscriptionId]()}}exports.List=List},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/OCSPEvents.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OCSPCacheUpdateErrorEvent=exports.OCSPResponseRetrievedEvent=exports.OCSPCacheFetchErrorEvent=exports.OCSPVerificationFailedEvent=exports.OCSPCacheHitEvent=exports.OCSPCacheEntryNeedsRefreshEvent=exports.OCSPCacheEntryExpiredEvent=exports.OCSPWSUpgradeStartedEvent=exports.OCSPStapleReceivedEvent=exports.OCSPCacheUpdateCompleteEvent=exports.OCSPDiskCacheStoreEvent=exports.OCSPMemoryCacheStoreEvent=exports.OCSPCacheUpdateNeededEvent=exports.OCSPDiskCacheHitEvent=exports.OCSPCacheMissEvent=exports.OCSPMemoryCacheHitEvent=exports.OCSPEvent=void 0;const PlatformEvent_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js");class OCSPEvent extends PlatformEvent_js_1.PlatformEvent{constructor(eventName,eventType,signature){super(eventName,eventType),this.privSignature=signature}}exports.OCSPEvent=OCSPEvent;exports.OCSPMemoryCacheHitEvent=class OCSPMemoryCacheHitEvent extends OCSPEvent{constructor(signature){super("OCSPMemoryCacheHitEvent",PlatformEvent_js_1.EventType.Debug,signature)}};exports.OCSPCacheMissEvent=class OCSPCacheMissEvent extends OCSPEvent{constructor(signature){super("OCSPCacheMissEvent",PlatformEvent_js_1.EventType.Debug,signature)}};exports.OCSPDiskCacheHitEvent=class OCSPDiskCacheHitEvent extends OCSPEvent{constructor(signature){super("OCSPDiskCacheHitEvent",PlatformEvent_js_1.EventType.Debug,signature)}};exports.OCSPCacheUpdateNeededEvent=class OCSPCacheUpdateNeededEvent extends OCSPEvent{constructor(signature){super("OCSPCacheUpdateNeededEvent",PlatformEvent_js_1.EventType.Debug,signature)}};exports.OCSPMemoryCacheStoreEvent=class OCSPMemoryCacheStoreEvent extends OCSPEvent{constructor(signature){super("OCSPMemoryCacheStoreEvent",PlatformEvent_js_1.EventType.Debug,signature)}};exports.OCSPDiskCacheStoreEvent=class OCSPDiskCacheStoreEvent extends OCSPEvent{constructor(signature){super("OCSPDiskCacheStoreEvent",PlatformEvent_js_1.EventType.Debug,signature)}};exports.OCSPCacheUpdateCompleteEvent=class OCSPCacheUpdateCompleteEvent extends OCSPEvent{constructor(signature){super("OCSPCacheUpdateCompleteEvent",PlatformEvent_js_1.EventType.Debug,signature)}};exports.OCSPStapleReceivedEvent=class OCSPStapleReceivedEvent extends OCSPEvent{constructor(){super("OCSPStapleReceivedEvent",PlatformEvent_js_1.EventType.Debug,"")}};exports.OCSPWSUpgradeStartedEvent=class OCSPWSUpgradeStartedEvent extends OCSPEvent{constructor(serialNumber){super("OCSPWSUpgradeStartedEvent",PlatformEvent_js_1.EventType.Debug,serialNumber)}};exports.OCSPCacheEntryExpiredEvent=class OCSPCacheEntryExpiredEvent extends OCSPEvent{constructor(serialNumber,expireTime){super("OCSPCacheEntryExpiredEvent",PlatformEvent_js_1.EventType.Debug,serialNumber),this.privExpireTime=expireTime}};exports.OCSPCacheEntryNeedsRefreshEvent=class OCSPCacheEntryNeedsRefreshEvent extends OCSPEvent{constructor(serialNumber,startTime,expireTime){super("OCSPCacheEntryNeedsRefreshEvent",PlatformEvent_js_1.EventType.Debug,serialNumber),this.privExpireTime=expireTime,this.privStartTime=startTime}};exports.OCSPCacheHitEvent=class OCSPCacheHitEvent extends OCSPEvent{constructor(serialNumber,startTime,expireTime){super("OCSPCacheHitEvent",PlatformEvent_js_1.EventType.Debug,serialNumber),this.privExpireTime=expireTime,this.privExpireTimeString=new Date(expireTime).toLocaleDateString(),this.privStartTime=startTime,this.privStartTimeString=new Date(startTime).toLocaleTimeString()}};exports.OCSPVerificationFailedEvent=class OCSPVerificationFailedEvent extends OCSPEvent{constructor(serialNumber,error){super("OCSPVerificationFailedEvent",PlatformEvent_js_1.EventType.Debug,serialNumber),this.privError=error}};exports.OCSPCacheFetchErrorEvent=class OCSPCacheFetchErrorEvent extends OCSPEvent{constructor(serialNumber,error){super("OCSPCacheFetchErrorEvent",PlatformEvent_js_1.EventType.Debug,serialNumber),this.privError=error}};exports.OCSPResponseRetrievedEvent=class OCSPResponseRetrievedEvent extends OCSPEvent{constructor(serialNumber){super("OCSPResponseRetrievedEvent",PlatformEvent_js_1.EventType.Debug,serialNumber)}};exports.OCSPCacheUpdateErrorEvent=class OCSPCacheUpdateErrorEvent extends OCSPEvent{constructor(serialNumber,error){super("OCSPCacheUpdateErrorEvent",PlatformEvent_js_1.EventType.Debug,serialNumber),this.privError=error}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/PlatformEvent.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlatformEvent=exports.EventType=void 0;const Guid_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");!function(EventType){EventType[EventType.Debug=0]="Debug",EventType[EventType.Info=1]="Info",EventType[EventType.Warning=2]="Warning",EventType[EventType.Error=3]="Error",EventType[EventType.None=4]="None"}(exports.EventType||(exports.EventType={}));exports.PlatformEvent=class PlatformEvent{constructor(eventName,eventType){this.privName=eventName,this.privEventId=Guid_js_1.createNoDashGuid(),this.privEventTime=(new Date).toISOString(),this.privEventType=eventType,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Promise.js":(__unused_webpack_module,exports)=>{"use strict";var PromiseState;Object.defineProperty(exports,"__esModule",{value:!0}),exports.marshalPromiseToCallbacks=exports.Sink=exports.Deferred=exports.PromiseResultEventSource=exports.PromiseResult=exports.PromiseState=void 0,function(PromiseState){PromiseState[PromiseState.None=0]="None",PromiseState[PromiseState.Resolved=1]="Resolved",PromiseState[PromiseState.Rejected=2]="Rejected"}(PromiseState=exports.PromiseState||(exports.PromiseState={}));class PromiseResult{constructor(promiseResultEventSource){this.throwIfError=()=>{if(this.isError)throw this.error},promiseResultEventSource.on((result=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=result)}),(error=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=error)}))}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}exports.PromiseResult=PromiseResult;class PromiseResultEventSource{constructor(){this.setResult=result=>{this.privOnSetResult(result)},this.setError=error=>{this.privOnSetError(error)},this.on=(onSetResult,onSetError)=>{this.privOnSetResult=onSetResult,this.privOnSetError=onSetError}}}exports.PromiseResultEventSource=PromiseResultEventSource;exports.Deferred=class Deferred{constructor(){this.resolve=result=>(this.privResolve(result),this),this.reject=error=>(this.privReject(error),this),this.privPromise=new Promise(((resolve,reject)=>{this.privResolve=resolve,this.privReject=reject}))}get promise(){return this.privPromise}};exports.Sink=class Sink{constructor(){this.privState=PromiseState.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new PromiseResultEventSource,this.privPromiseResult=new PromiseResult(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(result){if(this.privState!==PromiseState.None)throw new Error("'Cannot resolve a completed promise'");this.privState=PromiseState.Resolved,this.privPromiseResultEvents.setResult(result);for(let i=0;i<this.privSuccessHandlers.length;i++)this.executeSuccessCallback(result,this.privSuccessHandlers[i],this.privErrorHandlers[i]);this.detachHandlers()}reject(error){if(this.privState!==PromiseState.None)throw new Error("'Cannot reject a completed promise'");this.privState=PromiseState.Rejected,this.privPromiseResultEvents.setError(error);for(const errorHandler of this.privErrorHandlers)this.executeErrorCallback(error,errorHandler);this.detachHandlers()}on(successCallback,errorCallback){null==successCallback&&(successCallback=()=>{}),this.privState===PromiseState.None?(this.privSuccessHandlers.push(successCallback),this.privErrorHandlers.push(errorCallback)):(this.privState===PromiseState.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,successCallback,errorCallback):this.privState===PromiseState.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,errorCallback),this.detachHandlers())}executeSuccessCallback(result,successCallback,errorCallback){try{successCallback(result)}catch(e){this.executeErrorCallback(`'Unhandled callback error: ${e}'`,errorCallback)}}executeErrorCallback(error,errorCallback){if(!errorCallback)throw new Error(`'Unhandled error: ${error}'`);try{errorCallback(error)}catch(e){throw new Error(`'Unhandled callback error: ${e}. InnerError: ${error}'`)}}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}},exports.marshalPromiseToCallbacks=function marshalPromiseToCallbacks(promise,cb,err){promise.then((val=>{try{cb&&cb(val)}catch(error){if(err)try{if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error)}catch(error){}}}),(error=>{if(err)try{if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error)}catch(error){}}))}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Queue.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Queue=void 0;const Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),List_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/List.js"),Promise_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Promise.js");var SubscriberType;!function(SubscriberType){SubscriberType[SubscriberType.Dequeue=0]="Dequeue",SubscriberType[SubscriberType.Peek=1]="Peek"}(SubscriberType||(SubscriberType={}));exports.Queue=class Queue{constructor(list){this.privPromiseStore=new List_js_1.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=list||new List_js_1.List,this.privDetachables=[],this.privSubscribers=new List_js_1.List,this.privDetachables.push(this.privList.onAdded((()=>this.drain())))}enqueue(item){this.throwIfDispose(),this.enqueueFromPromise(new Promise((resolve=>resolve(item))))}enqueueFromPromise(promise){this.throwIfDispose(),promise.then((val=>{this.privList.add(val)}),(()=>{}))}dequeue(){this.throwIfDispose();const deferredSubscriber=new Promise_js_1.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:deferredSubscriber,type:SubscriberType.Dequeue}),this.drain()),deferredSubscriber.promise}peek(){this.throwIfDispose();const deferredSubscriber=new Promise_js_1.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:deferredSubscriber,type:SubscriberType.Peek}),this.drain()),deferredSubscriber.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(pendingItemProcessor,reason){return __awaiter(this,void 0,void 0,(function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=reason,this.privIsDisposing=!0;const subs=this.privSubscribers;if(subs){for(;subs.length()>0;){subs.removeFirst().deferral.resolve(void 0)}this.privSubscribers===subs&&(this.privSubscribers=subs)}for(const detachable of this.privDetachables)yield detachable.detach();if(this.privPromiseStore.length()>0&&pendingItemProcessor){const promiseArray=[];return this.privPromiseStore.toArray().forEach((wrapper=>{promiseArray.push(wrapper)})),Promise.all(promiseArray).finally((()=>{this.privSubscribers=null,this.privList.forEach((item=>{pendingItemProcessor(item)})),this.privList=null})).then()}this.privSubscribers=null,this.privList=null}}))}dispose(reason){return __awaiter(this,void 0,void 0,(function*(){yield this.drainAndDispose(null,reason)}))}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const subs=this.privSubscribers,lists=this.privList;if(subs&&lists){for(;lists.length()>0&&subs.length()>0&&!this.privIsDisposing;){const subscriber=subs.removeFirst();if(subscriber.type===SubscriberType.Peek)subscriber.deferral.resolve(lists.first());else{const dequeuedItem=lists.removeFirst();subscriber.deferral.resolve(dequeuedItem)}}this.privSubscribers===subs&&(this.privSubscribers=subs),this.privList===lists&&(this.privList=lists)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new Error_js_1.InvalidOperationError(this.privDisposeReason);throw new Error_js_1.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new Error_js_1.InvalidOperationError("Queue disposing")}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RawWebsocketMessage.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RawWebsocketMessage=void 0;const ConnectionMessage_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/ConnectionMessage.js"),Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),Guid_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js");exports.RawWebsocketMessage=class RawWebsocketMessage{constructor(messageType,payload,id){if(this.privPayload=null,!payload)throw new Error_js_1.ArgumentNullError("payload");if(messageType===ConnectionMessage_js_1.MessageType.Binary&&"ArrayBuffer"!==payload.__proto__.constructor.name)throw new Error_js_1.InvalidOperationError("Payload must be ArrayBuffer");if(messageType===ConnectionMessage_js_1.MessageType.Text&&"string"!=typeof payload)throw new Error_js_1.InvalidOperationError("Payload must be a string");this.privMessageType=messageType,this.privPayload=payload,this.privId=id||Guid_js_1.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===ConnectionMessage_js_1.MessageType.Binary)throw new Error_js_1.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===ConnectionMessage_js_1.MessageType.Text)throw new Error_js_1.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/RiffPcmEncoder.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RiffPcmEncoder=void 0;exports.RiffPcmEncoder=class RiffPcmEncoder{constructor(actualSampleRate,desiredSampleRate){this.privActualSampleRate=actualSampleRate,this.privDesiredSampleRate=desiredSampleRate}encode(actualAudioFrame){const audioFrame=this.downSampleAudioFrame(actualAudioFrame,this.privActualSampleRate,this.privDesiredSampleRate);if(!audioFrame)return null;const audioLength=2*audioFrame.length,buffer=new ArrayBuffer(audioLength),view=new DataView(buffer);return this.floatTo16BitPCM(view,0,audioFrame),buffer}setString(view,offset,str){for(let i=0;i<str.length;i++)view.setUint8(offset+i,str.charCodeAt(i))}floatTo16BitPCM(view,offset,input){for(let i=0;i<input.length;i++,offset+=2){const s=Math.max(-1,Math.min(1,input[i]));view.setInt16(offset,s<0?32768*s:32767*s,!0)}}downSampleAudioFrame(srcFrame,srcRate,dstRate){if(!srcFrame)return null;if(dstRate===srcRate||dstRate>srcRate)return srcFrame;const ratio=srcRate/dstRate,dstLength=Math.round(srcFrame.length/ratio),dstFrame=new Float32Array(dstLength);let srcOffset=0,dstOffset=0;for(;dstOffset<dstLength;){const nextSrcOffset=Math.round((dstOffset+1)*ratio);let accum=0,count=0;for(;srcOffset<nextSrcOffset&&srcOffset<srcFrame.length;)accum+=srcFrame[srcOffset++],count++;dstFrame[dstOffset++]=accum/count}return dstFrame}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Stream.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Stream=void 0;const Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),Guid_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js"),Queue_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Queue.js");exports.Stream=class Stream{constructor(streamId){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=streamId||Guid_js_1.createNoDashGuid(),this.privReaderQueue=new Queue_js_1.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(streamChunk){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(streamChunk)}catch(e){}}read(){if(this.privIsReadEnded)throw new Error_js_1.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then((streamChunk=>__awaiter(this,void 0,void 0,(function*(){return(void 0===streamChunk||streamChunk.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),streamChunk}))))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new Queue_js_1.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Error_js_1.InvalidOperationError("Stream closed")}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/StringUtils.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringUtils=void 0;exports.StringUtils=class StringUtils{static formatString(format,replacements){if(!format)return"";if(!replacements)return format;let formatted="",key="";const appendToFormatted=str=>{formatted+=str},appendToKey=str=>{key+=str};let appendFunc=appendToFormatted;for(let i=0;i<format.length;i++){const c=format[i],next=i+1<format.length?format[i+1]:"";switch(c){case"{":"{"===next?(appendFunc("{"),i++):appendFunc=appendToKey;break;case"}":"}"===next?(appendFunc("}"),i++):(replacements.hasOwnProperty(key)&&(formatted+=replacements[key]),appendFunc=appendToFormatted,key="");break;default:appendFunc(c)}}return formatted}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Timeout.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Timeout=void 0;class Timeout{static load(){const scheduledTimeoutFunctions=new Map([[0,()=>{}]]),unhandledRequests=new Map,workerUrl="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),worker=new Worker(workerUrl);worker.addEventListener("message",(({data})=>{if(Timeout.isCallNotification(data)){const{params:{timerId}}=data,idOrFunc=scheduledTimeoutFunctions.get(timerId);if("number"==typeof idOrFunc){const unhandledTimerId=unhandledRequests.get(idOrFunc);if(void 0===unhandledTimerId||unhandledTimerId!==timerId)throw new Error("The timer is in an undefined state.")}else{if(void 0===idOrFunc)throw new Error("The timer is in an undefined state.");idOrFunc(),scheduledTimeoutFunctions.delete(timerId)}}else{if(!Timeout.isClearResponse(data)){const{error:{message}}=data;throw new Error(message)}{const{id}=data,unhandledTimerId=unhandledRequests.get(id);if(void 0===unhandledTimerId)throw new Error("The timer is in an undefined state.");unhandledRequests.delete(id),scheduledTimeoutFunctions.delete(unhandledTimerId)}}}));return{clearTimeout:timerId=>{const id=Math.random();unhandledRequests.set(id,timerId),scheduledTimeoutFunctions.set(timerId,id),worker.postMessage({id,method:"clear",params:{timerId}})},setTimeout:(func,delay)=>{const timerId=Math.random();return scheduledTimeoutFunctions.set(timerId,func),worker.postMessage({id:null,method:"set",params:{delay,now:performance.now(),timerId}}),timerId}}}static loadWorkerTimers(){return()=>(null!==Timeout.workerTimers||(Timeout.workerTimers=Timeout.load()),Timeout.workerTimers)}static isCallNotification(message){return void 0!==message.method&&"call"===message.method}static isClearResponse(message){return null===message.error&&"number"==typeof message.id}}exports.Timeout=Timeout,Timeout.workerTimers=null,Timeout.clearTimeout=timerId=>Timeout.timers().clearTimeout(timerId),Timeout.setTimeout=(func,delay)=>Timeout.timers().setTimeout(func,delay),Timeout.timers=Timeout.loadWorkerTimers()},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ActivityReceivedEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ActivityReceivedEventArgs=void 0;exports.ActivityReceivedEventArgs=class ActivityReceivedEventArgs{constructor(activity,audioStream){this.privActivity=activity,this.privAudioStream=audioStream}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioOutputConfigImpl=exports.AudioConfigImpl=exports.AudioConfig=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),AudioFileWriter_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioFileWriter.js"),AudioInputStream_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioInputStream.js"),AudioOutputStream_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputStream.js");class AudioConfig{static fromDefaultMicrophoneInput(){const pcmRecorder=new Exports_js_1.PcmRecorder(!0);return new AudioConfigImpl(new Exports_js_1.MicAudioSource(pcmRecorder))}static fromMicrophoneInput(deviceId){const pcmRecorder=new Exports_js_1.PcmRecorder(!0);return new AudioConfigImpl(new Exports_js_1.MicAudioSource(pcmRecorder,deviceId))}static fromWavFileInput(file,name="unnamedBuffer.wav"){return new AudioConfigImpl(new Exports_js_1.FileAudioSource(file,name))}static fromStreamInput(audioStream){if(audioStream instanceof Exports_js_2.PullAudioInputStreamCallback)return new AudioConfigImpl(new AudioInputStream_js_1.PullAudioInputStreamImpl(audioStream));if(audioStream instanceof Exports_js_2.AudioInputStream)return new AudioConfigImpl(audioStream);if("undefined"!=typeof MediaStream&&audioStream instanceof MediaStream){const pcmRecorder=new Exports_js_1.PcmRecorder(!1);return new AudioConfigImpl(new Exports_js_1.MicAudioSource(pcmRecorder,null,null,audioStream))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new AudioOutputConfigImpl(new Exports_js_2.SpeakerAudioDestination)}static fromSpeakerOutput(player){if(void 0===player)return AudioConfig.fromDefaultSpeakerOutput();if(player instanceof Exports_js_2.SpeakerAudioDestination)return new AudioOutputConfigImpl(player);throw new Error("Not Supported Type")}static fromAudioFileOutput(filename){return new AudioOutputConfigImpl(new AudioFileWriter_js_1.AudioFileWriter(filename))}static fromStreamOutput(audioStream){if(audioStream instanceof Exports_js_2.PushAudioOutputStreamCallback)return new AudioOutputConfigImpl(new AudioOutputStream_js_1.PushAudioOutputStreamImpl(audioStream));if(audioStream instanceof Exports_js_2.PushAudioOutputStream)return new AudioOutputConfigImpl(audioStream);if(audioStream instanceof Exports_js_2.PullAudioOutputStream)return new AudioOutputConfigImpl(audioStream);throw new Error("Not Supported Type")}}exports.AudioConfig=AudioConfig;class AudioConfigImpl extends AudioConfig{constructor(source){super(),this.privSource=source}get format(){return this.privSource.format}close(cb,err){this.privSource.turnOff().then((()=>{cb&&cb()}),(error=>{err&&err(error)}))}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(audioNodeId){return this.privSource.attach(audioNodeId)}detach(audioNodeId){return this.privSource.detach(audioNodeId)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(name,value){if(Contracts_js_1.Contracts.throwIfNull(value,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(name,value)}getProperty(name,def){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(name,def);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}exports.AudioConfigImpl=AudioConfigImpl;class AudioOutputConfigImpl extends AudioConfig{constructor(destination){super(),this.privDestination=destination}set format(format){this.privDestination.format=format}write(buffer){this.privDestination.write(buffer)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}exports.AudioOutputConfigImpl=AudioOutputConfigImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioFileWriter.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioFileWriter=void 0;const fs=__importStar(__webpack_require__("?c417")),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");exports.AudioFileWriter=class AudioFileWriter{constructor(filename){Contracts_js_1.Contracts.throwIfNullOrUndefined(fs.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=fs.openSync(filename,"w")}set format(format){Contracts_js_1.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=format;let headerOffset=0;this.privAudioFormat.hasHeader&&(headerOffset=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=fs.createWriteStream("",{fd:this.privFd,start:headerOffset,autoClose:!1}))}write(buffer){Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(buffer.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",(()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),fs.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),fs.closeSync(this.privFd),this.privFd=void 0})),this.privWriteStream.end())}id(){return this.privId}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioInputStream.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PullAudioInputStreamImpl=exports.PullAudioInputStream=exports.PushAudioInputStreamImpl=exports.PushAudioInputStream=exports.AudioInputStream=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Guid_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Guid.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),AudioStreamFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");class AudioInputStream{constructor(){}static createPushStream(format){return PushAudioInputStream.create(format)}static createPullStream(callback,format){return PullAudioInputStream.create(callback,format)}}exports.AudioInputStream=AudioInputStream;class PushAudioInputStream extends AudioInputStream{static create(format){return new PushAudioInputStreamImpl(format)}}exports.PushAudioInputStream=PushAudioInputStream;class PushAudioInputStreamImpl extends PushAudioInputStream{constructor(format){super(),this.privFormat=void 0===format?AudioStreamFormat_js_1.AudioStreamFormatImpl.getDefaultInputFormat():format,this.privEvents=new Exports_js_2.EventSource,this.privId=Guid_js_1.createNoDashGuid(),this.privStream=new Exports_js_2.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(dataBuffer){this.privStream.writeStreamChunk({buffer:dataBuffer,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new Exports_js_2.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Exports_js_2.AudioSourceReadyEvent(this.privId))}attach(audioNodeId){return __awaiter(this,void 0,void 0,(function*(){this.onEvent(new Exports_js_2.AudioStreamNodeAttachingEvent(this.privId,audioNodeId)),yield this.turnOn();const stream=this.privStream;return this.onEvent(new Exports_js_2.AudioStreamNodeAttachedEvent(this.privId,audioNodeId)),{detach:()=>__awaiter(this,void 0,void 0,(function*(){return this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId)),this.turnOff()})),id:()=>audioNodeId,read:()=>stream.read()}}))}detach(audioNodeId){this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:Exports_js_1.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:Exports_js_1.type.Stream})}onEvent(event){this.privEvents.onEvent(event),Exports_js_2.Events.instance.onEvent(event)}toBuffer(arrayBuffer){const buf=Buffer.alloc(arrayBuffer.byteLength),view=new Uint8Array(arrayBuffer);for(let i=0;i<buf.length;++i)buf[i]=view[i];return buf}}exports.PushAudioInputStreamImpl=PushAudioInputStreamImpl;class PullAudioInputStream extends AudioInputStream{constructor(){super()}static create(callback,format){return new PullAudioInputStreamImpl(callback,format)}}exports.PullAudioInputStream=PullAudioInputStream;class PullAudioInputStreamImpl extends PullAudioInputStream{constructor(callback,format){super(),this.privFormat=void 0===format?Exports_js_3.AudioStreamFormat.getDefaultInputFormat():format,this.privEvents=new Exports_js_2.EventSource,this.privId=Guid_js_1.createNoDashGuid(),this.privCallback=callback,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new Exports_js_2.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Exports_js_2.AudioSourceReadyEvent(this.privId))}attach(audioNodeId){return __awaiter(this,void 0,void 0,(function*(){return this.onEvent(new Exports_js_2.AudioStreamNodeAttachingEvent(this.privId,audioNodeId)),yield this.turnOn(),this.onEvent(new Exports_js_2.AudioStreamNodeAttachedEvent(this.privId,audioNodeId)),{detach:()=>(this.privCallback.close(),this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId)),this.turnOff()),id:()=>audioNodeId,read:()=>{let transmitBuff,totalBytes=0;for(;totalBytes<this.privBufferSize;){const readBuff=new ArrayBuffer(this.privBufferSize-totalBytes),pulledBytes=this.privCallback.read(readBuff);if(void 0===transmitBuff)transmitBuff=readBuff;else{new Int8Array(transmitBuff).set(new Int8Array(readBuff),totalBytes)}if(0===pulledBytes)break;totalBytes+=pulledBytes}return Promise.resolve({buffer:transmitBuff.slice(0,totalBytes),isEnd:this.privIsClosed||0===totalBytes,timeReceived:Date.now()})}}}))}detach(audioNodeId){this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:Exports_js_1.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:Exports_js_1.type.Stream})}onEvent(event){this.privEvents.onEvent(event),Exports_js_2.Events.instance.onEvent(event)}}exports.PullAudioInputStreamImpl=PullAudioInputStreamImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputFormat.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioOutputFormatImpl=void 0;const SpeechSynthesisOutputFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisOutputFormat.js"),AudioStreamFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");class AudioOutputFormatImpl extends AudioStreamFormat_js_1.AudioStreamFormatImpl{constructor(formatTag,channels,samplesPerSec,avgBytesPerSec,blockAlign,bitsPerSample,audioFormatString,requestAudioFormatString,hasHeader){super(samplesPerSec,bitsPerSample,channels,formatTag),this.formatTag=formatTag,this.avgBytesPerSec=avgBytesPerSec,this.blockAlign=blockAlign,this.priAudioFormatString=audioFormatString,this.priRequestAudioFormatString=requestAudioFormatString,this.priHasHeader=hasHeader}static fromSpeechSynthesisOutputFormat(speechSynthesisOutputFormat){return void 0===speechSynthesisOutputFormat?AudioOutputFormatImpl.getDefaultOutputFormat():AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(AudioOutputFormatImpl.SpeechSynthesisOutputFormatToString[speechSynthesisOutputFormat])}static fromSpeechSynthesisOutputFormatString(speechSynthesisOutputFormatString){switch(speechSynthesisOutputFormatString){case"raw-8khz-8bit-mono-mulaw":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"riff-16khz-16kbps-mono-siren":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.Siren,1,16e3,2e3,40,0,speechSynthesisOutputFormatString,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.Siren,1,16e3,2e3,40,0,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-16khz-32kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,16e3,4096,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-16khz-128kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,16e3,16384,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-16khz-64kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,16e3,8192,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-24khz-48kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,24e3,6144,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-24khz-96kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,24e3,12288,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-24khz-160kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,24e3,20480,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"raw-16khz-16bit-mono-truesilk":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"riff-8khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,8e3,16e3,2,16,speechSynthesisOutputFormatString,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,24e3,48e3,2,16,speechSynthesisOutputFormatString,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,speechSynthesisOutputFormatString,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,16e3,32e3,2,16,speechSynthesisOutputFormatString,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,24e3,48e3,2,16,speechSynthesisOutputFormatString,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,8e3,16e3,2,16,speechSynthesisOutputFormatString,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"ogg-24khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"raw-48khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,48e3,96e3,2,16,speechSynthesisOutputFormatString,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,48e3,96e3,2,16,speechSynthesisOutputFormatString,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,48e3,12288,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-48khz-192kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,48e3,24576,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"ogg-48khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"webm-16khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"webm-24khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OPUS,1,16e3,4e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OPUS,1,24e3,6e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OPUS,1,24e3,3e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-24khz-16bit-mono-flac":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.FLAC,1,24e3,24e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"audio-48khz-16bit-mono-flac":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.FLAC,1,48e3,3e4,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"raw-24khz-16bit-mono-truesilk":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"raw-8khz-8bit-mono-alaw":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.ALaw,1,8e3,8e3,1,8,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"riff-8khz-8bit-mono-alaw":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.ALaw,1,8e3,8e3,1,8,speechSynthesisOutputFormatString,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,22050,44100,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"riff-22050hz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,22050,44100,2,16,speechSynthesisOutputFormatString,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,44100,88200,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,!1);case"riff-44100hz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,44100,88200,2,16,speechSynthesisOutputFormatString,"raw-44100hz-16bit-mono-pcm",!0);default:return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(audioLength){if(this.priHasHeader){const view=new DataView(this.privHeader);view.setUint32(4,audioLength+this.privHeader.byteLength-8,!0),view.setUint32(40,audioLength,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(audio){if(!this.hasHeader)return audio;this.updateHeader(audio.byteLength);const tmp=new Uint8Array(audio.byteLength+this.header.byteLength);return tmp.set(new Uint8Array(this.header),0),tmp.set(new Uint8Array(audio),this.header.byteLength),tmp.buffer}}exports.AudioOutputFormatImpl=AudioOutputFormatImpl,AudioOutputFormatImpl.SpeechSynthesisOutputFormatToString={[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputStream.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PushAudioOutputStreamImpl=exports.PushAudioOutputStream=exports.PullAudioOutputStreamImpl=exports.PullAudioOutputStream=exports.AudioOutputStream=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),AudioOutputFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputFormat.js");class AudioOutputStream{constructor(){}static createPullStream(){return PullAudioOutputStream.create()}}exports.AudioOutputStream=AudioOutputStream;class PullAudioOutputStream extends AudioOutputStream{static create(){return new PullAudioOutputStreamImpl}}exports.PullAudioOutputStream=PullAudioOutputStream;class PullAudioOutputStreamImpl extends PullAudioOutputStream{constructor(){super(),this.privId=Exports_js_1.createNoDashGuid(),this.privStream=new Exports_js_1.Stream}set format(format){null==format&&(this.privFormat=AudioOutputFormat_js_1.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=format}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(dataBuffer){return __awaiter(this,void 0,void 0,(function*(){const intView=new Int8Array(dataBuffer);let totalBytes=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>dataBuffer.byteLength)return intView.set(this.privLastChunkView.slice(0,dataBuffer.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(dataBuffer.byteLength),Promise.resolve(dataBuffer.byteLength);intView.set(this.privLastChunkView),totalBytes=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;totalBytes<dataBuffer.byteLength&&!this.privStream.isReadEnded;){const chunk=yield this.privStream.read();if(void 0===chunk||chunk.isEnd)this.privStream.readEnded();else{let tmpBuffer;chunk.buffer.byteLength>dataBuffer.byteLength-totalBytes?(tmpBuffer=chunk.buffer.slice(0,dataBuffer.byteLength-totalBytes),this.privLastChunkView=new Int8Array(chunk.buffer.slice(dataBuffer.byteLength-totalBytes))):tmpBuffer=chunk.buffer,intView.set(new Int8Array(tmpBuffer),totalBytes),totalBytes+=tmpBuffer.byteLength}}return totalBytes}))}write(dataBuffer){Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:dataBuffer,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}exports.PullAudioOutputStreamImpl=PullAudioOutputStreamImpl;class PushAudioOutputStream extends AudioOutputStream{constructor(){super()}static create(callback){return new PushAudioOutputStreamImpl(callback)}}exports.PushAudioOutputStream=PushAudioOutputStream;class PushAudioOutputStreamImpl extends PushAudioOutputStream{constructor(callback){super(),this.privId=Exports_js_1.createNoDashGuid(),this.privCallback=callback}set format(format){}write(buffer){this.privCallback.write&&this.privCallback.write(buffer)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}exports.PushAudioOutputStreamImpl=PushAudioOutputStreamImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js":(__unused_webpack_module,exports)=>{"use strict";var AudioFormatTag;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioStreamFormatImpl=exports.AudioStreamFormat=exports.AudioFormatTag=void 0,function(AudioFormatTag){AudioFormatTag[AudioFormatTag.PCM=1]="PCM",AudioFormatTag[AudioFormatTag.MuLaw=2]="MuLaw",AudioFormatTag[AudioFormatTag.Siren=3]="Siren",AudioFormatTag[AudioFormatTag.MP3=4]="MP3",AudioFormatTag[AudioFormatTag.SILKSkype=5]="SILKSkype",AudioFormatTag[AudioFormatTag.OGG_OPUS=6]="OGG_OPUS",AudioFormatTag[AudioFormatTag.WEBM_OPUS=7]="WEBM_OPUS",AudioFormatTag[AudioFormatTag.ALaw=8]="ALaw",AudioFormatTag[AudioFormatTag.FLAC=9]="FLAC",AudioFormatTag[AudioFormatTag.OPUS=10]="OPUS"}(AudioFormatTag=exports.AudioFormatTag||(exports.AudioFormatTag={}));class AudioStreamFormat{static getDefaultInputFormat(){return AudioStreamFormatImpl.getDefaultInputFormat()}static getWaveFormat(samplesPerSecond,bitsPerSample,channels,format){return new AudioStreamFormatImpl(samplesPerSecond,bitsPerSample,channels,format)}static getWaveFormatPCM(samplesPerSecond,bitsPerSample,channels){return new AudioStreamFormatImpl(samplesPerSecond,bitsPerSample,channels)}}exports.AudioStreamFormat=AudioStreamFormat;class AudioStreamFormatImpl extends AudioStreamFormat{constructor(samplesPerSec=16e3,bitsPerSample=16,channels=1,format=AudioFormatTag.PCM){super();let isWavFormat=!0;switch(format){case AudioFormatTag.PCM:this.formatTag=1;break;case AudioFormatTag.ALaw:this.formatTag=6;break;case AudioFormatTag.MuLaw:this.formatTag=7;break;default:isWavFormat=!1}if(this.bitsPerSample=bitsPerSample,this.samplesPerSec=samplesPerSec,this.channels=channels,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),isWavFormat){this.privHeader=new ArrayBuffer(44);const view=new DataView(this.privHeader);this.setString(view,0,"RIFF"),view.setUint32(4,0,!0),this.setString(view,8,"WAVEfmt "),view.setUint32(16,16,!0),view.setUint16(20,this.formatTag,!0),view.setUint16(22,this.channels,!0),view.setUint32(24,this.samplesPerSec,!0),view.setUint32(28,this.avgBytesPerSec,!0),view.setUint16(32,this.channels*(this.bitsPerSample/8),!0),view.setUint16(34,this.bitsPerSample,!0),this.setString(view,36,"data"),view.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new AudioStreamFormatImpl}static getAudioContext(sampleRate){const AudioContext=window.AudioContext||window.webkitAudioContext||!1;if(AudioContext)return void 0!==sampleRate&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new AudioContext({sampleRate}):new AudioContext;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(view,offset,str){for(let i=0;i<str.length;i++)view.setUint8(offset+i,str.charCodeAt(i))}}exports.AudioStreamFormatImpl=AudioStreamFormatImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/BaseAudioPlayer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseAudioPlayer=void 0;const Error_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Error.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),AudioStreamFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");exports.BaseAudioPlayer=class BaseAudioPlayer{constructor(audioFormat){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===audioFormat&&(audioFormat=Exports_js_1.AudioStreamFormat.getDefaultInputFormat()),this.init(audioFormat)}playAudioSample(newAudioData,cb,err){try{this.ensureInitializedContext();const audioData=this.formatAudioData(newAudioData),newSamplesData=new Float32Array(this.samples.length+audioData.length);newSamplesData.set(this.samples,0),newSamplesData.set(audioData,this.samples.length),this.samples=newSamplesData,cb&&cb()}catch(e){err&&err(e)}}stopAudio(cb,err){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then((()=>{cb&&cb()}),(error=>{err&&err(error)})),this.audioContext=null)}init(audioFormat){this.audioFormat=audioFormat,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const timerPeriod=200;this.autoUpdateBufferTimer=setInterval((()=>{this.updateAudioBuffer()}),timerPeriod)}}createAudioContext(){this.audioContext=AudioStreamFormat_js_1.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(audioData){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(audioData),128);case 16:return this.formatArrayBuffer(new Int16Array(audioData),32768);case 32:return this.formatArrayBuffer(new Int32Array(audioData),2147483648);default:throw new Error_js_1.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(audioData,maxValue){const float32Data=new Float32Array(audioData.length);for(let i=0;i<audioData.length;i++)float32Data[i]=audioData[i]/maxValue;return float32Data}updateAudioBuffer(){if(0===this.samples.length)return;const channelCount=this.audioFormat.channels,bufferSource=this.audioContext.createBufferSource(),frameCount=this.samples.length/channelCount,audioBuffer=this.audioContext.createBuffer(channelCount,frameCount,this.audioFormat.samplesPerSec);for(let channel=0;channel<channelCount;channel++){let channelOffset=channel;const audioData=audioBuffer.getChannelData(channel);for(let i=0;i<this.samples.length;i++,channelOffset+=channelCount)audioData[i]=this.samples[channelOffset]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),bufferSource.buffer=audioBuffer,bufferSource.connect(this.gainNode),bufferSource.start(this.startTime),this.startTime+=audioBuffer.duration,this.samples=new Float32Array}playAudio(audioData){return __awaiter(this,void 0,void 0,(function*(){null===this.audioContext&&this.createAudioContext();const source=this.audioContext.createBufferSource(),destination=this.audioContext.destination;yield this.audioContext.decodeAudioData(audioData,(newBuffer=>{source.buffer=newBuffer,source.connect(destination),source.start(0)}))}))}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/PullAudioInputStreamCallback.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PullAudioInputStreamCallback=void 0;exports.PullAudioInputStreamCallback=class PullAudioInputStreamCallback{}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/PushAudioOutputStreamCallback.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PushAudioOutputStreamCallback=void 0;exports.PushAudioOutputStreamCallback=class PushAudioOutputStreamCallback{}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/SpeakerAudioDestination.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeakerAudioDestination=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),AudioOutputStream_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputStream.js"),AudioStreamFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js"),AudioFormatToMimeType={[AudioStreamFormat_js_1.AudioFormatTag.PCM]:"audio/wav",[AudioStreamFormat_js_1.AudioFormatTag.MuLaw]:"audio/x-wav",[AudioStreamFormat_js_1.AudioFormatTag.MP3]:"audio/mpeg",[AudioStreamFormat_js_1.AudioFormatTag.OGG_OPUS]:"audio/ogg",[AudioStreamFormat_js_1.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[AudioStreamFormat_js_1.AudioFormatTag.ALaw]:"audio/x-wav",[AudioStreamFormat_js_1.AudioFormatTag.FLAC]:"audio/flac"};exports.SpeakerAudioDestination=class SpeakerAudioDestination{constructor(audioDestinationId){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=audioDestinationId||Exports_js_1.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(buffer,cb,err){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(buffer),this.updateSourceBuffer().then((()=>{cb&&cb()}),(error=>{err&&err(error)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(buffer),this.privBytesReceived+=buffer.byteLength)}close(cb,err){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((()=>{cb&&cb()}),(error=>{err&&err(error)}));else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window)if(this.privFormat.formatTag!==AudioStreamFormat_js_1.AudioFormatTag.PCM&&this.privFormat.formatTag!==AudioStreamFormat_js_1.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==AudioStreamFormat_js_1.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){let receivedAudio=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(receivedAudio).then((()=>{receivedAudio=this.privFormat.addHeader(receivedAudio);const audioBlob=new Blob([receivedAudio],{type:AudioFormatToMimeType[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(audioBlob),this.notifyPlayback().then((()=>{cb&&cb()}),(error=>{err&&err(error)}))}),(error=>{err&&err(error)}))}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(format){if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=format;const mimeType=AudioFormatToMimeType[this.privFormat.formatTag];void 0===mimeType?console.warn(`Unknown mimeType for format ${AudioStreamFormat_js_1.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(mimeType)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(mimeType),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch((reason=>{Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason))}))},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch((reason=>{Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason))}))},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((reason=>{Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason))}))):(console.warn(`Format ${AudioStreamFormat_js_1.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new AudioOutputStream_js_1.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var _a,_b;return null!==(_b=null===(_a=this.privAudio)||void 0===_a?void 0:_a.volume)&&void 0!==_b?_b:-1}set volume(volume){this.privAudio&&(this.privAudio.volume=volume)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(cb,err){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((()=>{cb&&cb()}),(error=>{err&&err(error)})),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return __awaiter(this,void 0,void 0,(function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const binary=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(binary)}catch(error){return this.privAudioBuffer.unshift(binary),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())}))}handleSourceBufferUpdateEnd(){return __awaiter(this,void 0,void 0,(function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())}))}notifyPlayback(){return __awaiter(this,void 0,void 0,(function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))}))}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AutoDetectSourceLanguageConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoDetectSourceLanguageConfig=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),LanguageIdMode_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LanguageIdMode.js");class AutoDetectSourceLanguageConfig{constructor(){this.privProperties=new Exports_js_2.PropertyCollection,this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=LanguageIdMode_js_1.LanguageIdMode.AtStart}static fromOpenRange(){const config=new AutoDetectSourceLanguageConfig;return config.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,Exports_js_1.AutoDetectSourceLanguagesOpenRangeOptionName),config}static fromLanguages(languages){Contracts_js_1.Contracts.throwIfArrayEmptyOrWhitespace(languages,"languages");const config=new AutoDetectSourceLanguageConfig;return config.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,languages.join()),config}static fromSourceLanguageConfigs(configs){if(configs.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const autoConfig=new AutoDetectSourceLanguageConfig,langs=[];return configs.forEach((config=>{if(langs.push(config.language),void 0!==config.endpointId&&""!==config.endpointId){const customProperty=config.language+Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId.toString();autoConfig.properties.setProperty(customProperty,config.endpointId)}})),autoConfig.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,langs.join()),autoConfig}get properties(){return this.privProperties}set mode(mode){mode===LanguageIdMode_js_1.LanguageIdMode.Continuous?(this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=mode}}exports.AutoDetectSourceLanguageConfig=AutoDetectSourceLanguageConfig},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AutoDetectSourceLanguageResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoDetectSourceLanguageResult=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");class AutoDetectSourceLanguageResult{constructor(language,languageDetectionConfidence){Contracts_js_1.Contracts.throwIfNullOrUndefined(language,"language"),Contracts_js_1.Contracts.throwIfNullOrUndefined(languageDetectionConfidence,"languageDetectionConfidence"),this.privLanguage=language,this.privLanguageDetectionConfidence=languageDetectionConfidence}static fromResult(result){return new AutoDetectSourceLanguageResult(result.language,result.languageDetectionConfidence)}static fromConversationTranscriptionResult(result){return new AutoDetectSourceLanguageResult(result.language,result.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}exports.AutoDetectSourceLanguageResult=AutoDetectSourceLanguageResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvatarConfig=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");exports.AvatarConfig=class AvatarConfig{constructor(character,style,videoFormat){this.privCustomized=!1,Contracts_js_1.Contracts.throwIfNullOrWhitespace(character,"character"),this.character=character,this.style=style,void 0===videoFormat&&(videoFormat=new Exports_js_1.AvatarVideoFormat),this.videoFormat=videoFormat}get customized(){return this.privCustomized}set customized(value){this.privCustomized=value}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(value){this.privBackgroundColor=value}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvatarEventArgs=exports.AvatarEventTypes=void 0,function(AvatarEventTypes){AvatarEventTypes.SwitchedToSpeaking="SwitchedToSpeaking",AvatarEventTypes.SwitchedToIdle="SwitchedToIdle",AvatarEventTypes.SessionClosed="SessionClosed"}(exports.AvatarEventTypes||(exports.AvatarEventTypes={}));exports.AvatarEventArgs=class AvatarEventArgs{constructor(audioOffset,description){this.privOffset=audioOffset,this.privDescription=description}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarSynthesizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvatarSynthesizer=void 0;const SpeechSynthesisConnectionFactory_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/SpeechSynthesisConnectionFactory.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),AudioOutputFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputFormat.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Synthesizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Synthesizer.js");class AvatarSynthesizer extends Exports_js_3.Synthesizer{constructor(speechConfig,avatarConfig){super(speechConfig),Contracts_js_1.Contracts.throwIfNullOrUndefined(avatarConfig,"avatarConfig"),this.privConnectionFactory=new SpeechSynthesisConnectionFactory_js_1.SpeechSynthesisConnectionFactory,this.privAvatarConfig=avatarConfig,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=AudioOutputFormat_js_1.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Exports_js_3.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(peerConnection){return __awaiter(this,void 0,void 0,(function*(){Contracts_js_1.Contracts.throwIfNullOrUndefined(peerConnection,"peerConnection"),this.privIceServers=peerConnection.getConfiguration().iceServers,Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const iceGatheringDone=new Exports_js_2.Deferred;peerConnection.onicegatheringstatechange=()=>{Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: ice gathering state: "+peerConnection.iceGatheringState,Exports_js_2.EventType.Debug)),"complete"===peerConnection.iceGatheringState&&(Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: ice gathering complete.",Exports_js_2.EventType.Info)),iceGatheringDone.resolve())};const sdp=yield peerConnection.createOffer();yield peerConnection.setLocalDescription(sdp),yield iceGatheringDone.promise,Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: got local SDP.",Exports_js_2.EventType.Info)),this.privProperties.setProperty(Exports_js_3.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(peerConnection.localDescription));const result=yield this.speak("",!1);if(result.reason!==Exports_js_3.ResultReason.SynthesizingAudioCompleted)return new Exports_js_3.SynthesisResult(result.resultId,result.reason,result.errorDetails,result.properties);const sdpAnswerString=atob(result.properties.getProperty(Exports_js_3.PropertyId.TalkingAvatarService_WebRTC_SDP)),sdpAnswer=new RTCSessionDescription(JSON.parse(sdpAnswerString));return yield peerConnection.setRemoteDescription(sdpAnswer),new Exports_js_3.SynthesisResult(result.resultId,result.reason,void 0,result.properties)}))}speakTextAsync(text){return __awaiter(this,void 0,void 0,(function*(){const r=yield this.speak(text,!1);return new Exports_js_3.SynthesisResult(r.resultId,r.reason,r.errorDetails,r.properties)}))}speakSsmlAsync(ssml){return __awaiter(this,void 0,void 0,(function*(){const r=yield this.speak(ssml,!0);return new Exports_js_3.SynthesisResult(r.resultId,r.reason,r.errorDetails,r.properties)}))}stopSpeakingAsync(){return __awaiter(this,void 0,void 0,(function*(){for(;this.synthesisRequestQueue.length()>0;){(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.")}return this.privAdapter.stopSpeaking()}))}stopAvatarAsync(){return __awaiter(this,void 0,void 0,(function*(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}))}close(){return __awaiter(this,void 0,void 0,(function*(){if(!this.privDisposed)return this.dispose(!0)}))}get iceServers(){return this.privIceServers}createSynthesisAdapter(authentication,connectionFactory,synthesizerConfig){return new Exports_js_1.AvatarSynthesisAdapter(authentication,connectionFactory,synthesizerConfig,this,this.privAvatarConfig)}createRestSynthesisAdapter(_authentication,_synthesizerConfig){}createSynthesizerConfig(speechConfig){const config=super.createSynthesizerConfig(speechConfig);return config.avatarEnabled=!0,config}speak(text,isSSML){return __awaiter(this,void 0,void 0,(function*(){const requestId=Exports_js_2.createNoDashGuid(),deferredResult=new Exports_js_2.Deferred;return this.synthesisRequestQueue.enqueue(new Synthesizer_js_1.SynthesisRequest(requestId,text,isSSML,(e=>{deferredResult.resolve(e),this.privSynthesizing=!1,this.adapterSpeak()}),(e=>{deferredResult.reject(e),this.privSynthesizing=!1}))),this.adapterSpeak(),deferredResult.promise}))}}exports.AvatarSynthesizer=AvatarSynthesizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarVideoFormat.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvatarVideoFormat=exports.Coordinate=void 0;exports.Coordinate=class Coordinate{constructor(x,y){this.x=x,this.y=y}};exports.AvatarVideoFormat=class AvatarVideoFormat{constructor(codec="H264",bitrate=2e6,width=1920,height=1080){this.codec=codec,this.bitrate=bitrate,this.width=width,this.height=height}setCropRange(topLeft,bottomRight){this.cropRange={bottomRight,topLeft}}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarWebRTCConnectionResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvatarWebRTCConnectionResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class AvatarWebRTCConnectionResult extends Exports_js_1.SynthesisResult{constructor(SDPAnswer,resultId,reason,errorDetails,properties){super(resultId,reason,errorDetails,properties),this.privSDPAnswer=SDPAnswer}get SDPAnswer(){return this.privSDPAnswer}}exports.AvatarWebRTCConnectionResult=AvatarWebRTCConnectionResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/BotFrameworkConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BotFrameworkConfig=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),DialogServiceConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/DialogServiceConfig.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class BotFrameworkConfig extends DialogServiceConfig_js_1.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(subscription,region,botId){Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscription,"subscription"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const botFrameworkConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl;return botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.BotFramework),botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Key,subscription),botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Region,region),botId&&botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,botId),botFrameworkConfig}static fromAuthorizationToken(authorizationToken,region,botId){Contracts_js_1.Contracts.throwIfNullOrWhitespace(authorizationToken,"authorizationToken"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const botFrameworkConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl;return botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.BotFramework),botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceAuthorization_Token,authorizationToken),botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Region,region),botId&&botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,botId),botFrameworkConfig}static fromHost(host,subscriptionKey,botId){Contracts_js_1.Contracts.throwIfNullOrUndefined(host,"host");const resolvedHost=host instanceof URL?host:new URL(`wss://${host}.convai.speech.azure.us`);Contracts_js_1.Contracts.throwIfNullOrUndefined(resolvedHost,"resolvedHost");const botFrameworkConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl;return botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.BotFramework),botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Host,resolvedHost.toString()),void 0!==subscriptionKey&&botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Key,subscriptionKey),botFrameworkConfig}static fromEndpoint(endpoint,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(endpoint,"endpoint");const botFrameworkConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl;return botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.BotFramework),botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Endpoint,endpoint.toString()),void 0!==subscriptionKey&&botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Key,subscriptionKey),botFrameworkConfig}}exports.BotFrameworkConfig=BotFrameworkConfig},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationDetails.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CancellationDetails=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),CancellationDetailsBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationDetailsBase.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class CancellationDetails extends CancellationDetailsBase_js_1.CancellationDetailsBase{constructor(reason,errorDetails,errorCode){super(reason,errorDetails,errorCode)}static fromResult(result){let reason=Exports_js_2.CancellationReason.Error,errorCode=Exports_js_2.CancellationErrorCode.NoError;if(result instanceof Exports_js_2.RecognitionResult&&result.json){const simpleSpeech=Exports_js_1.SimpleSpeechPhrase.fromJSON(result.json);reason=Exports_js_1.EnumTranslation.implTranslateCancelResult(simpleSpeech.RecognitionStatus)}return result.properties&&(errorCode=Exports_js_2.CancellationErrorCode[result.properties.getProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.NoError])]),new CancellationDetails(reason,result.errorDetails||Exports_js_1.EnumTranslation.implTranslateErrorDetails(errorCode),errorCode)}}exports.CancellationDetails=CancellationDetails},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationDetailsBase.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CancellationDetailsBase=void 0;exports.CancellationDetailsBase=class CancellationDetailsBase{constructor(reason,errorDetails,errorCode){this.privReason=reason,this.privErrorDetails=errorDetails,this.privErrorCode=errorCode}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationErrorCodes.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CancellationErrorCode=void 0,function(CancellationErrorCode){CancellationErrorCode[CancellationErrorCode.NoError=0]="NoError",CancellationErrorCode[CancellationErrorCode.AuthenticationFailure=1]="AuthenticationFailure",CancellationErrorCode[CancellationErrorCode.BadRequestParameters=2]="BadRequestParameters",CancellationErrorCode[CancellationErrorCode.TooManyRequests=3]="TooManyRequests",CancellationErrorCode[CancellationErrorCode.ConnectionFailure=4]="ConnectionFailure",CancellationErrorCode[CancellationErrorCode.ServiceTimeout=5]="ServiceTimeout",CancellationErrorCode[CancellationErrorCode.ServiceError=6]="ServiceError",CancellationErrorCode[CancellationErrorCode.RuntimeError=7]="RuntimeError",CancellationErrorCode[CancellationErrorCode.Forbidden=8]="Forbidden"}(exports.CancellationErrorCode||(exports.CancellationErrorCode={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationEventArgsBase.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CancellationEventArgsBase=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class CancellationEventArgsBase extends Exports_js_1.RecognitionEventArgs{constructor(reason,errorDetails,errorCode,offset,sessionId){super(offset,sessionId),this.privReason=reason,this.privErrorDetails=errorDetails,this.privErrorCode=errorCode}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}exports.CancellationEventArgsBase=CancellationEventArgsBase},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationReason.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CancellationReason=void 0,function(CancellationReason){CancellationReason[CancellationReason.Error=0]="Error",CancellationReason[CancellationReason.EndOfStream=1]="EndOfStream"}(exports.CancellationReason||(exports.CancellationReason={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Connection.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Connection=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),ConnectionMessage_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionMessage.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class Connection{static fromRecognizer(recognizer){const recoBase=recognizer.internalData,ret=new Connection;return ret.privInternalData=recoBase,ret.setupEvents(),ret}static fromSynthesizer(synthesizer){const synthBase=synthesizer.internalData,ret=new Connection;return ret.privInternalData=synthBase,ret.setupEvents(),ret}openConnection(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.privInternalData.connect(),cb,err)}closeConnection(cb,err){if(this.privInternalData instanceof Exports_js_1.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");Exports_js_2.marshalPromiseToCallbacks(this.privInternalData.disconnect(),cb,err)}setMessageProperty(path,propertyName,propertyValue){if(Contracts_js_1.Contracts.throwIfNullOrWhitespace(propertyName,"propertyName"),this.privInternalData instanceof Exports_js_1.ServiceRecognizerBase){if("speech.context"!==path.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(propertyName,propertyValue)}else if(this.privInternalData instanceof Exports_js_1.SynthesisAdapterBase){if("synthesis.context"!==path.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(propertyName,propertyValue)}}sendMessageAsync(path,payload,success,error){Exports_js_2.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(path,payload),success,error)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach((connectionEvent=>{"ConnectionEstablishedEvent"===connectionEvent.name?this.connected&&this.connected(new Exports_js_3.ConnectionEventArgs(connectionEvent.connectionId)):"ConnectionClosedEvent"===connectionEvent.name?this.disconnected&&this.disconnected(new Exports_js_3.ConnectionEventArgs(connectionEvent.connectionId)):"ConnectionMessageSentEvent"===connectionEvent.name?this.messageSent&&this.messageSent(new Exports_js_3.ConnectionMessageEventArgs(new ConnectionMessage_js_1.ConnectionMessageImpl(connectionEvent.message))):"ConnectionMessageReceivedEvent"===connectionEvent.name&&this.messageReceived&&this.messageReceived(new Exports_js_3.ConnectionMessageEventArgs(new ConnectionMessage_js_1.ConnectionMessageImpl(connectionEvent.message)))})),this.privServiceEventListener=this.privInternalData.serviceEvents.attach((e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new Exports_js_3.ServiceEventArgs(e.jsonString,e.name))}))}}exports.Connection=Connection},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ConnectionEventArgs extends Exports_js_1.SessionEventArgs{}exports.ConnectionEventArgs=ConnectionEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionMessage.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionMessageImpl=exports.ConnectionMessage=void 0;const HeaderNames_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/HeaderNames.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),PropertyCollection_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyCollection.js"),PropertyId_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyId.js");exports.ConnectionMessage=class ConnectionMessage{};exports.ConnectionMessageImpl=class ConnectionMessageImpl{constructor(message){this.privConnectionMessage=message,this.privProperties=new PropertyCollection_js_1.PropertyCollection,this.privConnectionMessage.headers[HeaderNames_js_1.HeaderNames.ConnectionId]&&this.privProperties.setProperty(PropertyId_js_1.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[HeaderNames_js_1.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach((header=>{this.privProperties.setProperty(header,this.privConnectionMessage.headers[header])}))}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((key=>key.toLowerCase()==="path".toLowerCase()))]}get isTextMessage(){return this.privConnectionMessage.messageType===Exports_js_1.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===Exports_js_1.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionMessageEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionMessageEventArgs=void 0;exports.ConnectionMessageEventArgs=class ConnectionMessageEventArgs{constructor(message){this.privConnectionMessage=message}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Contracts=void 0;class Contracts{static throwIfNullOrUndefined(param,name){if(null==param)throw new Error("throwIfNullOrUndefined:"+name)}static throwIfNull(param,name){if(null===param)throw new Error("throwIfNull:"+name)}static throwIfNullOrWhitespace(param,name){if(Contracts.throwIfNullOrUndefined(param,name),(""+param).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+name)}static throwIfNullOrTooLong(param,name,maxLength){if(Contracts.throwIfNullOrUndefined(param,name),(""+param).length>maxLength)throw new Error("throwIfNullOrTooLong:"+name+" (more than "+maxLength.toString()+" characters)")}static throwIfNullOrTooShort(param,name,minLength){if(Contracts.throwIfNullOrUndefined(param,name),(""+param).length<minLength)throw new Error("throwIfNullOrTooShort:"+name+" (less than "+minLength.toString()+" characters)")}static throwIfDisposed(isDisposed){if(isDisposed)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(array,name){if(Contracts.throwIfNullOrUndefined(array,name),0===array.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+name);for(const item of array)Contracts.throwIfNullOrWhitespace(item,name)}static throwIfFileDoesNotExist(param,name){Contracts.throwIfNullOrWhitespace(param,name)}static throwIfNotUndefined(param,name){if(void 0!==param)throw new Error("throwIfNotUndefined:"+name)}}exports.Contracts=Contracts},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConversationTranscriptionCanceledEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranscriptionCanceledEventArgs=void 0;const CancellationEventArgsBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationEventArgsBase.js");class ConversationTranscriptionCanceledEventArgs extends CancellationEventArgsBase_js_1.CancellationEventArgsBase{}exports.ConversationTranscriptionCanceledEventArgs=ConversationTranscriptionCanceledEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CustomCommandsConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomCommandsConfig=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),DialogServiceConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/DialogServiceConfig.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class CustomCommandsConfig extends DialogServiceConfig_js_1.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(applicationId,subscription,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(applicationId,"applicationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscription,"subscription"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const customCommandsConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl;return customCommandsConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.CustomCommands),customCommandsConfig.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,applicationId),customCommandsConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Key,subscription),customCommandsConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Region,region),customCommandsConfig}static fromAuthorizationToken(applicationId,authorizationToken,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(applicationId,"applicationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(authorizationToken,"authorizationToken"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const customCommandsConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl;return customCommandsConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.CustomCommands),customCommandsConfig.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,applicationId),customCommandsConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceAuthorization_Token,authorizationToken),customCommandsConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Region,region),customCommandsConfig}set applicationId(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value"),this.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,value)}get applicationId(){return this.getProperty(Exports_js_1.PropertyId.Conversation_ApplicationId)}}exports.CustomCommandsConfig=CustomCommandsConfig},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Diagnostics.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Diagnostics=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.browser/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");class Diagnostics{static SetLoggingLevel(logLevel){this.privListener=new Exports_js_1.ConsoleLoggingListener(logLevel),Exports_js_2.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(path){if("undefined"!=typeof window)throw new Error("File system logging not available in browser.");this.privListener&&(this.privListener.logPath=path)}}exports.Diagnostics=Diagnostics,Diagnostics.privListener=void 0},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/DialogServiceConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DialogServiceConfigImpl=exports.DialogServiceConfig=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class DialogServiceConfig{constructor(){}set applicationId(value){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}}exports.DialogServiceConfig=DialogServiceConfig;exports.DialogServiceConfigImpl=class DialogServiceConfigImpl extends DialogServiceConfig{constructor(){super(),this.privSpeechConfig=new Exports_js_1.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value"),this.privSpeechConfig.speechRecognitionLanguage=value}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(value){this.privSpeechConfig.outputFormat=value}setProperty(name,value){this.privSpeechConfig.setProperty(name,value)}getProperty(name,def){return this.privSpeechConfig.getProperty(name)}setProxy(proxyHostName,proxyPort,proxyUserName,proxyPassword){this.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyHostName,proxyHostName),this.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyPort,`${proxyPort}`),proxyUserName&&this.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyUserName,proxyUserName),proxyPassword&&this.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyPassword,proxyPassword)}setServiceProperty(name,value,channel){this.privSpeechConfig.setServiceProperty(name,value)}close(){}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/DialogServiceConnector.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DialogServiceConnector=void 0;const DialogConnectorFactory_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/DialogConnectorFactory.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),PropertyId_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyId.js");class DialogServiceConnector extends Exports_js_3.Recognizer{constructor(dialogConfig,audioConfig){const dialogServiceConfigImpl=dialogConfig;Contracts_js_1.Contracts.throwIfNull(dialogConfig,"dialogConfig"),super(audioConfig,dialogServiceConfigImpl.properties,new DialogConnectorFactory_js_1.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=dialogServiceConfigImpl.properties.clone();const agentConfig=this.buildAgentConfig();this.privReco.agentConfig.set(agentConfig)}connect(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.privReco.connect(),cb,err)}disconnect(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.privReco.disconnect(),cb,err)}get authorizationToken(){return this.properties.getProperty(PropertyId_js_1.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.properties.setProperty(PropertyId_js_1.PropertyId.SpeechServiceAuthorization_Token,token)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(PropertyId_js_1.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(speechActivityTemplate){this.properties.setProperty(PropertyId_js_1.PropertyId.Conversation_Speech_Activity_Template,speechActivityTemplate)}listenOnceAsync(cb,err){if(this.isTurnComplete){Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);const retPromise=(()=>__awaiter(this,void 0,void 0,(function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const ret=new Exports_js_2.Deferred;yield this.privReco.recognize(Exports_js_1.RecognitionMode.Conversation,ret.resolve,ret.reject);const e=yield ret.promise;return yield this.implRecognizerStop(),e})))();retPromise.catch((()=>{this.dispose(!0).catch((()=>{}))})),Exports_js_2.marshalPromiseToCallbacks(retPromise.finally((()=>{this.isTurnComplete=!0})),cb,err)}}sendActivityAsync(activity,cb,errCb){Exports_js_2.marshalPromiseToCallbacks(this.privReco.sendMessage(activity),cb,errCb)}close(cb,err){Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Exports_js_2.marshalPromiseToCallbacks(this.dispose(!0),cb,err)}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privIsDisposed||disposing&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield _super.dispose.call(this,disposing))}))}createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties)}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const audioSource=audioConfig;return new Exports_js_1.DialogServiceAdapter(authentication,connectionFactory,audioSource,recognizerConfig,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(PropertyId_js_1.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(PropertyId_js_1.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(PropertyId_js_1.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(PropertyId_js_1.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}exports.DialogServiceConnector=DialogServiceConnector},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var AudioConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioConfig.js");Object.defineProperty(exports,"AudioConfig",{enumerable:!0,get:function(){return AudioConfig_js_1.AudioConfig}});var AudioStreamFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioStreamFormat.js");Object.defineProperty(exports,"AudioStreamFormat",{enumerable:!0,get:function(){return AudioStreamFormat_js_1.AudioStreamFormat}}),Object.defineProperty(exports,"AudioFormatTag",{enumerable:!0,get:function(){return AudioStreamFormat_js_1.AudioFormatTag}});var AudioInputStream_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioInputStream.js");Object.defineProperty(exports,"AudioInputStream",{enumerable:!0,get:function(){return AudioInputStream_js_1.AudioInputStream}}),Object.defineProperty(exports,"PullAudioInputStream",{enumerable:!0,get:function(){return AudioInputStream_js_1.PullAudioInputStream}}),Object.defineProperty(exports,"PushAudioInputStream",{enumerable:!0,get:function(){return AudioInputStream_js_1.PushAudioInputStream}});var AudioOutputStream_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputStream.js");Object.defineProperty(exports,"AudioOutputStream",{enumerable:!0,get:function(){return AudioOutputStream_js_1.AudioOutputStream}}),Object.defineProperty(exports,"PullAudioOutputStream",{enumerable:!0,get:function(){return AudioOutputStream_js_1.PullAudioOutputStream}}),Object.defineProperty(exports,"PushAudioOutputStream",{enumerable:!0,get:function(){return AudioOutputStream_js_1.PushAudioOutputStream}});var CancellationReason_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationReason.js");Object.defineProperty(exports,"CancellationReason",{enumerable:!0,get:function(){return CancellationReason_js_1.CancellationReason}});var PullAudioInputStreamCallback_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/PullAudioInputStreamCallback.js");Object.defineProperty(exports,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return PullAudioInputStreamCallback_js_1.PullAudioInputStreamCallback}});var PushAudioOutputStreamCallback_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/PushAudioOutputStreamCallback.js");Object.defineProperty(exports,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return PushAudioOutputStreamCallback_js_1.PushAudioOutputStreamCallback}});var KeywordRecognitionModel_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/KeywordRecognitionModel.js");Object.defineProperty(exports,"KeywordRecognitionModel",{enumerable:!0,get:function(){return KeywordRecognitionModel_js_1.KeywordRecognitionModel}});var SessionEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SessionEventArgs.js");Object.defineProperty(exports,"SessionEventArgs",{enumerable:!0,get:function(){return SessionEventArgs_js_1.SessionEventArgs}});var RecognitionEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionEventArgs.js");Object.defineProperty(exports,"RecognitionEventArgs",{enumerable:!0,get:function(){return RecognitionEventArgs_js_1.RecognitionEventArgs}});var OutputFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/OutputFormat.js");Object.defineProperty(exports,"OutputFormat",{enumerable:!0,get:function(){return OutputFormat_js_1.OutputFormat}});var IntentRecognitionEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionEventArgs.js");Object.defineProperty(exports,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return IntentRecognitionEventArgs_js_1.IntentRecognitionEventArgs}});var RecognitionResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionResult.js");Object.defineProperty(exports,"RecognitionResult",{enumerable:!0,get:function(){return RecognitionResult_js_1.RecognitionResult}});var SpeechRecognitionResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionResult.js");Object.defineProperty(exports,"SpeechRecognitionResult",{enumerable:!0,get:function(){return SpeechRecognitionResult_js_1.SpeechRecognitionResult}});var IntentRecognitionResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionResult.js");Object.defineProperty(exports,"IntentRecognitionResult",{enumerable:!0,get:function(){return IntentRecognitionResult_js_1.IntentRecognitionResult}});var LanguageUnderstandingModel_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LanguageUnderstandingModel.js");Object.defineProperty(exports,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return LanguageUnderstandingModel_js_1.LanguageUnderstandingModel}});var SpeechRecognitionEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionEventArgs.js");Object.defineProperty(exports,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return SpeechRecognitionEventArgs_js_1.SpeechRecognitionEventArgs}}),Object.defineProperty(exports,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return SpeechRecognitionEventArgs_js_1.ConversationTranscriptionEventArgs}}),Object.defineProperty(exports,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return SpeechRecognitionEventArgs_js_1.MeetingTranscriptionEventArgs}});var SpeechRecognitionCanceledEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionCanceledEventArgs.js");Object.defineProperty(exports,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return SpeechRecognitionCanceledEventArgs_js_1.SpeechRecognitionCanceledEventArgs}});var TranslationRecognitionEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionEventArgs.js");Object.defineProperty(exports,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return TranslationRecognitionEventArgs_js_1.TranslationRecognitionEventArgs}});var TranslationSynthesisEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisEventArgs.js");Object.defineProperty(exports,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return TranslationSynthesisEventArgs_js_1.TranslationSynthesisEventArgs}});var TranslationRecognitionResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionResult.js");Object.defineProperty(exports,"TranslationRecognitionResult",{enumerable:!0,get:function(){return TranslationRecognitionResult_js_1.TranslationRecognitionResult}});var TranslationSynthesisResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisResult.js");Object.defineProperty(exports,"TranslationSynthesisResult",{enumerable:!0,get:function(){return TranslationSynthesisResult_js_1.TranslationSynthesisResult}});var ResultReason_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ResultReason.js");Object.defineProperty(exports,"ResultReason",{enumerable:!0,get:function(){return ResultReason_js_1.ResultReason}});var SpeechConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechConfig.js");Object.defineProperty(exports,"SpeechConfig",{enumerable:!0,get:function(){return SpeechConfig_js_1.SpeechConfig}}),Object.defineProperty(exports,"SpeechConfigImpl",{enumerable:!0,get:function(){return SpeechConfig_js_1.SpeechConfigImpl}});var SpeechTranslationConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechTranslationConfig.js");Object.defineProperty(exports,"SpeechTranslationConfig",{enumerable:!0,get:function(){return SpeechTranslationConfig_js_1.SpeechTranslationConfig}}),Object.defineProperty(exports,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return SpeechTranslationConfig_js_1.SpeechTranslationConfigImpl}});var PropertyCollection_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyCollection.js");Object.defineProperty(exports,"PropertyCollection",{enumerable:!0,get:function(){return PropertyCollection_js_1.PropertyCollection}});var PropertyId_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyId.js");Object.defineProperty(exports,"PropertyId",{enumerable:!0,get:function(){return PropertyId_js_1.PropertyId}});var Recognizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Recognizer.js");Object.defineProperty(exports,"Recognizer",{enumerable:!0,get:function(){return Recognizer_js_1.Recognizer}});var SpeechRecognizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognizer.js");Object.defineProperty(exports,"SpeechRecognizer",{enumerable:!0,get:function(){return SpeechRecognizer_js_1.SpeechRecognizer}});var IntentRecognizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognizer.js");Object.defineProperty(exports,"IntentRecognizer",{enumerable:!0,get:function(){return IntentRecognizer_js_1.IntentRecognizer}});var VoiceProfileType_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfileType.js");Object.defineProperty(exports,"VoiceProfileType",{enumerable:!0,get:function(){return VoiceProfileType_js_1.VoiceProfileType}});var TranslationRecognizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognizer.js");Object.defineProperty(exports,"TranslationRecognizer",{enumerable:!0,get:function(){return TranslationRecognizer_js_1.TranslationRecognizer}});var Translations_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Translations.js");Object.defineProperty(exports,"Translations",{enumerable:!0,get:function(){return Translations_js_1.Translations}});var NoMatchReason_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchReason.js");Object.defineProperty(exports,"NoMatchReason",{enumerable:!0,get:function(){return NoMatchReason_js_1.NoMatchReason}});var NoMatchDetails_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchDetails.js");Object.defineProperty(exports,"NoMatchDetails",{enumerable:!0,get:function(){return NoMatchDetails_js_1.NoMatchDetails}});var TranslationRecognitionCanceledEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionCanceledEventArgs.js");Object.defineProperty(exports,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return TranslationRecognitionCanceledEventArgs_js_1.TranslationRecognitionCanceledEventArgs}});var IntentRecognitionCanceledEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionCanceledEventArgs.js");Object.defineProperty(exports,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return IntentRecognitionCanceledEventArgs_js_1.IntentRecognitionCanceledEventArgs}});var CancellationDetailsBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationDetailsBase.js");Object.defineProperty(exports,"CancellationDetailsBase",{enumerable:!0,get:function(){return CancellationDetailsBase_js_1.CancellationDetailsBase}});var CancellationDetails_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationDetails.js");Object.defineProperty(exports,"CancellationDetails",{enumerable:!0,get:function(){return CancellationDetails_js_1.CancellationDetails}});var CancellationErrorCodes_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationErrorCodes.js");Object.defineProperty(exports,"CancellationErrorCode",{enumerable:!0,get:function(){return CancellationErrorCodes_js_1.CancellationErrorCode}});var ConnectionEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionEventArgs.js");Object.defineProperty(exports,"ConnectionEventArgs",{enumerable:!0,get:function(){return ConnectionEventArgs_js_1.ConnectionEventArgs}});var ServiceEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ServiceEventArgs.js");Object.defineProperty(exports,"ServiceEventArgs",{enumerable:!0,get:function(){return ServiceEventArgs_js_1.ServiceEventArgs}});var Connection_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Connection.js");Object.defineProperty(exports,"Connection",{enumerable:!0,get:function(){return Connection_js_1.Connection}});var PhraseListGrammar_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PhraseListGrammar.js");Object.defineProperty(exports,"PhraseListGrammar",{enumerable:!0,get:function(){return PhraseListGrammar_js_1.PhraseListGrammar}});var DialogServiceConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/DialogServiceConfig.js");Object.defineProperty(exports,"DialogServiceConfig",{enumerable:!0,get:function(){return DialogServiceConfig_js_1.DialogServiceConfig}});var BotFrameworkConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/BotFrameworkConfig.js");Object.defineProperty(exports,"BotFrameworkConfig",{enumerable:!0,get:function(){return BotFrameworkConfig_js_1.BotFrameworkConfig}});var CustomCommandsConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CustomCommandsConfig.js");Object.defineProperty(exports,"CustomCommandsConfig",{enumerable:!0,get:function(){return CustomCommandsConfig_js_1.CustomCommandsConfig}});var DialogServiceConnector_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/DialogServiceConnector.js");Object.defineProperty(exports,"DialogServiceConnector",{enumerable:!0,get:function(){return DialogServiceConnector_js_1.DialogServiceConnector}});var ActivityReceivedEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ActivityReceivedEventArgs.js");Object.defineProperty(exports,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return ActivityReceivedEventArgs_js_1.ActivityReceivedEventArgs}});var TurnStatusReceivedEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TurnStatusReceivedEventArgs.js");Object.defineProperty(exports,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return TurnStatusReceivedEventArgs_js_1.TurnStatusReceivedEventArgs}});var ServicePropertyChannel_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ServicePropertyChannel.js");Object.defineProperty(exports,"ServicePropertyChannel",{enumerable:!0,get:function(){return ServicePropertyChannel_js_1.ServicePropertyChannel}});var ProfanityOption_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ProfanityOption.js");Object.defineProperty(exports,"ProfanityOption",{enumerable:!0,get:function(){return ProfanityOption_js_1.ProfanityOption}});var BaseAudioPlayer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/BaseAudioPlayer.js");Object.defineProperty(exports,"BaseAudioPlayer",{enumerable:!0,get:function(){return BaseAudioPlayer_js_1.BaseAudioPlayer}});var ConnectionMessageEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionMessageEventArgs.js");Object.defineProperty(exports,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return ConnectionMessageEventArgs_js_1.ConnectionMessageEventArgs}});var ConnectionMessage_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConnectionMessage.js");Object.defineProperty(exports,"ConnectionMessage",{enumerable:!0,get:function(){return ConnectionMessage_js_1.ConnectionMessage}});var VoiceProfile_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfile.js");Object.defineProperty(exports,"VoiceProfile",{enumerable:!0,get:function(){return VoiceProfile_js_1.VoiceProfile}});var VoiceProfileEnrollmentResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfileEnrollmentResult.js");Object.defineProperty(exports,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return VoiceProfileEnrollmentResult_js_1.VoiceProfileEnrollmentResult}}),Object.defineProperty(exports,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return VoiceProfileEnrollmentResult_js_1.VoiceProfileEnrollmentCancellationDetails}});var VoiceProfileResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfileResult.js");Object.defineProperty(exports,"VoiceProfileResult",{enumerable:!0,get:function(){return VoiceProfileResult_js_1.VoiceProfileResult}}),Object.defineProperty(exports,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return VoiceProfileResult_js_1.VoiceProfileCancellationDetails}});var VoiceProfilePhraseResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfilePhraseResult.js");Object.defineProperty(exports,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return VoiceProfilePhraseResult_js_1.VoiceProfilePhraseResult}});var VoiceProfileClient_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfileClient.js");Object.defineProperty(exports,"VoiceProfileClient",{enumerable:!0,get:function(){return VoiceProfileClient_js_1.VoiceProfileClient}});var SpeakerRecognizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeakerRecognizer.js");Object.defineProperty(exports,"SpeakerRecognizer",{enumerable:!0,get:function(){return SpeakerRecognizer_js_1.SpeakerRecognizer}});var SpeakerIdentificationModel_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeakerIdentificationModel.js");Object.defineProperty(exports,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return SpeakerIdentificationModel_js_1.SpeakerIdentificationModel}});var SpeakerVerificationModel_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeakerVerificationModel.js");Object.defineProperty(exports,"SpeakerVerificationModel",{enumerable:!0,get:function(){return SpeakerVerificationModel_js_1.SpeakerVerificationModel}});var AutoDetectSourceLanguageConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AutoDetectSourceLanguageConfig.js");Object.defineProperty(exports,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return AutoDetectSourceLanguageConfig_js_1.AutoDetectSourceLanguageConfig}});var AutoDetectSourceLanguageResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AutoDetectSourceLanguageResult.js");Object.defineProperty(exports,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return AutoDetectSourceLanguageResult_js_1.AutoDetectSourceLanguageResult}});var SourceLanguageConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SourceLanguageConfig.js");Object.defineProperty(exports,"SourceLanguageConfig",{enumerable:!0,get:function(){return SourceLanguageConfig_js_1.SourceLanguageConfig}});var SpeakerRecognitionResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeakerRecognitionResult.js");Object.defineProperty(exports,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return SpeakerRecognitionResult_js_1.SpeakerRecognitionResult}}),Object.defineProperty(exports,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return SpeakerRecognitionResult_js_1.SpeakerRecognitionResultType}}),Object.defineProperty(exports,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return SpeakerRecognitionResult_js_1.SpeakerRecognitionCancellationDetails}});var Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Exports.js");Object.defineProperty(exports,"Conversation",{enumerable:!0,get:function(){return Exports_js_1.Conversation}}),Object.defineProperty(exports,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Exports_js_1.ConversationExpirationEventArgs}}),Object.defineProperty(exports,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Exports_js_1.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(exports,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Exports_js_1.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(exports,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Exports_js_1.ConversationTranslationEventArgs}}),Object.defineProperty(exports,"ConversationTranslationResult",{enumerable:!0,get:function(){return Exports_js_1.ConversationTranslationResult}}),Object.defineProperty(exports,"ConversationTranslator",{enumerable:!0,get:function(){return Exports_js_1.ConversationTranslator}}),Object.defineProperty(exports,"ConversationTranscriber",{enumerable:!0,get:function(){return Exports_js_1.ConversationTranscriber}}),Object.defineProperty(exports,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Exports_js_1.ConversationTranscriptionResult}}),Object.defineProperty(exports,"Meeting",{enumerable:!0,get:function(){return Exports_js_1.Meeting}}),Object.defineProperty(exports,"MeetingTranscriber",{enumerable:!0,get:function(){return Exports_js_1.MeetingTranscriber}}),Object.defineProperty(exports,"Participant",{enumerable:!0,get:function(){return Exports_js_1.Participant}}),Object.defineProperty(exports,"ParticipantChangedReason",{enumerable:!0,get:function(){return Exports_js_1.ParticipantChangedReason}}),Object.defineProperty(exports,"User",{enumerable:!0,get:function(){return Exports_js_1.User}});var Synthesizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Synthesizer.js");Object.defineProperty(exports,"Synthesizer",{enumerable:!0,get:function(){return Synthesizer_js_1.Synthesizer}});var SpeechSynthesisOutputFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisOutputFormat.js");Object.defineProperty(exports,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat}});var SpeechSynthesizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesizer.js");Object.defineProperty(exports,"SpeechSynthesizer",{enumerable:!0,get:function(){return SpeechSynthesizer_js_1.SpeechSynthesizer}});var SynthesisResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SynthesisResult.js");Object.defineProperty(exports,"SynthesisResult",{enumerable:!0,get:function(){return SynthesisResult_js_1.SynthesisResult}});var SpeechSynthesisResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisResult.js");Object.defineProperty(exports,"SpeechSynthesisResult",{enumerable:!0,get:function(){return SpeechSynthesisResult_js_1.SpeechSynthesisResult}});var SpeechSynthesisEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisEventArgs.js");Object.defineProperty(exports,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return SpeechSynthesisEventArgs_js_1.SpeechSynthesisEventArgs}});var SpeechSynthesisWordBoundaryEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js");Object.defineProperty(exports,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return SpeechSynthesisWordBoundaryEventArgs_js_1.SpeechSynthesisWordBoundaryEventArgs}});var SpeechSynthesisBookmarkEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisBookmarkEventArgs.js");Object.defineProperty(exports,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return SpeechSynthesisBookmarkEventArgs_js_1.SpeechSynthesisBookmarkEventArgs}});var SpeechSynthesisVisemeEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisVisemeEventArgs.js");Object.defineProperty(exports,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return SpeechSynthesisVisemeEventArgs_js_1.SpeechSynthesisVisemeEventArgs}});var SpeechSynthesisBoundaryType_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisBoundaryType.js");Object.defineProperty(exports,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return SpeechSynthesisBoundaryType_js_1.SpeechSynthesisBoundaryType}});var SynthesisVoicesResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SynthesisVoicesResult.js");Object.defineProperty(exports,"SynthesisVoicesResult",{enumerable:!0,get:function(){return SynthesisVoicesResult_js_1.SynthesisVoicesResult}});var VoiceInfo_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceInfo.js");Object.defineProperty(exports,"VoiceInfo",{enumerable:!0,get:function(){return VoiceInfo_js_1.VoiceInfo}});var SpeakerAudioDestination_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/SpeakerAudioDestination.js");Object.defineProperty(exports,"SpeakerAudioDestination",{enumerable:!0,get:function(){return SpeakerAudioDestination_js_1.SpeakerAudioDestination}});var ConversationTranscriptionCanceledEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ConversationTranscriptionCanceledEventArgs.js");Object.defineProperty(exports,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return ConversationTranscriptionCanceledEventArgs_js_1.ConversationTranscriptionCanceledEventArgs}});var MeetingTranscriptionCanceledEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/MeetingTranscriptionCanceledEventArgs.js");Object.defineProperty(exports,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return MeetingTranscriptionCanceledEventArgs_js_1.MeetingTranscriptionCanceledEventArgs}});var PronunciationAssessmentGradingSystem_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PronunciationAssessmentGradingSystem.js");Object.defineProperty(exports,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return PronunciationAssessmentGradingSystem_js_1.PronunciationAssessmentGradingSystem}});var PronunciationAssessmentGranularity_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PronunciationAssessmentGranularity.js");Object.defineProperty(exports,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return PronunciationAssessmentGranularity_js_1.PronunciationAssessmentGranularity}});var PronunciationAssessmentConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PronunciationAssessmentConfig.js");Object.defineProperty(exports,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return PronunciationAssessmentConfig_js_1.PronunciationAssessmentConfig}});var PronunciationAssessmentResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PronunciationAssessmentResult.js");Object.defineProperty(exports,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return PronunciationAssessmentResult_js_1.PronunciationAssessmentResult}});var LanguageIdMode_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LanguageIdMode.js");Object.defineProperty(exports,"LanguageIdMode",{enumerable:!0,get:function(){return LanguageIdMode_js_1.LanguageIdMode}});var AvatarConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarConfig.js");Object.defineProperty(exports,"AvatarConfig",{enumerable:!0,get:function(){return AvatarConfig_js_1.AvatarConfig}});var AvatarEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarEventArgs.js");Object.defineProperty(exports,"AvatarEventArgs",{enumerable:!0,get:function(){return AvatarEventArgs_js_1.AvatarEventArgs}});var AvatarSynthesizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarSynthesizer.js");Object.defineProperty(exports,"AvatarSynthesizer",{enumerable:!0,get:function(){return AvatarSynthesizer_js_1.AvatarSynthesizer}});var AvatarVideoFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarVideoFormat.js");Object.defineProperty(exports,"AvatarVideoFormat",{enumerable:!0,get:function(){return AvatarVideoFormat_js_1.AvatarVideoFormat}}),Object.defineProperty(exports,"Coordinate",{enumerable:!0,get:function(){return AvatarVideoFormat_js_1.Coordinate}});var AvatarWebRTCConnectionResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/AvatarWebRTCConnectionResult.js");Object.defineProperty(exports,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return AvatarWebRTCConnectionResult_js_1.AvatarWebRTCConnectionResult}});var Diagnostics_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Diagnostics.js");Object.defineProperty(exports,"Diagnostics",{enumerable:!0,get:function(){return Diagnostics_js_1.Diagnostics}});var LogLevel_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LogLevel.js");Object.defineProperty(exports,"LogLevel",{enumerable:!0,get:function(){return LogLevel_js_1.LogLevel}})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionCanceledEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntentRecognitionCanceledEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class IntentRecognitionCanceledEventArgs extends Exports_js_1.IntentRecognitionEventArgs{constructor(reason,errorDetails,errorCode,result,offset,sessionId){super(result,offset,sessionId),this.privReason=reason,this.privErrorDetails=errorDetails,this.privErrorCode=errorCode}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}exports.IntentRecognitionCanceledEventArgs=IntentRecognitionCanceledEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntentRecognitionEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class IntentRecognitionEventArgs extends Exports_js_1.RecognitionEventArgs{constructor(result,offset,sessionId){super(offset,sessionId),this.privResult=result}get result(){return this.privResult}}exports.IntentRecognitionEventArgs=IntentRecognitionEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognitionResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntentRecognitionResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class IntentRecognitionResult extends Exports_js_1.SpeechRecognitionResult{constructor(intentId,resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties){super(resultId,reason,text,duration,offset,language,languageDetectionConfidence,void 0,errorDetails,json,properties),this.privIntentId=intentId}get intentId(){return this.privIntentId}}exports.IntentRecognitionResult=IntentRecognitionResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/IntentRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntentRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class IntentRecognizer extends Exports_js_3.Recognizer{constructor(speechConfig,audioConfig){Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,"speechConfig");const configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNullOrUndefined(configImpl,"speechConfig"),super(audioConfig,configImpl.properties,new Exports_js_1.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=configImpl.properties,Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(value){this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,value)}get properties(){return this.privProperties}recognizeOnceAsync(cb,err){if(Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const context=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",context.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}Exports_js_2.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Exports_js_1.RecognitionMode.Interactive),cb,err)}startContinuousRecognitionAsync(cb,err){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const context=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",context.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}Exports_js_2.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_1.RecognitionMode.Conversation),cb,err)}stopContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err)}startKeywordRecognitionAsync(model,cb,err){Contracts_js_1.Contracts.throwIfNull(model,"model"),err&&err("Not yet implemented.")}stopKeywordRecognitionAsync(cb,err){if(cb)try{cb()}catch(e){err&&err(e)}}addIntent(simplePhrase,intentId){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Contracts_js_1.Contracts.throwIfNullOrWhitespace(intentId,"intentId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(simplePhrase,"simplePhrase"),this.privAddedIntents.push([intentId,simplePhrase])}addIntentWithLanguageModel(intentId,model,intentName){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Contracts_js_1.Contracts.throwIfNullOrWhitespace(intentId,"intentId"),Contracts_js_1.Contracts.throwIfNull(model,"model");const modelImpl=model;Contracts_js_1.Contracts.throwIfNullOrWhitespace(modelImpl.appId,"model.appId"),this.privAddedLmIntents[intentId]=new Exports_js_1.AddedLmIntent(modelImpl,intentName)}addAllIntents(model,intentId){Contracts_js_1.Contracts.throwIfNull(model,"model");const modelImpl=model;Contracts_js_1.Contracts.throwIfNullOrWhitespace(modelImpl.appId,"model.appId"),this.privUmbrellaIntent=new Exports_js_1.AddedLmIntent(modelImpl,intentId)}close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Exports_js_2.marshalPromiseToCallbacks(this.dispose(!0),cb,errorCb)}createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties)}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const audioImpl=audioConfig;return new Exports_js_1.IntentServiceRecognizer(authentication,connectionFactory,audioImpl,recognizerConfig,this)}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privDisposedIntentRecognizer||disposing&&(this.privDisposedIntentRecognizer=!0,yield _super.dispose.call(this,disposing))}))}buildSpeechContext(){let appId,region,subscriptionKey;const refGrammers=[];void 0!==this.privUmbrellaIntent&&(appId=this.privUmbrellaIntent.modelImpl.appId,region=this.privUmbrellaIntent.modelImpl.region,subscriptionKey=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const intentId of Object.keys(this.privAddedLmIntents)){const addedLmIntent=this.privAddedLmIntents[intentId];if(void 0===appId)appId=addedLmIntent.modelImpl.appId;else if(appId!==addedLmIntent.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===region)region=addedLmIntent.modelImpl.region;else if(region!==addedLmIntent.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===subscriptionKey)subscriptionKey=addedLmIntent.modelImpl.subscriptionKey;else if(subscriptionKey!==addedLmIntent.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const grammer="luis/"+appId+"-PRODUCTION#"+intentId;refGrammers.push(grammer)}return{Intent:{id:appId,key:void 0===subscriptionKey?this.privProperties.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_Key]):subscriptionKey,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?refGrammers:["luis/"+appId+"-PRODUCTION"]}}}exports.IntentRecognizer=IntentRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/KeywordRecognitionModel.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeywordRecognitionModel=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");exports.KeywordRecognitionModel=class KeywordRecognitionModel{constructor(){this.privDisposed=!1}static fromFile(fileName){throw Contracts_js_1.Contracts.throwIfFileDoesNotExist(fileName,"fileName"),new Error("Not yet implemented.")}static fromStream(file){throw Contracts_js_1.Contracts.throwIfNull(file,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LanguageIdMode.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LanguageIdMode=void 0,function(LanguageIdMode){LanguageIdMode[LanguageIdMode.AtStart=0]="AtStart",LanguageIdMode[LanguageIdMode.Continuous=1]="Continuous"}(exports.LanguageIdMode||(exports.LanguageIdMode={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LanguageUnderstandingModel.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LanguageUnderstandingModelImpl=exports.LanguageUnderstandingModel=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");class LanguageUnderstandingModel{constructor(){}static fromEndpoint(uri){Contracts_js_1.Contracts.throwIfNull(uri,"uri"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(uri.hostname,"uri");const langModelImp=new LanguageUnderstandingModelImpl,firstDot=uri.host.indexOf(".");if(-1===firstDot)throw new Error("Could not determine region from endpoint");langModelImp.region=uri.host.substr(0,firstDot);const lastSegment=uri.pathname.lastIndexOf("/")+1;if(-1===lastSegment)throw new Error("Could not determine appId from endpoint");if(langModelImp.appId=uri.pathname.substr(lastSegment),langModelImp.subscriptionKey=uri.searchParams.get("subscription-key"),void 0===langModelImp.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return langModelImp}static fromAppId(appId){Contracts_js_1.Contracts.throwIfNullOrWhitespace(appId,"appId");const langModelImp=new LanguageUnderstandingModelImpl;return langModelImp.appId=appId,langModelImp}static fromSubscription(subscriptionKey,appId,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscriptionKey,"subscriptionKey"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(appId,"appId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const langModelImp=new LanguageUnderstandingModelImpl;return langModelImp.appId=appId,langModelImp.region=region,langModelImp.subscriptionKey=subscriptionKey,langModelImp}}exports.LanguageUnderstandingModel=LanguageUnderstandingModel;class LanguageUnderstandingModelImpl extends LanguageUnderstandingModel{}exports.LanguageUnderstandingModelImpl=LanguageUnderstandingModelImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/LogLevel.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LogLevel=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js");Object.defineProperty(exports,"LogLevel",{enumerable:!0,get:function(){return Exports_js_1.EventType}})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/MeetingTranscriptionCanceledEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeetingTranscriptionCanceledEventArgs=void 0;const CancellationEventArgsBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationEventArgsBase.js");class MeetingTranscriptionCanceledEventArgs extends CancellationEventArgsBase_js_1.CancellationEventArgsBase{}exports.MeetingTranscriptionCanceledEventArgs=MeetingTranscriptionCanceledEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchDetails.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoMatchDetails=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class NoMatchDetails{constructor(reason){this.privReason=reason}static fromResult(result){const simpleSpeech=Exports_js_1.SimpleSpeechPhrase.fromJSON(result.json);let reason=Exports_js_2.NoMatchReason.NotRecognized;switch(simpleSpeech.RecognitionStatus){case Exports_js_1.RecognitionStatus.BabbleTimeout:reason=Exports_js_2.NoMatchReason.InitialBabbleTimeout;break;case Exports_js_1.RecognitionStatus.InitialSilenceTimeout:reason=Exports_js_2.NoMatchReason.InitialSilenceTimeout;break;default:reason=Exports_js_2.NoMatchReason.NotRecognized}return new NoMatchDetails(reason)}get reason(){return this.privReason}}exports.NoMatchDetails=NoMatchDetails},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/NoMatchReason.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoMatchReason=void 0,function(NoMatchReason){NoMatchReason[NoMatchReason.NotRecognized=0]="NotRecognized",NoMatchReason[NoMatchReason.InitialSilenceTimeout=1]="InitialSilenceTimeout",NoMatchReason[NoMatchReason.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(exports.NoMatchReason||(exports.NoMatchReason={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/OutputFormat.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OutputFormat=void 0,function(OutputFormat){OutputFormat[OutputFormat.Simple=0]="Simple",OutputFormat[OutputFormat.Detailed=1]="Detailed"}(exports.OutputFormat||(exports.OutputFormat={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PhraseListGrammar.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhraseListGrammar=void 0;class PhraseListGrammar{constructor(recogBase){this.privGrammerBuilder=recogBase.dynamicGrammar}static fromRecognizer(recognizer){const recoBase=recognizer.internalData;return new PhraseListGrammar(recoBase)}addPhrase(phrase){this.privGrammerBuilder.addPhrase(phrase)}addPhrases(phrases){this.privGrammerBuilder.addPhrase(phrases)}clear(){this.privGrammerBuilder.clearPhrases()}}exports.PhraseListGrammar=PhraseListGrammar},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ProfanityOption.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProfanityOption=void 0,function(ProfanityOption){ProfanityOption[ProfanityOption.Masked=0]="Masked",ProfanityOption[ProfanityOption.Removed=1]="Removed",ProfanityOption[ProfanityOption.Raw=2]="Raw"}(exports.ProfanityOption||(exports.ProfanityOption={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PronunciationAssessmentConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PronunciationAssessmentConfig=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class PronunciationAssessmentConfig{constructor(referenceText,gradingSystem=Exports_js_1.PronunciationAssessmentGradingSystem.FivePoint,granularity=Exports_js_1.PronunciationAssessmentGranularity.Phoneme,enableMiscue=!1){Contracts_js_1.Contracts.throwIfNullOrUndefined(referenceText,"referenceText"),this.privProperties=new Exports_js_1.PropertyCollection,this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_ReferenceText,referenceText),this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_GradingSystem,Exports_js_1.PronunciationAssessmentGradingSystem[gradingSystem]),this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_Granularity,Exports_js_1.PronunciationAssessmentGranularity[granularity]),this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_EnableMiscue,String(enableMiscue))}static fromJSON(json){Contracts_js_1.Contracts.throwIfNullOrUndefined(json,"json");const config=new PronunciationAssessmentConfig("");return config.privProperties=new Exports_js_1.PropertyCollection,config.properties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_Json,json),config}toJSON(){return this.updateJson(),this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_Params)}applyTo(recognizer){this.updateJson();const recoBase=recognizer.internalData;recoBase.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,recoBase.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,recoBase.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(referenceText){Contracts_js_1.Contracts.throwIfNullOrWhitespace(referenceText,"referenceText"),this.properties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_ReferenceText,referenceText)}set phonemeAlphabet(phonemeAlphabet){Contracts_js_1.Contracts.throwIfNullOrWhitespace(phonemeAlphabet,"phonemeAlphabet"),this.privPhonemeAlphabet=phonemeAlphabet}set enableMiscue(enableMiscue){const enableMiscueString=enableMiscue?"true":"false";this.properties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_EnableMiscue,enableMiscueString)}get enableMiscue(){return"true"===this.properties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(nbestPhonemeCount){this.privNBestPhonemeCount=nbestPhonemeCount}set enableProsodyAssessment(enableProsodyAssessment){this.privEnableProsodyAssessment=enableProsodyAssessment}enableContentAssessmentWithTopic(topic){this.privContentAssessmentTopic=topic}get properties(){return this.privProperties}updateJson(){const jsonString=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_Json,"{}"),paramsJson=JSON.parse(jsonString),referenceText=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_ReferenceText);referenceText&&(paramsJson.referenceText=referenceText);const gradingSystem=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_GradingSystem);gradingSystem&&(paramsJson.gradingSystem=gradingSystem);const granularity=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_Granularity);granularity&&(paramsJson.granularity=granularity),this.privPhonemeAlphabet&&(paramsJson.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(paramsJson.nbestPhonemeCount=this.privNBestPhonemeCount),paramsJson.enableProsodyAssessment=this.privEnableProsodyAssessment,paramsJson.dimension="Comprehensive";this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_EnableMiscue)&&(paramsJson.enableMiscue=this.enableMiscue),this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_Params,JSON.stringify(paramsJson))}}exports.PronunciationAssessmentConfig=PronunciationAssessmentConfig},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PronunciationAssessmentGradingSystem.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PronunciationAssessmentGradingSystem=void 0,function(PronunciationAssessmentGradingSystem){PronunciationAssessmentGradingSystem[PronunciationAssessmentGradingSystem.FivePoint=1]="FivePoint",PronunciationAssessmentGradingSystem[PronunciationAssessmentGradingSystem.HundredMark=2]="HundredMark"}(exports.PronunciationAssessmentGradingSystem||(exports.PronunciationAssessmentGradingSystem={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PronunciationAssessmentGranularity.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PronunciationAssessmentGranularity=void 0,function(PronunciationAssessmentGranularity){PronunciationAssessmentGranularity[PronunciationAssessmentGranularity.Phoneme=1]="Phoneme",PronunciationAssessmentGranularity[PronunciationAssessmentGranularity.Word=2]="Word",PronunciationAssessmentGranularity[PronunciationAssessmentGranularity.FullText=3]="FullText"}(exports.PronunciationAssessmentGranularity||(exports.PronunciationAssessmentGranularity={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PronunciationAssessmentResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PronunciationAssessmentResult=exports.ContentAssessmentResult=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ContentAssessmentResult{constructor(detailResult){this.privPronJson=detailResult}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}exports.ContentAssessmentResult=ContentAssessmentResult;class PronunciationAssessmentResult{constructor(jsonString){const j=JSON.parse(jsonString);Contracts_js_1.Contracts.throwIfNullOrUndefined(j.NBest[0],"NBest"),this.privPronJson=j.NBest[0]}static fromResult(result){Contracts_js_1.Contracts.throwIfNullOrUndefined(result,"result");const json=result.properties.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult);return Contracts_js_1.Contracts.throwIfNullOrUndefined(json,"json"),new PronunciationAssessmentResult(json)}get detailResult(){return this.privPronJson}get accuracyScore(){var _a;return null===(_a=this.detailResult.PronunciationAssessment)||void 0===_a?void 0:_a.AccuracyScore}get pronunciationScore(){var _a;return null===(_a=this.detailResult.PronunciationAssessment)||void 0===_a?void 0:_a.PronScore}get completenessScore(){var _a;return null===(_a=this.detailResult.PronunciationAssessment)||void 0===_a?void 0:_a.CompletenessScore}get fluencyScore(){var _a;return null===(_a=this.detailResult.PronunciationAssessment)||void 0===_a?void 0:_a.FluencyScore}get prosodyScore(){var _a;return null===(_a=this.detailResult.PronunciationAssessment)||void 0===_a?void 0:_a.ProsodyScore}get contentAssessmentResult(){if(void 0!==this.detailResult.ContentAssessment)return new ContentAssessmentResult(this.detailResult)}}exports.PronunciationAssessmentResult=PronunciationAssessmentResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyCollection.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PropertyCollection=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class PropertyCollection{constructor(){this.privKeys=[],this.privValues=[]}getProperty(key,def){let keyToUse;keyToUse="string"==typeof key?key:Exports_js_1.PropertyId[key];for(let n=0;n<this.privKeys.length;n++)if(this.privKeys[n]===keyToUse)return this.privValues[n];if(void 0!==def)return String(def)}setProperty(key,value){let keyToUse;keyToUse="string"==typeof key?key:Exports_js_1.PropertyId[key];for(let n=0;n<this.privKeys.length;n++)if(this.privKeys[n]===keyToUse)return void(this.privValues[n]=value);this.privKeys.push(keyToUse),this.privValues.push(value)}clone(){const clonedMap=new PropertyCollection;for(let n=0;n<this.privKeys.length;n++)clonedMap.privKeys.push(this.privKeys[n]),clonedMap.privValues.push(this.privValues[n]);return clonedMap}mergeTo(destinationCollection){this.privKeys.forEach((key=>{if(void 0===destinationCollection.getProperty(key,void 0)){const value=this.getProperty(key);destinationCollection.setProperty(key,value)}}))}get keys(){return this.privKeys}}exports.PropertyCollection=PropertyCollection},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/PropertyId.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PropertyId=void 0,function(PropertyId){PropertyId[PropertyId.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",PropertyId[PropertyId.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",PropertyId[PropertyId.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",PropertyId[PropertyId.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",PropertyId[PropertyId.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",PropertyId[PropertyId.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",PropertyId[PropertyId.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",PropertyId[PropertyId.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",PropertyId[PropertyId.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",PropertyId[PropertyId.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",PropertyId[PropertyId.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",PropertyId[PropertyId.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",PropertyId[PropertyId.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",PropertyId[PropertyId.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",PropertyId[PropertyId.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",PropertyId[PropertyId.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",PropertyId[PropertyId.Speech_SessionId=16]="Speech_SessionId",PropertyId[PropertyId.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",PropertyId[PropertyId.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",PropertyId[PropertyId.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",PropertyId[PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",PropertyId[PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",PropertyId[PropertyId.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",PropertyId[PropertyId.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",PropertyId[PropertyId.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",PropertyId[PropertyId.CancellationDetails_Reason=25]="CancellationDetails_Reason",PropertyId[PropertyId.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",PropertyId[PropertyId.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",PropertyId[PropertyId.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",PropertyId[PropertyId.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",PropertyId[PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",PropertyId[PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",PropertyId[PropertyId.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",PropertyId[PropertyId.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",PropertyId[PropertyId.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",PropertyId[PropertyId.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",PropertyId[PropertyId.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",PropertyId[PropertyId.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",PropertyId[PropertyId.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",PropertyId[PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",PropertyId[PropertyId.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",PropertyId[PropertyId.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",PropertyId[PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",PropertyId[PropertyId.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",PropertyId[PropertyId.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",PropertyId[PropertyId.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",PropertyId[PropertyId.Conversation_ApplicationId=46]="Conversation_ApplicationId",PropertyId[PropertyId.Conversation_DialogType=47]="Conversation_DialogType",PropertyId[PropertyId.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",PropertyId[PropertyId.Conversation_From_Id=49]="Conversation_From_Id",PropertyId[PropertyId.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",PropertyId[PropertyId.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",PropertyId[PropertyId.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",PropertyId[PropertyId.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",PropertyId[PropertyId.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",PropertyId[PropertyId.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",PropertyId[PropertyId.ConversationTranslator_Host=56]="ConversationTranslator_Host",PropertyId[PropertyId.ConversationTranslator_Name=57]="ConversationTranslator_Name",PropertyId[PropertyId.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",PropertyId[PropertyId.ConversationTranslator_Token=59]="ConversationTranslator_Token",PropertyId[PropertyId.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",PropertyId[PropertyId.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",PropertyId[PropertyId.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",PropertyId[PropertyId.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",PropertyId[PropertyId.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",PropertyId[PropertyId.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",PropertyId[PropertyId.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",PropertyId[PropertyId.WebWorkerLoadType=67]="WebWorkerLoadType",PropertyId[PropertyId.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(exports.PropertyId||(exports.PropertyId={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RecognitionEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class RecognitionEventArgs extends Exports_js_1.SessionEventArgs{constructor(offset,sessionId){super(sessionId),this.privOffset=offset}get offset(){return this.privOffset}}exports.RecognitionEventArgs=RecognitionEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/RecognitionResult.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RecognitionResult=void 0;exports.RecognitionResult=class RecognitionResult{constructor(resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties){this.privResultId=resultId,this.privReason=reason,this.privText=text,this.privDuration=duration,this.privOffset=offset,this.privLanguage=language,this.privLanguageDetectionConfidence=languageDetectionConfidence,this.privErrorDetails=errorDetails,this.privJson=json,this.privProperties=properties}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Recognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Recognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class Recognizer{constructor(audioConfig,properties,connectionFactory){this.audioConfig=void 0!==audioConfig?audioConfig:Exports_js_3.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=properties.clone(),this.privConnectionFactory=connectionFactory,this.implCommonRecognizerSetup()}close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed),Exports_js_2.marshalPromiseToCallbacks(this.dispose(!0),cb,errorCb)}get internalData(){return this.privReco}dispose(disposing){return __awaiter(this,void 0,void 0,(function*(){this.privDisposed||(this.privDisposed=!0,disposing&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))}))}static get telemetryEnabled(){return Exports_js_1.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(enabled){Exports_js_1.ServiceRecognizerBase.telemetryDataEnabled=enabled}implCommonRecognizerSetup(){let osPlatform="undefined"!=typeof window?"Browser":"Node",osName="unknown",osVersion="unknown";"undefined"!=typeof navigator&&(osPlatform=osPlatform+"/"+navigator.platform,osName=navigator.userAgent,osVersion=navigator.appVersion);const recognizerConfig=this.createRecognizerConfig(new Exports_js_1.SpeechServiceConfig(new Exports_js_1.Context(new Exports_js_1.OS(osPlatform,osName,osVersion))));this.privReco=this.createServiceRecognizer(Recognizer.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,recognizerConfig)}recognizeOnceAsyncImpl(recognitionMode){return __awaiter(this,void 0,void 0,(function*(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);const ret=new Exports_js_2.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(recognitionMode,ret.resolve,ret.reject);const result=yield ret.promise;return yield this.implRecognizerStop(),result}))}startContinuousRecognitionAsyncImpl(recognitionMode){return __awaiter(this,void 0,void 0,(function*(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(recognitionMode,void 0,void 0)}))}stopContinuousRecognitionAsyncImpl(){return __awaiter(this,void 0,void 0,(function*(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()}))}implRecognizerStop(){return __awaiter(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}static getAuthFromProperties(properties){const subscriptionKey=properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Key,void 0);return subscriptionKey&&""!==subscriptionKey?new Exports_js_1.CognitiveSubscriptionKeyAuthentication(subscriptionKey):new Exports_js_1.CognitiveTokenAuthentication((()=>{const authorizationToken=properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(authorizationToken)}),(()=>{const authorizationToken=properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(authorizationToken)}))}}exports.Recognizer=Recognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ResultReason.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResultReason=void 0,function(ResultReason){ResultReason[ResultReason.NoMatch=0]="NoMatch",ResultReason[ResultReason.Canceled=1]="Canceled",ResultReason[ResultReason.RecognizingSpeech=2]="RecognizingSpeech",ResultReason[ResultReason.RecognizedSpeech=3]="RecognizedSpeech",ResultReason[ResultReason.RecognizedKeyword=4]="RecognizedKeyword",ResultReason[ResultReason.RecognizingIntent=5]="RecognizingIntent",ResultReason[ResultReason.RecognizedIntent=6]="RecognizedIntent",ResultReason[ResultReason.TranslatingSpeech=7]="TranslatingSpeech",ResultReason[ResultReason.TranslatedSpeech=8]="TranslatedSpeech",ResultReason[ResultReason.SynthesizingAudio=9]="SynthesizingAudio",ResultReason[ResultReason.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",ResultReason[ResultReason.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",ResultReason[ResultReason.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",ResultReason[ResultReason.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",ResultReason[ResultReason.RecognizedSpeakers=14]="RecognizedSpeakers",ResultReason[ResultReason.RecognizedSpeaker=15]="RecognizedSpeaker",ResultReason[ResultReason.ResetVoiceProfile=16]="ResetVoiceProfile",ResultReason[ResultReason.DeletedVoiceProfile=17]="DeletedVoiceProfile",ResultReason[ResultReason.VoicesListRetrieved=18]="VoicesListRetrieved",ResultReason[ResultReason.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",ResultReason[ResultReason.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",ResultReason[ResultReason.TranslatedInstantMessage=21]="TranslatedInstantMessage",ResultReason[ResultReason.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(exports.ResultReason||(exports.ResultReason={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ServiceEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServiceEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ServiceEventArgs extends Exports_js_1.SessionEventArgs{constructor(json,name,sessionId){super(sessionId),this.privJsonResult=json,this.privEventName=name}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}exports.ServiceEventArgs=ServiceEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/ServicePropertyChannel.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServicePropertyChannel=void 0,function(ServicePropertyChannel){ServicePropertyChannel[ServicePropertyChannel.UriQueryParameter=0]="UriQueryParameter"}(exports.ServicePropertyChannel||(exports.ServicePropertyChannel={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SessionEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionEventArgs=void 0;exports.SessionEventArgs=class SessionEventArgs{constructor(sessionId){this.privSessionId=sessionId}get sessionId(){return this.privSessionId}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SourceLanguageConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SourceLanguageConfig=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js");class SourceLanguageConfig{constructor(language,endpointId){Contracts_js_1.Contracts.throwIfNullOrUndefined(language,"language"),this.privLanguage=language,this.privEndpointId=endpointId}static fromLanguage(language,endpointId){return new SourceLanguageConfig(language,endpointId)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}exports.SourceLanguageConfig=SourceLanguageConfig},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeakerIdentificationModel.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeakerIdentificationModel=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeakerIdentificationModel{constructor(profiles){if(this.privVoiceProfiles=[],this.privProfileIds=[],Contracts_js_1.Contracts.throwIfNullOrUndefined(profiles,"VoiceProfiles"),0===profiles.length)throw new Error("Empty Voice Profiles array");for(const profile of profiles){if(profile.profileType!==Exports_js_1.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+profile.profileId);this.privVoiceProfiles.push(profile),this.privProfileIds.push(profile.profileId)}}static fromProfiles(profiles){return new SpeakerIdentificationModel(profiles)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}}exports.SpeakerIdentificationModel=SpeakerIdentificationModel},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeakerRecognitionResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeakerRecognitionCancellationDetails=exports.SpeakerRecognitionResult=exports.SpeakerRecognitionResultType=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");var SpeakerRecognitionResultType;!function(SpeakerRecognitionResultType){SpeakerRecognitionResultType[SpeakerRecognitionResultType.Verify=0]="Verify",SpeakerRecognitionResultType[SpeakerRecognitionResultType.Identify=1]="Identify"}(SpeakerRecognitionResultType=exports.SpeakerRecognitionResultType||(exports.SpeakerRecognitionResultType={}));exports.SpeakerRecognitionResult=class SpeakerRecognitionResult{constructor(response,resultReason=Exports_js_2.ResultReason.RecognizedSpeaker,cancellationErrorCode=Exports_js_2.CancellationErrorCode.NoError,errorDetails=""){this.privProperties=new Exports_js_2.PropertyCollection;const resultType="TextIndependentIdentification"===response.scenario?SpeakerRecognitionResultType.Identify:SpeakerRecognitionResultType.Verify;this.privReason=resultReason,this.privReason!==Exports_js_2.ResultReason.Canceled?resultType===SpeakerRecognitionResultType.Identify?(this.privProfileId=response.identificationResult.identifiedProfile.profileId,this.privScore=response.identificationResult.identifiedProfile.score,this.privReason=Exports_js_2.ResultReason.RecognizedSpeakers):(this.privScore=response.verificationResult.score,"accept"!==response.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=Exports_js_2.ResultReason.NoMatch),void 0!==response.verificationResult.profileId&&""!==response.verificationResult.profileId&&(this.privProfileId=response.verificationResult.profileId)):(this.privErrorDetails=errorDetails,this.privProperties.setProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[cancellationErrorCode])),this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(response))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};class SpeakerRecognitionCancellationDetails extends Exports_js_2.CancellationDetailsBase{constructor(reason,errorDetails,errorCode){super(reason,errorDetails,errorCode)}static fromResult(result){const reason=Exports_js_2.CancellationReason.Error;let errorCode=Exports_js_2.CancellationErrorCode.NoError;return result.properties&&(errorCode=Exports_js_2.CancellationErrorCode[result.properties.getProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.NoError])]),new SpeakerRecognitionCancellationDetails(reason,result.errorDetails,errorCode)}}exports.SpeakerRecognitionCancellationDetails=SpeakerRecognitionCancellationDetails},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeakerRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeakerRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeakerRecognizer extends Exports_js_2.Recognizer{constructor(speechConfig,audioConfig){Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,"speechConfig");const configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNullOrUndefined(configImpl,"speechConfig"),super(audioConfig,configImpl.properties,new Exports_js_1.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=audioConfig,Contracts_js_1.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=configImpl.properties}get authorizationToken(){return this.properties.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,token)}get properties(){return this.privProperties}recognizeOnceAsync(model){return __awaiter(this,void 0,void 0,(function*(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(model)}))}close(){return __awaiter(this,void 0,void 0,(function*(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)}))}recognizeSpeakerOnceAsyncImpl(model){return __awaiter(this,void 0,void 0,(function*(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();const result=yield this.privReco.recognizeSpeaker(model);return yield this.implRecognizerStop(),result}))}implRecognizerStop(){return __awaiter(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties)}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const audioImpl=audioConfig;return new Exports_js_1.SpeakerServiceRecognizer(authentication,connectionFactory,audioImpl,recognizerConfig,this)}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privDisposedSpeakerRecognizer||disposing&&(this.privDisposedSpeakerRecognizer=!0,yield _super.dispose.call(this,disposing))}))}}exports.SpeakerRecognizer=SpeakerRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeakerVerificationModel.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeakerVerificationModel=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeakerVerificationModel{constructor(profile){if(Contracts_js_1.Contracts.throwIfNullOrUndefined(profile,"VoiceProfile"),profile.profileType===Exports_js_1.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=profile}static fromProfile(profile){return new SpeakerVerificationModel(profile)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===Exports_js_1.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}}exports.SpeakerVerificationModel=SpeakerVerificationModel},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechConfigImpl=exports.SpeechConfig=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeechConfig{constructor(){}static fromSubscription(subscriptionKey,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscriptionKey,"subscriptionKey"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const speechImpl=new SpeechConfigImpl;return speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,region),speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_IntentRegion,region),speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey),speechImpl}static fromEndpoint(endpoint,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(endpoint,"endpoint");const speechImpl=new SpeechConfigImpl;return speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,endpoint.href),void 0!==subscriptionKey&&speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey),speechImpl}static fromHost(hostName,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(hostName,"hostName");const speechImpl=new SpeechConfigImpl;return speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,hostName.protocol+"//"+hostName.hostname+(""===hostName.port?"":":"+hostName.port)),void 0!==subscriptionKey&&speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey),speechImpl}static fromAuthorizationToken(authorizationToken,region){Contracts_js_1.Contracts.throwIfNull(authorizationToken,"authorizationToken"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const speechImpl=new SpeechConfigImpl;return speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,region),speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_IntentRegion,region),speechImpl.authorizationToken=authorizationToken,speechImpl}close(){}}exports.SpeechConfig=SpeechConfig;class SpeechConfigImpl extends SpeechConfig{constructor(){super(),this.privProperties=new Exports_js_2.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=Exports_js_2.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(value){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,value)}get speechRecognitionLanguage(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(value){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,value)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(value){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,value)}get outputFormat(){return Exports_js_2.OutputFormat[this.privProperties.getProperty(Exports_js_1.OutputFormatPropertyName,void 0)]}set outputFormat(value){this.privProperties.setProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_2.OutputFormat[value])}get endpointId(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(value){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,value)}setProperty(name,value){Contracts_js_1.Contracts.throwIfNull(value,"value"),this.privProperties.setProperty(name,value)}getProperty(name,def){return this.privProperties.getProperty(name,def)}setProxy(proxyHostName,proxyPort,proxyUserName,proxyPassword){this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyHostName],proxyHostName),this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyPort],proxyPort),this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyUserName],proxyUserName),this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyPassword],proxyPassword)}setServiceProperty(name,value){const currentProperties=JSON.parse(this.privProperties.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));currentProperties[name]=value,this.privProperties.setProperty(Exports_js_1.ServicePropertiesPropertyName,JSON.stringify(currentProperties))}setProfanity(profanity){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_ProfanityOption,Exports_js_2.ProfanityOption[profanity])}enableAudioLogging(){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(Exports_js_1.ForceDictationPropertyName,"true")}clone(){const ret=new SpeechConfigImpl;return ret.privProperties=this.privProperties.clone(),ret}get speechSynthesisLanguage(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(language){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthLanguage,language)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(voice){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthVoice,voice)}get speechSynthesisOutputFormat(){return Exports_js_2.SpeechSynthesisOutputFormat[this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(format){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthOutputFormat,Exports_js_2.SpeechSynthesisOutputFormat[format])}}exports.SpeechConfigImpl=SpeechConfigImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionCanceledEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechRecognitionCanceledEventArgs=void 0;const CancellationEventArgsBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationEventArgsBase.js");class SpeechRecognitionCanceledEventArgs extends CancellationEventArgsBase_js_1.CancellationEventArgsBase{}exports.SpeechRecognitionCanceledEventArgs=SpeechRecognitionCanceledEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeetingTranscriptionEventArgs=exports.ConversationTranscriptionEventArgs=exports.SpeechRecognitionEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeechRecognitionEventArgs extends Exports_js_1.RecognitionEventArgs{constructor(result,offset,sessionId){super(offset,sessionId),this.privResult=result}get result(){return this.privResult}}exports.SpeechRecognitionEventArgs=SpeechRecognitionEventArgs;class ConversationTranscriptionEventArgs extends Exports_js_1.RecognitionEventArgs{constructor(result,offset,sessionId){super(offset,sessionId),this.privResult=result}get result(){return this.privResult}}exports.ConversationTranscriptionEventArgs=ConversationTranscriptionEventArgs;exports.MeetingTranscriptionEventArgs=class MeetingTranscriptionEventArgs extends SpeechRecognitionEventArgs{}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognitionResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechRecognitionResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeechRecognitionResult extends Exports_js_1.RecognitionResult{constructor(resultId,reason,text,duration,offset,language,languageDetectionConfidence,speakerId,errorDetails,json,properties){super(resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties),this.privSpeakerId=speakerId}get speakerId(){return this.privSpeakerId}}exports.SpeechRecognitionResult=SpeechRecognitionResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeechRecognizer extends Exports_js_3.Recognizer{constructor(speechConfig,audioConfig){const speechConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(speechConfigImpl,"speechConfig"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(speechConfigImpl.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]),super(audioConfig,speechConfigImpl.properties,new Exports_js_1.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(speechConfig,autoDetectSourceLanguageConfig,audioConfig){const speechConfigImpl=speechConfig;autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);return new SpeechRecognizer(speechConfig,audioConfig)}get endpointId(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,token)}get speechRecognitionLanguage(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple])===Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]?Exports_js_3.OutputFormat.Simple:Exports_js_3.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Exports_js_1.RecognitionMode.Interactive),cb,err)}startContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_1.RecognitionMode.Conversation),cb,err)}stopContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err)}startKeywordRecognitionAsync(model,cb,err){Contracts_js_1.Contracts.throwIfNull(model,"model"),err&&err("Not yet implemented.")}stopKeywordRecognitionAsync(cb){cb&&cb()}close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),Exports_js_2.marshalPromiseToCallbacks(this.dispose(!0),cb,errorCb)}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(disposing&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield _super.dispose.call(this,disposing))}))}createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties)}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const configImpl=audioConfig;return new Exports_js_1.SpeechServiceRecognizer(authentication,connectionFactory,configImpl,recognizerConfig,this)}}exports.SpeechRecognizer=SpeechRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisBookmarkEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisBookmarkEventArgs=void 0;exports.SpeechSynthesisBookmarkEventArgs=class SpeechSynthesisBookmarkEventArgs{constructor(audioOffset,text){this.privAudioOffset=audioOffset,this.privText=text}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisBoundaryType.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisBoundaryType=void 0,function(SpeechSynthesisBoundaryType){SpeechSynthesisBoundaryType.Word="WordBoundary",SpeechSynthesisBoundaryType.Punctuation="PunctuationBoundary",SpeechSynthesisBoundaryType.Sentence="SentenceBoundary"}(exports.SpeechSynthesisBoundaryType||(exports.SpeechSynthesisBoundaryType={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisEventArgs=void 0;exports.SpeechSynthesisEventArgs=class SpeechSynthesisEventArgs{constructor(result){this.privResult=result}get result(){return this.privResult}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisOutputFormat.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisOutputFormat=void 0,function(SpeechSynthesisOutputFormat){SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(exports.SpeechSynthesisOutputFormat||(exports.SpeechSynthesisOutputFormat={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeechSynthesisResult extends Exports_js_1.SynthesisResult{constructor(resultId,reason,audioData,errorDetails,properties,audioDuration){super(resultId,reason,errorDetails,properties),this.privAudioData=audioData,this.privAudioDuration=audioDuration}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}exports.SpeechSynthesisResult=SpeechSynthesisResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisVisemeEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisVisemeEventArgs=void 0;exports.SpeechSynthesisVisemeEventArgs=class SpeechSynthesisVisemeEventArgs{constructor(audioOffset,visemeId,animation){this.privAudioOffset=audioOffset,this.privVisemeId=visemeId,this.privAnimation=animation}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesisWordBoundaryEventArgs=void 0;exports.SpeechSynthesisWordBoundaryEventArgs=class SpeechSynthesisWordBoundaryEventArgs{constructor(audioOffset,duration,text,wordLength,textOffset,boundaryType){this.privAudioOffset=audioOffset,this.privDuration=duration,this.privText=text,this.privWordLength=wordLength,this.privTextOffset=textOffset,this.privBoundaryType=boundaryType}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechSynthesizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechSynthesizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),AudioFileWriter_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioFileWriter.js"),AudioOutputFormat_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputFormat.js"),AudioOutputStream_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioOutputStream.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Synthesizer_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Synthesizer.js");class SpeechSynthesizer extends Exports_js_3.Synthesizer{constructor(speechConfig,audioConfig){super(speechConfig),null!==audioConfig&&(this.audioConfig=void 0===audioConfig?"undefined"==typeof window?void 0:Exports_js_3.AudioConfig.fromDefaultSpeakerOutput():audioConfig),this.privConnectionFactory=new Exports_js_1.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(speechConfig,autoDetectSourceLanguageConfig,audioConfig){const speechConfigImpl=speechConfig;return autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties),new SpeechSynthesizer(speechConfig,audioConfig)}speakTextAsync(text,cb,err,stream){this.speakImpl(text,!1,cb,err,stream)}speakSsmlAsync(ssml,cb,err,stream){this.speakImpl(ssml,!0,cb,err,stream)}getVoicesAsync(locale=""){return __awaiter(this,void 0,void 0,(function*(){return this.getVoices(locale)}))}close(cb,err){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed),Exports_js_2.marshalPromiseToCallbacks(this.dispose(!0),cb,err)}get internalData(){return this.privAdapter}createSynthesisAdapter(authentication,connectionFactory,synthesizerConfig){return new Exports_js_1.SpeechSynthesisAdapter(authentication,connectionFactory,synthesizerConfig,this,this.audioConfig)}createRestSynthesisAdapter(authentication,synthesizerConfig){return new Exports_js_1.SynthesisRestAdapter(synthesizerConfig,authentication)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=AudioOutputFormat_js_1.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Exports_js_3.SpeechSynthesisOutputFormat[this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(text,IsSsml,cb,err,dataStream){try{Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);const requestId=Exports_js_2.createNoDashGuid();let audioDestination;audioDestination=dataStream instanceof Exports_js_3.PushAudioOutputStreamCallback?new AudioOutputStream_js_1.PushAudioOutputStreamImpl(dataStream):dataStream instanceof Exports_js_3.PullAudioOutputStream?dataStream:void 0!==dataStream?new AudioFileWriter_js_1.AudioFileWriter(dataStream):void 0,this.synthesisRequestQueue.enqueue(new Synthesizer_js_1.SynthesisRequest(requestId,text,IsSsml,(e=>{if(this.privSynthesizing=!1,cb)try{cb(e)}catch(e){err&&err(e)}cb=void 0,this.adapterSpeak().catch((()=>{}))}),(e=>{err&&err(e)}),audioDestination)),this.adapterSpeak().catch((()=>{}))}catch(error){if(err)if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error);this.dispose(!0).catch((()=>{}))}}getVoices(locale){return __awaiter(this,void 0,void 0,(function*(){const requestId=Exports_js_2.createNoDashGuid(),response=yield this.privRestAdapter.getVoicesList(requestId);if(response.ok&&Array.isArray(response.json)){let json=response.json;return locale&&locale.length>0&&(json=json.filter((item=>!!item.Locale&&item.Locale.toLowerCase()===locale.toLowerCase()))),new Exports_js_3.SynthesisVoicesResult(requestId,json,void 0)}return new Exports_js_3.SynthesisVoicesResult(requestId,void 0,`Error: ${response.status}: ${response.statusText}`)}))}}exports.SpeechSynthesizer=SpeechSynthesizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SpeechTranslationConfig.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeechTranslationConfigImpl=exports.SpeechTranslationConfig=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SpeechTranslationConfig extends Exports_js_2.SpeechConfig{constructor(){super()}static fromSubscription(subscriptionKey,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscriptionKey,"subscriptionKey"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const ret=new SpeechTranslationConfigImpl;return ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey),ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,region),ret}static fromAuthorizationToken(authorizationToken,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(authorizationToken,"authorizationToken"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");const ret=new SpeechTranslationConfigImpl;return ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,authorizationToken),ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,region),ret}static fromHost(hostName,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(hostName,"hostName");const speechImpl=new SpeechTranslationConfigImpl;return speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,hostName.protocol+"//"+hostName.hostname+(""===hostName.port?"":":"+hostName.port)),void 0!==subscriptionKey&&speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey),speechImpl}static fromEndpoint(endpoint,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(endpoint,"endpoint"),Contracts_js_1.Contracts.throwIfNull(subscriptionKey,"subscriptionKey");const ret=new SpeechTranslationConfigImpl;return ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,endpoint.href),ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey),ret}}exports.SpeechTranslationConfig=SpeechTranslationConfig;class SpeechTranslationConfigImpl extends SpeechTranslationConfig{constructor(){super(),this.privSpeechProperties=new Exports_js_2.PropertyCollection,this.outputFormat=Exports_js_2.OutputFormat.Simple}set authorizationToken(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value"),this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,value)}set speechRecognitionLanguage(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value"),this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,value)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return Exports_js_2.OutputFormat[this.privSpeechProperties.getProperty(Exports_js_1.OutputFormatPropertyName,void 0)]}set outputFormat(value){this.privSpeechProperties.setProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_2.OutputFormat[value])}get endpointId(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(value){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,value)}addTargetLanguage(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value");const languages=this.targetLanguages;languages.includes(value)||(languages.push(value),this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationToLanguages,languages.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value"),this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationVoice,value)}get region(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region)}setProxy(proxyHostName,proxyPort,proxyUserName,proxyPassword){this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyHostName],proxyHostName),this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyPort],proxyPort),this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyUserName],proxyUserName),this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyPassword],proxyPassword)}getProperty(name,def){return this.privSpeechProperties.getProperty(name,def)}setProperty(name,value){this.privSpeechProperties.setProperty(name,value)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(name,value){const currentProperties=JSON.parse(this.privSpeechProperties.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));currentProperties[name]=value,this.privSpeechProperties.setProperty(Exports_js_1.ServicePropertiesPropertyName,JSON.stringify(currentProperties))}setProfanity(profanity){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_ProfanityOption,Exports_js_2.ProfanityOption[profanity])}enableAudioLogging(){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(Exports_js_1.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(language){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthLanguage,language)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(voice){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthVoice,voice)}get speechSynthesisOutputFormat(){return Exports_js_2.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(format){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthOutputFormat,Exports_js_2.SpeechSynthesisOutputFormat[format])}}exports.SpeechTranslationConfigImpl=SpeechTranslationConfigImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SynthesisResult.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisResult=void 0;exports.SynthesisResult=class SynthesisResult{constructor(resultId,reason,errorDetails,properties){this.privResultId=resultId,this.privReason=reason,this.privErrorDetails=errorDetails,this.privProperties=properties}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/SynthesisVoicesResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisVoicesResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class SynthesisVoicesResult extends Exports_js_1.SynthesisResult{constructor(requestId,json,errorDetails){if(Array.isArray(json)){super(requestId,Exports_js_1.ResultReason.VoicesListRetrieved,void 0,new Exports_js_1.PropertyCollection),this.privVoices=[];for(const item of json)this.privVoices.push(new Exports_js_1.VoiceInfo(item))}else super(requestId,Exports_js_1.ResultReason.Canceled,errorDetails||"Error information unavailable",new Exports_js_1.PropertyCollection)}get voices(){return this.privVoices}}exports.SynthesisVoicesResult=SynthesisVoicesResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Synthesizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesisRequest=exports.Synthesizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class Synthesizer{constructor(speechConfig){const speechConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(speechConfigImpl,"speechConfig"),this.privProperties=speechConfigImpl.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new Exports_js_2.Queue}get authorizationToken(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,token)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===Exports_js_1.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(text){const languageToDefaultVoice={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let language=this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),voice=this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SynthVoice,""),ssml=Synthesizer.XMLEncode(text);return this.autoDetectSourceLanguage?language="en-US":voice=voice||languageToDefaultVoice[language],voice&&(ssml=`<voice name='${voice}'>${ssml}</voice>`),ssml=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${language}'>${ssml}</speak>`,ssml}dispose(disposing){return __awaiter(this,void 0,void 0,(function*(){this.privDisposed||(disposing&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)}))}adapterSpeak(){return __awaiter(this,void 0,void 0,(function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const request=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(request.text,request.isSSML,request.requestId,request.cb,request.err,request.dataStream)}}))}createSynthesizerConfig(speechConfig){return new Exports_js_1.SynthesizerConfig(speechConfig,this.privProperties)}implCommonSynthesizeSetup(){let osPlatform="undefined"!=typeof window?"Browser":"Node",osName="unknown",osVersion="unknown";"undefined"!=typeof navigator&&(osPlatform=osPlatform+"/"+navigator.platform,osName=navigator.userAgent,osVersion=navigator.appVersion);const synthesizerConfig=this.createSynthesizerConfig(new Exports_js_1.SpeechServiceConfig(new Exports_js_1.Context(new Exports_js_1.OS(osPlatform,osName,osVersion)))),subscriptionKey=this.privProperties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Key,void 0),authentication=subscriptionKey&&""!==subscriptionKey?new Exports_js_1.CognitiveSubscriptionKeyAuthentication(subscriptionKey):new Exports_js_1.CognitiveTokenAuthentication((()=>{const authorizationToken=this.privProperties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(authorizationToken)}),(()=>{const authorizationToken=this.privProperties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(authorizationToken)}));this.privAdapter=this.createSynthesisAdapter(authentication,this.privConnectionFactory,synthesizerConfig),this.privRestAdapter=this.createRestSynthesisAdapter(authentication,synthesizerConfig)}static XMLEncode(text){return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}exports.Synthesizer=Synthesizer;exports.SynthesisRequest=class SynthesisRequest{constructor(requestId,text,isSSML,cb,err,dataStream){this.requestId=requestId,this.text=text,this.isSSML=isSSML,this.cb=cb,this.err=err,this.dataStream=dataStream}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Conversation.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationImpl=exports.Conversation=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class Conversation{constructor(){}static createConversationAsync(speechConfig,arg2,arg3,arg4){let conversationImpl,cb,err;return Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig.region,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),speechConfig.subscriptionKey||speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceAuthorization_Token])||Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig.subscriptionKey,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof arg2?(conversationImpl=new ConversationImpl(speechConfig,arg2),Exports_js_2.marshalPromiseToCallbacks((()=>__awaiter(this,void 0,void 0,(function*(){})))(),arg3,arg4)):(conversationImpl=new ConversationImpl(speechConfig),cb=arg2,err=arg3,conversationImpl.createConversationAsync((()=>{cb&&cb()}),(error=>{err&&err(error)}))),conversationImpl}}exports.Conversation=Conversation;class ConversationImpl extends Conversation{constructor(speechConfig,id){super(),this.privErrors=Exports_js_1.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var _a;this.privIsConnected=!0;try{(null===(_a=this.privConversationTranslator)||void 0===_a?void 0:_a.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{var _a;try{(null===(_a=this.privConversationTranslator)||void 0===_a?void 0:_a.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(r,e)=>{var _a;try{(null===(_a=this.privConversationTranslator)||void 0===_a?void 0:_a.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,e)}catch(e){}},this.onParticipantUpdateCommandReceived=(r,e)=>{try{const updatedParticipant=this.privParticipants.getParticipant(e.id);if(void 0!==updatedParticipant){switch(e.key){case Exports_js_1.ConversationTranslatorCommandTypes.changeNickname:updatedParticipant.displayName=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setUseTTS:updatedParticipant.isUsingTts=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setProfanityFiltering:updatedParticipant.profanity=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setMute:updatedParticipant.isMuted=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages:updatedParticipant.translateToLanguages=e.value}this.privParticipants.addOrUpdateParticipant(updatedParticipant),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.Updated,[this.toParticipant(updatedParticipant)],e.sessionId))}}catch(e){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(r,e)=>{try{this.privParticipants.participants.forEach((p=>p.isMuted=!p.isHost&&e.isMuted)),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.Updated,this.toParticipants(!1),e.sessionId))}catch(e){}},this.onParticipantJoinCommandReceived=(r,e)=>{try{const newParticipant=this.privParticipants.addOrUpdateParticipant(e.participant);void 0!==newParticipant&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.JoinedConversation,[this.toParticipant(newParticipant)],e.sessionId))}catch(e){}},this.onParticipantLeaveCommandReceived=(r,e)=>{try{const ejectedParticipant=this.privParticipants.getParticipant(e.participant.id);void 0!==ejectedParticipant&&(this.privParticipants.deleteParticipant(e.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.LeftConversation,[this.toParticipant(ejectedParticipant)],e.sessionId)))}catch(e){}},this.onTranslationReceived=(r,e)=>{try{switch(e.command){case Exports_js_1.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,void 0,e.sessionId));break;case Exports_js_1.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,void 0,e.sessionId));break;case Exports_js_1.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,void 0,e.sessionId))}}catch(e){}},this.onParticipantsListReceived=(r,e)=>{var _a;try{if(void 0!==e.sessionToken&&null!==e.sessionToken&&(this.privRoom.token=e.sessionToken),this.privParticipants.participants=[...e.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),e.sessionId)),this.me.isHost){const nickname=null===(_a=this.privConversationTranslator)||void 0===_a?void 0:_a.properties.getProperty(Exports_js_3.PropertyId.ConversationTranslator_Name);void 0!==nickname&&nickname.length>0&&nickname!==this.me.displayName&&this.changeNicknameAsync(nickname)}}catch(e){}},this.onConversationExpiration=(r,e)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,e)}catch(e){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new Exports_js_3.PropertyCollection,this.privManager=new Exports_js_1.ConversationManager;if(speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage])||speechConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage],Exports_js_1.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]),id)this.privConversationId=id;else{0===speechConfig.targetLanguages.length&&speechConfig.addTargetLanguage(this.privLanguage);speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceResponse_ProfanityOption])||speechConfig.setProfanity(Exports_js_3.ProfanityOption.Masked);let hostNickname=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.ConversationTranslator_Name]);null==hostNickname&&(hostNickname="Host"),Contracts_js_1.Contracts.throwIfNullOrTooLong(hostNickname,"nickname",50),Contracts_js_1.Contracts.throwIfNullOrTooShort(hostNickname,"nickname",2),speechConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.ConversationTranslator_Name],hostNickname)}this.privConfig=speechConfig;const configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(configImpl,"speechConfig"),this.privProperties=configImpl.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Exports_js_1.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var _a,_b;return!(null===(_a=this.privParticipants.me)||void 0===_a?void 0:_a.isHost)&&(null===(_b=this.privParticipants.me)||void 0===_b?void 0:_b.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const convId=this.conversationId,p=this.participants.map((part=>({id:part.id,preferredLanguage:part.preferredLanguage,voice:part.voice}))),props={};for(const key of Exports_js_1.ConversationConnectionConfig.transcriptionEventKeys){const val=this.properties.getProperty(key,"");""!==val&&(props[key]=val)}return{id:convId,participants:p,conversationProperties:props}}get canSend(){var _a;return this.privIsConnected&&!(null===(_a=this.privParticipants.me)||void 0===_a?void 0:_a.isMuted)}get canSendAsHost(){var _a;return this.privIsConnected&&(null===(_a=this.privParticipants.me)||void 0===_a?void 0:_a.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"authorizationToken"),this.privToken=value}set conversationTranslator(conversationTranslator){this.privConversationTranslator=conversationTranslator}onToken(token){this.privConversationTranslator.onToken(token)}createConversationAsync(cb,err){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),err),this.privManager.createOrJoin(this.privProperties,void 0,(room=>{room||this.handleError(new Error(this.privErrors.permissionDeniedConnect),err),this.privRoom=room,this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}startConversationAsync(cb,err){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),err),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=Exports_js_1.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}addParticipantAsync(participant,cb,err){Contracts_js_1.Contracts.throwIfNullOrUndefined(participant,"Participant"),Exports_js_2.marshalPromiseToCallbacks(this.addParticipantImplAsync(participant),cb,err)}joinConversationAsync(conversationId,nickname,lang,cb,err){try{Contracts_js_1.Contracts.throwIfNullOrWhitespace(conversationId,this.privErrors.invalidArgs.replace("{arg}","conversationId")),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname")),Contracts_js_1.Contracts.throwIfNullOrWhitespace(lang,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,conversationId,(room=>{Contracts_js_1.Contracts.throwIfNullOrUndefined(room,this.privErrors.permissionDeniedConnect),this.privRoom=room,this.privConfig.authorizationToken=room.cognitiveSpeechAuthToken,cb&&cb(room.cognitiveSpeechAuthToken)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}deleteConversationAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),cb,err)}deleteConversationImplAsync(){return __awaiter(this,void 0,void 0,(function*(){Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}))}endConversationAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.endConversationImplAsync(),cb,err)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}muteAllParticipantsAsync(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}muteParticipantAsync(userId,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrWhitespace(userId,this.privErrors.invalidArgs.replace("{arg}","userId")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),this.me.isHost||this.me.id===userId||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),err);-1===this.privParticipants.getParticipantIndex(userId)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId,!0),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}removeParticipantAsync(userId,cb,err){try{if(Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&userId.hasOwnProperty("id"))Exports_js_2.marshalPromiseToCallbacks(this.removeParticipantImplAsync(userId),cb,err);else{Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),err);let participantId="";if("string"==typeof userId)participantId=userId;else if(userId.hasOwnProperty("id")){participantId=userId.id}else if(userId.hasOwnProperty("userId")){participantId=userId.userId}Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex((p=>p.id===participantId))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(participantId),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}}catch(error){this.handleError(error,err)}}unlockConversationAsync(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}unmuteAllParticipantsAsync(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}unmuteParticipantAsync(userId,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrWhitespace(userId,this.privErrors.invalidArgs.replace("{arg}","userId")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),this.me.isHost||this.me.id===userId||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),err);-1===this.privParticipants.getParticipantIndex(userId)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId,!1),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}sendTextMessageAsync(message,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,this.privErrors.invalidArgs.replace("{arg}","message")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),message.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(message),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}setTranslatedLanguagesAsync(languages,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfArrayEmptyOrWhitespace(languages,this.privErrors.invalidArgs.replace("{arg}","languages")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(languages),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}changeNicknameAsync(nickname,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(nickname),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(recognizer){return __awaiter(this,void 0,void 0,(function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield recognizer.enforceAudioGating(),this.privTranscriberRecognizer=recognizer,this.privTranscriberRecognizer.conversation=this}))}getKeepAlive(){const nickname=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(participant){if(void 0!==this.privParticipants.addOrUpdateParticipant(participant)&&this.privTranscriberRecognizer){const conversationInfo=this.conversationInfo;return conversationInfo.participants=[participant],this.privTranscriberRecognizer.pushConversationEvent(conversationInfo,"join")}}removeParticipantImplAsync(participant){this.privParticipants.deleteParticipant(participant.id);const conversationInfo=this.conversationInfo;return conversationInfo.participants=[participant],this.privTranscriberRecognizer.pushConversationEvent(conversationInfo,"leave")}close(dispose){var _a;return __awaiter(this,void 0,void 0,(function*(){try{this.privIsConnected=!1,yield null===(_a=this.privConversationRecognizer)||void 0===_a?void 0:_a.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(e){throw e}dispose&&this.dispose()}))}handleCallback(cb,err){if(cb){try{cb()}catch(e){err&&err(e)}cb=void 0}}handleError(error,err){if(err)if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error)}toParticipants(includeHost){const participants=this.privParticipants.participants.map((p=>this.toParticipant(p)));return includeHost?participants:participants.filter((p=>!1===p.isHost))}toParticipant(p){return new Exports_js_3.Participant(p.id,p.avatar,p.displayName,p.isHost,p.isMuted,p.isUsingTts,p.preferredLanguage,p.voice)}getMuteAllCommand(isMuted){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isMuted})}getMuteCommand(participantId,isMuted){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setMute,participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isMuted})}getLockCommand(isLocked){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isLocked})}getEjectCommand(participantId){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.ejectParticipant,participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(languages){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:languages})}getChangeNicknameCommand(nickname){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,"nickname"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.changeNickname,nickname,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:nickname})}getMessageCommand(message){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:message,type:Exports_js_1.ConversationTranslatorMessageTypes.instantMessage})}}exports.ConversationImpl=ConversationImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationCommon.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationCommon=void 0;exports.ConversationCommon=class ConversationCommon{constructor(audioConfig){this.privAudioConfig=audioConfig}handleCallback(cb,err){if(cb){try{cb()}catch(e){err&&err(e)}cb=void 0}}handleError(error,err){if(err)if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationExpirationEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationExpirationEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ConversationExpirationEventArgs extends Exports_js_1.SessionEventArgs{constructor(expirationTime,sessionId){super(sessionId),this.privExpirationTime=expirationTime}get expirationTime(){return this.privExpirationTime}}exports.ConversationExpirationEventArgs=ConversationExpirationEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationParticipantsChangedEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ConversationParticipantsChangedEventArgs extends Exports_js_1.SessionEventArgs{constructor(reason,participants,sessionId){super(sessionId),this.privReason=reason,this.privParticipant=participants}get reason(){return this.privReason}get participants(){return this.privParticipant}}exports.ConversationParticipantsChangedEventArgs=ConversationParticipantsChangedEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranscriber.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranscriber=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ConversationTranscriber extends Exports_js_3.Recognizer{constructor(speechConfig,audioConfig){const speechConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(speechConfigImpl,"speechConfig"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(speechConfigImpl.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]),super(audioConfig,speechConfigImpl.properties,new Exports_js_1.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(speechConfig,autoDetectSourceLanguageConfig,audioConfig){const speechConfigImpl=speechConfig;autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);return new ConversationTranscriber(speechConfig,audioConfig)}get endpointId(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,token)}get speechRecognitionLanguage(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple])===Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]?Exports_js_3.OutputFormat.Simple:Exports_js_3.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_1.RecognitionMode.Conversation),cb,err)}stopTranscribingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err)}close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),Exports_js_2.marshalPromiseToCallbacks(this.dispose(!0),cb,errorCb)}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(disposing&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield _super.dispose.call(this,disposing))}))}createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties)}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const configImpl=audioConfig;return recognizerConfig.isSpeakerDiarizationEnabled=!0,new Exports_js_1.ConversationTranscriptionServiceRecognizer(authentication,connectionFactory,configImpl,recognizerConfig,this)}}exports.ConversationTranscriber=ConversationTranscriber},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranscriptionResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranscriptionResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ConversationTranscriptionResult extends Exports_js_1.RecognitionResult{constructor(resultId,reason,text,duration,offset,language,languageDetectionConfidence,speakerId,errorDetails,json,properties){super(resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties),this.privSpeakerId=speakerId}get speakerId(){return this.privSpeakerId}}exports.ConversationTranscriptionResult=ConversationTranscriptionResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranslationCanceledEventArgs=void 0;const CancellationEventArgsBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationEventArgsBase.js");class ConversationTranslationCanceledEventArgs extends CancellationEventArgsBase_js_1.CancellationEventArgsBase{}exports.ConversationTranslationCanceledEventArgs=ConversationTranslationCanceledEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranslationEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranslationEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class ConversationTranslationEventArgs extends Exports_js_1.RecognitionEventArgs{constructor(result,offset,sessionId){super(offset,sessionId),this.privResult=result}get result(){return this.privResult}}exports.ConversationTranslationEventArgs=ConversationTranslationEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranslationResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranslationResult=void 0;const TranslationRecognitionResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionResult.js");class ConversationTranslationResult extends TranslationRecognitionResult_js_1.TranslationRecognitionResult{constructor(participantId,translations,originalLanguage,resultId,reason,text,duration,offset,errorDetails,json,properties){super(translations,resultId,reason,text,duration,offset,void 0,void 0,errorDetails,json,properties),this.privId=participantId,this.privOrigLang=originalLanguage}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}exports.ConversationTranslationResult=ConversationTranslationResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranslator.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConversationTranslator=exports.SpeechState=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),ConversationTranslatorConnectionFactory_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Transcription/ConversationTranslatorConnectionFactory.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Conversation_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Conversation.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Exports.js");var SpeechState;!function(SpeechState){SpeechState[SpeechState.Inactive=0]="Inactive",SpeechState[SpeechState.Connecting=1]="Connecting",SpeechState[SpeechState.Connected=2]="Connected"}(SpeechState=exports.SpeechState||(exports.SpeechState={}));class ConversationTranslationRecognizer extends Exports_js_3.TranslationRecognizer{constructor(speechConfig,audioConfig,translator,convGetter){super(speechConfig,audioConfig,new ConversationTranslatorConnectionFactory_js_1.ConversationTranslatorConnectionFactory(convGetter)),this.privSpeechState=SpeechState.Inactive,translator&&(this.privTranslator=translator,this.sessionStarted=()=>{this.privSpeechState=SpeechState.Connected},this.sessionStopped=()=>{this.privSpeechState=SpeechState.Inactive},this.recognizing=(tr,e)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,e)},this.recognized=(tr,e)=>__awaiter(this,void 0,void 0,(function*(){var _a;(null===(_a=e.result)||void 0===_a?void 0:_a.errorDetails)?(yield this.cancelSpeech(),this.fireCancelEvent(e.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,e)})),this.canceled=()=>__awaiter(this,void 0,void 0,(function*(){if(this.privSpeechState!==SpeechState.Inactive)try{yield this.cancelSpeech()}catch(error){this.privSpeechState=SpeechState.Inactive}})))}get state(){return this.privSpeechState}set state(newState){this.privSpeechState=newState}set authentication(token){this.privReco.authentication=token}onConnection(){this.privSpeechState=SpeechState.Connected}onCancelSpeech(){return __awaiter(this,void 0,void 0,(function*(){this.privSpeechState=SpeechState.Inactive,yield this.cancelSpeech()}))}fireCancelEvent(error){try{if(this.privTranslator.canceled){const cancelEvent=new Exports_js_4.ConversationTranslationCanceledEventArgs(Exports_js_3.CancellationReason.Error,error,Exports_js_3.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,cancelEvent)}}catch(e){}}cancelSpeech(){var _a;return __awaiter(this,void 0,void 0,(function*(){try{this.stopContinuousRecognitionAsync(),yield null===(_a=this.privReco)||void 0===_a?void 0:_a.disconnect(),this.privSpeechState=SpeechState.Inactive}catch(e){}}))}}class ConversationTranslator extends Exports_js_4.ConversationCommon{constructor(audioConfig){super(audioConfig),this.privErrors=Exports_js_1.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new Exports_js_3.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var _a;return null===(_a=this.privConversation)||void 0===_a?void 0:_a.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer)&&(!this.privIsSpeaking&&this.privCTRecognizer.state!==SpeechState.Connected&&this.privCTRecognizer.state!==SpeechState.Connecting&&!this.privConversation.isMutedByHost)}onToken(token){this.privCTRecognizer.authentication=token}setServiceProperty(name,value){const currentProperties=JSON.parse(this.privProperties.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));currentProperties[name]=value,this.privProperties.setProperty(Exports_js_1.ServicePropertiesPropertyName,JSON.stringify(currentProperties))}joinConversationAsync(conversation,nickname,param1,param2,param3){try{if("string"==typeof conversation){Contracts_js_1.Contracts.throwIfNullOrUndefined(conversation,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),param3);let lang=param1;null!=lang&&""!==lang||(lang=Exports_js_1.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=Exports_js_3.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(Exports_js_3.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(lang),this.privSpeechTranslationConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage],lang),this.privSpeechTranslationConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.ConversationTranslator_Name],nickname);const propertyIdsToCopy=[Exports_js_3.PropertyId.SpeechServiceConnection_Host,Exports_js_3.PropertyId.ConversationTranslator_Host,Exports_js_3.PropertyId.SpeechServiceConnection_Endpoint,Exports_js_3.PropertyId.SpeechServiceConnection_ProxyHostName,Exports_js_3.PropertyId.SpeechServiceConnection_ProxyPassword,Exports_js_3.PropertyId.SpeechServiceConnection_ProxyPort,Exports_js_3.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const prop of propertyIdsToCopy){const value=this.privProperties.getProperty(prop);if(value){const key="string"==typeof prop?prop:Exports_js_3.PropertyId[prop];this.privSpeechTranslationConfig.setProperty(key,value)}}const currentProperties=JSON.parse(this.privProperties.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));for(const prop of Object.keys(currentProperties))this.privSpeechTranslationConfig.setServiceProperty(prop,currentProperties[prop],Exports_js_3.ServicePropertyChannel.UriQueryParameter);this.privConversation=new Conversation_js_1.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(conversation,nickname,lang,(result=>{result||this.handleError(new Error(this.privErrors.permissionDeniedConnect),param3),this.privSpeechTranslationConfig.authorizationToken=result,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync((()=>{this.handleCallback(param2,param3)}),(error=>{this.handleError(error,param3)}))}),(error=>{this.handleError(error,param3)}))}else"object"==typeof conversation?(Contracts_js_1.Contracts.throwIfNullOrUndefined(conversation,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(Exports_js_3.PropertyId.ConversationTranslator_Name,nickname),this.privConversation=conversation,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=conversation.config,this.handleCallback(param1,param2)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),param2)}catch(error){this.handleError(error,"string"==typeof param1?param3:param2)}}leaveConversationAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks((()=>__awaiter(this,void 0,void 0,(function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()})))(),cb,err)}sendTextMessageAsync(message,cb,err){try{Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,this.privErrors.invalidArgs.replace("{arg}",message)),this.privConversation.sendTextMessageAsync(message,cb,err)}catch(error){this.handleError(error,err)}}startTranscribingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks((()=>__awaiter(this,void 0,void 0,(function*(){try{Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(error){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),error}})))(),cb,err)}stopTranscribingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks((()=>__awaiter(this,void 0,void 0,(function*(){try{if(!this.privIsSpeaking)return void(yield this.cancelSpeech());this.privIsSpeaking=!1,yield new Promise(((resolve,reject)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(resolve,reject)}))}catch(error){yield this.cancelSpeech()}})))(),cb,err)}isDisposed(){return this.privIsDisposed}dispose(reason,success,err){Exports_js_2.marshalPromiseToCallbacks((()=>__awaiter(this,void 0,void 0,(function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})))(),success,err)}cancelSpeech(){var _a;return __awaiter(this,void 0,void 0,(function*(){try{this.privIsSpeaking=!1,yield null===(_a=this.privCTRecognizer)||void 0===_a?void 0:_a.onCancelSpeech(),this.privCTRecognizer=void 0}catch(e){}}))}connectTranslatorRecognizer(){return __awaiter(this,void 0,void 0,(function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=Exports_js_3.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_Key],"");const convGetter=()=>this.privConversation;this.privCTRecognizer=new ConversationTranslationRecognizer(this.privSpeechTranslationConfig,this.privAudioConfig,this,convGetter)}catch(error){throw yield this.cancelSpeech(),error}}))}startContinuousRecognition(){return new Promise(((resolve,reject)=>{this.privCTRecognizer.startContinuousRecognitionAsync(resolve,reject)}))}}exports.ConversationTranslator=ConversationTranslator},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Exports.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Conversation_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Conversation.js");Object.defineProperty(exports,"Conversation",{enumerable:!0,get:function(){return Conversation_js_1.Conversation}}),Object.defineProperty(exports,"ConversationImpl",{enumerable:!0,get:function(){return Conversation_js_1.ConversationImpl}});var ConversationCommon_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationCommon.js");Object.defineProperty(exports,"ConversationCommon",{enumerable:!0,get:function(){return ConversationCommon_js_1.ConversationCommon}});var ConversationExpirationEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationExpirationEventArgs.js");Object.defineProperty(exports,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return ConversationExpirationEventArgs_js_1.ConversationExpirationEventArgs}});var ConversationParticipantsChangedEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js");Object.defineProperty(exports,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return ConversationParticipantsChangedEventArgs_js_1.ConversationParticipantsChangedEventArgs}});var ConversationTranslationCanceledEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js");Object.defineProperty(exports,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return ConversationTranslationCanceledEventArgs_js_1.ConversationTranslationCanceledEventArgs}});var ConversationTranslationEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranslationEventArgs.js");Object.defineProperty(exports,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return ConversationTranslationEventArgs_js_1.ConversationTranslationEventArgs}});var ConversationTranslationResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranslationResult.js");Object.defineProperty(exports,"ConversationTranslationResult",{enumerable:!0,get:function(){return ConversationTranslationResult_js_1.ConversationTranslationResult}});var ConversationTranslator_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranslator.js");Object.defineProperty(exports,"ConversationTranslator",{enumerable:!0,get:function(){return ConversationTranslator_js_1.ConversationTranslator}});var ConversationTranscriber_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranscriber.js");Object.defineProperty(exports,"ConversationTranscriber",{enumerable:!0,get:function(){return ConversationTranscriber_js_1.ConversationTranscriber}});var IParticipant_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/IParticipant.js");Object.defineProperty(exports,"Participant",{enumerable:!0,get:function(){return IParticipant_js_1.Participant}}),Object.defineProperty(exports,"User",{enumerable:!0,get:function(){return IParticipant_js_1.User}});var ParticipantChangedReason_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ParticipantChangedReason.js");Object.defineProperty(exports,"ParticipantChangedReason",{enumerable:!0,get:function(){return ParticipantChangedReason_js_1.ParticipantChangedReason}});var Meeting_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Meeting.js");Object.defineProperty(exports,"Meeting",{enumerable:!0,get:function(){return Meeting_js_1.Meeting}}),Object.defineProperty(exports,"MeetingImpl",{enumerable:!0,get:function(){return Meeting_js_1.MeetingImpl}});var MeetingTranscriptionCanceledEventArgs_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/MeetingTranscriptionCanceledEventArgs.js");Object.defineProperty(exports,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return MeetingTranscriptionCanceledEventArgs_js_1.MeetingTranscriptionCanceledEventArgs}});var MeetingTranscriber_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/MeetingTranscriber.js");Object.defineProperty(exports,"MeetingTranscriber",{enumerable:!0,get:function(){return MeetingTranscriber_js_1.MeetingTranscriber}});var ConversationTranscriptionResult_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ConversationTranscriptionResult.js");Object.defineProperty(exports,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return ConversationTranscriptionResult_js_1.ConversationTranscriptionResult}})},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/IParticipant.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Participant=exports.User=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");exports.User=class User{constructor(userId){this.privUserId=userId}get userId(){return this.privUserId}};class Participant{constructor(id,avatar,displayName,isHost,isMuted,isUsingTts,preferredLanguage,voice){this.privId=id,this.privAvatar=avatar,this.privDisplayName=displayName,this.privIsHost=isHost,this.privIsMuted=isMuted,this.privIsUsingTts=isUsingTts,this.privPreferredLanguage=preferredLanguage,this.privVoice=voice,this.privProperties=new Exports_js_1.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(id,language,voice){return new Participant(id,"",id,!1,!1,!1,language,voice)}}exports.Participant=Participant},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Meeting.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeetingImpl=exports.Meeting=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class Meeting{constructor(){}static createMeetingAsync(speechConfig,meetingId,arg3,arg4){if(Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig.region,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),Contracts_js_1.Contracts.throwIfNull(meetingId,"meetingId"),0===meetingId.length)throw new Error("meetingId cannot be empty");speechConfig.subscriptionKey||speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceAuthorization_Token])||Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig.subscriptionKey,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const meetingImpl=new MeetingImpl(speechConfig,meetingId);return Exports_js_2.marshalPromiseToCallbacks((()=>__awaiter(this,void 0,void 0,(function*(){})))(),arg3,arg4),meetingImpl}}exports.Meeting=Meeting;class MeetingImpl extends Meeting{constructor(speechConfig,id){super(),this.privErrors=Exports_js_1.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var _a;this.privIsConnected=!0;try{(null===(_a=this.privConversationTranslator)||void 0===_a?void 0:_a.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{var _a;try{(null===(_a=this.privConversationTranslator)||void 0===_a?void 0:_a.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(r,e)=>{var _a;try{(null===(_a=this.privConversationTranslator)||void 0===_a?void 0:_a.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,e)}catch(e){}},this.onParticipantUpdateCommandReceived=(r,e)=>{try{const updatedParticipant=this.privParticipants.getParticipant(e.id);if(void 0!==updatedParticipant){switch(e.key){case Exports_js_1.ConversationTranslatorCommandTypes.changeNickname:updatedParticipant.displayName=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setUseTTS:updatedParticipant.isUsingTts=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setProfanityFiltering:updatedParticipant.profanity=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setMute:updatedParticipant.isMuted=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages:updatedParticipant.translateToLanguages=e.value}this.privParticipants.addOrUpdateParticipant(updatedParticipant),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.Updated,[this.toParticipant(updatedParticipant)],e.sessionId))}}catch(e){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(r,e)=>{try{this.privParticipants.participants.forEach((p=>p.isMuted=!p.isHost&&e.isMuted)),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.Updated,this.toParticipants(!1),e.sessionId))}catch(e){}},this.onParticipantJoinCommandReceived=(r,e)=>{try{const newParticipant=this.privParticipants.addOrUpdateParticipant(e.participant);void 0!==newParticipant&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.JoinedConversation,[this.toParticipant(newParticipant)],e.sessionId))}catch(e){}},this.onParticipantLeaveCommandReceived=(r,e)=>{try{const ejectedParticipant=this.privParticipants.getParticipant(e.participant.id);void 0!==ejectedParticipant&&(this.privParticipants.deleteParticipant(e.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.LeftConversation,[this.toParticipant(ejectedParticipant)],e.sessionId)))}catch(e){}},this.onTranslationReceived=(r,e)=>{try{switch(e.command){case Exports_js_1.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,void 0,e.sessionId));break;case Exports_js_1.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,void 0,e.sessionId));break;case Exports_js_1.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,void 0,e.sessionId))}}catch(e){}},this.onParticipantsListReceived=(r,e)=>{var _a;try{if(void 0!==e.sessionToken&&null!==e.sessionToken&&(this.privRoom.token=e.sessionToken),this.privParticipants.participants=[...e.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),e.sessionId)),this.me.isHost){const nickname=null===(_a=this.privConversationTranslator)||void 0===_a?void 0:_a.properties.getProperty(Exports_js_3.PropertyId.ConversationTranslator_Name);void 0!==nickname&&nickname.length>0&&nickname!==this.me.displayName&&this.changeNicknameAsync(nickname)}}catch(e){}},this.onConversationExpiration=(r,e)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,e)}catch(e){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new Exports_js_3.PropertyCollection,this.privManager=new Exports_js_1.ConversationManager;speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage])||speechConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage],Exports_js_1.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=id,this.privConfig=speechConfig;const configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(configImpl,"speechConfig"),this.privProperties=configImpl.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Exports_js_1.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var _a,_b;return!(null===(_a=this.privParticipants.me)||void 0===_a?void 0:_a.isHost)&&(null===(_b=this.privParticipants.me)||void 0===_b?void 0:_b.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const convId=this.meetingId,p=this.participants.map((part=>({id:part.id,preferredLanguage:part.preferredLanguage,voice:part.voice}))),props={};for(const key of Exports_js_1.ConversationConnectionConfig.transcriptionEventKeys){const val=this.properties.getProperty(key,"");""!==val&&(props[key]=val)}return{id:convId,participants:p,meetingProperties:props}}get canSend(){var _a;return this.privIsConnected&&!(null===(_a=this.privParticipants.me)||void 0===_a?void 0:_a.isMuted)}get canSendAsHost(){var _a;return this.privIsConnected&&(null===(_a=this.privParticipants.me)||void 0===_a?void 0:_a.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"authorizationToken"),this.privToken=value}createMeetingAsync(cb,err){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),err),this.privManager.createOrJoin(this.privProperties,void 0,(room=>{room||this.handleError(new Error(this.privErrors.permissionDeniedConnect),err),this.privRoom=room,this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}startMeetingAsync(cb,err){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),err),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}addParticipantAsync(participant,cb,err){Contracts_js_1.Contracts.throwIfNullOrUndefined(participant,"Participant"),Exports_js_2.marshalPromiseToCallbacks(this.addParticipantImplAsync(participant),cb,err)}joinMeetingAsync(meetingId,nickname,lang,cb,err){try{Contracts_js_1.Contracts.throwIfNullOrWhitespace(meetingId,this.privErrors.invalidArgs.replace("{arg}","conversationId")),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname")),Contracts_js_1.Contracts.throwIfNullOrWhitespace(lang,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,meetingId,(room=>{Contracts_js_1.Contracts.throwIfNullOrUndefined(room,this.privErrors.permissionDeniedConnect),this.privRoom=room,this.privConfig.authorizationToken=room.cognitiveSpeechAuthToken,cb&&cb(room.cognitiveSpeechAuthToken)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}deleteMeetingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),cb,err)}deleteMeetingImplAsync(){return __awaiter(this,void 0,void 0,(function*(){Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}))}endMeetingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.endMeetingImplAsync(),cb,err)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}muteAllParticipantsAsync(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}muteParticipantAsync(userId,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrWhitespace(userId,this.privErrors.invalidArgs.replace("{arg}","userId")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),this.me.isHost||this.me.id===userId||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),err);-1===this.privParticipants.getParticipantIndex(userId)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId,!0),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}removeParticipantAsync(userId,cb,err){try{if(Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&userId.hasOwnProperty("id"))Exports_js_2.marshalPromiseToCallbacks(this.removeParticipantImplAsync(userId),cb,err);else{Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),err);let participantId="";if("string"==typeof userId)participantId=userId;else if(userId.hasOwnProperty("id")){participantId=userId.id}else if(userId.hasOwnProperty("userId")){participantId=userId.userId}Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex((p=>p.id===participantId))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(participantId),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}}catch(error){this.handleError(error,err)}}unlockMeetingAsync(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}unmuteAllParticipantsAsync(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}unmuteParticipantAsync(userId,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrWhitespace(userId,this.privErrors.invalidArgs.replace("{arg}","userId")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),this.me.isHost||this.me.id===userId||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),err);-1===this.privParticipants.getParticipantIndex(userId)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId,!1),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}sendTextMessageAsync(message,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,this.privErrors.invalidArgs.replace("{arg}","message")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),message.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(message),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}setTranslatedLanguagesAsync(languages,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfArrayEmptyOrWhitespace(languages,this.privErrors.invalidArgs.replace("{arg}","languages")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(languages),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}changeNicknameAsync(nickname,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed),Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname")),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),err),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(nickname),(()=>{this.handleCallback(cb,err)}),(error=>{this.handleError(error,err)}))}catch(error){this.handleError(error,err)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(recognizer){return __awaiter(this,void 0,void 0,(function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield recognizer.enforceAudioGating(),this.privTranscriberRecognizer=recognizer,this.privTranscriberRecognizer.meeting=this}))}getKeepAlive(){const nickname=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(participant){if(void 0!==this.privParticipants.addOrUpdateParticipant(participant)&&this.privTranscriberRecognizer){const meetingInfo=this.meetingInfo;return meetingInfo.participants=[participant],this.privTranscriberRecognizer.pushMeetingEvent(meetingInfo,"join")}}removeParticipantImplAsync(participant){this.privParticipants.deleteParticipant(participant.id);const meetingInfo=this.meetingInfo;return meetingInfo.participants=[participant],this.privTranscriberRecognizer.pushMeetingEvent(meetingInfo,"leave")}close(dispose){var _a;return __awaiter(this,void 0,void 0,(function*(){try{this.privIsConnected=!1,yield null===(_a=this.privConversationRecognizer)||void 0===_a?void 0:_a.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(e){throw e}dispose&&this.dispose()}))}handleCallback(cb,err){if(cb){try{cb()}catch(e){err&&err(e)}cb=void 0}}handleError(error,err){if(err)if(error instanceof Error){const typedError=error;err(typedError.name+": "+typedError.message)}else err(error)}toParticipants(includeHost){const participants=this.privParticipants.participants.map((p=>this.toParticipant(p)));return includeHost?participants:participants.filter((p=>!1===p.isHost))}toParticipant(p){return new Exports_js_3.Participant(p.id,p.avatar,p.displayName,p.isHost,p.isMuted,p.isUsingTts,p.preferredLanguage,p.voice)}getMuteAllCommand(isMuted){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isMuted})}getMuteCommand(participantId,isMuted){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setMute,participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isMuted})}getLockCommand(isLocked){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isLocked})}getEjectCommand(participantId){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.ejectParticipant,participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(languages){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:languages})}getChangeNicknameCommand(nickname){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,"nickname"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.changeNickname,nickname,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:nickname})}getMessageCommand(message){return Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:message,type:Exports_js_1.ConversationTranslatorMessageTypes.instantMessage})}}exports.MeetingImpl=MeetingImpl},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/MeetingTranscriber.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeetingTranscriber=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js"),Exports_js_4=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/Exports.js");exports.MeetingTranscriber=class MeetingTranscriber{constructor(audioConfig){this.privAudioConfig=audioConfig,this.privProperties=new Exports_js_3.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return Exports_js_3.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,token)}joinMeetingAsync(meeting,cb,err){const meetingImpl=meeting;Contracts_js_1.Contracts.throwIfNullOrUndefined(Exports_js_4.MeetingImpl,"Meeting"),this.privRecognizer=new Exports_js_1.TranscriberRecognizer(meeting.config,this.privAudioConfig),Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),Exports_js_2.marshalPromiseToCallbacks(meetingImpl.connectTranscriberRecognizer(this.privRecognizer),cb,err)}startTranscribingAsync(cb,err){this.privRecognizer.startContinuousRecognitionAsync(cb,err)}stopTranscribingAsync(cb,err){this.privRecognizer.stopContinuousRecognitionAsync(cb,err)}leaveMeetingAsync(cb,err){this.privRecognizer.disconnectCallbacks(),Exports_js_2.marshalPromiseToCallbacks((()=>__awaiter(this,void 0,void 0,(function*(){})))(),cb,err)}close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer),Exports_js_2.marshalPromiseToCallbacks(this.dispose(!0),cb,errorCb)}dispose(disposing){return __awaiter(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),disposing&&(this.privDisposedRecognizer=!0))}))}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/MeetingTranscriptionCanceledEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeetingTranscriptionCanceledEventArgs=void 0;const CancellationEventArgsBase_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/CancellationEventArgsBase.js");class MeetingTranscriptionCanceledEventArgs extends CancellationEventArgsBase_js_1.CancellationEventArgsBase{}exports.MeetingTranscriptionCanceledEventArgs=MeetingTranscriptionCanceledEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Transcription/ParticipantChangedReason.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParticipantChangedReason=void 0,function(ParticipantChangedReason){ParticipantChangedReason[ParticipantChangedReason.JoinedConversation=0]="JoinedConversation",ParticipantChangedReason[ParticipantChangedReason.LeftConversation=1]="LeftConversation",ParticipantChangedReason[ParticipantChangedReason.Updated=2]="Updated"}(exports.ParticipantChangedReason||(exports.ParticipantChangedReason={}))},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionCanceledEventArgs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationRecognitionCanceledEventArgs=void 0;exports.TranslationRecognitionCanceledEventArgs=class TranslationRecognitionCanceledEventArgs{constructor(sessionid,cancellationReason,errorDetails,errorCode,result){this.privCancelReason=cancellationReason,this.privErrorDetails=errorDetails,this.privResult=result,this.privSessionId=sessionid,this.privErrorCode=errorCode}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationRecognitionEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class TranslationRecognitionEventArgs extends Exports_js_1.RecognitionEventArgs{constructor(result,offset,sessionId){super(offset,sessionId),this.privResult=result}get result(){return this.privResult}}exports.TranslationRecognitionEventArgs=TranslationRecognitionEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognitionResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationRecognitionResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class TranslationRecognitionResult extends Exports_js_1.SpeechRecognitionResult{constructor(translations,resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties){super(resultId,reason,text,duration,offset,language,languageDetectionConfidence,void 0,errorDetails,json,properties),this.privTranslations=translations}static fromSpeechRecognitionResult(result){return new TranslationRecognitionResult(void 0,result.resultId,result.reason,result.text,result.duration,result.offset,result.language,result.languageDetectionConfidence,result.errorDetails,result.json,result.properties)}get translations(){return this.privTranslations}}exports.TranslationRecognitionResult=TranslationRecognitionResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationRecognizer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationRecognizer=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common/Exports.js"),Connection_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Connection.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_3=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class TranslationRecognizer extends Exports_js_3.Recognizer{constructor(speechConfig,audioConfig,connectionFactory){const configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(configImpl,"speechConfig"),super(audioConfig,configImpl.properties,connectionFactory||new Exports_js_1.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice]),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages]),Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(speechTranslationConfig,autoDetectSourceLanguageConfig,audioConfig){const speechTranslationConfigImpl=speechTranslationConfig;return autoDetectSourceLanguageConfig.properties.mergeTo(speechTranslationConfigImpl.properties),new TranslationRecognizer(speechTranslationConfig,audioConfig)}get speechRecognitionLanguage(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(value){this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,value)}recognizeOnceAsync(cb,err){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),Exports_js_2.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Exports_js_1.RecognitionMode.Interactive),cb,err)}startContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_1.RecognitionMode.Conversation),cb,err)}stopContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err)}removeTargetLanguage(lang){if(Contracts_js_1.Contracts.throwIfNullOrUndefined(lang,"language to be removed"),void 0!==this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){const languages=this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),index=languages.indexOf(lang);index>-1&&(languages.splice(index,1),this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,languages.join(",")),this.updateLanguages(languages))}}addTargetLanguage(lang){Contracts_js_1.Contracts.throwIfNullOrUndefined(lang,"language to be added");let languages=[];void 0!==this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(languages=this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),languages.includes(lang)||(languages.push(lang),this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,languages.join(",")))):(this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,lang),languages=[lang]),this.updateLanguages(languages)}close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),Exports_js_2.marshalPromiseToCallbacks(this.dispose(!0),cb,errorCb)}onConnection(){}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,disposing&&(yield this.implRecognizerStop(),yield _super.dispose.call(this,disposing)))}))}createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties)}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const configImpl=audioConfig;return new Exports_js_1.TranslationServiceRecognizer(authentication,connectionFactory,configImpl,recognizerConfig,this)}updateLanguages(languages){const conn=Connection_js_1.Connection.fromRecognizer(this);conn&&(conn.setMessageProperty("speech.context","translationcontext",{to:languages}),conn.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:languages})))}}exports.TranslationRecognizer=TranslationRecognizer},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationSynthesisEventArgs=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class TranslationSynthesisEventArgs extends Exports_js_1.SessionEventArgs{constructor(result,sessionId){super(sessionId),this.privResult=result}get result(){return this.privResult}}exports.TranslationSynthesisEventArgs=TranslationSynthesisEventArgs},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TranslationSynthesisResult.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslationSynthesisResult=void 0;exports.TranslationSynthesisResult=class TranslationSynthesisResult{constructor(reason,audio){this.privReason=reason,this.privAudio=audio}get audio(){return this.privAudio}get reason(){return this.privReason}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Translations.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Translations=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");exports.Translations=class Translations{constructor(){this.privMap=new Exports_js_1.PropertyCollection}get languages(){return this.privMap.keys}get(key,def){return this.privMap.getProperty(key,def)}set(key,value){this.privMap.setProperty(key,value)}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/TurnStatusReceivedEventArgs.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TurnStatusReceivedEventArgs=void 0;const TurnStatusPayload_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/ServiceMessages/TurnStatusPayload.js");exports.TurnStatusReceivedEventArgs=class TurnStatusReceivedEventArgs{constructor(turnStatus){this.privTurnStatus=TurnStatusPayload_js_1.TurnStatusResponsePayload.fromJSON(turnStatus)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceInfo.js":(__unused_webpack_module,exports)=>{"use strict";var SynthesisVoiceGender,SynthesisVoiceType;Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceInfo=exports.SynthesisVoiceType=exports.SynthesisVoiceGender=void 0,function(SynthesisVoiceGender){SynthesisVoiceGender[SynthesisVoiceGender.Unknown=0]="Unknown",SynthesisVoiceGender[SynthesisVoiceGender.Female=1]="Female",SynthesisVoiceGender[SynthesisVoiceGender.Male=2]="Male"}(SynthesisVoiceGender=exports.SynthesisVoiceGender||(exports.SynthesisVoiceGender={})),function(SynthesisVoiceType){SynthesisVoiceType[SynthesisVoiceType.OnlineNeural=1]="OnlineNeural",SynthesisVoiceType[SynthesisVoiceType.OnlineStandard=2]="OnlineStandard",SynthesisVoiceType[SynthesisVoiceType.OfflineNeural=3]="OfflineNeural",SynthesisVoiceType[SynthesisVoiceType.OfflineStandard=4]="OfflineStandard"}(SynthesisVoiceType=exports.SynthesisVoiceType||(exports.SynthesisVoiceType={}));exports.VoiceInfo=class VoiceInfo{constructor(json){if(this.privStyleList=[],this.privVoicePath="",json&&(this.privName=json.Name,this.privLocale=json.Locale,this.privShortName=json.ShortName,this.privLocaleName=json.LocaleName,this.privDisplayName=json.DisplayName,this.privLocalName=json.LocalName,this.privVoiceType=json.VoiceType.endsWith("Standard")?SynthesisVoiceType.OnlineStandard:SynthesisVoiceType.OnlineNeural,this.privGender="Male"===json.Gender?SynthesisVoiceGender.Male:"Female"===json.Gender?SynthesisVoiceGender.Female:SynthesisVoiceGender.Unknown,json.StyleList&&Array.isArray(json.StyleList)))for(const style of json.StyleList)this.privStyleList.push(style)}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfile.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceProfile=void 0;exports.VoiceProfile=class VoiceProfile{constructor(profileId,profileType){this.privId=profileId,this.privProfileType=profileType}get profileId(){return this.privId}get profileType(){return this.privProfileType}}},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfileClient.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceProfileClient=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),AudioConfig_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Audio/AudioConfig.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class VoiceProfileClient extends Exports_js_2.Recognizer{constructor(speechConfig){Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,"speechConfig");const speechConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(speechConfigImpl,"speechConfig"),super(AudioConfig_js_1.AudioConfig.fromStreamInput(Exports_js_2.AudioInputStream.createPushStream()),speechConfigImpl.properties,new Exports_js_1.VoiceProfileConnectionFactory),this.privProperties=speechConfigImpl.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token"),this.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,token)}createProfileAsync(profileType,lang){return __awaiter(this,void 0,void 0,(function*(){const profileIds=yield this.privVoiceAdapter.createProfile(profileType,lang);return new Exports_js_2.VoiceProfile(profileIds[0],profileType)}))}retrieveEnrollmentResultAsync(profile){return __awaiter(this,void 0,void 0,(function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(profile)}))}getAllProfilesAsync(profileType){return __awaiter(this,void 0,void 0,(function*(){return this.privVoiceAdapter.getAllProfiles(profileType)}))}getActivationPhrasesAsync(profileType,lang){return __awaiter(this,void 0,void 0,(function*(){return this.privVoiceAdapter.getActivationPhrases(profileType,lang)}))}enrollProfileAsync(profile,audioConfig){return __awaiter(this,void 0,void 0,(function*(){const configImpl=audioConfig;return Contracts_js_1.Contracts.throwIfNullOrUndefined(configImpl,"audioConfig"),this.audioConfig=audioConfig,this.privVoiceAdapter.SpeakerAudioSource=configImpl,this.privVoiceAdapter.enrollProfile(profile)}))}deleteProfileAsync(profile){return __awaiter(this,void 0,void 0,(function*(){return this.privVoiceAdapter.deleteProfile(profile)}))}resetProfileAsync(profile){return __awaiter(this,void 0,void 0,(function*(){return this.privVoiceAdapter.resetProfile(profile)}))}close(){return __awaiter(this,void 0,void 0,(function*(){yield this.dispose(!0)}))}createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){const audioImpl=audioConfig;return new Exports_js_1.VoiceServiceRecognizer(authentication,connectionFactory,audioImpl,recognizerConfig,this)}dispose(disposing){const _super=Object.create(null,{dispose:{get:()=>super.dispose}});return __awaiter(this,void 0,void 0,(function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,disposing&&(yield _super.dispose.call(this,disposing)))}))}createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.properties)}getResult(result,successReason){return new Exports_js_2.VoiceProfileResult(result.ok?successReason:Exports_js_2.ResultReason.Canceled,result.statusText)}}exports.VoiceProfileClient=VoiceProfileClient},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfileEnrollmentResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceProfileEnrollmentCancellationDetails=exports.VoiceProfileEnrollmentResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class VoiceProfileEnrollmentResult{constructor(reason,json,statusText){this.privReason=reason,this.privProperties=new Exports_js_2.PropertyCollection,this.privReason!==Exports_js_2.ResultReason.Canceled?json&&(this.privDetails=JSON.parse(json),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=Exports_js_2.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=statusText,this.privProperties.setProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(json){const results=[];for(const item of json.value){const reason="enrolling"===item.enrollmentStatus.toLowerCase()?Exports_js_2.ResultReason.EnrollingVoiceProfile:"enrolled"===item.enrollmentStatus.toLowerCase()?Exports_js_2.ResultReason.EnrolledVoiceProfile:Exports_js_2.ResultReason.Canceled,result=new VoiceProfileEnrollmentResult(reason,null,null);result.privDetails=this.getIdentificationDetails(item),results.push(result)}return results}static FromVerificationProfileList(json){const results=[];for(const item of json.value){const reason="enrolling"===item.enrollmentStatus.toLowerCase()?Exports_js_2.ResultReason.EnrollingVoiceProfile:"enrolled"===item.enrollmentStatus.toLowerCase()?Exports_js_2.ResultReason.EnrolledVoiceProfile:Exports_js_2.ResultReason.Canceled,result=new VoiceProfileEnrollmentResult(reason,null,null);result.privDetails=this.getVerificationDetails(item),results.push(result)}return results}static getIdentificationDetails(json){return{audioLength:json.audioLength?parseFloat(json.audioLength):0,audioSpeechLength:json.audioSpeechLength?parseFloat(json.audioSpeechLength):0,enrollmentStatus:json.enrollmentStatus,enrollmentsCount:json.enrollmentsCount||0,enrollmentsLength:json.enrollmentsLength?parseFloat(json.enrollmentsLength):0,enrollmentsSpeechLength:json.enrollmentsSpeechLength?parseFloat(json.enrollmentsSpeechLength):0,profileId:json.profileId||json.identificationProfileId,remainingEnrollmentsSpeechLength:json.remainingEnrollmentsSpeechLength?parseFloat(json.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(json){return{audioLength:json.audioLength?parseFloat(json.audioLength):0,audioSpeechLength:json.audioSpeechLength?parseFloat(json.audioSpeechLength):0,enrollmentStatus:json.enrollmentStatus,enrollmentsCount:json.enrollmentsCount,enrollmentsLength:json.enrollmentsLength?parseFloat(json.enrollmentsLength):0,enrollmentsSpeechLength:json.enrollmentsSpeechLength?parseFloat(json.enrollmentsSpeechLength):0,profileId:json.profileId||json.verificationProfileId,remainingEnrollmentsCount:json.remainingEnrollments||json.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:json.remainingEnrollmentsSpeechLength?parseFloat(json.remainingEnrollmentsSpeechLength):0}}}exports.VoiceProfileEnrollmentResult=VoiceProfileEnrollmentResult;class VoiceProfileEnrollmentCancellationDetails extends Exports_js_2.CancellationDetailsBase{constructor(reason,errorDetails,errorCode){super(reason,errorDetails,errorCode)}static fromResult(result){const reason=Exports_js_2.CancellationReason.Error;let errorCode=Exports_js_2.CancellationErrorCode.NoError;return result.properties&&(errorCode=Exports_js_2.CancellationErrorCode[result.properties.getProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.NoError])]),new VoiceProfileEnrollmentCancellationDetails(reason,result.errorDetails,errorCode)}}exports.VoiceProfileEnrollmentCancellationDetails=VoiceProfileEnrollmentCancellationDetails},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfilePhraseResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceProfilePhraseResult=void 0;const Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");class VoiceProfilePhraseResult extends Exports_js_1.VoiceProfileResult{constructor(reason,statusText,type,phraseArray){super(reason,statusText),this.privPhrases=[],Contracts_js_1.Contracts.throwIfNullOrUndefined(phraseArray,"phrase array"),this.privType=type,phraseArray&&phraseArray[0]&&(this.privPhrases=phraseArray)}get phrases(){return this.privPhrases}get type(){return this.privType}}exports.VoiceProfilePhraseResult=VoiceProfilePhraseResult},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfileResult.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceProfileCancellationDetails=exports.VoiceProfileResult=void 0;const Exports_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/common.speech/Exports.js"),Contracts_js_1=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Contracts.js"),Exports_js_2=__webpack_require__("./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/Exports.js");exports.VoiceProfileResult=class VoiceProfileResult{constructor(reason,statusText){this.privReason=reason,this.privProperties=new Exports_js_2.PropertyCollection,reason===Exports_js_2.ResultReason.Canceled&&(Contracts_js_1.Contracts.throwIfNullOrUndefined(statusText,"statusText"),this.privErrorDetails=statusText,this.privProperties.setProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};class VoiceProfileCancellationDetails extends Exports_js_2.CancellationDetailsBase{constructor(reason,errorDetails,errorCode){super(reason,errorDetails,errorCode)}static fromResult(result){const reason=Exports_js_2.CancellationReason.Error;let errorCode=Exports_js_2.CancellationErrorCode.NoError;return result.properties&&(errorCode=Exports_js_2.CancellationErrorCode[result.properties.getProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.NoError])]),new VoiceProfileCancellationDetails(reason,result.errorDetails,errorCode)}}exports.VoiceProfileCancellationDetails=VoiceProfileCancellationDetails},"./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/lib/src/sdk/VoiceProfileType.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceProfileType=void 0,function(VoiceProfileType){VoiceProfileType[VoiceProfileType.TextIndependentIdentification=0]="TextIndependentIdentification",VoiceProfileType[VoiceProfileType.TextDependentVerification=1]="TextDependentVerification",VoiceProfileType[VoiceProfileType.TextIndependentVerification=2]="TextIndependentVerification"}(exports.VoiceProfileType||(exports.VoiceProfileType={}))},"./node_modules/react-i18next/dist/es/withTranslation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>withTranslation});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");var react=__webpack_require__("./node_modules/react/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),utils=__webpack_require__("./node_modules/react-i18next/dist/es/utils.js"),_excluded=["forwardedRef"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.A)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function withTranslation(ns){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function Extend(WrappedComponent){function I18nextWithTranslation(_ref){var forwardedRef=_ref.forwardedRef,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),_useTranslation=(0,useTranslation.B)(ns,_objectSpread(_objectSpread({},rest),{},{keyPrefix:options.keyPrefix})),_useTranslation2=(0,slicedToArray.A)(_useTranslation,3),t=_useTranslation2[0],i18n=_useTranslation2[1],ready=_useTranslation2[2],passDownProps=_objectSpread(_objectSpread({},rest),{},{t,i18n,tReady:ready});return options.withRef&&forwardedRef?passDownProps.ref=forwardedRef:!options.withRef&&forwardedRef&&(passDownProps.forwardedRef=forwardedRef),(0,react.createElement)(WrappedComponent,passDownProps)}I18nextWithTranslation.displayName="withI18nextTranslation(".concat((0,utils.Mn)(WrappedComponent),")"),I18nextWithTranslation.WrappedComponent=WrappedComponent;return options.withRef?(0,react.forwardRef)((function forwardRef(props,ref){return(0,react.createElement)(I18nextWithTranslation,Object.assign({},props,{forwardedRef:ref}))})):I18nextWithTranslation}}},"./node_modules/standardized-audio-context/build/es2019/module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ut:()=>audioContextConstructor});var bundle=__webpack_require__("./node_modules/automation-events/build/es5/bundle.js");const ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct:()=>handler},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(source,url)=>{const importStatements=[];let sourceWithoutImportStatements=source.replace(/^[\s]+/,""),result=sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);for(;null!==result;){const unresolvedUrl=result[1].slice(1,-1),importStatementWithResolvedUrl=result[0].replace(/([\s]+)?;?$/,"").replace(unresolvedUrl,new URL(unresolvedUrl,url).toString());importStatements.push(importStatementWithResolvedUrl),sourceWithoutImportStatements=sourceWithoutImportStatements.slice(result[0].length).replace(/^[\s]+/,""),result=sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX)}return[importStatements.join(";"),sourceWithoutImportStatements]},verifyParameterDescriptors=parameterDescriptors=>{if(void 0!==parameterDescriptors&&!Array.isArray(parameterDescriptors))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=processorCtor=>{if(!(constructible=>{try{new new Proxy(constructible,handler)}catch{return!1}return!0})(processorCtor))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===processorCtor.prototype||"object"!=typeof processorCtor.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},getValueForKey=(map,key)=>{const value=map.get(key);if(void 0===value)throw new Error("A value with the given key could not be found.");return value},pickElementFromSet=(set,predicate)=>{const matchingElements=Array.from(set).filter(predicate);if(matchingElements.length>1)throw Error("More than one element was found.");if(0===matchingElements.length)throw Error("No element was found.");const[matchingElement]=matchingElements;return set.delete(matchingElement),matchingElement},deletePassiveInputConnectionToAudioNode=(passiveInputs,source,output,input)=>{const passiveInputConnections=getValueForKey(passiveInputs,source),matchingConnection=pickElementFromSet(passiveInputConnections,(passiveInputConnection=>passiveInputConnection[0]===output&&passiveInputConnection[1]===input));return 0===passiveInputConnections.size&&passiveInputs.delete(source),matchingConnection},getEventListenersOfAudioNode=audioNode=>getValueForKey(EVENT_LISTENERS,audioNode),setInternalStateToActive=audioNode=>{if(ACTIVE_AUDIO_NODE_STORE.has(audioNode))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(audioNode),getEventListenersOfAudioNode(audioNode).forEach((eventListener=>eventListener(!0)))},isAudioWorkletNode=audioNode=>"port"in audioNode,setInternalStateToPassive=audioNode=>{if(!ACTIVE_AUDIO_NODE_STORE.has(audioNode))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(audioNode),getEventListenersOfAudioNode(audioNode).forEach((eventListener=>eventListener(!1)))},setInternalStateToPassiveWhenNecessary=(audioNode,activeInputs)=>{!isAudioWorkletNode(audioNode)&&activeInputs.every((connections=>0===connections.size))&&setInternalStateToPassive(audioNode)},DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},isOwnedByContext=(nativeAudioNode,nativeContext)=>nativeAudioNode.context===nativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport=nativeAudioBuffer=>{try{nativeAudioBuffer.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=audioBuffer=>{var getChannelData;audioBuffer.getChannelData=(getChannelData=audioBuffer.getChannelData,channel=>{try{return getChannelData.call(audioBuffer,channel)}catch(err){if(12===err.code)throw createIndexSizeError();throw err}})},audio_buffer_constructor_DEFAULT_OPTIONS={numberOfChannels:1},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=audioNode=>ACTIVE_AUDIO_NODE_STORE.has(audioNode),audio_buffer_source_node_constructor_DEFAULT_OPTIONS={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},getAudioNodeConnections=audioNode=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,audioNode),getAudioParamConnections=audioParam=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,audioParam),deactivateActiveAudioNodeInputConnections=(audioNode,trace)=>{const{activeInputs}=getAudioNodeConnections(audioNode);activeInputs.forEach((connections=>connections.forEach((([source])=>{trace.includes(audioNode)||deactivateActiveAudioNodeInputConnections(source,[...trace,audioNode])}))));const audioParams=(audioNode=>"playbackRate"in audioNode)(audioNode)?[audioNode.playbackRate]:isAudioWorkletNode(audioNode)?Array.from(audioNode.parameters.values()):(audioNode=>"frequency"in audioNode&&"gain"in audioNode)(audioNode)?[audioNode.Q,audioNode.detune,audioNode.frequency,audioNode.gain]:(audioNode=>"offset"in audioNode)(audioNode)?[audioNode.offset]:(audioNode=>!("frequency"in audioNode)&&"gain"in audioNode)(audioNode)?[audioNode.gain]:(audioNode=>"detune"in audioNode&&"frequency"in audioNode)(audioNode)?[audioNode.detune,audioNode.frequency]:(audioNode=>"pan"in audioNode)(audioNode)?[audioNode.pan]:[];for(const audioParam of audioParams){const audioParamConnections=getAudioParamConnections(audioParam);void 0!==audioParamConnections&&audioParamConnections.activeInputs.forEach((([source])=>deactivateActiveAudioNodeInputConnections(source,trace)))}isActiveAudioNode(audioNode)&&setInternalStateToPassive(audioNode)},deactivateAudioGraph=context=>{deactivateActiveAudioNodeInputConnections(context.destination,[])},isValidLatencyHint=latencyHint=>void 0===latencyHint||"number"==typeof latencyHint||"string"==typeof latencyHint&&("balanced"===latencyHint||"interactive"===latencyHint||"playback"===latencyHint),isAudioNode=audioNodeOrAudioParam=>"context"in audioNodeOrAudioParam,isAudioNodeOutputConnection=outputConnection=>isAudioNode(outputConnection[0]),insertElementInSet=(set,element,predicate,ignoreDuplicates)=>{for(const lmnt of set)if(predicate(lmnt)){if(ignoreDuplicates)return!1;throw Error("The set contains at least one similar element.")}return set.add(element),!0},addActiveInputConnectionToAudioParam=(activeInputs,source,[output,eventListener],ignoreDuplicates)=>{insertElementInSet(activeInputs,[source,output,eventListener],(activeInputConnection=>activeInputConnection[0]===source&&activeInputConnection[1]===output),ignoreDuplicates)},addPassiveInputConnectionToAudioParam=(passiveInputs,[source,output,eventListener],ignoreDuplicates)=>{const passiveInputConnections=passiveInputs.get(source);void 0===passiveInputConnections?passiveInputs.set(source,new Set([[output,eventListener]])):insertElementInSet(passiveInputConnections,[output,eventListener],(passiveInputConnection=>passiveInputConnection[0]===output),ignoreDuplicates)},isNativeAudioNodeFaker=nativeAudioNodeOrNativeAudioNodeFaker=>"inputs"in nativeAudioNodeOrNativeAudioNodeFaker,connectNativeAudioNodeToNativeAudioNode=(nativeSourceAudioNode,nativeDestinationAudioNode,output,input)=>{if(isNativeAudioNodeFaker(nativeDestinationAudioNode)){const fakeNativeDestinationAudioNode=nativeDestinationAudioNode.inputs[input];return nativeSourceAudioNode.connect(fakeNativeDestinationAudioNode,output,0),[fakeNativeDestinationAudioNode,output,0]}return nativeSourceAudioNode.connect(nativeDestinationAudioNode,output,input),[nativeDestinationAudioNode,output,input]},deleteActiveInputConnection=(activeInputConnections,source,output)=>{for(const activeInputConnection of activeInputConnections)if(activeInputConnection[0]===source&&activeInputConnection[1]===output)return activeInputConnections.delete(activeInputConnection),activeInputConnection;return null},deleteEventListenerOfAudioNode=(audioNode,eventListener)=>{if(!getEventListenersOfAudioNode(audioNode).delete(eventListener))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(passiveInputs,source,output)=>{const passiveInputConnections=getValueForKey(passiveInputs,source),matchingConnection=pickElementFromSet(passiveInputConnections,(passiveInputConnection=>passiveInputConnection[0]===output));return 0===passiveInputConnections.size&&passiveInputs.delete(source),matchingConnection},disconnectNativeAudioNodeFromNativeAudioNode=(nativeSourceAudioNode,nativeDestinationAudioNode,output,input)=>{isNativeAudioNodeFaker(nativeDestinationAudioNode)?nativeSourceAudioNode.disconnect(nativeDestinationAudioNode.inputs[input],output,0):nativeSourceAudioNode.disconnect(nativeDestinationAudioNode,output,input)},getNativeAudioNode=audioNode=>getValueForKey(AUDIO_NODE_STORE,audioNode),getNativeAudioParam=audioParam=>getValueForKey(AUDIO_PARAM_STORE,audioParam),isPartOfACycle=audioNode=>CYCLE_COUNTERS.has(audioNode),isPassiveAudioNode=audioNode=>!ACTIVE_AUDIO_NODE_STORE.has(audioNode),testAudioNodeDisconnectMethodSupport=(nativeAudioContext,nativeAudioWorkletNodeConstructor)=>new Promise((resolve=>{if(null!==nativeAudioWorkletNodeConstructor)resolve(!0);else{const analyzer=nativeAudioContext.createScriptProcessor(256,1,1),dummy=nativeAudioContext.createGain(),ones=nativeAudioContext.createBuffer(1,2,44100),channelData=ones.getChannelData(0);channelData[0]=1,channelData[1]=1;const source=nativeAudioContext.createBufferSource();source.buffer=ones,source.loop=!0,source.connect(analyzer).connect(nativeAudioContext.destination),source.connect(dummy),source.disconnect(dummy),analyzer.onaudioprocess=event=>{const chnnlDt=event.inputBuffer.getChannelData(0);Array.prototype.some.call(chnnlDt,(sample=>1===sample))?resolve(!0):resolve(!1),source.stop(),analyzer.onaudioprocess=null,source.disconnect(analyzer),analyzer.disconnect(nativeAudioContext.destination)},source.start()}})),visitEachAudioNodeOnce=(cycles,visitor)=>{const counts=new Map;for(const cycle of cycles)for(const audioNode of cycle){const count=counts.get(audioNode);counts.set(audioNode,void 0===count?1:count+1)}counts.forEach(((count,audioNode)=>visitor(audioNode,count)))},isNativeAudioNode=nativeAudioNodeOrAudioParam=>"context"in nativeAudioNodeOrAudioParam,wrapAudioNodeDisconnectMethod=nativeAudioNode=>{const connections=new Map;var connect,disconnect;nativeAudioNode.connect=(connect=nativeAudioNode.connect.bind(nativeAudioNode),(destination,output=0,input=0)=>{const returnValue=isNativeAudioNode(destination)?connect(destination,output,input):connect(destination,output),connectionsToDestination=connections.get(destination);return void 0===connectionsToDestination?connections.set(destination,[{input,output}]):connectionsToDestination.every((connection=>connection.input!==input||connection.output!==output))&&connectionsToDestination.push({input,output}),returnValue}),nativeAudioNode.disconnect=(disconnect=nativeAudioNode.disconnect,(destinationOrOutput,output,input)=>{if(disconnect.apply(nativeAudioNode),void 0===destinationOrOutput)connections.clear();else if("number"==typeof destinationOrOutput)for(const[destination,connectionsToDestination]of connections){const filteredConnections=connectionsToDestination.filter((connection=>connection.output!==destinationOrOutput));0===filteredConnections.length?connections.delete(destination):connections.set(destination,filteredConnections)}else if(connections.has(destinationOrOutput))if(void 0===output)connections.delete(destinationOrOutput);else{const connectionsToDestination=connections.get(destinationOrOutput);if(void 0!==connectionsToDestination){const filteredConnections=connectionsToDestination.filter((connection=>connection.output!==output&&(connection.input!==input||void 0===input)));0===filteredConnections.length?connections.delete(destinationOrOutput):connections.set(destinationOrOutput,filteredConnections)}}for(const[destination,connectionsToDestination]of connections)connectionsToDestination.forEach((connection=>{isNativeAudioNode(destination)?nativeAudioNode.connect(destination,connection.output,connection.input):nativeAudioNode.connect(destination,connection.output)}))})},addConnectionToAudioParamOfAudioContext=(source,destination,output,isOffline)=>{const{activeInputs,passiveInputs}=getAudioParamConnections(destination),{outputs}=getAudioNodeConnections(source),eventListeners=getEventListenersOfAudioNode(source),eventListener=isActive=>{const nativeAudioNode=getNativeAudioNode(source),nativeAudioParam=getNativeAudioParam(destination);if(isActive){const partialConnection=deletePassiveInputConnectionToAudioParam(passiveInputs,source,output);addActiveInputConnectionToAudioParam(activeInputs,source,partialConnection,!1),isOffline||isPartOfACycle(source)||nativeAudioNode.connect(nativeAudioParam,output)}else{const partialConnection=((activeInputs,source,output)=>pickElementFromSet(activeInputs,(activeInputConnection=>activeInputConnection[0]===source&&activeInputConnection[1]===output)))(activeInputs,source,output);addPassiveInputConnectionToAudioParam(passiveInputs,partialConnection,!1),isOffline||isPartOfACycle(source)||nativeAudioNode.disconnect(nativeAudioParam,output)}};return!!insertElementInSet(outputs,[destination,output],(outputConnection=>outputConnection[0]===destination&&outputConnection[1]===output),!0)&&(eventListeners.add(eventListener),isActiveAudioNode(source)?addActiveInputConnectionToAudioParam(activeInputs,source,[output,eventListener],!0):addPassiveInputConnectionToAudioParam(passiveInputs,[source,output,eventListener],!0),!0)},deleteInputsOfAudioNode=(source,isOffline,destination,output,input)=>{const[listener,isActive]=((source,destination,output,input)=>{const{activeInputs,passiveInputs}=getAudioNodeConnections(destination),activeInputConnection=deleteActiveInputConnection(activeInputs[input],source,output);if(null===activeInputConnection)return[deletePassiveInputConnectionToAudioNode(passiveInputs,source,output,input)[2],!1];return[activeInputConnection[2],!0]})(source,destination,output,input);if(null!==listener&&(deleteEventListenerOfAudioNode(source,listener),!isActive||isOffline||isPartOfACycle(source)||disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(source),getNativeAudioNode(destination),output,input)),isActiveAudioNode(destination)){const{activeInputs}=getAudioNodeConnections(destination);setInternalStateToPassiveWhenNecessary(destination,activeInputs)}},deleteInputsOfAudioParam=(source,isOffline,destination,output)=>{const[listener,isActive]=((source,destination,output)=>{const{activeInputs,passiveInputs}=getAudioParamConnections(destination),activeInputConnection=deleteActiveInputConnection(activeInputs,source,output);if(null===activeInputConnection)return[deletePassiveInputConnectionToAudioParam(passiveInputs,source,output)[1],!1];return[activeInputConnection[2],!0]})(source,destination,output);null!==listener&&(deleteEventListenerOfAudioNode(source,listener),!isActive||isOffline||isPartOfACycle(source)||getNativeAudioNode(source).disconnect(getNativeAudioParam(destination),output))};class ReadOnlyMap{constructor(parameters){this._map=new Map(parameters)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(callback,thisArg=null){return this._map.forEach(((value,key)=>callback.call(thisArg,value,key,this)))}get(name){return this._map.get(name)}has(name){return this._map.has(name)}keys(){return this._map.keys()}values(){return this._map.values()}}const audio_worklet_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function copyFromChannel(audioBuffer,parent,key,channelNumber,bufferOffset){if("function"==typeof audioBuffer.copyFromChannel)0===parent[key].byteLength&&(parent[key]=new Float32Array(128)),audioBuffer.copyFromChannel(parent[key],channelNumber,bufferOffset);else{const channelData=audioBuffer.getChannelData(channelNumber);if(0===parent[key].byteLength)parent[key]=channelData.slice(bufferOffset,bufferOffset+128);else{const slicedInput=new Float32Array(channelData.buffer,bufferOffset*Float32Array.BYTES_PER_ELEMENT,128);parent[key].set(slicedInput)}}}const copyToChannel=(audioBuffer,parent,key,channelNumber,bufferOffset)=>{"function"==typeof audioBuffer.copyToChannel?0!==parent[key].byteLength&&audioBuffer.copyToChannel(parent[key],channelNumber,bufferOffset):0!==parent[key].byteLength&&audioBuffer.getChannelData(channelNumber).set(parent[key],bufferOffset)},createNestedArrays=(x,y)=>{const arrays=[];for(let i=0;i<x;i+=1){const array=[],length="number"==typeof y?y:y[i];for(let j=0;j<length;j+=1)array.push(new Float32Array(128));arrays.push(array)}return arrays},processBuffer=async(proxy,renderedBuffer,nativeOfflineAudioContext,options,outputChannelCount,processorConstructor,exposeCurrentFrameAndCurrentTime)=>{const length=null===renderedBuffer?128*Math.ceil(proxy.context.length/128):renderedBuffer.length,numberOfInputChannels=options.channelCount*options.numberOfInputs,numberOfOutputChannels=outputChannelCount.reduce(((sum,value)=>sum+value),0),processedBuffer=0===numberOfOutputChannels?null:nativeOfflineAudioContext.createBuffer(numberOfOutputChannels,length,nativeOfflineAudioContext.sampleRate);if(void 0===processorConstructor)throw new Error("Missing the processor constructor.");const audioNodeConnections=getAudioNodeConnections(proxy),audioWorkletProcessor=await((nativeOfflineAudioContext,proxy)=>{const nodeToProcessorMap=getValueForKey(NODE_TO_PROCESSOR_MAPS,nativeOfflineAudioContext),nativeAudioWorkletNode=getNativeAudioNode(proxy);return getValueForKey(nodeToProcessorMap,nativeAudioWorkletNode)})(nativeOfflineAudioContext,proxy),inputs=createNestedArrays(options.numberOfInputs,options.channelCount),outputs=createNestedArrays(options.numberOfOutputs,outputChannelCount),parameters=Array.from(proxy.parameters.keys()).reduce(((prmtrs,name)=>({...prmtrs,[name]:new Float32Array(128)})),{});for(let i=0;i<length;i+=128){if(options.numberOfInputs>0&&null!==renderedBuffer)for(let j=0;j<options.numberOfInputs;j+=1)for(let k=0;k<options.channelCount;k+=1)copyFromChannel(renderedBuffer,inputs[j],k,k,i);void 0!==processorConstructor.parameterDescriptors&&null!==renderedBuffer&&processorConstructor.parameterDescriptors.forEach((({name},index)=>{copyFromChannel(renderedBuffer,parameters,name,numberOfInputChannels+index,i)}));for(let j=0;j<options.numberOfInputs;j+=1)for(let k=0;k<outputChannelCount[j];k+=1)0===outputs[j][k].byteLength&&(outputs[j][k]=new Float32Array(128));try{const potentiallyEmptyInputs=inputs.map(((input,index)=>0===audioNodeConnections.activeInputs[index].size?[]:input)),activeSourceFlag=exposeCurrentFrameAndCurrentTime(i/nativeOfflineAudioContext.sampleRate,nativeOfflineAudioContext.sampleRate,(()=>audioWorkletProcessor.process(potentiallyEmptyInputs,outputs,parameters)));if(null!==processedBuffer)for(let j=0,outputChannelSplitterNodeOutput=0;j<options.numberOfOutputs;j+=1){for(let k=0;k<outputChannelCount[j];k+=1)copyToChannel(processedBuffer,outputs[j],k,outputChannelSplitterNodeOutput+k,i);outputChannelSplitterNodeOutput+=outputChannelCount[j]}if(!activeSourceFlag)break}catch(error){proxy.dispatchEvent(new ErrorEvent("processorerror",{colno:error.colno,filename:error.filename,lineno:error.lineno,message:error.message}));break}}return processedBuffer},biquad_filter_node_constructor_DEFAULT_OPTIONS={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},channel_merger_node_constructor_DEFAULT_OPTIONS={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},channel_splitter_node_constructor_DEFAULT_OPTIONS={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},constant_source_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},convolver_node_constructor_DEFAULT_OPTIONS={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},detachArrayBuffer=arrayBuffer=>{const{port1,port2}=new MessageChannel;return new Promise((resolve=>{const closeAndResolve=()=>{port2.onmessage=null,port1.close(),port2.close(),resolve()};port2.onmessage=()=>closeAndResolve();try{port1.postMessage(arrayBuffer,[arrayBuffer])}finally{closeAndResolve()}}))},delay_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},getOutputAudioNodeAtIndex=(createIndexSizeError,outputAudioNodes,output)=>{const outputAudioNode=outputAudioNodes[output];if(void 0===outputAudioNode)throw createIndexSizeError();return outputAudioNode},dynamics_compressor_node_constructor_DEFAULT_OPTIONS={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},gain_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createInvalidStateError=()=>new DOMException("","InvalidStateError"),createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),iir_filter_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},filterBuffer=(feedback,feedbackLength,feedforward,feedforwardLength,minLength,xBuffer,yBuffer,bufferIndex,bufferLength,input,output)=>{const inputLength=input.length;let i=bufferIndex;for(let j=0;j<inputLength;j+=1){let y=feedforward[0]*input[j];for(let k=1;k<minLength;k+=1){const x=i-k&bufferLength-1;y+=feedforward[k]*xBuffer[x],y-=feedback[k]*yBuffer[x]}for(let k=minLength;k<feedforwardLength;k+=1)y+=feedforward[k]*xBuffer[i-k&bufferLength-1];for(let k=minLength;k<feedbackLength;k+=1)y-=feedback[k]*yBuffer[i-k&bufferLength-1];xBuffer[i]=input[j],yBuffer[i]=y,i=i+1&bufferLength-1,output[j]=y}return i},media_stream_audio_destination_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},testPromiseSupport=nativeContext=>{const uint32Array=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const promise=nativeContext.decodeAudioData(uint32Array.buffer,(()=>{}));return void 0!==promise&&(promise.catch((()=>{})),!0)}catch{}return!1},minimal_offline_audio_context_constructor_DEFAULT_OPTIONS={numberOfChannels:1},assignNativeAudioNodeOption=(nativeAudioNode,options,option)=>{const value=options[option];void 0!==value&&value!==nativeAudioNode[option]&&(nativeAudioNode[option]=value)},assignNativeAudioNodeOptions=(nativeAudioNode,options)=>{assignNativeAudioNodeOption(nativeAudioNode,options,"channelCount"),assignNativeAudioNodeOption(nativeAudioNode,options,"channelCountMode"),assignNativeAudioNodeOption(nativeAudioNode,options,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=nativeAnalyserNode=>"function"==typeof nativeAnalyserNode.getFloatTimeDomainData,assignNativeAudioNodeAudioParamValue=(nativeAudioNode,options,audioParam)=>{const value=options[audioParam];void 0!==value&&value!==nativeAudioNode[audioParam].value&&(nativeAudioNode[audioParam].value=value)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=nativeAudioScheduledSourceNode=>{var start;nativeAudioScheduledSourceNode.start=(start=nativeAudioScheduledSourceNode.start,(when=0,offset=0,duration)=>{if("number"==typeof duration&&duration<0||offset<0||when<0)throw new RangeError("The parameters can't be negative.");start.call(nativeAudioScheduledSourceNode,when,offset,duration)})},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=nativeAudioScheduledSourceNode=>{var stop;nativeAudioScheduledSourceNode.stop=(stop=nativeAudioScheduledSourceNode.stop,(when=0)=>{if(when<0)throw new RangeError("The parameter can't be negative.");stop.call(nativeAudioScheduledSourceNode,when)})},computeBufferSize=(baseLatency,sampleRate)=>null===baseLatency?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(baseLatency*sampleRate))))),createAudioWorkletProcessorPromise=async(processorConstructor,audioWorkletNodeOptions)=>{const clonedAudioWorkletNodeOptions=await(audioWorkletNodeOptions=>new Promise(((resolve,reject)=>{const{port1,port2}=new MessageChannel;port1.onmessage=({data})=>{port1.close(),port2.close(),resolve(data)},port1.onmessageerror=({data})=>{port1.close(),port2.close(),reject(data)},port2.postMessage(audioWorkletNodeOptions)})))(audioWorkletNodeOptions);return new processorConstructor(clonedAudioWorkletNodeOptions)},createNativeBiquadFilterNode=(nativeContext,options)=>{const nativeBiquadFilterNode=nativeContext.createBiquadFilter();return assignNativeAudioNodeOptions(nativeBiquadFilterNode,options),assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode,options,"Q"),assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode,options,"detune"),assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode,options,"frequency"),assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode,options,"gain"),assignNativeAudioNodeOption(nativeBiquadFilterNode,options,"type"),nativeBiquadFilterNode},createNativeChannelSplitterNode=(nativeContext,options)=>{const nativeChannelSplitterNode=nativeContext.createChannelSplitter(options.numberOfOutputs);return assignNativeAudioNodeOptions(nativeChannelSplitterNode,options),(channelSplitterNode=>{const channelCount=channelSplitterNode.numberOfOutputs;Object.defineProperty(channelSplitterNode,"channelCount",{get:()=>channelCount,set:value=>{if(value!==channelCount)throw createInvalidStateError()}}),Object.defineProperty(channelSplitterNode,"channelCountMode",{get:()=>"explicit",set:value=>{if("explicit"!==value)throw createInvalidStateError()}}),Object.defineProperty(channelSplitterNode,"channelInterpretation",{get:()=>"discrete",set:value=>{if("discrete"!==value)throw createInvalidStateError()}})})(nativeChannelSplitterNode),nativeChannelSplitterNode},interceptConnections=(original,interceptor)=>(original.connect=interceptor.connect.bind(interceptor),original.disconnect=interceptor.disconnect.bind(interceptor),original),createNativeDelayNode=(nativeContext,options)=>{const nativeDelayNode=nativeContext.createDelay(options.maxDelayTime);return assignNativeAudioNodeOptions(nativeDelayNode,options),assignNativeAudioNodeAudioParamValue(nativeDelayNode,options,"delayTime"),nativeDelayNode},createNativeGainNode=(nativeContext,options)=>{const nativeGainNode=nativeContext.createGain();return assignNativeAudioNodeOptions(nativeGainNode,options),assignNativeAudioNodeAudioParamValue(nativeGainNode,options,"gain"),nativeGainNode};function divide(a,b){const denominator=b[0]*b[0]+b[1]*b[1];return[(a[0]*b[0]+a[1]*b[1])/denominator,(a[1]*b[0]-a[0]*b[1])/denominator]}function evaluatePolynomial(coefficient,z){let result=[0,0];for(let i=coefficient.length-1;i>=0;i-=1)b=z,result=[(a=result)[0]*b[0]-a[1]*b[1],a[0]*b[1]+a[1]*b[0]],result[0]+=coefficient[i];var a,b;return result}const createNativeScriptProcessorNode=(nativeContext,bufferSize,numberOfInputChannels,numberOfOutputChannels)=>nativeContext.createScriptProcessor(bufferSize,numberOfInputChannels,numberOfOutputChannels),createNotSupportedError=()=>new DOMException("","NotSupportedError"),offline_audio_context_constructor_DEFAULT_OPTIONS={numberOfChannels:1},oscillator_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},panner_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},periodic_wave_constructor_DEFAULT_OPTIONS={disableNormalization:!1},stereo_panner_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createUnknownError=()=>new DOMException("","UnknownError"),wave_shaper_node_constructor_DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},getFirstSample=(audioBuffer,buffer,channelNumber)=>void 0===audioBuffer.copyFromChannel?audioBuffer.getChannelData(channelNumber)[0]:(audioBuffer.copyFromChannel(buffer,channelNumber),buffer[0]),isDCCurve=curve=>{if(null===curve)return!1;const length=curve.length;return length%2!=0?0!==curve[Math.floor(length/2)]:curve[length/2-1]+curve[length/2]!==0},overwriteAccessors=(object,property,createGetter,createSetter)=>{let prototype=object;for(;!prototype.hasOwnProperty(property);)prototype=Object.getPrototypeOf(prototype);const{get,set}=Object.getOwnPropertyDescriptor(prototype,property);Object.defineProperty(object,property,{get:createGetter(get),set:createSetter(set)})},setValueAtTimeUntilPossible=(audioParam,value,startTime)=>{try{audioParam.setValueAtTime(value,startTime)}catch(err){if(9!==err.code)throw err;setValueAtTimeUntilPossible(audioParam,value,startTime+1e-7)}},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=nativeContext=>{const nativeAudioBufferSourceNode=nativeContext.createOscillator();try{nativeAudioBufferSourceNode.start(-1)}catch(err){return err instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=nativeContext=>{const nativeAudioBuffer=nativeContext.createBuffer(1,1,44100),nativeAudioBufferSourceNode=nativeContext.createBufferSource();nativeAudioBufferSourceNode.buffer=nativeAudioBuffer,nativeAudioBufferSourceNode.start(),nativeAudioBufferSourceNode.stop();try{return nativeAudioBufferSourceNode.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=nativeContext=>{const nativeAudioBufferSourceNode=nativeContext.createOscillator();try{nativeAudioBufferSourceNode.stop(-1)}catch(err){return err instanceof RangeError}return!1},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(nativeAudioScheduledSourceNode,nativeContext)=>{const nativeGainNode=nativeContext.createGain();nativeAudioScheduledSourceNode.connect(nativeGainNode);const disconnectGainNode=(disconnect=nativeAudioScheduledSourceNode.disconnect,()=>{disconnect.call(nativeAudioScheduledSourceNode,nativeGainNode),nativeAudioScheduledSourceNode.removeEventListener("ended",disconnectGainNode)});var disconnect;nativeAudioScheduledSourceNode.addEventListener("ended",disconnectGainNode),interceptConnections(nativeAudioScheduledSourceNode,nativeGainNode),nativeAudioScheduledSourceNode.stop=(stop=>{let isStopped=!1;return(when=0)=>{if(isStopped)try{stop.call(nativeAudioScheduledSourceNode,when)}catch{nativeGainNode.gain.setValueAtTime(0,when)}else stop.call(nativeAudioScheduledSourceNode,when),isStopped=!0}})(nativeAudioScheduledSourceNode.stop)},wrapEventListener=(target,eventListener)=>event=>{const descriptor={value:target};return Object.defineProperties(event,{currentTarget:descriptor,target:descriptor}),"function"==typeof eventListener?eventListener.call(target,event):eventListener.handleEvent.call(target,event)},addActiveInputConnectionToAudioNode=(insertElementInSet=>(activeInputs,source,[output,input,eventListener],ignoreDuplicates)=>{insertElementInSet(activeInputs[input],[source,output,eventListener],(activeInputConnection=>activeInputConnection[0]===source&&activeInputConnection[1]===output),ignoreDuplicates)})(insertElementInSet),addPassiveInputConnectionToAudioNode=(insertElementInSet=>(passiveInputs,input,[source,output,eventListener],ignoreDuplicates)=>{const passiveInputConnections=passiveInputs.get(source);void 0===passiveInputConnections?passiveInputs.set(source,new Set([[output,input,eventListener]])):insertElementInSet(passiveInputConnections,[output,input,eventListener],(passiveInputConnection=>passiveInputConnection[0]===output&&passiveInputConnection[1]===input),ignoreDuplicates)})(insertElementInSet),deleteActiveInputConnectionToAudioNode=(pickElementFromSet=>(activeInputs,source,output,input)=>pickElementFromSet(activeInputs[input],(activeInputConnection=>activeInputConnection[0]===source&&activeInputConnection[1]===output)))(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=(audioNodeTailTimeStore=>audioNode=>{var _a;return null!==(_a=audioNodeTailTimeStore.get(audioNode))&&void 0!==_a?_a:0})(audioNodeTailTimeStore),cacheTestResult=(ongoingTests=new Map,testResults=new WeakMap,(tester,test)=>{const cachedTestResult=testResults.get(tester);if(void 0!==cachedTestResult)return cachedTestResult;const ongoingTest=ongoingTests.get(tester);if(void 0!==ongoingTest)return ongoingTest;try{const synchronousTestResult=test();return synchronousTestResult instanceof Promise?(ongoingTests.set(tester,synchronousTestResult),synchronousTestResult.catch((()=>!1)).then((finalTestResult=>(ongoingTests.delete(tester),testResults.set(tester,finalTestResult),finalTestResult)))):(testResults.set(tester,synchronousTestResult),synchronousTestResult)}catch{return testResults.set(tester,!1),!1}});var ongoingTests,testResults;const module_window="undefined"==typeof window?null:window,createNativeAnalyserNode=((cacheTestResult,createIndexSizeError)=>(nativeContext,options)=>{const nativeAnalyserNode=nativeContext.createAnalyser();if(assignNativeAudioNodeOptions(nativeAnalyserNode,options),!(options.maxDecibels>options.minDecibels))throw createIndexSizeError();return assignNativeAudioNodeOption(nativeAnalyserNode,options,"fftSize"),assignNativeAudioNodeOption(nativeAnalyserNode,options,"maxDecibels"),assignNativeAudioNodeOption(nativeAnalyserNode,options,"minDecibels"),assignNativeAudioNodeOption(nativeAnalyserNode,options,"smoothingTimeConstant"),cacheTestResult(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,(()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(nativeAnalyserNode)))||(nativeAnalyserNode=>{nativeAnalyserNode.getFloatTimeDomainData=array=>{const byteTimeDomainData=new Uint8Array(array.length);nativeAnalyserNode.getByteTimeDomainData(byteTimeDomainData);const length=Math.max(byteTimeDomainData.length,nativeAnalyserNode.fftSize);for(let i=0;i<length;i+=1)array[i]=.0078125*(byteTimeDomainData[i]-128);return array}})(nativeAnalyserNode),nativeAnalyserNode})(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=(getAudioNodeConnections=>audioNode=>{const audioNodeConnections=getAudioNodeConnections(audioNode);if(null===audioNodeConnections.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return audioNodeConnections.renderer})(getAudioNodeConnections),renderInputsOfAudioNode=((getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle)=>async(audioNode,nativeOfflineAudioContext,nativeAudioNode)=>{const audioNodeConnections=getAudioNodeConnections(audioNode);await Promise.all(audioNodeConnections.activeInputs.map(((connections,input)=>Array.from(connections).map((async([source,output])=>{const audioNodeRenderer=getAudioNodeRenderer(source),renderedNativeAudioNode=await audioNodeRenderer.render(source,nativeOfflineAudioContext),destination=audioNode.context.destination;isPartOfACycle(source)||audioNode===destination&&isPartOfACycle(audioNode)||renderedNativeAudioNode.connect(nativeAudioNode,output,input)})))).reduce(((allRenderingPromises,renderingPromises)=>[...allRenderingPromises,...renderingPromises]),[]))})(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=((createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode)=>()=>{const renderedNativeAnalyserNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeAnalyserNode=renderedNativeAnalyserNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeAnalyserNode?Promise.resolve(renderedNativeAnalyserNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeAnalyserNode=getNativeAudioNode(proxy);if(!isOwnedByContext(nativeAnalyserNode,nativeOfflineAudioContext)){const options={channelCount:nativeAnalyserNode.channelCount,channelCountMode:nativeAnalyserNode.channelCountMode,channelInterpretation:nativeAnalyserNode.channelInterpretation,fftSize:nativeAnalyserNode.fftSize,maxDecibels:nativeAnalyserNode.maxDecibels,minDecibels:nativeAnalyserNode.minDecibels,smoothingTimeConstant:nativeAnalyserNode.smoothingTimeConstant};nativeAnalyserNode=createNativeAnalyserNode(nativeOfflineAudioContext,options)}return renderedNativeAnalyserNodes.set(nativeOfflineAudioContext,nativeAnalyserNode),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeAnalyserNode),nativeAnalyserNode})(proxy,nativeOfflineAudioContext)}}})(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=(contextStore=CONTEXT_STORE,context=>{const nativeContext=contextStore.get(context);if(void 0===nativeContext)throw createInvalidStateError();return nativeContext});var contextStore;const nativeOfflineAudioContextConstructor=(window=>null===window?null:window.hasOwnProperty("OfflineAudioContext")?window.OfflineAudioContext:window.hasOwnProperty("webkitOfflineAudioContext")?window.webkitOfflineAudioContext:null)(module_window),isNativeOfflineAudioContext=(nativeOfflineAudioContextConstructor=>anything=>null!==nativeOfflineAudioContextConstructor&&anything instanceof nativeOfflineAudioContextConstructor)(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=(wrapEventListener=>class EventTarget{constructor(_nativeEventTarget){this._nativeEventTarget=_nativeEventTarget,this._listeners=new WeakMap}addEventListener(type,listener,options){if(null!==listener){let wrappedEventListener=this._listeners.get(listener);void 0===wrappedEventListener&&(wrappedEventListener=wrapEventListener(this,listener),"function"==typeof listener&&this._listeners.set(listener,wrappedEventListener)),this._nativeEventTarget.addEventListener(type,wrappedEventListener,options)}}dispatchEvent(event){return this._nativeEventTarget.dispatchEvent(event)}removeEventListener(type,listener,options){const wrappedEventListener=null===listener?void 0:this._listeners.get(listener);this._nativeEventTarget.removeEventListener(type,void 0===wrappedEventListener?null:wrappedEventListener,options)}})(wrapEventListener),nativeAudioContextConstructor=(window=>null===window?null:window.hasOwnProperty("AudioContext")?window.AudioContext:window.hasOwnProperty("webkitAudioContext")?window.webkitAudioContext:null)(module_window),isNativeAudioContext=(nativeAudioContextConstructor=>anything=>null!==nativeAudioContextConstructor&&anything instanceof nativeAudioContextConstructor)(nativeAudioContextConstructor),module_isNativeAudioNode=(window=>anything=>null!==window&&"function"==typeof window.AudioNode&&anything instanceof window.AudioNode)(module_window),isNativeAudioParam=(window=>anything=>null!==window&&"function"==typeof window.AudioParam&&anything instanceof window.AudioParam)(module_window),nativeAudioWorkletNodeConstructor=(window=>null===window?null:window.hasOwnProperty("AudioWorkletNode")?window.AudioWorkletNode:null)(module_window),audioNodeConstructor=((addAudioNodeConnections,addConnectionToAudioNode,cacheTestResult,createIncrementCycleCounter,createIndexSizeError,createInvalidAccessError,createNotSupportedError,decrementCycleCounter,detectCycles,eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor)=>class AudioNode extends eventTargetConstructor{constructor(context,isActive,nativeAudioNode,audioNodeRenderer){super(nativeAudioNode),this._context=context,this._nativeAudioNode=nativeAudioNode;const nativeContext=getNativeContext(context);isNativeAudioContext(nativeContext)&&!0!==cacheTestResult(testAudioNodeDisconnectMethodSupport,(()=>testAudioNodeDisconnectMethodSupport(nativeContext,nativeAudioWorkletNodeConstructor)))&&wrapAudioNodeDisconnectMethod(nativeAudioNode),AUDIO_NODE_STORE.set(this,nativeAudioNode),EVENT_LISTENERS.set(this,new Set),"closed"!==context.state&&isActive&&setInternalStateToActive(this),addAudioNodeConnections(this,audioNodeRenderer,nativeAudioNode)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(value){this._nativeAudioNode.channelCount=value}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(value){this._nativeAudioNode.channelCountMode=value}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(value){this._nativeAudioNode.channelInterpretation=value}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(destination,output=0,input=0){if(output<0||output>=this._nativeAudioNode.numberOfOutputs)throw createIndexSizeError();const nativeContext=getNativeContext(this._context),isOffline=isNativeOfflineAudioContext(nativeContext);if(isNativeAudioNode(destination)||isNativeAudioParam(destination))throw createInvalidAccessError();if(isAudioNode(destination)){const nativeDestinationAudioNode=getNativeAudioNode(destination);try{const connection=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,nativeDestinationAudioNode,output,input),isPassive=isPassiveAudioNode(this);(isOffline||isPassive)&&this._nativeAudioNode.disconnect(...connection),"closed"!==this.context.state&&!isPassive&&isPassiveAudioNode(destination)&&setInternalStateToActive(destination)}catch(err){if(12===err.code)throw createInvalidAccessError();throw err}if(addConnectionToAudioNode(this,destination,output,input,isOffline)){const cycles=detectCycles([this],destination);visitEachAudioNodeOnce(cycles,createIncrementCycleCounter(isOffline))}return destination}const nativeAudioParam=getNativeAudioParam(destination);if("playbackRate"===nativeAudioParam.name&&1024===nativeAudioParam.maxValue)throw createNotSupportedError();try{this._nativeAudioNode.connect(nativeAudioParam,output),(isOffline||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(nativeAudioParam,output)}catch(err){if(12===err.code)throw createInvalidAccessError();throw err}if(addConnectionToAudioParamOfAudioContext(this,destination,output,isOffline)){const cycles=detectCycles([this],destination);visitEachAudioNodeOnce(cycles,createIncrementCycleCounter(isOffline))}}disconnect(destinationOrOutput,output,input){let destinations;const nativeContext=getNativeContext(this._context),isOffline=isNativeOfflineAudioContext(nativeContext);if(void 0===destinationOrOutput)destinations=((source,isOffline)=>{const audioNodeConnectionsOfSource=getAudioNodeConnections(source),destinations=[];for(const outputConnection of audioNodeConnectionsOfSource.outputs)isAudioNodeOutputConnection(outputConnection)?deleteInputsOfAudioNode(source,isOffline,...outputConnection):deleteInputsOfAudioParam(source,isOffline,...outputConnection),destinations.push(outputConnection[0]);return audioNodeConnectionsOfSource.outputs.clear(),destinations})(this,isOffline);else if("number"==typeof destinationOrOutput){if(destinationOrOutput<0||destinationOrOutput>=this.numberOfOutputs)throw createIndexSizeError();destinations=((source,isOffline,output)=>{const audioNodeConnectionsOfSource=getAudioNodeConnections(source),destinations=[];for(const outputConnection of audioNodeConnectionsOfSource.outputs)outputConnection[1]===output&&(isAudioNodeOutputConnection(outputConnection)?deleteInputsOfAudioNode(source,isOffline,...outputConnection):deleteInputsOfAudioParam(source,isOffline,...outputConnection),destinations.push(outputConnection[0]),audioNodeConnectionsOfSource.outputs.delete(outputConnection));return destinations})(this,isOffline,destinationOrOutput)}else{if(void 0!==output&&(output<0||output>=this.numberOfOutputs))throw createIndexSizeError();if(isAudioNode(destinationOrOutput)&&void 0!==input&&(input<0||input>=destinationOrOutput.numberOfInputs))throw createIndexSizeError();if(destinations=((source,isOffline,destination,output,input)=>{const audioNodeConnectionsOfSource=getAudioNodeConnections(source);return Array.from(audioNodeConnectionsOfSource.outputs).filter((outputConnection=>!(outputConnection[0]!==destination||void 0!==output&&outputConnection[1]!==output||void 0!==input&&outputConnection[2]!==input))).map((outputConnection=>(isAudioNodeOutputConnection(outputConnection)?deleteInputsOfAudioNode(source,isOffline,...outputConnection):deleteInputsOfAudioParam(source,isOffline,...outputConnection),audioNodeConnectionsOfSource.outputs.delete(outputConnection),outputConnection[0])))})(this,isOffline,destinationOrOutput,output,input),0===destinations.length)throw createInvalidAccessError()}for(const destination of destinations){const cycles=detectCycles([this],destination);visitEachAudioNodeOnce(cycles,decrementCycleCounter)}}})((audioNodeConnectionsStore=AUDIO_NODE_CONNECTIONS_STORE,(audioNode,audioNodeRenderer,nativeAudioNode)=>{const activeInputs=[];for(let i=0;i<nativeAudioNode.numberOfInputs;i+=1)activeInputs.push(new Set);audioNodeConnectionsStore.set(audioNode,{activeInputs,outputs:new Set,passiveInputs:new WeakMap,renderer:audioNodeRenderer})}),((addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode)=>{const tailTimeTimeoutIds=new WeakMap;return(source,destination,output,input,isOffline)=>{const{activeInputs,passiveInputs}=getAudioNodeConnections(destination),{outputs}=getAudioNodeConnections(source),eventListeners=getEventListenersOfAudioNode(source),eventListener=isActive=>{const nativeDestinationAudioNode=getNativeAudioNode(destination),nativeSourceAudioNode=getNativeAudioNode(source);if(isActive){const partialConnection=deletePassiveInputConnectionToAudioNode(passiveInputs,source,output,input);addActiveInputConnectionToAudioNode(activeInputs,source,partialConnection,!1),isOffline||isPartOfACycle(source)||connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode,nativeDestinationAudioNode,output,input),isPassiveAudioNode(destination)&&setInternalStateToActive(destination)}else{const partialConnection=deleteActiveInputConnectionToAudioNode(activeInputs,source,output,input);addPassiveInputConnectionToAudioNode(passiveInputs,input,partialConnection,!1),isOffline||isPartOfACycle(source)||disconnectNativeAudioNodeFromNativeAudioNode(nativeSourceAudioNode,nativeDestinationAudioNode,output,input);const tailTime=getAudioNodeTailTime(destination);if(0===tailTime)isActiveAudioNode(destination)&&setInternalStateToPassiveWhenNecessary(destination,activeInputs);else{const tailTimeTimeoutId=tailTimeTimeoutIds.get(destination);void 0!==tailTimeTimeoutId&&clearTimeout(tailTimeTimeoutId),tailTimeTimeoutIds.set(destination,setTimeout((()=>{isActiveAudioNode(destination)&&setInternalStateToPassiveWhenNecessary(destination,activeInputs)}),1e3*tailTime))}}};return!!insertElementInSet(outputs,[destination,output,input],(outputConnection=>outputConnection[0]===destination&&outputConnection[1]===output&&outputConnection[2]===input),!0)&&(eventListeners.add(eventListener),isActiveAudioNode(source)?addActiveInputConnectionToAudioNode(activeInputs,source,[output,input,eventListener],!0):addPassiveInputConnectionToAudioNode(passiveInputs,input,[source,output,eventListener],!0),!0)}})(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,((cycleCounters,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode)=>isOffline=>(audioNode,count)=>{const cycleCounter=cycleCounters.get(audioNode);if(void 0===cycleCounter){if(!isOffline&&isActiveAudioNode(audioNode)){const nativeSourceAudioNode=getNativeAudioNode(audioNode),{outputs}=getAudioNodeConnections(audioNode);for(const output of outputs)if(isAudioNodeOutputConnection(output)){const nativeDestinationAudioNode=getNativeAudioNode(output[0]);disconnectNativeAudioNodeFromNativeAudioNode(nativeSourceAudioNode,nativeDestinationAudioNode,output[1],output[2])}else{const nativeDestinationAudioParam=getNativeAudioParam(output[0]);nativeSourceAudioNode.disconnect(nativeDestinationAudioParam,output[1])}}cycleCounters.set(audioNode,count)}else cycleCounters.set(audioNode,cycleCounter+count)})(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,((connectNativeAudioNodeToNativeAudioNode,cycleCounters,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext)=>(audioNode,count)=>{const cycleCounter=cycleCounters.get(audioNode);if(void 0===cycleCounter)throw new Error("Missing the expected cycle count.");const nativeContext=getNativeContext(audioNode.context),isOffline=isNativeOfflineAudioContext(nativeContext);if(cycleCounter===count){if(cycleCounters.delete(audioNode),!isOffline&&isActiveAudioNode(audioNode)){const nativeSourceAudioNode=getNativeAudioNode(audioNode),{outputs}=getAudioNodeConnections(audioNode);for(const output of outputs)if(isAudioNodeOutputConnection(output)){const nativeDestinationAudioNode=getNativeAudioNode(output[0]);connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode,nativeDestinationAudioNode,output[1],output[2])}else{const nativeDestinationAudioParam=getNativeAudioParam(output[0]);nativeSourceAudioNode.connect(nativeDestinationAudioParam,output[1])}}}else cycleCounters.set(audioNode,cycleCounter-count)})(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),((audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey)=>function detectCycles(chain,nextLink){const audioNode=isAudioNode(nextLink)?nextLink:getValueForKey(audioParamAudioNodeStore,nextLink);if((audioNode=>"delayTime"in audioNode)(audioNode))return[];if(chain[0]===audioNode)return[chain];if(chain.includes(audioNode))return[];const{outputs}=getAudioNodeConnections(audioNode);return Array.from(outputs).map((outputConnection=>detectCycles([...chain,audioNode],outputConnection[0]))).reduce(((mergedCycles,nestedCycles)=>mergedCycles.concat(nestedCycles)),[])})(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,module_isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor);var audioNodeConnectionsStore;const analyserNodeConstructor=((audionNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext)=>class AnalyserNode extends audionNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...DEFAULT_OPTIONS,...options},nativeAnalyserNode=createNativeAnalyserNode(nativeContext,mergedOptions);super(context,!1,nativeAnalyserNode,isNativeOfflineAudioContext(nativeContext)?createAnalyserNodeRenderer():null),this._nativeAnalyserNode=nativeAnalyserNode}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(value){this._nativeAnalyserNode.fftSize=value}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(value){const maxDecibels=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=value,!(value>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=maxDecibels,createIndexSizeError()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(value){const minDecibels=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=value,!(this._nativeAnalyserNode.maxDecibels>value))throw this._nativeAnalyserNode.minDecibels=minDecibels,createIndexSizeError()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(value){this._nativeAnalyserNode.smoothingTimeConstant=value}getByteFrequencyData(array){this._nativeAnalyserNode.getByteFrequencyData(array)}getByteTimeDomainData(array){this._nativeAnalyserNode.getByteTimeDomainData(array)}getFloatFrequencyData(array){this._nativeAnalyserNode.getFloatFrequencyData(array)}getFloatTimeDomainData(array){this._nativeAnalyserNode.getFloatTimeDomainData(array)}})(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=(window=>null===window?null:window.hasOwnProperty("AudioBuffer")?window.AudioBuffer:null)(module_window),convertNumberToUnsignedLong=(unit32Array=new Uint32Array(1),value=>(unit32Array[0]=value,unit32Array[0]));var unit32Array;const wrapAudioBufferCopyChannelMethods=((convertNumberToUnsignedLong,createIndexSizeError)=>audioBuffer=>{audioBuffer.copyFromChannel=(destination,channelNumberAsNumber,bufferOffsetAsNumber=0)=>{const bufferOffset=convertNumberToUnsignedLong(bufferOffsetAsNumber),channelNumber=convertNumberToUnsignedLong(channelNumberAsNumber);if(channelNumber>=audioBuffer.numberOfChannels)throw createIndexSizeError();const audioBufferLength=audioBuffer.length,channelData=audioBuffer.getChannelData(channelNumber),destinationLength=destination.length;for(let i=bufferOffset<0?-bufferOffset:0;i+bufferOffset<audioBufferLength&&i<destinationLength;i+=1)destination[i]=channelData[i+bufferOffset]},audioBuffer.copyToChannel=(source,channelNumberAsNumber,bufferOffsetAsNumber=0)=>{const bufferOffset=convertNumberToUnsignedLong(bufferOffsetAsNumber),channelNumber=convertNumberToUnsignedLong(channelNumberAsNumber);if(channelNumber>=audioBuffer.numberOfChannels)throw createIndexSizeError();const audioBufferLength=audioBuffer.length,channelData=audioBuffer.getChannelData(channelNumber),sourceLength=source.length;for(let i=bufferOffset<0?-bufferOffset:0;i+bufferOffset<audioBufferLength&&i<sourceLength;i+=1)channelData[i+bufferOffset]=source[i]}})(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=(convertNumberToUnsignedLong=>audioBuffer=>{audioBuffer.copyFromChannel=(copyFromChannel=>(destination,channelNumberAsNumber,bufferOffsetAsNumber=0)=>{const bufferOffset=convertNumberToUnsignedLong(bufferOffsetAsNumber),channelNumber=convertNumberToUnsignedLong(channelNumberAsNumber);if(bufferOffset<audioBuffer.length)return copyFromChannel.call(audioBuffer,destination,channelNumber,bufferOffset)})(audioBuffer.copyFromChannel),audioBuffer.copyToChannel=(copyToChannel=>(source,channelNumberAsNumber,bufferOffsetAsNumber=0)=>{const bufferOffset=convertNumberToUnsignedLong(bufferOffsetAsNumber),channelNumber=convertNumberToUnsignedLong(channelNumberAsNumber);if(bufferOffset<audioBuffer.length)return copyToChannel.call(audioBuffer,source,channelNumber,bufferOffset)})(audioBuffer.copyToChannel)})(convertNumberToUnsignedLong),audioBufferConstructor=((audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,testNativeAudioBufferConstructorSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds)=>{let nativeOfflineAudioContext=null;return class AudioBuffer{constructor(options){if(null===nativeOfflineAudioContextConstructor)throw new Error("Missing the native OfflineAudioContext constructor.");const{length,numberOfChannels,sampleRate}={...audio_buffer_constructor_DEFAULT_OPTIONS,...options};null===nativeOfflineAudioContext&&(nativeOfflineAudioContext=new nativeOfflineAudioContextConstructor(1,1,44100));const audioBuffer=null!==nativeAudioBufferConstructor&&cacheTestResult(testNativeAudioBufferConstructorSupport,testNativeAudioBufferConstructorSupport)?new nativeAudioBufferConstructor({length,numberOfChannels,sampleRate}):nativeOfflineAudioContext.createBuffer(numberOfChannels,length,sampleRate);if(0===audioBuffer.numberOfChannels)throw createNotSupportedError();return"function"!=typeof audioBuffer.copyFromChannel?(wrapAudioBufferCopyChannelMethods(audioBuffer),wrapAudioBufferGetChannelDataMethod(audioBuffer)):cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,(()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)))||wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer),audioBufferStore.add(audioBuffer),audioBuffer}static[Symbol.hasInstance](instance){return null!==instance&&"object"==typeof instance&&Object.getPrototypeOf(instance)===AudioBuffer.prototype||audioBufferStore.has(instance)}}})(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,(nativeAudioBufferConstructor=>()=>{if(null===nativeAudioBufferConstructor)return!1;try{new nativeAudioBufferConstructor({length:1,sampleRate:44100})}catch{return!1}return!0})(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=(createNativeGainNode=>(nativeContext,nativeAudioScheduledSourceNode)=>{const nativeGainNode=createNativeGainNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});nativeAudioScheduledSourceNode.connect(nativeGainNode).connect(nativeContext.destination);const disconnect=()=>{nativeAudioScheduledSourceNode.removeEventListener("ended",disconnect),nativeAudioScheduledSourceNode.disconnect(nativeGainNode),nativeGainNode.disconnect()};nativeAudioScheduledSourceNode.addEventListener("ended",disconnect)})(createNativeGainNode),renderInputsOfAudioParam=((getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle)=>async(audioParam,nativeOfflineAudioContext,nativeAudioParam)=>{const audioParamConnections=getAudioParamConnections(audioParam);await Promise.all(Array.from(audioParamConnections.activeInputs).map((async([source,output])=>{const audioNodeRenderer=getAudioNodeRenderer(source),renderedNativeAudioNode=await audioNodeRenderer.render(source,nativeOfflineAudioContext);isPartOfACycle(source)||renderedNativeAudioNode.connect(nativeAudioParam,output)})))})(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=(renderInputsOfAudioParam=>(nativeOfflineAudioContext,audioParam,nativeAudioParam)=>renderInputsOfAudioParam(audioParam,nativeOfflineAudioContext,nativeAudioParam))(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=((addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClampling,wrapAudioBufferSourceNodeStopMethodNullifiedBuffer,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls)=>(nativeContext,options)=>{const nativeAudioBufferSourceNode=nativeContext.createBufferSource();return assignNativeAudioNodeOptions(nativeAudioBufferSourceNode,options),assignNativeAudioNodeAudioParamValue(nativeAudioBufferSourceNode,options,"playbackRate"),assignNativeAudioNodeOption(nativeAudioBufferSourceNode,options,"buffer"),assignNativeAudioNodeOption(nativeAudioBufferSourceNode,options,"loop"),assignNativeAudioNodeOption(nativeAudioBufferSourceNode,options,"loopEnd"),assignNativeAudioNodeOption(nativeAudioBufferSourceNode,options,"loopStart"),cacheTestResult(testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,(()=>testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport(nativeContext)))||(nativeAudioBufferSourceNode=>{nativeAudioBufferSourceNode.start=(start=>{let isScheduled=!1;return(when=0,offset=0,duration)=>{if(isScheduled)throw createInvalidStateError();start.call(nativeAudioBufferSourceNode,when,offset,duration),isScheduled=!0}})(nativeAudioBufferSourceNode.start)})(nativeAudioBufferSourceNode),cacheTestResult(testAudioBufferSourceNodeStartMethodOffsetClampingSupport,(()=>testAudioBufferSourceNodeStartMethodOffsetClampingSupport(nativeContext)))||wrapAudioBufferSourceNodeStartMethodOffsetClampling(nativeAudioBufferSourceNode),cacheTestResult(testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,(()=>testAudioBufferSourceNodeStopMethodNullifiedBufferSupport(nativeContext)))||wrapAudioBufferSourceNodeStopMethodNullifiedBuffer(nativeAudioBufferSourceNode,nativeContext),cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,(()=>testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeAudioBufferSourceNode),cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,(()=>testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext)))||wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeAudioBufferSourceNode,nativeContext),cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,(()=>testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeAudioBufferSourceNode),addSilentConnection(nativeContext,nativeAudioBufferSourceNode),nativeAudioBufferSourceNode})(addSilentConnection,cacheTestResult,(nativeContext=>{const nativeAudioBufferSourceNode=nativeContext.createBufferSource();nativeAudioBufferSourceNode.start();try{nativeAudioBufferSourceNode.start()}catch{return!0}return!1}),(nativeContext=>{const nativeAudioBufferSourceNode=nativeContext.createBufferSource(),nativeAudioBuffer=nativeContext.createBuffer(1,1,44100);nativeAudioBufferSourceNode.buffer=nativeAudioBuffer;try{nativeAudioBufferSourceNode.start(0,1)}catch{return!1}return!0}),(nativeContext=>{const nativeAudioBufferSourceNode=nativeContext.createBufferSource();nativeAudioBufferSourceNode.start();try{nativeAudioBufferSourceNode.stop()}catch{return!1}return!0}),testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,(nativeAudioBufferSourceNode=>{var start;nativeAudioBufferSourceNode.start=(start=nativeAudioBufferSourceNode.start,(when=0,offset=0,duration)=>{const buffer=nativeAudioBufferSourceNode.buffer,clampedOffset=null===buffer?offset:Math.min(buffer.duration,offset);null!==buffer&&clampedOffset>buffer.duration-.5/nativeAudioBufferSourceNode.context.sampleRate?start.call(nativeAudioBufferSourceNode,when,0,0):start.call(nativeAudioBufferSourceNode,when,clampedOffset,duration)})}),(overwriteAccessors=>(nativeAudioBufferSourceNode,nativeContext)=>{const nullifiedBuffer=nativeContext.createBuffer(1,1,44100);null===nativeAudioBufferSourceNode.buffer&&(nativeAudioBufferSourceNode.buffer=nullifiedBuffer),overwriteAccessors(nativeAudioBufferSourceNode,"buffer",(get=>()=>{const value=get.call(nativeAudioBufferSourceNode);return value===nullifiedBuffer?null:value}),(set=>value=>set.call(nativeAudioBufferSourceNode,null===value?nullifiedBuffer:value)))})(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=((getAudioParamRenderer,renderInputsOfAudioParam)=>(nativeOfflineAudioContext,audioParam,nativeAudioParam)=>(getAudioParamRenderer(audioParam).replay(nativeAudioParam),renderInputsOfAudioParam(audioParam,nativeOfflineAudioContext,nativeAudioParam)))((getAudioParamConnections=>audioParam=>{const audioParamConnections=getAudioParamConnections(audioParam);if(null===audioParamConnections.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return audioParamConnections.renderer})(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=((connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode)=>()=>{const renderedNativeAudioBufferSourceNodes=new WeakMap;let start=null,stop=null;return{set start(value){start=value},set stop(value){stop=value},render(proxy,nativeOfflineAudioContext){const renderedNativeAudioBufferSourceNode=renderedNativeAudioBufferSourceNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeAudioBufferSourceNode?Promise.resolve(renderedNativeAudioBufferSourceNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeAudioBufferSourceNode=getNativeAudioNode(proxy);const nativeAudioBufferSourceNodeIsOwnedByContext=isOwnedByContext(nativeAudioBufferSourceNode,nativeOfflineAudioContext);if(!nativeAudioBufferSourceNodeIsOwnedByContext){const options={buffer:nativeAudioBufferSourceNode.buffer,channelCount:nativeAudioBufferSourceNode.channelCount,channelCountMode:nativeAudioBufferSourceNode.channelCountMode,channelInterpretation:nativeAudioBufferSourceNode.channelInterpretation,loop:nativeAudioBufferSourceNode.loop,loopEnd:nativeAudioBufferSourceNode.loopEnd,loopStart:nativeAudioBufferSourceNode.loopStart,playbackRate:nativeAudioBufferSourceNode.playbackRate.value};nativeAudioBufferSourceNode=createNativeAudioBufferSourceNode(nativeOfflineAudioContext,options),null!==start&&nativeAudioBufferSourceNode.start(...start),null!==stop&&nativeAudioBufferSourceNode.stop(stop)}return renderedNativeAudioBufferSourceNodes.set(nativeOfflineAudioContext,nativeAudioBufferSourceNode),nativeAudioBufferSourceNodeIsOwnedByContext?await connectAudioParam(nativeOfflineAudioContext,proxy.playbackRate,nativeAudioBufferSourceNode.playbackRate):await renderAutomation(nativeOfflineAudioContext,proxy.playbackRate,nativeAudioBufferSourceNode.playbackRate),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeAudioBufferSourceNode),nativeAudioBufferSourceNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=((addAudioParamConnections,audioParamAudioNodeStore,audioParamStore,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible)=>(audioNode,isAudioParamOfOfflineAudioContext,nativeAudioParam,maxValue=null,minValue=null)=>{const automationEventList=new bundle.AutomationEventList(nativeAudioParam.defaultValue),audioParamRenderer=isAudioParamOfOfflineAudioContext?createAudioParamRenderer(automationEventList):null,audioParam={get defaultValue(){return nativeAudioParam.defaultValue},get maxValue(){return null===maxValue?nativeAudioParam.maxValue:maxValue},get minValue(){return null===minValue?nativeAudioParam.minValue:minValue},get value(){return nativeAudioParam.value},set value(value){nativeAudioParam.value=value,audioParam.setValueAtTime(value,audioNode.context.currentTime)},cancelAndHoldAtTime(cancelTime){if("function"==typeof nativeAudioParam.cancelAndHoldAtTime)null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime)),nativeAudioParam.cancelAndHoldAtTime(cancelTime);else{const previousLastEvent=Array.from(automationEventList).pop();null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));const currentLastEvent=Array.from(automationEventList).pop();nativeAudioParam.cancelScheduledValues(cancelTime),previousLastEvent!==currentLastEvent&&void 0!==currentLastEvent&&("exponentialRampToValue"===currentLastEvent.type?nativeAudioParam.exponentialRampToValueAtTime(currentLastEvent.value,currentLastEvent.endTime):"linearRampToValue"===currentLastEvent.type?nativeAudioParam.linearRampToValueAtTime(currentLastEvent.value,currentLastEvent.endTime):"setValue"===currentLastEvent.type?nativeAudioParam.setValueAtTime(currentLastEvent.value,currentLastEvent.startTime):"setValueCurve"===currentLastEvent.type&&nativeAudioParam.setValueCurveAtTime(currentLastEvent.values,currentLastEvent.startTime,currentLastEvent.duration))}return audioParam},cancelScheduledValues:cancelTime=>(null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createCancelScheduledValuesAutomationEvent(cancelTime)),nativeAudioParam.cancelScheduledValues(cancelTime),audioParam),exponentialRampToValueAtTime(value,endTime){if(0===value)throw new RangeError;if(!Number.isFinite(endTime)||endTime<0)throw new RangeError;return null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createExponentialRampToValueAutomationEvent(value,endTime)),nativeAudioParam.exponentialRampToValueAtTime(value,endTime),audioParam},linearRampToValueAtTime:(value,endTime)=>(null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createLinearRampToValueAutomationEvent(value,endTime)),nativeAudioParam.linearRampToValueAtTime(value,endTime),audioParam),setTargetAtTime:(target,startTime,timeConstant)=>(null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createSetTargetAutomationEvent(target,startTime,timeConstant)),nativeAudioParam.setTargetAtTime(target,startTime,timeConstant),audioParam),setValueAtTime:(value,startTime)=>(null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createSetValueAutomationEvent(value,startTime)),nativeAudioParam.setValueAtTime(value,startTime),audioParam),setValueCurveAtTime(values,startTime,duration){const convertedValues=values instanceof Float32Array?values:new Float32Array(values);if(null!==nativeAudioContextConstructor&&"webkitAudioContext"===nativeAudioContextConstructor.name){const endTime=startTime+duration,sampleRate=audioNode.context.sampleRate,firstSample=Math.ceil(startTime*sampleRate),lastSample=Math.floor(endTime*sampleRate),numberOfInterpolatedValues=lastSample-firstSample,interpolatedValues=new Float32Array(numberOfInterpolatedValues);for(let i=0;i<numberOfInterpolatedValues;i+=1){const theoreticIndex=(convertedValues.length-1)/duration*((firstSample+i)/sampleRate-startTime),lowerIndex=Math.floor(theoreticIndex),upperIndex=Math.ceil(theoreticIndex);interpolatedValues[i]=lowerIndex===upperIndex?convertedValues[lowerIndex]:(1-(theoreticIndex-lowerIndex))*convertedValues[lowerIndex]+(1-(upperIndex-theoreticIndex))*convertedValues[upperIndex]}null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createSetValueCurveAutomationEvent(interpolatedValues,startTime,duration)),nativeAudioParam.setValueCurveAtTime(interpolatedValues,startTime,duration);const timeOfLastSample=lastSample/sampleRate;timeOfLastSample<endTime&&setValueAtTimeUntilPossible(audioParam,interpolatedValues[interpolatedValues.length-1],timeOfLastSample),setValueAtTimeUntilPossible(audioParam,convertedValues[convertedValues.length-1],endTime)}else null===audioParamRenderer&&automationEventList.flush(audioNode.context.currentTime),automationEventList.add(createSetValueCurveAutomationEvent(convertedValues,startTime,duration)),nativeAudioParam.setValueCurveAtTime(convertedValues,startTime,duration);return audioParam}};return audioParamStore.set(audioParam,nativeAudioParam),audioParamAudioNodeStore.set(audioParam,audioNode),addAudioParamConnections(audioParam,audioParamRenderer),audioParam})((audioParamConnectionsStore=AUDIO_PARAM_CONNECTIONS_STORE,(audioParam,audioParamRenderer)=>{audioParamConnectionsStore.set(audioParam,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:audioParamRenderer})}),audioParamAudioNodeStore,AUDIO_PARAM_STORE,(automationEventList=>({replay(audioParam){for(const automationEvent of automationEventList)if("exponentialRampToValue"===automationEvent.type){const{endTime,value}=automationEvent;audioParam.exponentialRampToValueAtTime(value,endTime)}else if("linearRampToValue"===automationEvent.type){const{endTime,value}=automationEvent;audioParam.linearRampToValueAtTime(value,endTime)}else if("setTarget"===automationEvent.type){const{startTime,target,timeConstant}=automationEvent;audioParam.setTargetAtTime(target,startTime,timeConstant)}else if("setValue"===automationEvent.type){const{startTime,value}=automationEvent;audioParam.setValueAtTime(value,startTime)}else{if("setValueCurve"!==automationEvent.type)throw new Error("Can't apply an unknown automation.");{const{duration,startTime,values}=automationEvent;audioParam.setValueCurveAtTime(values,startTime,duration)}}}})),bundle.createCancelAndHoldAutomationEvent,bundle.createCancelScheduledValuesAutomationEvent,bundle.createExponentialRampToValueAutomationEvent,bundle.createLinearRampToValueAutomationEvent,bundle.createSetTargetAutomationEvent,bundle.createSetValueAutomationEvent,bundle.createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible);var audioParamConnectionsStore;const audioBufferSourceNodeConstructor=((audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener)=>class AudioBufferSourceNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...audio_buffer_source_node_constructor_DEFAULT_OPTIONS,...options},nativeAudioBufferSourceNode=createNativeAudioBufferSourceNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext),audioBufferSourceNodeRenderer=isOffline?createAudioBufferSourceNodeRenderer():null;super(context,!1,nativeAudioBufferSourceNode,audioBufferSourceNodeRenderer),this._audioBufferSourceNodeRenderer=audioBufferSourceNodeRenderer,this._isBufferNullified=!1,this._isBufferSet=null!==mergedOptions.buffer,this._nativeAudioBufferSourceNode=nativeAudioBufferSourceNode,this._onended=null,this._playbackRate=createAudioParam(this,isOffline,nativeAudioBufferSourceNode.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(value){if(this._nativeAudioBufferSourceNode.buffer=value,null!==value){if(this._isBufferSet)throw createInvalidStateError();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(value){this._nativeAudioBufferSourceNode.loop=value}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(value){this._nativeAudioBufferSourceNode.loopEnd=value}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(value){this._nativeAudioBufferSourceNode.loopStart=value}get onended(){return this._onended}set onended(value){const wrappedListener="function"==typeof value?wrapEventListener(this,value):null;this._nativeAudioBufferSourceNode.onended=wrappedListener;const nativeOnEnded=this._nativeAudioBufferSourceNode.onended;this._onended=null!==nativeOnEnded&&nativeOnEnded===wrappedListener?value:nativeOnEnded}get playbackRate(){return this._playbackRate}start(when=0,offset=0,duration){if(this._nativeAudioBufferSourceNode.start(when,offset,duration),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===duration?[when,offset]:[when,offset,duration]),"closed"!==this.context.state){setInternalStateToActive(this);const resetInternalStateToPassive=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",resetInternalStateToPassive),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",resetInternalStateToPassive)}}stop(when=0){this._nativeAudioBufferSourceNode.stop(when),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=when)}})(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=((audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode)=>class AudioDestinationNode extends audioNodeConstructor{constructor(context,channelCount){const nativeContext=getNativeContext(context),isOffline=isNativeOfflineAudioContext(nativeContext),nativeAudioDestinationNode=createNativeAudioDestinationNode(nativeContext,channelCount,isOffline);super(context,!1,nativeAudioDestinationNode,isOffline?createAudioDestinationNodeRenderer(renderInputsOfAudioNode):null),this._isNodeOfNativeOfflineAudioContext=isOffline,this._nativeAudioDestinationNode=nativeAudioDestinationNode}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(value){if(this._isNodeOfNativeOfflineAudioContext)throw createInvalidStateError();if(value>this._nativeAudioDestinationNode.maxChannelCount)throw createIndexSizeError();this._nativeAudioDestinationNode.channelCount=value}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(value){if(this._isNodeOfNativeOfflineAudioContext)throw createInvalidStateError();this._nativeAudioDestinationNode.channelCountMode=value}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(audioNodeConstructor,(renderInputsOfAudioNode=>{const renderedNativeAudioDestinationNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeAudioDestinationNode=renderedNativeAudioDestinationNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeAudioDestinationNode?Promise.resolve(renderedNativeAudioDestinationNode):(async(proxy,nativeOfflineAudioContext)=>{const nativeAudioDestinationNode=nativeOfflineAudioContext.destination;return renderedNativeAudioDestinationNodes.set(nativeOfflineAudioContext,nativeAudioDestinationNode),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeAudioDestinationNode),nativeAudioDestinationNode})(proxy,nativeOfflineAudioContext)}}}),createIndexSizeError,createInvalidStateError,((createNativeGainNode,overwriteAccessors)=>(nativeContext,channelCount,isNodeOfNativeOfflineAudioContext)=>{const nativeAudioDestinationNode=nativeContext.destination;if(nativeAudioDestinationNode.channelCount!==channelCount)try{nativeAudioDestinationNode.channelCount=channelCount}catch{}isNodeOfNativeOfflineAudioContext&&"explicit"!==nativeAudioDestinationNode.channelCountMode&&(nativeAudioDestinationNode.channelCountMode="explicit"),0===nativeAudioDestinationNode.maxChannelCount&&Object.defineProperty(nativeAudioDestinationNode,"maxChannelCount",{value:channelCount});const gainNode=createNativeGainNode(nativeContext,{channelCount,channelCountMode:nativeAudioDestinationNode.channelCountMode,channelInterpretation:nativeAudioDestinationNode.channelInterpretation,gain:1});return overwriteAccessors(gainNode,"channelCount",(get=>()=>get.call(gainNode)),(set=>value=>{set.call(gainNode,value);try{nativeAudioDestinationNode.channelCount=value}catch(err){if(value>nativeAudioDestinationNode.maxChannelCount)throw err}})),overwriteAccessors(gainNode,"channelCountMode",(get=>()=>get.call(gainNode)),(set=>value=>{set.call(gainNode,value),nativeAudioDestinationNode.channelCountMode=value})),overwriteAccessors(gainNode,"channelInterpretation",(get=>()=>get.call(gainNode)),(set=>value=>{set.call(gainNode,value),nativeAudioDestinationNode.channelInterpretation=value})),Object.defineProperty(gainNode,"maxChannelCount",{get:()=>nativeAudioDestinationNode.maxChannelCount}),gainNode.connect(nativeAudioDestinationNode),gainNode})(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=((connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode)=>()=>{const renderedNativeBiquadFilterNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeBiquadFilterNode=renderedNativeBiquadFilterNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeBiquadFilterNode?Promise.resolve(renderedNativeBiquadFilterNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeBiquadFilterNode=getNativeAudioNode(proxy);const nativeBiquadFilterNodeIsOwnedByContext=isOwnedByContext(nativeBiquadFilterNode,nativeOfflineAudioContext);if(!nativeBiquadFilterNodeIsOwnedByContext){const options={Q:nativeBiquadFilterNode.Q.value,channelCount:nativeBiquadFilterNode.channelCount,channelCountMode:nativeBiquadFilterNode.channelCountMode,channelInterpretation:nativeBiquadFilterNode.channelInterpretation,detune:nativeBiquadFilterNode.detune.value,frequency:nativeBiquadFilterNode.frequency.value,gain:nativeBiquadFilterNode.gain.value,type:nativeBiquadFilterNode.type};nativeBiquadFilterNode=createNativeBiquadFilterNode(nativeOfflineAudioContext,options)}return renderedNativeBiquadFilterNodes.set(nativeOfflineAudioContext,nativeBiquadFilterNode),nativeBiquadFilterNodeIsOwnedByContext?(await connectAudioParam(nativeOfflineAudioContext,proxy.Q,nativeBiquadFilterNode.Q),await connectAudioParam(nativeOfflineAudioContext,proxy.detune,nativeBiquadFilterNode.detune),await connectAudioParam(nativeOfflineAudioContext,proxy.frequency,nativeBiquadFilterNode.frequency),await connectAudioParam(nativeOfflineAudioContext,proxy.gain,nativeBiquadFilterNode.gain)):(await renderAutomation(nativeOfflineAudioContext,proxy.Q,nativeBiquadFilterNode.Q),await renderAutomation(nativeOfflineAudioContext,proxy.detune,nativeBiquadFilterNode.detune),await renderAutomation(nativeOfflineAudioContext,proxy.frequency,nativeBiquadFilterNode.frequency),await renderAutomation(nativeOfflineAudioContext,proxy.gain,nativeBiquadFilterNode.gain)),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeBiquadFilterNode),nativeBiquadFilterNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=(audioNodeTailTimeStore=>(audioNode,tailTime)=>audioNodeTailTimeStore.set(audioNode,tailTime))(audioNodeTailTimeStore),biquadFilterNodeConstructor=((audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime)=>class BiquadFilterNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...biquad_filter_node_constructor_DEFAULT_OPTIONS,...options},nativeBiquadFilterNode=createNativeBiquadFilterNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext);super(context,!1,nativeBiquadFilterNode,isOffline?createBiquadFilterNodeRenderer():null),this._Q=createAudioParam(this,isOffline,nativeBiquadFilterNode.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=createAudioParam(this,isOffline,nativeBiquadFilterNode.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=createAudioParam(this,isOffline,nativeBiquadFilterNode.frequency,context.sampleRate/2,0),this._gain=createAudioParam(this,isOffline,nativeBiquadFilterNode.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=nativeBiquadFilterNode,setAudioNodeTailTime(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(value){this._nativeBiquadFilterNode.type=value}getFrequencyResponse(frequencyHz,magResponse,phaseResponse){try{this._nativeBiquadFilterNode.getFrequencyResponse(frequencyHz,magResponse,phaseResponse)}catch(err){if(11===err.code)throw createInvalidAccessError();throw err}if(frequencyHz.length!==magResponse.length||magResponse.length!==phaseResponse.length)throw createInvalidAccessError()}})(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=((insertElementInSet,isNativeAudioNode)=>(nativeAudioNode,whenConnected,whenDisconnected)=>{const connections=new Set;var connect,disconnect;return nativeAudioNode.connect=(connect=nativeAudioNode.connect,(destination,output=0,input=0)=>{const wasDisconnected=0===connections.size;if(isNativeAudioNode(destination))return connect.call(nativeAudioNode,destination,output,input),insertElementInSet(connections,[destination,output,input],(connection=>connection[0]===destination&&connection[1]===output&&connection[2]===input),!0),wasDisconnected&&whenConnected(),destination;connect.call(nativeAudioNode,destination,output),insertElementInSet(connections,[destination,output],(connection=>connection[0]===destination&&connection[1]===output),!0),wasDisconnected&&whenConnected()}),nativeAudioNode.disconnect=(disconnect=nativeAudioNode.disconnect,(destinationOrOutput,output,input)=>{const wasConnected=connections.size>0;if(void 0===destinationOrOutput)disconnect.apply(nativeAudioNode),connections.clear();else if("number"==typeof destinationOrOutput){disconnect.call(nativeAudioNode,destinationOrOutput);for(const connection of connections)connection[1]===destinationOrOutput&&connections.delete(connection)}else{isNativeAudioNode(destinationOrOutput)?disconnect.call(nativeAudioNode,destinationOrOutput,output,input):disconnect.call(nativeAudioNode,destinationOrOutput,output);for(const connection of connections)connection[0]!==destinationOrOutput||void 0!==output&&connection[1]!==output||void 0!==input&&connection[2]!==input||connections.delete(connection)}const isDisconnected=0===connections.size;wasConnected&&isDisconnected&&whenDisconnected()}),nativeAudioNode})(insertElementInSet,module_isNativeAudioNode),wrapChannelMergerNode=((createInvalidStateError,monitorConnections)=>(nativeContext,channelMergerNode)=>{channelMergerNode.channelCount=1,channelMergerNode.channelCountMode="explicit",Object.defineProperty(channelMergerNode,"channelCount",{get:()=>1,set:()=>{throw createInvalidStateError()}}),Object.defineProperty(channelMergerNode,"channelCountMode",{get:()=>"explicit",set:()=>{throw createInvalidStateError()}});const audioBufferSourceNode=nativeContext.createBufferSource();monitorConnections(channelMergerNode,(()=>{const length=channelMergerNode.numberOfInputs;for(let i=0;i<length;i+=1)audioBufferSourceNode.connect(channelMergerNode,0,i)}),(()=>audioBufferSourceNode.disconnect(channelMergerNode)))})(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=((nativeAudioContextConstructor,wrapChannelMergerNode)=>(nativeContext,options)=>{const nativeChannelMergerNode=nativeContext.createChannelMerger(options.numberOfInputs);return null!==nativeAudioContextConstructor&&"webkitAudioContext"===nativeAudioContextConstructor.name&&wrapChannelMergerNode(nativeContext,nativeChannelMergerNode),assignNativeAudioNodeOptions(nativeChannelMergerNode,options),nativeChannelMergerNode})(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=((createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode)=>()=>{const renderedNativeAudioNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeAudioNode=renderedNativeAudioNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeAudioNode?Promise.resolve(renderedNativeAudioNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeAudioNode=getNativeAudioNode(proxy);if(!isOwnedByContext(nativeAudioNode,nativeOfflineAudioContext)){const options={channelCount:nativeAudioNode.channelCount,channelCountMode:nativeAudioNode.channelCountMode,channelInterpretation:nativeAudioNode.channelInterpretation,numberOfInputs:nativeAudioNode.numberOfInputs};nativeAudioNode=createNativeChannelMergerNode(nativeOfflineAudioContext,options)}return renderedNativeAudioNodes.set(nativeOfflineAudioContext,nativeAudioNode),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeAudioNode),nativeAudioNode})(proxy,nativeOfflineAudioContext)}}})(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=((audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext)=>class ChannelMergerNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...channel_merger_node_constructor_DEFAULT_OPTIONS,...options};super(context,!1,createNativeChannelMergerNode(nativeContext,mergedOptions),isNativeOfflineAudioContext(nativeContext)?createChannelMergerNodeRenderer():null)}})(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=((createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode)=>()=>{const renderedNativeAudioNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeAudioNode=renderedNativeAudioNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeAudioNode?Promise.resolve(renderedNativeAudioNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeAudioNode=getNativeAudioNode(proxy);if(!isOwnedByContext(nativeAudioNode,nativeOfflineAudioContext)){const options={channelCount:nativeAudioNode.channelCount,channelCountMode:nativeAudioNode.channelCountMode,channelInterpretation:nativeAudioNode.channelInterpretation,numberOfOutputs:nativeAudioNode.numberOfOutputs};nativeAudioNode=createNativeChannelSplitterNode(nativeOfflineAudioContext,options)}return renderedNativeAudioNodes.set(nativeOfflineAudioContext,nativeAudioNode),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeAudioNode),nativeAudioNode})(proxy,nativeOfflineAudioContext)}}})(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=((audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions)=>class ChannelSplitterNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions=sanitizeChannelSplitterOptions({...channel_splitter_node_constructor_DEFAULT_OPTIONS,...options});super(context,!1,createNativeChannelSplitterNode(nativeContext,mergedOptions),isNativeOfflineAudioContext(nativeContext)?createChannelSplitterNodeRenderer():null)}})(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,(options=>({...options,channelCount:options.numberOfOutputs}))),createNativeConstantSourceNodeFaker=((addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections)=>(nativeContext,{offset,...audioNodeOptions})=>{const audioBuffer=nativeContext.createBuffer(1,2,44100),audioBufferSourceNode=createNativeAudioBufferSourceNode(nativeContext,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),gainNode=createNativeGainNode(nativeContext,{...audioNodeOptions,gain:offset}),channelData=audioBuffer.getChannelData(0);channelData[0]=1,channelData[1]=1,audioBufferSourceNode.buffer=audioBuffer,audioBufferSourceNode.loop=!0;const nativeConstantSourceNodeFaker={get bufferSize(){},get channelCount(){return gainNode.channelCount},set channelCount(value){gainNode.channelCount=value},get channelCountMode(){return gainNode.channelCountMode},set channelCountMode(value){gainNode.channelCountMode=value},get channelInterpretation(){return gainNode.channelInterpretation},set channelInterpretation(value){gainNode.channelInterpretation=value},get context(){return gainNode.context},get inputs(){return[]},get numberOfInputs(){return audioBufferSourceNode.numberOfInputs},get numberOfOutputs(){return gainNode.numberOfOutputs},get offset(){return gainNode.gain},get onended(){return audioBufferSourceNode.onended},set onended(value){audioBufferSourceNode.onended=value},addEventListener:(...args)=>audioBufferSourceNode.addEventListener(args[0],args[1],args[2]),dispatchEvent:(...args)=>audioBufferSourceNode.dispatchEvent(args[0]),removeEventListener:(...args)=>audioBufferSourceNode.removeEventListener(args[0],args[1],args[2]),start(when=0){audioBufferSourceNode.start.call(audioBufferSourceNode,when)},stop(when=0){audioBufferSourceNode.stop.call(audioBufferSourceNode,when)}};return addSilentConnection(nativeContext,audioBufferSourceNode),monitorConnections(interceptConnections(nativeConstantSourceNodeFaker,gainNode),(()=>audioBufferSourceNode.connect(gainNode)),(()=>audioBufferSourceNode.disconnect(gainNode)))})(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=((addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport)=>(nativeContext,options)=>{if(void 0===nativeContext.createConstantSource)return createNativeConstantSourceNodeFaker(nativeContext,options);const nativeConstantSourceNode=nativeContext.createConstantSource();return assignNativeAudioNodeOptions(nativeConstantSourceNode,options),assignNativeAudioNodeAudioParamValue(nativeConstantSourceNode,options,"offset"),cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,(()=>testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeConstantSourceNode),cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,(()=>testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeConstantSourceNode),addSilentConnection(nativeContext,nativeConstantSourceNode),nativeConstantSourceNode})(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=((connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode)=>()=>{const renderedNativeConstantSourceNodes=new WeakMap;let start=null,stop=null;return{set start(value){start=value},set stop(value){stop=value},render(proxy,nativeOfflineAudioContext){const renderedNativeConstantSourceNode=renderedNativeConstantSourceNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeConstantSourceNode?Promise.resolve(renderedNativeConstantSourceNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeConstantSourceNode=getNativeAudioNode(proxy);const nativeConstantSourceNodeIsOwnedByContext=isOwnedByContext(nativeConstantSourceNode,nativeOfflineAudioContext);if(!nativeConstantSourceNodeIsOwnedByContext){const options={channelCount:nativeConstantSourceNode.channelCount,channelCountMode:nativeConstantSourceNode.channelCountMode,channelInterpretation:nativeConstantSourceNode.channelInterpretation,offset:nativeConstantSourceNode.offset.value};nativeConstantSourceNode=createNativeConstantSourceNode(nativeOfflineAudioContext,options),null!==start&&nativeConstantSourceNode.start(start),null!==stop&&nativeConstantSourceNode.stop(stop)}return renderedNativeConstantSourceNodes.set(nativeOfflineAudioContext,nativeConstantSourceNode),nativeConstantSourceNodeIsOwnedByContext?await connectAudioParam(nativeOfflineAudioContext,proxy.offset,nativeConstantSourceNode.offset):await renderAutomation(nativeOfflineAudioContext,proxy.offset,nativeConstantSourceNode.offset),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeConstantSourceNode),nativeConstantSourceNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=((audioNodeConstructor,createAudioParam,createConstantSourceNodeRendererFactory,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener)=>class ConstantSourceNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...constant_source_node_constructor_DEFAULT_OPTIONS,...options},nativeConstantSourceNode=createNativeConstantSourceNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext),constantSourceNodeRenderer=isOffline?createConstantSourceNodeRendererFactory():null;super(context,!1,nativeConstantSourceNode,constantSourceNodeRenderer),this._constantSourceNodeRenderer=constantSourceNodeRenderer,this._nativeConstantSourceNode=nativeConstantSourceNode,this._offset=createAudioParam(this,isOffline,nativeConstantSourceNode.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(value){const wrappedListener="function"==typeof value?wrapEventListener(this,value):null;this._nativeConstantSourceNode.onended=wrappedListener;const nativeOnEnded=this._nativeConstantSourceNode.onended;this._onended=null!==nativeOnEnded&&nativeOnEnded===wrappedListener?value:nativeOnEnded}start(when=0){if(this._nativeConstantSourceNode.start(when),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=when),"closed"!==this.context.state){setInternalStateToActive(this);const resetInternalStateToPassive=()=>{this._nativeConstantSourceNode.removeEventListener("ended",resetInternalStateToPassive),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",resetInternalStateToPassive)}}stop(when=0){this._nativeConstantSourceNode.stop(when),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=when)}})(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=((createNotSupportedError,overwriteAccessors)=>(nativeContext,options)=>{const nativeConvolverNode=nativeContext.createConvolver();if(assignNativeAudioNodeOptions(nativeConvolverNode,options),options.disableNormalization===nativeConvolverNode.normalize&&(nativeConvolverNode.normalize=!options.disableNormalization),assignNativeAudioNodeOption(nativeConvolverNode,options,"buffer"),options.channelCount>2)throw createNotSupportedError();if(overwriteAccessors(nativeConvolverNode,"channelCount",(get=>()=>get.call(nativeConvolverNode)),(set=>value=>{if(value>2)throw createNotSupportedError();return set.call(nativeConvolverNode,value)})),"max"===options.channelCountMode)throw createNotSupportedError();return overwriteAccessors(nativeConvolverNode,"channelCountMode",(get=>()=>get.call(nativeConvolverNode)),(set=>value=>{if("max"===value)throw createNotSupportedError();return set.call(nativeConvolverNode,value)})),nativeConvolverNode})(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=((createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode)=>()=>{const renderedNativeConvolverNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeConvolverNode=renderedNativeConvolverNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeConvolverNode?Promise.resolve(renderedNativeConvolverNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeConvolverNode=getNativeAudioNode(proxy);if(!isOwnedByContext(nativeConvolverNode,nativeOfflineAudioContext)){const options={buffer:nativeConvolverNode.buffer,channelCount:nativeConvolverNode.channelCount,channelCountMode:nativeConvolverNode.channelCountMode,channelInterpretation:nativeConvolverNode.channelInterpretation,disableNormalization:!nativeConvolverNode.normalize};nativeConvolverNode=createNativeConvolverNode(nativeOfflineAudioContext,options)}return renderedNativeConvolverNodes.set(nativeOfflineAudioContext,nativeConvolverNode),isNativeAudioNodeFaker(nativeConvolverNode)?await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeConvolverNode.inputs[0]):await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeConvolverNode),nativeConvolverNode})(proxy,nativeOfflineAudioContext)}}})(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=((audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime)=>class ConvolverNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...convolver_node_constructor_DEFAULT_OPTIONS,...options},nativeConvolverNode=createNativeConvolverNode(nativeContext,mergedOptions);super(context,!1,nativeConvolverNode,isNativeOfflineAudioContext(nativeContext)?createConvolverNodeRenderer():null),this._isBufferNullified=!1,this._nativeConvolverNode=nativeConvolverNode,null!==mergedOptions.buffer&&setAudioNodeTailTime(this,mergedOptions.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(value){if(this._nativeConvolverNode.buffer=value,null===value&&null!==this._nativeConvolverNode.buffer){const nativeContext=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=nativeContext.createBuffer(1,1,nativeContext.sampleRate),this._isBufferNullified=!0,setAudioNodeTailTime(this,0)}else this._isBufferNullified=!1,setAudioNodeTailTime(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(value){this._nativeConvolverNode.normalize=value}})(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=((connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode)=>maxDelayTime=>{const renderedNativeDelayNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeDelayNode=renderedNativeDelayNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeDelayNode?Promise.resolve(renderedNativeDelayNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeDelayNode=getNativeAudioNode(proxy);const nativeDelayNodeIsOwnedByContext=isOwnedByContext(nativeDelayNode,nativeOfflineAudioContext);if(!nativeDelayNodeIsOwnedByContext){const options={channelCount:nativeDelayNode.channelCount,channelCountMode:nativeDelayNode.channelCountMode,channelInterpretation:nativeDelayNode.channelInterpretation,delayTime:nativeDelayNode.delayTime.value,maxDelayTime};nativeDelayNode=createNativeDelayNode(nativeOfflineAudioContext,options)}return renderedNativeDelayNodes.set(nativeOfflineAudioContext,nativeDelayNode),nativeDelayNodeIsOwnedByContext?await connectAudioParam(nativeOfflineAudioContext,proxy.delayTime,nativeDelayNode.delayTime):await renderAutomation(nativeOfflineAudioContext,proxy.delayTime,nativeDelayNode.delayTime),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeDelayNode),nativeDelayNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=((audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime)=>class DelayNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...delay_node_constructor_DEFAULT_OPTIONS,...options},nativeDelayNode=createNativeDelayNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext);super(context,!1,nativeDelayNode,isOffline?createDelayNodeRenderer(mergedOptions.maxDelayTime):null),this._delayTime=createAudioParam(this,isOffline,nativeDelayNode.delayTime),setAudioNodeTailTime(this,mergedOptions.maxDelayTime)}get delayTime(){return this._delayTime}})(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=(createNotSupportedError=>(nativeContext,options)=>{const nativeDynamicsCompressorNode=nativeContext.createDynamicsCompressor();if(assignNativeAudioNodeOptions(nativeDynamicsCompressorNode,options),options.channelCount>2)throw createNotSupportedError();if("max"===options.channelCountMode)throw createNotSupportedError();return assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode,options,"attack"),assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode,options,"knee"),assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode,options,"ratio"),assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode,options,"release"),assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode,options,"threshold"),nativeDynamicsCompressorNode})(createNotSupportedError),createDynamicsCompressorNodeRenderer=((connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode)=>()=>{const renderedNativeDynamicsCompressorNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeDynamicsCompressorNode=renderedNativeDynamicsCompressorNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeDynamicsCompressorNode?Promise.resolve(renderedNativeDynamicsCompressorNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeDynamicsCompressorNode=getNativeAudioNode(proxy);const nativeDynamicsCompressorNodeIsOwnedByContext=isOwnedByContext(nativeDynamicsCompressorNode,nativeOfflineAudioContext);if(!nativeDynamicsCompressorNodeIsOwnedByContext){const options={attack:nativeDynamicsCompressorNode.attack.value,channelCount:nativeDynamicsCompressorNode.channelCount,channelCountMode:nativeDynamicsCompressorNode.channelCountMode,channelInterpretation:nativeDynamicsCompressorNode.channelInterpretation,knee:nativeDynamicsCompressorNode.knee.value,ratio:nativeDynamicsCompressorNode.ratio.value,release:nativeDynamicsCompressorNode.release.value,threshold:nativeDynamicsCompressorNode.threshold.value};nativeDynamicsCompressorNode=createNativeDynamicsCompressorNode(nativeOfflineAudioContext,options)}return renderedNativeDynamicsCompressorNodes.set(nativeOfflineAudioContext,nativeDynamicsCompressorNode),nativeDynamicsCompressorNodeIsOwnedByContext?(await connectAudioParam(nativeOfflineAudioContext,proxy.attack,nativeDynamicsCompressorNode.attack),await connectAudioParam(nativeOfflineAudioContext,proxy.knee,nativeDynamicsCompressorNode.knee),await connectAudioParam(nativeOfflineAudioContext,proxy.ratio,nativeDynamicsCompressorNode.ratio),await connectAudioParam(nativeOfflineAudioContext,proxy.release,nativeDynamicsCompressorNode.release),await connectAudioParam(nativeOfflineAudioContext,proxy.threshold,nativeDynamicsCompressorNode.threshold)):(await renderAutomation(nativeOfflineAudioContext,proxy.attack,nativeDynamicsCompressorNode.attack),await renderAutomation(nativeOfflineAudioContext,proxy.knee,nativeDynamicsCompressorNode.knee),await renderAutomation(nativeOfflineAudioContext,proxy.ratio,nativeDynamicsCompressorNode.ratio),await renderAutomation(nativeOfflineAudioContext,proxy.release,nativeDynamicsCompressorNode.release),await renderAutomation(nativeOfflineAudioContext,proxy.threshold,nativeDynamicsCompressorNode.threshold)),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeDynamicsCompressorNode),nativeDynamicsCompressorNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=((audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime)=>class DynamicsCompressorNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...dynamics_compressor_node_constructor_DEFAULT_OPTIONS,...options},nativeDynamicsCompressorNode=createNativeDynamicsCompressorNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext);super(context,!1,nativeDynamicsCompressorNode,isOffline?createDynamicsCompressorNodeRenderer():null),this._attack=createAudioParam(this,isOffline,nativeDynamicsCompressorNode.attack),this._knee=createAudioParam(this,isOffline,nativeDynamicsCompressorNode.knee),this._nativeDynamicsCompressorNode=nativeDynamicsCompressorNode,this._ratio=createAudioParam(this,isOffline,nativeDynamicsCompressorNode.ratio),this._release=createAudioParam(this,isOffline,nativeDynamicsCompressorNode.release),this._threshold=createAudioParam(this,isOffline,nativeDynamicsCompressorNode.threshold),setAudioNodeTailTime(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(value){const previousChannelCount=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=value,value>2)throw this._nativeDynamicsCompressorNode.channelCount=previousChannelCount,createNotSupportedError()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(value){const previousChannelCount=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=value,"max"===value)throw this._nativeDynamicsCompressorNode.channelCountMode=previousChannelCount,createNotSupportedError()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=((connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode)=>()=>{const renderedNativeGainNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeGainNode=renderedNativeGainNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeGainNode?Promise.resolve(renderedNativeGainNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeGainNode=getNativeAudioNode(proxy);const nativeGainNodeIsOwnedByContext=isOwnedByContext(nativeGainNode,nativeOfflineAudioContext);if(!nativeGainNodeIsOwnedByContext){const options={channelCount:nativeGainNode.channelCount,channelCountMode:nativeGainNode.channelCountMode,channelInterpretation:nativeGainNode.channelInterpretation,gain:nativeGainNode.gain.value};nativeGainNode=createNativeGainNode(nativeOfflineAudioContext,options)}return renderedNativeGainNodes.set(nativeOfflineAudioContext,nativeGainNode),nativeGainNodeIsOwnedByContext?await connectAudioParam(nativeOfflineAudioContext,proxy.gain,nativeGainNode.gain):await renderAutomation(nativeOfflineAudioContext,proxy.gain,nativeGainNode.gain),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeGainNode),nativeGainNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=((audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext)=>class GainNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...gain_node_constructor_DEFAULT_OPTIONS,...options},nativeGainNode=createNativeGainNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext);super(context,!1,nativeGainNode,isOffline?createGainNodeRenderer():null),this._gain=createAudioParam(this,isOffline,nativeGainNode.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}})(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=((createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError)=>(nativeContext,baseLatency,{channelCount,channelCountMode,channelInterpretation,feedback,feedforward})=>{const bufferSize=computeBufferSize(baseLatency,nativeContext.sampleRate),convertedFeedback=feedback instanceof Float64Array?feedback:new Float64Array(feedback),convertedFeedforward=feedforward instanceof Float64Array?feedforward:new Float64Array(feedforward),feedbackLength=convertedFeedback.length,feedforwardLength=convertedFeedforward.length,minLength=Math.min(feedbackLength,feedforwardLength);if(0===feedbackLength||feedbackLength>20)throw createNotSupportedError();if(0===convertedFeedback[0])throw createInvalidStateError();if(0===feedforwardLength||feedforwardLength>20)throw createNotSupportedError();if(0===convertedFeedforward[0])throw createInvalidStateError();if(1!==convertedFeedback[0]){for(let i=0;i<feedforwardLength;i+=1)convertedFeedforward[i]/=convertedFeedback[0];for(let i=1;i<feedbackLength;i+=1)convertedFeedback[i]/=convertedFeedback[0]}const scriptProcessorNode=createNativeScriptProcessorNode(nativeContext,bufferSize,channelCount,channelCount);scriptProcessorNode.channelCount=channelCount,scriptProcessorNode.channelCountMode=channelCountMode,scriptProcessorNode.channelInterpretation=channelInterpretation;const bufferIndexes=[],xBuffers=[],yBuffers=[];for(let i=0;i<channelCount;i+=1){bufferIndexes.push(0);const xBuffer=new Float32Array(32),yBuffer=new Float32Array(32);xBuffer.fill(0),yBuffer.fill(0),xBuffers.push(xBuffer),yBuffers.push(yBuffer)}scriptProcessorNode.onaudioprocess=event=>{const inputBuffer=event.inputBuffer,outputBuffer=event.outputBuffer,numberOfChannels=inputBuffer.numberOfChannels;for(let i=0;i<numberOfChannels;i+=1){const input=inputBuffer.getChannelData(i),output=outputBuffer.getChannelData(i);bufferIndexes[i]=filterBuffer(convertedFeedback,feedbackLength,convertedFeedforward,feedforwardLength,minLength,xBuffers[i],yBuffers[i],bufferIndexes[i],32,input,output)}};const nyquist=nativeContext.sampleRate/2;return interceptConnections({get bufferSize(){return bufferSize},get channelCount(){return scriptProcessorNode.channelCount},set channelCount(value){scriptProcessorNode.channelCount=value},get channelCountMode(){return scriptProcessorNode.channelCountMode},set channelCountMode(value){scriptProcessorNode.channelCountMode=value},get channelInterpretation(){return scriptProcessorNode.channelInterpretation},set channelInterpretation(value){scriptProcessorNode.channelInterpretation=value},get context(){return scriptProcessorNode.context},get inputs(){return[scriptProcessorNode]},get numberOfInputs(){return scriptProcessorNode.numberOfInputs},get numberOfOutputs(){return scriptProcessorNode.numberOfOutputs},addEventListener:(...args)=>scriptProcessorNode.addEventListener(args[0],args[1],args[2]),dispatchEvent:(...args)=>scriptProcessorNode.dispatchEvent(args[0]),getFrequencyResponse(frequencyHz,magResponse,phaseResponse){if(frequencyHz.length!==magResponse.length||magResponse.length!==phaseResponse.length)throw createInvalidAccessError();const length=frequencyHz.length;for(let i=0;i<length;i+=1){const omega=-Math.PI*(frequencyHz[i]/nyquist),z=[Math.cos(omega),Math.sin(omega)],response=divide(evaluatePolynomial(convertedFeedforward,z),evaluatePolynomial(convertedFeedback,z));magResponse[i]=Math.sqrt(response[0]*response[0]+response[1]*response[1]),phaseResponse[i]=Math.atan2(response[1],response[0])}},removeEventListener:(...args)=>scriptProcessorNode.removeEventListener(args[0],args[1],args[2])},scriptProcessorNode)})(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=((cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,testOfflineAudioContextCurrentTimeSupport)=>nativeOfflineAudioContext=>cacheTestResult(testPromiseSupport,(()=>testPromiseSupport(nativeOfflineAudioContext)))?Promise.resolve(cacheTestResult(testOfflineAudioContextCurrentTimeSupport,testOfflineAudioContextCurrentTimeSupport)).then((isOfflineAudioContextCurrentTimeSupported=>{if(!isOfflineAudioContextCurrentTimeSupported){const scriptProcessorNode=createNativeScriptProcessorNode(nativeOfflineAudioContext,512,0,1);nativeOfflineAudioContext.oncomplete=()=>{scriptProcessorNode.onaudioprocess=null,scriptProcessorNode.disconnect()},scriptProcessorNode.onaudioprocess=()=>nativeOfflineAudioContext.currentTime,scriptProcessorNode.connect(nativeOfflineAudioContext.destination)}return nativeOfflineAudioContext.startRendering()})):new Promise((resolve=>{const gainNode=createNativeGainNode(nativeOfflineAudioContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});nativeOfflineAudioContext.oncomplete=event=>{gainNode.disconnect(),resolve(event.renderedBuffer)},gainNode.connect(nativeOfflineAudioContext.destination),nativeOfflineAudioContext.startRendering()})))(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,((createNativeGainNode,nativeOfflineAudioContextConstructor)=>()=>{if(null===nativeOfflineAudioContextConstructor)return Promise.resolve(!1);const nativeOfflineAudioContext=new nativeOfflineAudioContextConstructor(1,1,44100),gainNode=createNativeGainNode(nativeOfflineAudioContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((resolve=>{nativeOfflineAudioContext.oncomplete=()=>{gainNode.disconnect(),resolve(0!==nativeOfflineAudioContext.currentTime)},nativeOfflineAudioContext.startRendering()}))})(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=((createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext)=>(feedback,feedforward)=>{const renderedNativeAudioNodes=new WeakMap;let filteredBufferPromise=null;const createAudioNode=async(proxy,nativeOfflineAudioContext)=>{let nativeAudioBufferSourceNode=null,nativeIIRFilterNode=getNativeAudioNode(proxy);const nativeIIRFilterNodeIsOwnedByContext=isOwnedByContext(nativeIIRFilterNode,nativeOfflineAudioContext);if(void 0===nativeOfflineAudioContext.createIIRFilter?nativeAudioBufferSourceNode=createNativeAudioBufferSourceNode(nativeOfflineAudioContext,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):nativeIIRFilterNodeIsOwnedByContext||(nativeIIRFilterNode=nativeOfflineAudioContext.createIIRFilter(feedforward,feedback)),renderedNativeAudioNodes.set(nativeOfflineAudioContext,null===nativeAudioBufferSourceNode?nativeIIRFilterNode:nativeAudioBufferSourceNode),null!==nativeAudioBufferSourceNode){if(null===filteredBufferPromise){if(null===nativeOfflineAudioContextConstructor)throw new Error("Missing the native OfflineAudioContext constructor.");const partialOfflineAudioContext=new nativeOfflineAudioContextConstructor(proxy.context.destination.channelCount,proxy.context.length,nativeOfflineAudioContext.sampleRate);filteredBufferPromise=(async()=>{await renderInputsOfAudioNode(proxy,partialOfflineAudioContext,partialOfflineAudioContext.destination);return((renderedBuffer,nativeOfflineAudioContext,feedback,feedforward)=>{const convertedFeedback=feedback instanceof Float64Array?feedback:new Float64Array(feedback),convertedFeedforward=feedforward instanceof Float64Array?feedforward:new Float64Array(feedforward),feedbackLength=convertedFeedback.length,feedforwardLength=convertedFeedforward.length,minLength=Math.min(feedbackLength,feedforwardLength);if(1!==convertedFeedback[0]){for(let i=0;i<feedbackLength;i+=1)convertedFeedforward[i]/=convertedFeedback[0];for(let i=1;i<feedforwardLength;i+=1)convertedFeedback[i]/=convertedFeedback[0]}const xBuffer=new Float32Array(32),yBuffer=new Float32Array(32),filteredBuffer=nativeOfflineAudioContext.createBuffer(renderedBuffer.numberOfChannels,renderedBuffer.length,renderedBuffer.sampleRate),numberOfChannels=renderedBuffer.numberOfChannels;for(let i=0;i<numberOfChannels;i+=1){const input=renderedBuffer.getChannelData(i),output=filteredBuffer.getChannelData(i);xBuffer.fill(0),yBuffer.fill(0),filterBuffer(convertedFeedback,feedbackLength,convertedFeedforward,feedforwardLength,minLength,xBuffer,yBuffer,0,32,input,output)}return filteredBuffer})(await renderNativeOfflineAudioContext(partialOfflineAudioContext),nativeOfflineAudioContext,feedback,feedforward)})()}const filteredBuffer=await filteredBufferPromise;return nativeAudioBufferSourceNode.buffer=filteredBuffer,nativeAudioBufferSourceNode.start(0),nativeAudioBufferSourceNode}return await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeIIRFilterNode),nativeIIRFilterNode};return{render(proxy,nativeOfflineAudioContext){const renderedNativeAudioNode=renderedNativeAudioNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeAudioNode?Promise.resolve(renderedNativeAudioNode):createAudioNode(proxy,nativeOfflineAudioContext)}}})(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=(createNativeIIRFilterNodeFaker=>(nativeContext,baseLatency,options)=>{if(void 0===nativeContext.createIIRFilter)return createNativeIIRFilterNodeFaker(nativeContext,baseLatency,options);const nativeIIRFilterNode=nativeContext.createIIRFilter(options.feedforward,options.feedback);return assignNativeAudioNodeOptions(nativeIIRFilterNode,options),nativeIIRFilterNode})(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=((audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime)=>class IIRFilterNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),isOffline=isNativeOfflineAudioContext(nativeContext),mergedOptions={...iir_filter_node_constructor_DEFAULT_OPTIONS,...options},nativeIIRFilterNode=createNativeIIRFilterNode(nativeContext,isOffline?null:context.baseLatency,mergedOptions);super(context,!1,nativeIIRFilterNode,isOffline?createIIRFilterNodeRenderer(mergedOptions.feedback,mergedOptions.feedforward):null),(nativeIIRFilterNode=>{var getFrequencyResponse;nativeIIRFilterNode.getFrequencyResponse=(getFrequencyResponse=nativeIIRFilterNode.getFrequencyResponse,(frequencyHz,magResponse,phaseResponse)=>{if(frequencyHz.length!==magResponse.length||magResponse.length!==phaseResponse.length)throw createInvalidAccessError();return getFrequencyResponse.call(nativeIIRFilterNode,frequencyHz,magResponse,phaseResponse)})})(nativeIIRFilterNode),this._nativeIIRFilterNode=nativeIIRFilterNode,setAudioNodeTailTime(this,1)}getFrequencyResponse(frequencyHz,magResponse,phaseResponse){return this._nativeIIRFilterNode.getFrequencyResponse(frequencyHz,magResponse,phaseResponse)}})(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=((createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors)=>(context,nativeContext)=>{const nativeListener=nativeContext.listener,{forwardX,forwardY,forwardZ,positionX,positionY,positionZ,upX,upY,upZ}=void 0===nativeListener.forwardX?(()=>{const buffer=new Float32Array(1),channelMergerNode=createNativeChannelMergerNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),isOffline=isNativeOfflineAudioContext(nativeContext);let isScriptProcessorNodeCreated=!1,lastOrientation=[0,0,-1,0,1,0],lastPosition=[0,0,0];const createScriptProcessorNode=()=>{if(isScriptProcessorNodeCreated)return;isScriptProcessorNodeCreated=!0;const scriptProcessorNode=createNativeScriptProcessorNode(nativeContext,256,9,0);scriptProcessorNode.onaudioprocess=({inputBuffer})=>{const orientation=[getFirstSample(inputBuffer,buffer,0),getFirstSample(inputBuffer,buffer,1),getFirstSample(inputBuffer,buffer,2),getFirstSample(inputBuffer,buffer,3),getFirstSample(inputBuffer,buffer,4),getFirstSample(inputBuffer,buffer,5)];orientation.some(((value,index)=>value!==lastOrientation[index]))&&(nativeListener.setOrientation(...orientation),lastOrientation=orientation);const positon=[getFirstSample(inputBuffer,buffer,6),getFirstSample(inputBuffer,buffer,7),getFirstSample(inputBuffer,buffer,8)];positon.some(((value,index)=>value!==lastPosition[index]))&&(nativeListener.setPosition(...positon),lastPosition=positon)},channelMergerNode.connect(scriptProcessorNode)},createSetOrientation=index=>value=>{value!==lastOrientation[index]&&(lastOrientation[index]=value,nativeListener.setOrientation(...lastOrientation))},createSetPosition=index=>value=>{value!==lastPosition[index]&&(lastPosition[index]=value,nativeListener.setPosition(...lastPosition))},createFakeAudioParam=(input,initialValue,setValue)=>{const constantSourceNode=createNativeConstantSourceNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:initialValue});constantSourceNode.connect(channelMergerNode,0,input),constantSourceNode.start(),Object.defineProperty(constantSourceNode.offset,"defaultValue",{get:()=>initialValue});const audioParam=createAudioParam({context},isOffline,constantSourceNode.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);var cancelAndHoldAtTime,cancelScheduledValues,exponentialRampToValueAtTime,linearRampToValueAtTime,setTargetAtTime,setValueAtTime,setValueCurveAtTime;return overwriteAccessors(audioParam,"value",(get=>()=>get.call(audioParam)),(set=>value=>{try{set.call(audioParam,value)}catch(err){if(9!==err.code)throw err}createScriptProcessorNode(),isOffline&&setValue(value)})),audioParam.cancelAndHoldAtTime=(cancelAndHoldAtTime=audioParam.cancelAndHoldAtTime,isOffline?()=>{throw createNotSupportedError()}:(...args)=>{const value=cancelAndHoldAtTime.apply(audioParam,args);return createScriptProcessorNode(),value}),audioParam.cancelScheduledValues=(cancelScheduledValues=audioParam.cancelScheduledValues,isOffline?()=>{throw createNotSupportedError()}:(...args)=>{const value=cancelScheduledValues.apply(audioParam,args);return createScriptProcessorNode(),value}),audioParam.exponentialRampToValueAtTime=(exponentialRampToValueAtTime=audioParam.exponentialRampToValueAtTime,isOffline?()=>{throw createNotSupportedError()}:(...args)=>{const value=exponentialRampToValueAtTime.apply(audioParam,args);return createScriptProcessorNode(),value}),audioParam.linearRampToValueAtTime=(linearRampToValueAtTime=audioParam.linearRampToValueAtTime,isOffline?()=>{throw createNotSupportedError()}:(...args)=>{const value=linearRampToValueAtTime.apply(audioParam,args);return createScriptProcessorNode(),value}),audioParam.setTargetAtTime=(setTargetAtTime=audioParam.setTargetAtTime,isOffline?()=>{throw createNotSupportedError()}:(...args)=>{const value=setTargetAtTime.apply(audioParam,args);return createScriptProcessorNode(),value}),audioParam.setValueAtTime=(setValueAtTime=audioParam.setValueAtTime,isOffline?()=>{throw createNotSupportedError()}:(...args)=>{const value=setValueAtTime.apply(audioParam,args);return createScriptProcessorNode(),value}),audioParam.setValueCurveAtTime=(setValueCurveAtTime=audioParam.setValueCurveAtTime,isOffline?()=>{throw createNotSupportedError()}:(...args)=>{const value=setValueCurveAtTime.apply(audioParam,args);return createScriptProcessorNode(),value}),audioParam};return{forwardX:createFakeAudioParam(0,0,createSetOrientation(0)),forwardY:createFakeAudioParam(1,0,createSetOrientation(1)),forwardZ:createFakeAudioParam(2,-1,createSetOrientation(2)),positionX:createFakeAudioParam(6,0,createSetPosition(0)),positionY:createFakeAudioParam(7,0,createSetPosition(1)),positionZ:createFakeAudioParam(8,0,createSetPosition(2)),upX:createFakeAudioParam(3,0,createSetOrientation(3)),upY:createFakeAudioParam(4,1,createSetOrientation(4)),upZ:createFakeAudioParam(5,0,createSetOrientation(5))}})():nativeListener;return{get forwardX(){return forwardX},get forwardY(){return forwardY},get forwardZ(){return forwardZ},get positionX(){return positionX},get positionY(){return positionY},get positionZ(){return positionZ},get upX(){return upX},get upY(){return upY},get upZ(){return upZ}}})(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=((audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener)=>class MinimalBaseAudioContext extends eventTargetConstructor{constructor(_nativeContext,numberOfChannels){super(_nativeContext),this._nativeContext=_nativeContext,CONTEXT_STORE.set(this,_nativeContext),isNativeOfflineAudioContext(_nativeContext)&&unrenderedAudioWorkletNodeStore.set(_nativeContext,new Set),this._destination=new audioDestinationNodeConstructor(this,numberOfChannels),this._listener=createAudioListener(this,_nativeContext),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(value){const wrappedListener="function"==typeof value?wrapEventListener(this,value):null;this._nativeContext.onstatechange=wrappedListener;const nativeOnStateChange=this._nativeContext.onstatechange;this._onstatechange=null!==nativeOnStateChange&&nativeOnStateChange===wrappedListener?value:nativeOnStateChange}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=((addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls)=>(nativeContext,options)=>{const nativeOscillatorNode=nativeContext.createOscillator();return assignNativeAudioNodeOptions(nativeOscillatorNode,options),assignNativeAudioNodeAudioParamValue(nativeOscillatorNode,options,"detune"),assignNativeAudioNodeAudioParamValue(nativeOscillatorNode,options,"frequency"),void 0!==options.periodicWave?nativeOscillatorNode.setPeriodicWave(options.periodicWave):assignNativeAudioNodeOption(nativeOscillatorNode,options,"type"),cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,(()=>testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeOscillatorNode),cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,(()=>testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext)))||wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeOscillatorNode,nativeContext),cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,(()=>testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeOscillatorNode),addSilentConnection(nativeContext,nativeOscillatorNode),nativeOscillatorNode})(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=((connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode)=>()=>{const renderedNativeOscillatorNodes=new WeakMap;let periodicWave=null,start=null,stop=null;return{set periodicWave(value){periodicWave=value},set start(value){start=value},set stop(value){stop=value},render(proxy,nativeOfflineAudioContext){const renderedNativeOscillatorNode=renderedNativeOscillatorNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeOscillatorNode?Promise.resolve(renderedNativeOscillatorNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeOscillatorNode=getNativeAudioNode(proxy);const nativeOscillatorNodeIsOwnedByContext=isOwnedByContext(nativeOscillatorNode,nativeOfflineAudioContext);if(!nativeOscillatorNodeIsOwnedByContext){const options={channelCount:nativeOscillatorNode.channelCount,channelCountMode:nativeOscillatorNode.channelCountMode,channelInterpretation:nativeOscillatorNode.channelInterpretation,detune:nativeOscillatorNode.detune.value,frequency:nativeOscillatorNode.frequency.value,periodicWave:null===periodicWave?void 0:periodicWave,type:nativeOscillatorNode.type};nativeOscillatorNode=createNativeOscillatorNode(nativeOfflineAudioContext,options),null!==start&&nativeOscillatorNode.start(start),null!==stop&&nativeOscillatorNode.stop(stop)}return renderedNativeOscillatorNodes.set(nativeOfflineAudioContext,nativeOscillatorNode),nativeOscillatorNodeIsOwnedByContext?(await connectAudioParam(nativeOfflineAudioContext,proxy.detune,nativeOscillatorNode.detune),await connectAudioParam(nativeOfflineAudioContext,proxy.frequency,nativeOscillatorNode.frequency)):(await renderAutomation(nativeOfflineAudioContext,proxy.detune,nativeOscillatorNode.detune),await renderAutomation(nativeOfflineAudioContext,proxy.frequency,nativeOscillatorNode.frequency)),await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeOscillatorNode),nativeOscillatorNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=((audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener)=>class OscillatorNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...oscillator_node_constructor_DEFAULT_OPTIONS,...options},nativeOscillatorNode=createNativeOscillatorNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext),oscillatorNodeRenderer=isOffline?createOscillatorNodeRenderer():null,nyquist=context.sampleRate/2;super(context,!1,nativeOscillatorNode,oscillatorNodeRenderer),this._detune=createAudioParam(this,isOffline,nativeOscillatorNode.detune,153600,-153600),this._frequency=createAudioParam(this,isOffline,nativeOscillatorNode.frequency,nyquist,-nyquist),this._nativeOscillatorNode=nativeOscillatorNode,this._onended=null,this._oscillatorNodeRenderer=oscillatorNodeRenderer,null!==this._oscillatorNodeRenderer&&void 0!==mergedOptions.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=mergedOptions.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(value){const wrappedListener="function"==typeof value?wrapEventListener(this,value):null;this._nativeOscillatorNode.onended=wrappedListener;const nativeOnEnded=this._nativeOscillatorNode.onended;this._onended=null!==nativeOnEnded&&nativeOnEnded===wrappedListener?value:nativeOnEnded}get type(){return this._nativeOscillatorNode.type}set type(value){this._nativeOscillatorNode.type=value,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(periodicWave){this._nativeOscillatorNode.setPeriodicWave(periodicWave),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=periodicWave)}start(when=0){if(this._nativeOscillatorNode.start(when),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=when),"closed"!==this.context.state){setInternalStateToActive(this);const resetInternalStateToPassive=()=>{this._nativeOscillatorNode.removeEventListener("ended",resetInternalStateToPassive),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",resetInternalStateToPassive)}}stop(when=0){this._nativeOscillatorNode.stop(when),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=when)}})(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=(createNativeAudioBufferSourceNode=>(nativeContext,nativeAudioNode)=>{const nativeAudioBufferSourceNode=createNativeAudioBufferSourceNode(nativeContext,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),nativeAudioBuffer=nativeContext.createBuffer(1,2,44100);return nativeAudioBufferSourceNode.buffer=nativeAudioBuffer,nativeAudioBufferSourceNode.loop=!0,nativeAudioBufferSourceNode.connect(nativeAudioNode),nativeAudioBufferSourceNode.start(),()=>{nativeAudioBufferSourceNode.stop(),nativeAudioBufferSourceNode.disconnect(nativeAudioNode)}})(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=((createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections)=>(nativeContext,{curve,oversample,...audioNodeOptions})=>{const negativeWaveShaperNode=nativeContext.createWaveShaper(),positiveWaveShaperNode=nativeContext.createWaveShaper();assignNativeAudioNodeOptions(negativeWaveShaperNode,audioNodeOptions),assignNativeAudioNodeOptions(positiveWaveShaperNode,audioNodeOptions);const inputGainNode=createNativeGainNode(nativeContext,{...audioNodeOptions,gain:1}),invertGainNode=createNativeGainNode(nativeContext,{...audioNodeOptions,gain:-1}),outputGainNode=createNativeGainNode(nativeContext,{...audioNodeOptions,gain:1}),revertGainNode=createNativeGainNode(nativeContext,{...audioNodeOptions,gain:-1});let disconnectNativeAudioBufferSourceNode=null,isConnected=!1,unmodifiedCurve=null;const nativeWaveShaperNodeFaker={get bufferSize(){},get channelCount(){return negativeWaveShaperNode.channelCount},set channelCount(value){inputGainNode.channelCount=value,invertGainNode.channelCount=value,negativeWaveShaperNode.channelCount=value,outputGainNode.channelCount=value,positiveWaveShaperNode.channelCount=value,revertGainNode.channelCount=value},get channelCountMode(){return negativeWaveShaperNode.channelCountMode},set channelCountMode(value){inputGainNode.channelCountMode=value,invertGainNode.channelCountMode=value,negativeWaveShaperNode.channelCountMode=value,outputGainNode.channelCountMode=value,positiveWaveShaperNode.channelCountMode=value,revertGainNode.channelCountMode=value},get channelInterpretation(){return negativeWaveShaperNode.channelInterpretation},set channelInterpretation(value){inputGainNode.channelInterpretation=value,invertGainNode.channelInterpretation=value,negativeWaveShaperNode.channelInterpretation=value,outputGainNode.channelInterpretation=value,positiveWaveShaperNode.channelInterpretation=value,revertGainNode.channelInterpretation=value},get context(){return negativeWaveShaperNode.context},get curve(){return unmodifiedCurve},set curve(value){if(null!==value&&value.length<2)throw createInvalidStateError();if(null===value)negativeWaveShaperNode.curve=value,positiveWaveShaperNode.curve=value;else{const curveLength=value.length,negativeCurve=new Float32Array(curveLength+2-curveLength%2),positiveCurve=new Float32Array(curveLength+2-curveLength%2);negativeCurve[0]=value[0],positiveCurve[0]=-value[curveLength-1];const length=Math.ceil((curveLength+1)/2),centerIndex=(curveLength+1)/2-1;for(let i=1;i<length;i+=1){const theoreticIndex=i/length*centerIndex,lowerIndex=Math.floor(theoreticIndex),upperIndex=Math.ceil(theoreticIndex);negativeCurve[i]=lowerIndex===upperIndex?value[lowerIndex]:(1-(theoreticIndex-lowerIndex))*value[lowerIndex]+(1-(upperIndex-theoreticIndex))*value[upperIndex],positiveCurve[i]=lowerIndex===upperIndex?-value[curveLength-1-lowerIndex]:-(1-(theoreticIndex-lowerIndex))*value[curveLength-1-lowerIndex]-(1-(upperIndex-theoreticIndex))*value[curveLength-1-upperIndex]}negativeCurve[length]=curveLength%2==1?value[length-1]:(value[length-2]+value[length-1])/2,negativeWaveShaperNode.curve=negativeCurve,positiveWaveShaperNode.curve=positiveCurve}unmodifiedCurve=value,isConnected&&(isDCCurve(unmodifiedCurve)&&null===disconnectNativeAudioBufferSourceNode?disconnectNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNode(nativeContext,inputGainNode):null!==disconnectNativeAudioBufferSourceNode&&(disconnectNativeAudioBufferSourceNode(),disconnectNativeAudioBufferSourceNode=null))},get inputs(){return[inputGainNode]},get numberOfInputs(){return negativeWaveShaperNode.numberOfInputs},get numberOfOutputs(){return negativeWaveShaperNode.numberOfOutputs},get oversample(){return negativeWaveShaperNode.oversample},set oversample(value){negativeWaveShaperNode.oversample=value,positiveWaveShaperNode.oversample=value},addEventListener:(...args)=>inputGainNode.addEventListener(args[0],args[1],args[2]),dispatchEvent:(...args)=>inputGainNode.dispatchEvent(args[0]),removeEventListener:(...args)=>inputGainNode.removeEventListener(args[0],args[1],args[2])};null!==curve&&(nativeWaveShaperNodeFaker.curve=curve instanceof Float32Array?curve:new Float32Array(curve)),oversample!==nativeWaveShaperNodeFaker.oversample&&(nativeWaveShaperNodeFaker.oversample=oversample);return monitorConnections(interceptConnections(nativeWaveShaperNodeFaker,outputGainNode),(()=>{inputGainNode.connect(negativeWaveShaperNode).connect(outputGainNode),inputGainNode.connect(invertGainNode).connect(positiveWaveShaperNode).connect(revertGainNode).connect(outputGainNode),isConnected=!0,isDCCurve(unmodifiedCurve)&&(disconnectNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNode(nativeContext,inputGainNode))}),(()=>{inputGainNode.disconnect(negativeWaveShaperNode),negativeWaveShaperNode.disconnect(outputGainNode),inputGainNode.disconnect(invertGainNode),invertGainNode.disconnect(positiveWaveShaperNode),positiveWaveShaperNode.disconnect(revertGainNode),revertGainNode.disconnect(outputGainNode),isConnected=!1,null!==disconnectNativeAudioBufferSourceNode&&(disconnectNativeAudioBufferSourceNode(),disconnectNativeAudioBufferSourceNode=null)}))})(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=((createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors)=>(nativeContext,options)=>{const nativeWaveShaperNode=nativeContext.createWaveShaper();if(null!==nativeAudioContextConstructor&&"webkitAudioContext"===nativeAudioContextConstructor.name&&void 0===nativeContext.createGain().gain.automationRate)return createNativeWaveShaperNodeFaker(nativeContext,options);assignNativeAudioNodeOptions(nativeWaveShaperNode,options);const curve=null===options.curve||options.curve instanceof Float32Array?options.curve:new Float32Array(options.curve);if(null!==curve&&curve.length<2)throw createInvalidStateError();assignNativeAudioNodeOption(nativeWaveShaperNode,{curve},"curve"),assignNativeAudioNodeOption(nativeWaveShaperNode,options,"oversample");let disconnectNativeAudioBufferSourceNode=null,isConnected=!1;overwriteAccessors(nativeWaveShaperNode,"curve",(get=>()=>get.call(nativeWaveShaperNode)),(set=>value=>(set.call(nativeWaveShaperNode,value),isConnected&&(isDCCurve(value)&&null===disconnectNativeAudioBufferSourceNode?disconnectNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNode(nativeContext,nativeWaveShaperNode):isDCCurve(value)||null===disconnectNativeAudioBufferSourceNode||(disconnectNativeAudioBufferSourceNode(),disconnectNativeAudioBufferSourceNode=null)),value)));return monitorConnections(nativeWaveShaperNode,(()=>{isConnected=!0,isDCCurve(nativeWaveShaperNode.curve)&&(disconnectNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNode(nativeContext,nativeWaveShaperNode))}),(()=>{isConnected=!1,null!==disconnectNativeAudioBufferSourceNode&&(disconnectNativeAudioBufferSourceNode(),disconnectNativeAudioBufferSourceNode=null)}))})(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=((connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections)=>(nativeContext,{coneInnerAngle,coneOuterAngle,coneOuterGain,distanceModel,maxDistance,orientationX,orientationY,orientationZ,panningModel,positionX,positionY,positionZ,refDistance,rolloffFactor,...audioNodeOptions})=>{const pannerNode=nativeContext.createPanner();if(audioNodeOptions.channelCount>2)throw createNotSupportedError();if("max"===audioNodeOptions.channelCountMode)throw createNotSupportedError();assignNativeAudioNodeOptions(pannerNode,audioNodeOptions);const SINGLE_CHANNEL_OPTIONS={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},channelMergerNode=createNativeChannelMergerNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,channelInterpretation:"speakers",numberOfInputs:6}),inputGainNode=createNativeGainNode(nativeContext,{...audioNodeOptions,gain:1}),orientationXGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:1}),orientationYGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),orientationZGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),positionXGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),positionYGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),positionZGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),scriptProcessorNode=createNativeScriptProcessorNode(nativeContext,256,6,1),waveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,curve:new Float32Array([1,1]),oversample:"none"});let lastOrientation=[orientationX,orientationY,orientationZ],lastPosition=[positionX,positionY,positionZ];const buffer=new Float32Array(1);scriptProcessorNode.onaudioprocess=({inputBuffer})=>{const orientation=[getFirstSample(inputBuffer,buffer,0),getFirstSample(inputBuffer,buffer,1),getFirstSample(inputBuffer,buffer,2)];orientation.some(((value,index)=>value!==lastOrientation[index]))&&(pannerNode.setOrientation(...orientation),lastOrientation=orientation);const positon=[getFirstSample(inputBuffer,buffer,3),getFirstSample(inputBuffer,buffer,4),getFirstSample(inputBuffer,buffer,5)];positon.some(((value,index)=>value!==lastPosition[index]))&&(pannerNode.setPosition(...positon),lastPosition=positon)},Object.defineProperty(orientationYGainNode.gain,"defaultValue",{get:()=>0}),Object.defineProperty(orientationZGainNode.gain,"defaultValue",{get:()=>0}),Object.defineProperty(positionXGainNode.gain,"defaultValue",{get:()=>0}),Object.defineProperty(positionYGainNode.gain,"defaultValue",{get:()=>0}),Object.defineProperty(positionZGainNode.gain,"defaultValue",{get:()=>0});const nativePannerNodeFaker={get bufferSize(){},get channelCount(){return pannerNode.channelCount},set channelCount(value){if(value>2)throw createNotSupportedError();inputGainNode.channelCount=value,pannerNode.channelCount=value},get channelCountMode(){return pannerNode.channelCountMode},set channelCountMode(value){if("max"===value)throw createNotSupportedError();inputGainNode.channelCountMode=value,pannerNode.channelCountMode=value},get channelInterpretation(){return pannerNode.channelInterpretation},set channelInterpretation(value){inputGainNode.channelInterpretation=value,pannerNode.channelInterpretation=value},get coneInnerAngle(){return pannerNode.coneInnerAngle},set coneInnerAngle(value){pannerNode.coneInnerAngle=value},get coneOuterAngle(){return pannerNode.coneOuterAngle},set coneOuterAngle(value){pannerNode.coneOuterAngle=value},get coneOuterGain(){return pannerNode.coneOuterGain},set coneOuterGain(value){if(value<0||value>1)throw createInvalidStateError();pannerNode.coneOuterGain=value},get context(){return pannerNode.context},get distanceModel(){return pannerNode.distanceModel},set distanceModel(value){pannerNode.distanceModel=value},get inputs(){return[inputGainNode]},get maxDistance(){return pannerNode.maxDistance},set maxDistance(value){if(value<0)throw new RangeError;pannerNode.maxDistance=value},get numberOfInputs(){return pannerNode.numberOfInputs},get numberOfOutputs(){return pannerNode.numberOfOutputs},get orientationX(){return orientationXGainNode.gain},get orientationY(){return orientationYGainNode.gain},get orientationZ(){return orientationZGainNode.gain},get panningModel(){return pannerNode.panningModel},set panningModel(value){pannerNode.panningModel=value},get positionX(){return positionXGainNode.gain},get positionY(){return positionYGainNode.gain},get positionZ(){return positionZGainNode.gain},get refDistance(){return pannerNode.refDistance},set refDistance(value){if(value<0)throw new RangeError;pannerNode.refDistance=value},get rolloffFactor(){return pannerNode.rolloffFactor},set rolloffFactor(value){if(value<0)throw new RangeError;pannerNode.rolloffFactor=value},addEventListener:(...args)=>inputGainNode.addEventListener(args[0],args[1],args[2]),dispatchEvent:(...args)=>inputGainNode.dispatchEvent(args[0]),removeEventListener:(...args)=>inputGainNode.removeEventListener(args[0],args[1],args[2])};coneInnerAngle!==nativePannerNodeFaker.coneInnerAngle&&(nativePannerNodeFaker.coneInnerAngle=coneInnerAngle),coneOuterAngle!==nativePannerNodeFaker.coneOuterAngle&&(nativePannerNodeFaker.coneOuterAngle=coneOuterAngle),coneOuterGain!==nativePannerNodeFaker.coneOuterGain&&(nativePannerNodeFaker.coneOuterGain=coneOuterGain),distanceModel!==nativePannerNodeFaker.distanceModel&&(nativePannerNodeFaker.distanceModel=distanceModel),maxDistance!==nativePannerNodeFaker.maxDistance&&(nativePannerNodeFaker.maxDistance=maxDistance),orientationX!==nativePannerNodeFaker.orientationX.value&&(nativePannerNodeFaker.orientationX.value=orientationX),orientationY!==nativePannerNodeFaker.orientationY.value&&(nativePannerNodeFaker.orientationY.value=orientationY),orientationZ!==nativePannerNodeFaker.orientationZ.value&&(nativePannerNodeFaker.orientationZ.value=orientationZ),panningModel!==nativePannerNodeFaker.panningModel&&(nativePannerNodeFaker.panningModel=panningModel),positionX!==nativePannerNodeFaker.positionX.value&&(nativePannerNodeFaker.positionX.value=positionX),positionY!==nativePannerNodeFaker.positionY.value&&(nativePannerNodeFaker.positionY.value=positionY),positionZ!==nativePannerNodeFaker.positionZ.value&&(nativePannerNodeFaker.positionZ.value=positionZ),refDistance!==nativePannerNodeFaker.refDistance&&(nativePannerNodeFaker.refDistance=refDistance),rolloffFactor!==nativePannerNodeFaker.rolloffFactor&&(nativePannerNodeFaker.rolloffFactor=rolloffFactor),1===lastOrientation[0]&&0===lastOrientation[1]&&0===lastOrientation[2]||pannerNode.setOrientation(...lastOrientation),0===lastPosition[0]&&0===lastPosition[1]&&0===lastPosition[2]||pannerNode.setPosition(...lastPosition);return monitorConnections(interceptConnections(nativePannerNodeFaker,pannerNode),(()=>{inputGainNode.connect(pannerNode),connectNativeAudioNodeToNativeAudioNode(inputGainNode,waveShaperNode,0,0),waveShaperNode.connect(orientationXGainNode).connect(channelMergerNode,0,0),waveShaperNode.connect(orientationYGainNode).connect(channelMergerNode,0,1),waveShaperNode.connect(orientationZGainNode).connect(channelMergerNode,0,2),waveShaperNode.connect(positionXGainNode).connect(channelMergerNode,0,3),waveShaperNode.connect(positionYGainNode).connect(channelMergerNode,0,4),waveShaperNode.connect(positionZGainNode).connect(channelMergerNode,0,5),channelMergerNode.connect(scriptProcessorNode).connect(nativeContext.destination)}),(()=>{inputGainNode.disconnect(pannerNode),disconnectNativeAudioNodeFromNativeAudioNode(inputGainNode,waveShaperNode,0,0),waveShaperNode.disconnect(orientationXGainNode),orientationXGainNode.disconnect(channelMergerNode),waveShaperNode.disconnect(orientationYGainNode),orientationYGainNode.disconnect(channelMergerNode),waveShaperNode.disconnect(orientationZGainNode),orientationZGainNode.disconnect(channelMergerNode),waveShaperNode.disconnect(positionXGainNode),positionXGainNode.disconnect(channelMergerNode),waveShaperNode.disconnect(positionYGainNode),positionYGainNode.disconnect(channelMergerNode),waveShaperNode.disconnect(positionZGainNode),positionZGainNode.disconnect(channelMergerNode),channelMergerNode.disconnect(scriptProcessorNode),scriptProcessorNode.disconnect(nativeContext.destination)}))})(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=(createNativePannerNodeFaker=>(nativeContext,options)=>{const nativePannerNode=nativeContext.createPanner();return void 0===nativePannerNode.orientationX?createNativePannerNodeFaker(nativeContext,options):(assignNativeAudioNodeOptions(nativePannerNode,options),assignNativeAudioNodeAudioParamValue(nativePannerNode,options,"orientationX"),assignNativeAudioNodeAudioParamValue(nativePannerNode,options,"orientationY"),assignNativeAudioNodeAudioParamValue(nativePannerNode,options,"orientationZ"),assignNativeAudioNodeAudioParamValue(nativePannerNode,options,"positionX"),assignNativeAudioNodeAudioParamValue(nativePannerNode,options,"positionY"),assignNativeAudioNodeAudioParamValue(nativePannerNode,options,"positionZ"),assignNativeAudioNodeOption(nativePannerNode,options,"coneInnerAngle"),assignNativeAudioNodeOption(nativePannerNode,options,"coneOuterAngle"),assignNativeAudioNodeOption(nativePannerNode,options,"coneOuterGain"),assignNativeAudioNodeOption(nativePannerNode,options,"distanceModel"),assignNativeAudioNodeOption(nativePannerNode,options,"maxDistance"),assignNativeAudioNodeOption(nativePannerNode,options,"panningModel"),assignNativeAudioNodeOption(nativePannerNode,options,"refDistance"),assignNativeAudioNodeOption(nativePannerNode,options,"rolloffFactor"),nativePannerNode)})(createNativePannerNodeFaker),createPannerNodeRenderer=((connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext)=>()=>{const renderedNativeAudioNodes=new WeakMap;let renderedBufferPromise=null;return{render(proxy,nativeOfflineAudioContext){const renderedNativeGainNodeOrNativePannerNode=renderedNativeAudioNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeGainNodeOrNativePannerNode?Promise.resolve(renderedNativeGainNodeOrNativePannerNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeGainNode=null,nativePannerNode=getNativeAudioNode(proxy);const commonAudioNodeOptions={channelCount:nativePannerNode.channelCount,channelCountMode:nativePannerNode.channelCountMode,channelInterpretation:nativePannerNode.channelInterpretation},commonNativePannerNodeOptions={...commonAudioNodeOptions,coneInnerAngle:nativePannerNode.coneInnerAngle,coneOuterAngle:nativePannerNode.coneOuterAngle,coneOuterGain:nativePannerNode.coneOuterGain,distanceModel:nativePannerNode.distanceModel,maxDistance:nativePannerNode.maxDistance,panningModel:nativePannerNode.panningModel,refDistance:nativePannerNode.refDistance,rolloffFactor:nativePannerNode.rolloffFactor},nativePannerNodeIsOwnedByContext=isOwnedByContext(nativePannerNode,nativeOfflineAudioContext);if("bufferSize"in nativePannerNode)nativeGainNode=createNativeGainNode(nativeOfflineAudioContext,{...commonAudioNodeOptions,gain:1});else if(!nativePannerNodeIsOwnedByContext){const options={...commonNativePannerNodeOptions,orientationX:nativePannerNode.orientationX.value,orientationY:nativePannerNode.orientationY.value,orientationZ:nativePannerNode.orientationZ.value,positionX:nativePannerNode.positionX.value,positionY:nativePannerNode.positionY.value,positionZ:nativePannerNode.positionZ.value};nativePannerNode=createNativePannerNode(nativeOfflineAudioContext,options)}if(renderedNativeAudioNodes.set(nativeOfflineAudioContext,null===nativeGainNode?nativePannerNode:nativeGainNode),null!==nativeGainNode){if(null===renderedBufferPromise){if(null===nativeOfflineAudioContextConstructor)throw new Error("Missing the native OfflineAudioContext constructor.");const partialOfflineAudioContext=new nativeOfflineAudioContextConstructor(6,proxy.context.length,nativeOfflineAudioContext.sampleRate),nativeChannelMergerNode=createNativeChannelMergerNode(partialOfflineAudioContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});nativeChannelMergerNode.connect(partialOfflineAudioContext.destination),renderedBufferPromise=(async()=>{const nativeConstantSourceNodes=await Promise.all([proxy.orientationX,proxy.orientationY,proxy.orientationZ,proxy.positionX,proxy.positionY,proxy.positionZ].map((async(audioParam,index)=>{const nativeConstantSourceNode=createNativeConstantSourceNode(partialOfflineAudioContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===index?1:0});return await renderAutomation(partialOfflineAudioContext,audioParam,nativeConstantSourceNode.offset),nativeConstantSourceNode})));for(let i=0;i<6;i+=1)nativeConstantSourceNodes[i].connect(nativeChannelMergerNode,0,i),nativeConstantSourceNodes[i].start(0);return renderNativeOfflineAudioContext(partialOfflineAudioContext)})()}const renderedBuffer=await renderedBufferPromise,inputGainNode=createNativeGainNode(nativeOfflineAudioContext,{...commonAudioNodeOptions,gain:1});await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,inputGainNode);const channelDatas=[];for(let i=0;i<renderedBuffer.numberOfChannels;i+=1)channelDatas.push(renderedBuffer.getChannelData(i));let lastOrientation=[channelDatas[0][0],channelDatas[1][0],channelDatas[2][0]],lastPosition=[channelDatas[3][0],channelDatas[4][0],channelDatas[5][0]],gateGainNode=createNativeGainNode(nativeOfflineAudioContext,{...commonAudioNodeOptions,gain:1}),partialPannerNode=createNativePannerNode(nativeOfflineAudioContext,{...commonNativePannerNodeOptions,orientationX:lastOrientation[0],orientationY:lastOrientation[1],orientationZ:lastOrientation[2],positionX:lastPosition[0],positionY:lastPosition[1],positionZ:lastPosition[2]});inputGainNode.connect(gateGainNode).connect(partialPannerNode.inputs[0]),partialPannerNode.connect(nativeGainNode);for(let i=128;i<renderedBuffer.length;i+=128){const orientation=[channelDatas[0][i],channelDatas[1][i],channelDatas[2][i]],positon=[channelDatas[3][i],channelDatas[4][i],channelDatas[5][i]];if(orientation.some(((value,index)=>value!==lastOrientation[index]))||positon.some(((value,index)=>value!==lastPosition[index]))){lastOrientation=orientation,lastPosition=positon;const currentTime=i/nativeOfflineAudioContext.sampleRate;gateGainNode.gain.setValueAtTime(0,currentTime),gateGainNode=createNativeGainNode(nativeOfflineAudioContext,{...commonAudioNodeOptions,gain:0}),partialPannerNode=createNativePannerNode(nativeOfflineAudioContext,{...commonNativePannerNodeOptions,orientationX:lastOrientation[0],orientationY:lastOrientation[1],orientationZ:lastOrientation[2],positionX:lastPosition[0],positionY:lastPosition[1],positionZ:lastPosition[2]}),gateGainNode.gain.setValueAtTime(1,currentTime),inputGainNode.connect(gateGainNode).connect(partialPannerNode.inputs[0]),partialPannerNode.connect(nativeGainNode)}}return nativeGainNode}return nativePannerNodeIsOwnedByContext?(await connectAudioParam(nativeOfflineAudioContext,proxy.orientationX,nativePannerNode.orientationX),await connectAudioParam(nativeOfflineAudioContext,proxy.orientationY,nativePannerNode.orientationY),await connectAudioParam(nativeOfflineAudioContext,proxy.orientationZ,nativePannerNode.orientationZ),await connectAudioParam(nativeOfflineAudioContext,proxy.positionX,nativePannerNode.positionX),await connectAudioParam(nativeOfflineAudioContext,proxy.positionY,nativePannerNode.positionY),await connectAudioParam(nativeOfflineAudioContext,proxy.positionZ,nativePannerNode.positionZ)):(await renderAutomation(nativeOfflineAudioContext,proxy.orientationX,nativePannerNode.orientationX),await renderAutomation(nativeOfflineAudioContext,proxy.orientationY,nativePannerNode.orientationY),await renderAutomation(nativeOfflineAudioContext,proxy.orientationZ,nativePannerNode.orientationZ),await renderAutomation(nativeOfflineAudioContext,proxy.positionX,nativePannerNode.positionX),await renderAutomation(nativeOfflineAudioContext,proxy.positionY,nativePannerNode.positionY),await renderAutomation(nativeOfflineAudioContext,proxy.positionZ,nativePannerNode.positionZ)),isNativeAudioNodeFaker(nativePannerNode)?await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativePannerNode.inputs[0]):await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativePannerNode),nativePannerNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=((audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime)=>class PannerNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...panner_node_constructor_DEFAULT_OPTIONS,...options},nativePannerNode=createNativePannerNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext);super(context,!1,nativePannerNode,isOffline?createPannerNodeRenderer():null),this._nativePannerNode=nativePannerNode,this._orientationX=createAudioParam(this,isOffline,nativePannerNode.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=createAudioParam(this,isOffline,nativePannerNode.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=createAudioParam(this,isOffline,nativePannerNode.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=createAudioParam(this,isOffline,nativePannerNode.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=createAudioParam(this,isOffline,nativePannerNode.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=createAudioParam(this,isOffline,nativePannerNode.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),setAudioNodeTailTime(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(value){this._nativePannerNode.coneInnerAngle=value}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(value){this._nativePannerNode.coneOuterAngle=value}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(value){this._nativePannerNode.coneOuterGain=value}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(value){this._nativePannerNode.distanceModel=value}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(value){this._nativePannerNode.maxDistance=value}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(value){this._nativePannerNode.panningModel=value}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(value){this._nativePannerNode.refDistance=value}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(value){this._nativePannerNode.rolloffFactor=value}})(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=(createIndexSizeError=>(nativeContext,{disableNormalization,imag,real})=>{const convertedImag=imag instanceof Float32Array?imag:new Float32Array(imag),convertedReal=real instanceof Float32Array?real:new Float32Array(real),nativePeriodicWave=nativeContext.createPeriodicWave(convertedReal,convertedImag,{disableNormalization});if(Array.from(imag).length<2)throw createIndexSizeError();return nativePeriodicWave})(createIndexSizeError),periodicWaveConstructor=((createNativePeriodicWave,getNativeContext,periodicWaveStore,sanitizePeriodicWaveOptions)=>class PeriodicWave{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions=sanitizePeriodicWaveOptions({...periodic_wave_constructor_DEFAULT_OPTIONS,...options}),periodicWave=createNativePeriodicWave(nativeContext,mergedOptions);return periodicWaveStore.add(periodicWave),periodicWave}static[Symbol.hasInstance](instance){return null!==instance&&"object"==typeof instance&&Object.getPrototypeOf(instance)===PeriodicWave.prototype||periodicWaveStore.has(instance)}})(createNativePeriodicWave,getNativeContext,new WeakSet,(options=>{const{imag,real}=options;return void 0===imag?void 0===real?{...options,imag:[0,0],real:[0,0]}:{...options,imag:Array.from(real,(()=>0)),real}:void 0===real?{...options,imag,real:Array.from(imag,(()=>0))}:{...options,imag,real}})),nativeStereoPannerNodeFakerFactory=((createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections)=>{const DC_CURVE=new Float32Array([1,1]),HALF_PI=Math.PI/2,SINGLE_CHANNEL_OPTIONS={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS={...SINGLE_CHANNEL_OPTIONS,oversample:"none"},buildInternalGraph=(nativeContext,channelCount,inputGainNode,panGainNode,channelMergerNode)=>{if(1===channelCount)return((nativeContext,inputGainNode,panGainNode,channelMergerNode)=>{const leftWaveShaperCurve=new Float32Array(16385),rightWaveShaperCurve=new Float32Array(16385);for(let i=0;i<16385;i+=1){const x=i/16384*HALF_PI;leftWaveShaperCurve[i]=Math.cos(x),rightWaveShaperCurve[i]=Math.sin(x)}const leftGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),leftWaveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,curve:leftWaveShaperCurve}),panWaveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,curve:DC_CURVE}),rightGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),rightWaveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,curve:rightWaveShaperCurve});return{connectGraph(){inputGainNode.connect(leftGainNode),inputGainNode.connect(void 0===panWaveShaperNode.inputs?panWaveShaperNode:panWaveShaperNode.inputs[0]),inputGainNode.connect(rightGainNode),panWaveShaperNode.connect(panGainNode),panGainNode.connect(void 0===leftWaveShaperNode.inputs?leftWaveShaperNode:leftWaveShaperNode.inputs[0]),panGainNode.connect(void 0===rightWaveShaperNode.inputs?rightWaveShaperNode:rightWaveShaperNode.inputs[0]),leftWaveShaperNode.connect(leftGainNode.gain),rightWaveShaperNode.connect(rightGainNode.gain),leftGainNode.connect(channelMergerNode,0,0),rightGainNode.connect(channelMergerNode,0,1)},disconnectGraph(){inputGainNode.disconnect(leftGainNode),inputGainNode.disconnect(void 0===panWaveShaperNode.inputs?panWaveShaperNode:panWaveShaperNode.inputs[0]),inputGainNode.disconnect(rightGainNode),panWaveShaperNode.disconnect(panGainNode),panGainNode.disconnect(void 0===leftWaveShaperNode.inputs?leftWaveShaperNode:leftWaveShaperNode.inputs[0]),panGainNode.disconnect(void 0===rightWaveShaperNode.inputs?rightWaveShaperNode:rightWaveShaperNode.inputs[0]),leftWaveShaperNode.disconnect(leftGainNode.gain),rightWaveShaperNode.disconnect(rightGainNode.gain),leftGainNode.disconnect(channelMergerNode,0,0),rightGainNode.disconnect(channelMergerNode,0,1)}}})(nativeContext,inputGainNode,panGainNode,channelMergerNode);if(2===channelCount)return((nativeContext,inputGainNode,panGainNode,channelMergerNode)=>{const leftInputForLeftOutputWaveShaperCurve=new Float32Array(16385),leftInputForRightOutputWaveShaperCurve=new Float32Array(16385),rightInputForLeftOutputWaveShaperCurve=new Float32Array(16385),rightInputForRightOutputWaveShaperCurve=new Float32Array(16385),centerIndex=Math.floor(8192.5);for(let i=0;i<16385;i+=1)if(i>centerIndex){const x=(i-centerIndex)/(16384-centerIndex)*HALF_PI;leftInputForLeftOutputWaveShaperCurve[i]=Math.cos(x),leftInputForRightOutputWaveShaperCurve[i]=Math.sin(x),rightInputForLeftOutputWaveShaperCurve[i]=0,rightInputForRightOutputWaveShaperCurve[i]=1}else{const x=i/(16384-centerIndex)*HALF_PI;leftInputForLeftOutputWaveShaperCurve[i]=1,leftInputForRightOutputWaveShaperCurve[i]=0,rightInputForLeftOutputWaveShaperCurve[i]=Math.cos(x),rightInputForRightOutputWaveShaperCurve[i]=Math.sin(x)}const channelSplitterNode=createNativeChannelSplitterNode(nativeContext,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),leftInputForLeftOutputGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),leftInputForLeftOutputWaveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,curve:leftInputForLeftOutputWaveShaperCurve}),leftInputForRightOutputGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),leftInputForRightOutputWaveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,curve:leftInputForRightOutputWaveShaperCurve}),panWaveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,curve:DC_CURVE}),rightInputForLeftOutputGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),rightInputForLeftOutputWaveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,curve:rightInputForLeftOutputWaveShaperCurve}),rightInputForRightOutputGainNode=createNativeGainNode(nativeContext,{...SINGLE_CHANNEL_OPTIONS,gain:0}),rightInputForRightOutputWaveShaperNode=createNativeWaveShaperNode(nativeContext,{...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,curve:rightInputForRightOutputWaveShaperCurve});return{connectGraph(){inputGainNode.connect(channelSplitterNode),inputGainNode.connect(void 0===panWaveShaperNode.inputs?panWaveShaperNode:panWaveShaperNode.inputs[0]),channelSplitterNode.connect(leftInputForLeftOutputGainNode,0),channelSplitterNode.connect(leftInputForRightOutputGainNode,0),channelSplitterNode.connect(rightInputForLeftOutputGainNode,1),channelSplitterNode.connect(rightInputForRightOutputGainNode,1),panWaveShaperNode.connect(panGainNode),panGainNode.connect(void 0===leftInputForLeftOutputWaveShaperNode.inputs?leftInputForLeftOutputWaveShaperNode:leftInputForLeftOutputWaveShaperNode.inputs[0]),panGainNode.connect(void 0===leftInputForRightOutputWaveShaperNode.inputs?leftInputForRightOutputWaveShaperNode:leftInputForRightOutputWaveShaperNode.inputs[0]),panGainNode.connect(void 0===rightInputForLeftOutputWaveShaperNode.inputs?rightInputForLeftOutputWaveShaperNode:rightInputForLeftOutputWaveShaperNode.inputs[0]),panGainNode.connect(void 0===rightInputForRightOutputWaveShaperNode.inputs?rightInputForRightOutputWaveShaperNode:rightInputForRightOutputWaveShaperNode.inputs[0]),leftInputForLeftOutputWaveShaperNode.connect(leftInputForLeftOutputGainNode.gain),leftInputForRightOutputWaveShaperNode.connect(leftInputForRightOutputGainNode.gain),rightInputForLeftOutputWaveShaperNode.connect(rightInputForLeftOutputGainNode.gain),rightInputForRightOutputWaveShaperNode.connect(rightInputForRightOutputGainNode.gain),leftInputForLeftOutputGainNode.connect(channelMergerNode,0,0),rightInputForLeftOutputGainNode.connect(channelMergerNode,0,0),leftInputForRightOutputGainNode.connect(channelMergerNode,0,1),rightInputForRightOutputGainNode.connect(channelMergerNode,0,1)},disconnectGraph(){inputGainNode.disconnect(channelSplitterNode),inputGainNode.disconnect(void 0===panWaveShaperNode.inputs?panWaveShaperNode:panWaveShaperNode.inputs[0]),channelSplitterNode.disconnect(leftInputForLeftOutputGainNode,0),channelSplitterNode.disconnect(leftInputForRightOutputGainNode,0),channelSplitterNode.disconnect(rightInputForLeftOutputGainNode,1),channelSplitterNode.disconnect(rightInputForRightOutputGainNode,1),panWaveShaperNode.disconnect(panGainNode),panGainNode.disconnect(void 0===leftInputForLeftOutputWaveShaperNode.inputs?leftInputForLeftOutputWaveShaperNode:leftInputForLeftOutputWaveShaperNode.inputs[0]),panGainNode.disconnect(void 0===leftInputForRightOutputWaveShaperNode.inputs?leftInputForRightOutputWaveShaperNode:leftInputForRightOutputWaveShaperNode.inputs[0]),panGainNode.disconnect(void 0===rightInputForLeftOutputWaveShaperNode.inputs?rightInputForLeftOutputWaveShaperNode:rightInputForLeftOutputWaveShaperNode.inputs[0]),panGainNode.disconnect(void 0===rightInputForRightOutputWaveShaperNode.inputs?rightInputForRightOutputWaveShaperNode:rightInputForRightOutputWaveShaperNode.inputs[0]),leftInputForLeftOutputWaveShaperNode.disconnect(leftInputForLeftOutputGainNode.gain),leftInputForRightOutputWaveShaperNode.disconnect(leftInputForRightOutputGainNode.gain),rightInputForLeftOutputWaveShaperNode.disconnect(rightInputForLeftOutputGainNode.gain),rightInputForRightOutputWaveShaperNode.disconnect(rightInputForRightOutputGainNode.gain),leftInputForLeftOutputGainNode.disconnect(channelMergerNode,0,0),rightInputForLeftOutputGainNode.disconnect(channelMergerNode,0,0),leftInputForRightOutputGainNode.disconnect(channelMergerNode,0,1),rightInputForRightOutputGainNode.disconnect(channelMergerNode,0,1)}}})(nativeContext,inputGainNode,panGainNode,channelMergerNode);throw createNotSupportedError()};return(nativeContext,{channelCount,channelCountMode,pan,...audioNodeOptions})=>{if("max"===channelCountMode)throw createNotSupportedError();const channelMergerNode=createNativeChannelMergerNode(nativeContext,{...audioNodeOptions,channelCount:1,channelCountMode,numberOfInputs:2}),inputGainNode=createNativeGainNode(nativeContext,{...audioNodeOptions,channelCount,channelCountMode,gain:1}),panGainNode=createNativeGainNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:pan});let{connectGraph,disconnectGraph}=buildInternalGraph(nativeContext,channelCount,inputGainNode,panGainNode,channelMergerNode);Object.defineProperty(panGainNode.gain,"defaultValue",{get:()=>0}),Object.defineProperty(panGainNode.gain,"maxValue",{get:()=>1}),Object.defineProperty(panGainNode.gain,"minValue",{get:()=>-1});const nativeStereoPannerNodeFakerFactory={get bufferSize(){},get channelCount(){return inputGainNode.channelCount},set channelCount(value){inputGainNode.channelCount!==value&&(isConnected&&disconnectGraph(),({connectGraph,disconnectGraph}=buildInternalGraph(nativeContext,value,inputGainNode,panGainNode,channelMergerNode)),isConnected&&connectGraph()),inputGainNode.channelCount=value},get channelCountMode(){return inputGainNode.channelCountMode},set channelCountMode(value){if("clamped-max"===value||"max"===value)throw createNotSupportedError();inputGainNode.channelCountMode=value},get channelInterpretation(){return inputGainNode.channelInterpretation},set channelInterpretation(value){inputGainNode.channelInterpretation=value},get context(){return inputGainNode.context},get inputs(){return[inputGainNode]},get numberOfInputs(){return inputGainNode.numberOfInputs},get numberOfOutputs(){return inputGainNode.numberOfOutputs},get pan(){return panGainNode.gain},addEventListener:(...args)=>inputGainNode.addEventListener(args[0],args[1],args[2]),dispatchEvent:(...args)=>inputGainNode.dispatchEvent(args[0]),removeEventListener:(...args)=>inputGainNode.removeEventListener(args[0],args[1],args[2])};let isConnected=!1;return monitorConnections(interceptConnections(nativeStereoPannerNodeFakerFactory,channelMergerNode),(()=>{connectGraph(),isConnected=!0}),(()=>{disconnectGraph(),isConnected=!1}))}})(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=((createNativeStereoPannerNodeFaker,createNotSupportedError)=>(nativeContext,options)=>{const channelCountMode=options.channelCountMode;if("clamped-max"===channelCountMode)throw createNotSupportedError();if(void 0===nativeContext.createStereoPanner)return createNativeStereoPannerNodeFaker(nativeContext,options);const nativeStereoPannerNode=nativeContext.createStereoPanner();return assignNativeAudioNodeOptions(nativeStereoPannerNode,options),assignNativeAudioNodeAudioParamValue(nativeStereoPannerNode,options,"pan"),Object.defineProperty(nativeStereoPannerNode,"channelCountMode",{get:()=>channelCountMode,set:value=>{if(value!==channelCountMode)throw createNotSupportedError()}}),nativeStereoPannerNode})(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=((connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode)=>()=>{const renderedNativeStereoPannerNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeStereoPannerNode=renderedNativeStereoPannerNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeStereoPannerNode?Promise.resolve(renderedNativeStereoPannerNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeStereoPannerNode=getNativeAudioNode(proxy);const nativeStereoPannerNodeIsOwnedByContext=isOwnedByContext(nativeStereoPannerNode,nativeOfflineAudioContext);if(!nativeStereoPannerNodeIsOwnedByContext){const options={channelCount:nativeStereoPannerNode.channelCount,channelCountMode:nativeStereoPannerNode.channelCountMode,channelInterpretation:nativeStereoPannerNode.channelInterpretation,pan:nativeStereoPannerNode.pan.value};nativeStereoPannerNode=createNativeStereoPannerNode(nativeOfflineAudioContext,options)}return renderedNativeStereoPannerNodes.set(nativeOfflineAudioContext,nativeStereoPannerNode),nativeStereoPannerNodeIsOwnedByContext?await connectAudioParam(nativeOfflineAudioContext,proxy.pan,nativeStereoPannerNode.pan):await renderAutomation(nativeOfflineAudioContext,proxy.pan,nativeStereoPannerNode.pan),isNativeAudioNodeFaker(nativeStereoPannerNode)?await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeStereoPannerNode.inputs[0]):await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeStereoPannerNode),nativeStereoPannerNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=((audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext)=>class StereoPannerNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...stereo_panner_node_constructor_DEFAULT_OPTIONS,...options},nativeStereoPannerNode=createNativeStereoPannerNode(nativeContext,mergedOptions),isOffline=isNativeOfflineAudioContext(nativeContext);super(context,!1,nativeStereoPannerNode,isOffline?createStereoPannerNodeRenderer():null),this._pan=createAudioParam(this,isOffline,nativeStereoPannerNode.pan)}get pan(){return this._pan}})(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=((createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode)=>()=>{const renderedNativeWaveShaperNodes=new WeakMap;return{render(proxy,nativeOfflineAudioContext){const renderedNativeWaveShaperNode=renderedNativeWaveShaperNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeWaveShaperNode?Promise.resolve(renderedNativeWaveShaperNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeWaveShaperNode=getNativeAudioNode(proxy);if(!isOwnedByContext(nativeWaveShaperNode,nativeOfflineAudioContext)){const options={channelCount:nativeWaveShaperNode.channelCount,channelCountMode:nativeWaveShaperNode.channelCountMode,channelInterpretation:nativeWaveShaperNode.channelInterpretation,curve:nativeWaveShaperNode.curve,oversample:nativeWaveShaperNode.oversample};nativeWaveShaperNode=createNativeWaveShaperNode(nativeOfflineAudioContext,options)}return renderedNativeWaveShaperNodes.set(nativeOfflineAudioContext,nativeWaveShaperNode),isNativeAudioNodeFaker(nativeWaveShaperNode)?await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeWaveShaperNode.inputs[0]):await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeWaveShaperNode),nativeWaveShaperNode})(proxy,nativeOfflineAudioContext)}}})(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=((audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime)=>class WaveShaperNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),mergedOptions={...wave_shaper_node_constructor_DEFAULT_OPTIONS,...options},nativeWaveShaperNode=createNativeWaveShaperNode(nativeContext,mergedOptions);super(context,!0,nativeWaveShaperNode,isNativeOfflineAudioContext(nativeContext)?createWaveShaperNodeRenderer():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=nativeWaveShaperNode,setAudioNodeTailTime(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(value){if(null===value)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(value.length<2)throw createInvalidStateError();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=value}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(value){this._nativeWaveShaperNode.oversample=value}})(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=(window=>null!==window&&window.isSecureContext)(module_window),exposeCurrentFrameAndCurrentTime=(window=>(currentTime,sampleRate,fn)=>{Object.defineProperties(window,{currentFrame:{configurable:!0,get:()=>Math.round(currentTime*sampleRate)},currentTime:{configurable:!0,get:()=>currentTime}});try{return fn()}finally{null!==window&&(delete window.currentFrame,delete window.currentTime)}})(module_window),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=((backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor)=>nativeContext=>{let backupOfflineAudioContext=backupOfflineAudioContextStore.get(nativeContext);if(void 0!==backupOfflineAudioContext)return backupOfflineAudioContext;if(null===nativeOfflineAudioContextConstructor)throw new Error("Missing the native OfflineAudioContext constructor.");return backupOfflineAudioContext=new nativeOfflineAudioContextConstructor(1,1,44100),backupOfflineAudioContextStore.set(nativeContext,backupOfflineAudioContext),backupOfflineAudioContext})(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?((cacheTestResult,createNotSupportedError,evaluateSource,exposeCurrentFrameAndCurrentTime,fetchSource,getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,ongoingRequests,resolvedRequests,testAudioWorkletProcessorPostMessageSupport,window)=>{let index=0;return(context,moduleURL,options={credentials:"omit"})=>{const resolvedRequestsOfContext=resolvedRequests.get(context);if(void 0!==resolvedRequestsOfContext&&resolvedRequestsOfContext.has(moduleURL))return Promise.resolve();const ongoingRequestsOfContext=ongoingRequests.get(context);if(void 0!==ongoingRequestsOfContext){const promiseOfOngoingRequest=ongoingRequestsOfContext.get(moduleURL);if(void 0!==promiseOfOngoingRequest)return promiseOfOngoingRequest}const nativeContext=getNativeContext(context),promise=void 0===nativeContext.audioWorklet?fetchSource(moduleURL).then((([source,absoluteUrl])=>{const[importStatements,sourceWithoutImportStatements]=splitImportStatements(source,absoluteUrl);return evaluateSource(`${importStatements};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${sourceWithoutImportStatements}\n})})(window,'_AWGS')`)})).then((()=>{const evaluateAudioWorkletGlobalScope=window._AWGS.pop();if(void 0===evaluateAudioWorkletGlobalScope)throw new SyntaxError;exposeCurrentFrameAndCurrentTime(nativeContext.currentTime,nativeContext.sampleRate,(()=>evaluateAudioWorkletGlobalScope(class AudioWorkletProcessor{},void 0,((name,processorCtor)=>{if(""===name.trim())throw createNotSupportedError();const nodeNameToProcessorConstructorMap=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);if(void 0!==nodeNameToProcessorConstructorMap){if(nodeNameToProcessorConstructorMap.has(name))throw createNotSupportedError();verifyProcessorCtor(processorCtor),verifyParameterDescriptors(processorCtor.parameterDescriptors),nodeNameToProcessorConstructorMap.set(name,processorCtor)}else verifyProcessorCtor(processorCtor),verifyParameterDescriptors(processorCtor.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(nativeContext,new Map([[name,processorCtor]]))}),nativeContext.sampleRate,void 0,void 0)))})):Promise.all([fetchSource(moduleURL),Promise.resolve(cacheTestResult(testAudioWorkletProcessorPostMessageSupport,testAudioWorkletProcessorPostMessageSupport))]).then((([[source,absoluteUrl],isSupportingPostMessage])=>{const currentIndex=index+1;index=currentIndex;const[importStatements,sourceWithoutImportStatements]=splitImportStatements(source,absoluteUrl),blob=new Blob([`${importStatements};((AudioWorkletProcessor,registerProcessor)=>{${sourceWithoutImportStatements}\n})(${isSupportingPostMessage?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${isSupportingPostMessage?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${isSupportingPostMessage?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${currentIndex}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),url=URL.createObjectURL(blob);return nativeContext.audioWorklet.addModule(url,options).then((()=>{if(isNativeOfflineAudioContext(nativeContext))return nativeContext;const backupOfflineAudioContext=getOrCreateBackupOfflineAudioContext(nativeContext);return backupOfflineAudioContext.audioWorklet.addModule(url,options).then((()=>backupOfflineAudioContext))})).then((nativeContextOrBackupOfflineAudioContext=>{if(null===nativeAudioWorkletNodeConstructor)throw new SyntaxError;try{new nativeAudioWorkletNodeConstructor(nativeContextOrBackupOfflineAudioContext,`__sac${currentIndex}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(url)))}));return void 0===ongoingRequestsOfContext?ongoingRequests.set(context,new Map([[moduleURL,promise]])):ongoingRequestsOfContext.set(moduleURL,promise),promise.then((()=>{const updatedResolvedRequestsOfContext=resolvedRequests.get(context);void 0===updatedResolvedRequestsOfContext?resolvedRequests.set(context,new Set([moduleURL])):updatedResolvedRequestsOfContext.add(moduleURL)})).finally((()=>{const updatedOngoingRequestsOfContext=ongoingRequests.get(context);void 0!==updatedOngoingRequestsOfContext&&updatedOngoingRequestsOfContext.delete(moduleURL)})),promise}})(cacheTestResult,createNotSupportedError,(window=>source=>new Promise(((resolve,reject)=>{if(null===window)return void reject(new SyntaxError);const head=window.document.head;if(null===head)reject(new SyntaxError);else{const script=window.document.createElement("script"),blob=new Blob([source],{type:"application/javascript"}),url=URL.createObjectURL(blob),originalOnErrorHandler=window.onerror,removeErrorEventListenerAndRevokeUrl=()=>{window.onerror=originalOnErrorHandler,URL.revokeObjectURL(url)};window.onerror=(message,src,lineno,colno,error)=>src===url||src===window.location.href&&1===lineno&&1===colno?(removeErrorEventListenerAndRevokeUrl(),reject(error),!1):null!==originalOnErrorHandler?originalOnErrorHandler(message,src,lineno,colno,error):void 0,script.onerror=()=>{removeErrorEventListenerAndRevokeUrl(),reject(new SyntaxError)},script.onload=()=>{removeErrorEventListenerAndRevokeUrl(),resolve()},script.src=url,script.type="module",head.appendChild(script)}})))(module_window),exposeCurrentFrameAndCurrentTime,(createAbortError=>async url=>{try{const response=await fetch(url);if(response.ok)return[await response.text(),response.url]}catch{}throw createAbortError()})((()=>new DOMException("","AbortError"))),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,((nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor)=>async()=>{if(null===nativeAudioWorkletNodeConstructor)return!0;if(null===nativeOfflineAudioContextConstructor)return!1;const blob=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),offlineAudioContext=new nativeOfflineAudioContextConstructor(1,128,44100),url=URL.createObjectURL(blob);let isEmittingMessageEvents=!1,isEmittingProcessorErrorEvents=!1;try{await offlineAudioContext.audioWorklet.addModule(url);const audioWorkletNode=new nativeAudioWorkletNodeConstructor(offlineAudioContext,"a",{numberOfOutputs:0}),oscillator=offlineAudioContext.createOscillator();audioWorkletNode.port.onmessage=()=>isEmittingMessageEvents=!0,audioWorkletNode.onprocessorerror=()=>isEmittingProcessorErrorEvents=!0,oscillator.connect(audioWorkletNode),oscillator.start(0),await offlineAudioContext.startRendering()}catch{}finally{URL.revokeObjectURL(url)}return isEmittingMessageEvents&&!isEmittingProcessorErrorEvents})(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),module_window):void 0,isNativeContext=((isNativeAudioContext,isNativeOfflineAudioContext)=>anything=>isNativeAudioContext(anything)||isNativeOfflineAudioContext(anything))(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=((audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,detachedArrayBuffers,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds)=>(anyContext,audioData)=>{const nativeContext=isNativeContext(anyContext)?anyContext:getNativeContext(anyContext);if(detachedArrayBuffers.has(audioData)){const err=createDataCloneError();return Promise.reject(err)}try{detachedArrayBuffers.add(audioData)}catch{}return cacheTestResult(testPromiseSupport,(()=>testPromiseSupport(nativeContext)))?nativeContext.decodeAudioData(audioData).then((audioBuffer=>(detachArrayBuffer(audioData).catch((()=>{})),cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,(()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)))||wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer),audioBufferStore.add(audioBuffer),audioBuffer))):new Promise(((resolve,reject)=>{const complete=async()=>{try{await detachArrayBuffer(audioData)}catch{}},fail=err=>{reject(err),complete()};try{nativeContext.decodeAudioData(audioData,(audioBuffer=>{"function"!=typeof audioBuffer.copyFromChannel&&(wrapAudioBufferCopyChannelMethods(audioBuffer),wrapAudioBufferGetChannelDataMethod(audioBuffer)),audioBufferStore.add(audioBuffer),complete().then((()=>resolve(audioBuffer)))}),(err=>{fail(null===err?createEncodingError():err)}))}catch(err){fail(err)}}))})(audioBufferStore,cacheTestResult,(()=>new DOMException("","DataCloneError")),(()=>new DOMException("","EncodingError")),new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=((addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor)=>class BaseAudioContext extends minimalBaseAudioContextConstructor{constructor(_nativeContext,numberOfChannels){super(_nativeContext,numberOfChannels),this._nativeContext=_nativeContext,this._audioWorklet=void 0===addAudioWorkletModule?void 0:{addModule:(moduleURL,options)=>addAudioWorkletModule(this,moduleURL,options)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new analyserNodeConstructor(this)}createBiquadFilter(){return new biquadFilterNodeConstructor(this)}createBuffer(numberOfChannels,length,sampleRate){return new audioBufferConstructor({length,numberOfChannels,sampleRate})}createBufferSource(){return new audioBufferSourceNodeConstructor(this)}createChannelMerger(numberOfInputs=6){return new channelMergerNodeConstructor(this,{numberOfInputs})}createChannelSplitter(numberOfOutputs=6){return new channelSplitterNodeConstructor(this,{numberOfOutputs})}createConstantSource(){return new constantSourceNodeConstructor(this)}createConvolver(){return new convolverNodeConstructor(this)}createDelay(maxDelayTime=1){return new delayNodeConstructor(this,{maxDelayTime})}createDynamicsCompressor(){return new dynamicsCompressorNodeConstructor(this)}createGain(){return new gainNodeConstructor(this)}createIIRFilter(feedforward,feedback){return new iIRFilterNodeConstructor(this,{feedback,feedforward})}createOscillator(){return new oscillatorNodeConstructor(this)}createPanner(){return new pannerNodeConstructor(this)}createPeriodicWave(real,imag,constraints={disableNormalization:!1}){return new periodicWaveConstructor(this,{...constraints,imag,real})}createStereoPanner(){return new stereoPannerNodeConstructor(this)}createWaveShaper(){return new waveShaperNodeConstructor(this)}decodeAudioData(audioData,successCallback,errorCallback){return decodeAudioData(this._nativeContext,audioData).then((audioBuffer=>("function"==typeof successCallback&&successCallback(audioBuffer),audioBuffer)),(err=>{throw"function"==typeof errorCallback&&errorCallback(err),err}))}})(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=((audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext)=>class MediaElementAudioSourceNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),nativeMediaElementAudioSourceNode=createNativeMediaElementAudioSourceNode(nativeContext,options);if(isNativeOfflineAudioContext(nativeContext))throw TypeError();super(context,!0,nativeMediaElementAudioSourceNode,null),this._nativeMediaElementAudioSourceNode=nativeMediaElementAudioSourceNode}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(audioNodeConstructor,((nativeAudioContext,options)=>nativeAudioContext.createMediaElementSource(options.mediaElement)),getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=((audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext)=>class MediaStreamAudioDestinationNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context);if(isNativeOfflineAudioContext(nativeContext))throw new TypeError;const mergedOptions={...media_stream_audio_destination_node_constructor_DEFAULT_OPTIONS,...options},nativeMediaStreamAudioDestinationNode=createNativeMediaStreamAudioDestinationNode(nativeContext,mergedOptions);super(context,!1,nativeMediaStreamAudioDestinationNode,null),this._nativeMediaStreamAudioDestinationNode=nativeMediaStreamAudioDestinationNode}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(audioNodeConstructor,((nativeAudioContext,options)=>{const nativeMediaStreamAudioDestinationNode=nativeAudioContext.createMediaStreamDestination();return assignNativeAudioNodeOptions(nativeMediaStreamAudioDestinationNode,options),1===nativeMediaStreamAudioDestinationNode.numberOfOutputs&&Object.defineProperty(nativeMediaStreamAudioDestinationNode,"numberOfOutputs",{get:()=>0}),nativeMediaStreamAudioDestinationNode}),getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=((audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext)=>class MediaStreamAudioSourceNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context),nativeMediaStreamAudioSourceNode=createNativeMediaStreamAudioSourceNode(nativeContext,options);if(isNativeOfflineAudioContext(nativeContext))throw new TypeError;super(context,!0,nativeMediaStreamAudioSourceNode,null),this._nativeMediaStreamAudioSourceNode=nativeMediaStreamAudioSourceNode}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(audioNodeConstructor,((nativeAudioContext,{mediaStream})=>{const audioStreamTracks=mediaStream.getAudioTracks();audioStreamTracks.sort(((a,b)=>a.id<b.id?-1:a.id>b.id?1:0));const filteredAudioStreamTracks=audioStreamTracks.slice(0,1),nativeMediaStreamAudioSourceNode=nativeAudioContext.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));return Object.defineProperty(nativeMediaStreamAudioSourceNode,"mediaStream",{value:mediaStream}),nativeMediaStreamAudioSourceNode}),getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=((createInvalidStateError,isNativeOfflineAudioContext)=>(nativeAudioContext,{mediaStreamTrack})=>{if("function"==typeof nativeAudioContext.createMediaStreamTrackSource)return nativeAudioContext.createMediaStreamTrackSource(mediaStreamTrack);const mediaStream=new MediaStream([mediaStreamTrack]),nativeMediaStreamAudioSourceNode=nativeAudioContext.createMediaStreamSource(mediaStream);if("audio"!==mediaStreamTrack.kind)throw createInvalidStateError();if(isNativeOfflineAudioContext(nativeAudioContext))throw new TypeError;return nativeMediaStreamAudioSourceNode})(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=((audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext)=>class MediaStreamTrackAudioSourceNode extends audioNodeConstructor{constructor(context,options){const nativeContext=getNativeContext(context);super(context,!0,createNativeMediaStreamTrackAudioSourceNode(nativeContext,options),null)}})(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=((baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor)=>class AudioContext extends baseAudioContextConstructor{constructor(options={}){if(null===nativeAudioContextConstructor)throw new Error("Missing the native AudioContext constructor.");let nativeAudioContext;try{nativeAudioContext=new nativeAudioContextConstructor(options)}catch(err){if(12===err.code&&"sampleRate is not in range"===err.message)throw createNotSupportedError();throw err}if(null===nativeAudioContext)throw createUnknownError();if(!isValidLatencyHint(options.latencyHint))throw new TypeError(`The provided value '${options.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==options.sampleRate&&nativeAudioContext.sampleRate!==options.sampleRate)throw createNotSupportedError();super(nativeAudioContext,2);const{latencyHint}=options,{sampleRate}=nativeAudioContext;if(this._baseLatency="number"==typeof nativeAudioContext.baseLatency?nativeAudioContext.baseLatency:"balanced"===latencyHint?512/sampleRate:"interactive"===latencyHint||void 0===latencyHint?256/sampleRate:"playback"===latencyHint?1024/sampleRate:128*Math.max(2,Math.min(128,Math.round(latencyHint*sampleRate/128)))/sampleRate,this._nativeAudioContext=nativeAudioContext,"webkitAudioContext"===nativeAudioContextConstructor.name?(this._nativeGainNode=nativeAudioContext.createGain(),this._nativeOscillatorNode=nativeAudioContext.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(nativeAudioContext.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===nativeAudioContext.state){this._state="suspended";const revokeState=()=>{"suspended"===this._state&&(this._state=null),nativeAudioContext.removeEventListener("statechange",revokeState)};nativeAudioContext.addEventListener("statechange",revokeState)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw createInvalidStateError()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)})))}createMediaElementSource(mediaElement){return new mediaElementAudioSourceNodeConstructor(this,{mediaElement})}createMediaStreamDestination(){return new mediaStreamAudioDestinationNodeConstructor(this)}createMediaStreamSource(mediaStream){return new mediaStreamAudioSourceNodeConstructor(this,{mediaStream})}createMediaStreamTrackSource(mediaStreamTrack){return new mediaStreamTrackAudioSourceNodeConstructor(this,{mediaStreamTrack})}resume(){return"suspended"===this._state?new Promise(((resolve,reject)=>{const resolvePromise=()=>{this._nativeAudioContext.removeEventListener("statechange",resolvePromise),"running"===this._nativeAudioContext.state?resolve():this.resume().then(resolve,reject)};this._nativeAudioContext.addEventListener("statechange",resolvePromise)})):this._nativeAudioContext.resume().catch((err=>{if(void 0===err||15===err.code)throw createInvalidStateError();throw err}))}suspend(){return this._nativeAudioContext.suspend().catch((err=>{if(void 0===err)throw createInvalidStateError();throw err}))}})(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=(unrenderedAudioWorkletNodeStore=>nativeContext=>{const unrenderedAudioWorkletNodes=unrenderedAudioWorkletNodeStore.get(nativeContext);if(void 0===unrenderedAudioWorkletNodes)throw new Error("The context has no set of AudioWorkletNodes.");return unrenderedAudioWorkletNodes})(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=(getUnrenderedAudioWorkletNodes=>(nativeContext,audioWorkletNode)=>{getUnrenderedAudioWorkletNodes(nativeContext).add(audioWorkletNode)})(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=(createIndexSizeError=>(outputAudioNodes,destination,output=0,input=0)=>{const outputAudioNode=outputAudioNodes[output];if(void 0===outputAudioNode)throw createIndexSizeError();return isNativeAudioNode(destination)?outputAudioNode.connect(destination,0,input):outputAudioNode.connect(destination,0)})(createIndexSizeError),deleteUnrenderedAudioWorkletNode=(getUnrenderedAudioWorkletNodes=>(nativeContext,audioWorkletNode)=>{getUnrenderedAudioWorkletNodes(nativeContext).delete(audioWorkletNode)})(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=(createIndexSizeError=>(outputAudioNodes,destinationOrOutput=void 0,output=void 0,input=0)=>void 0===destinationOrOutput?outputAudioNodes.forEach((outputAudioNode=>outputAudioNode.disconnect())):"number"==typeof destinationOrOutput?getOutputAudioNodeAtIndex(createIndexSizeError,outputAudioNodes,destinationOrOutput).disconnect():isNativeAudioNode(destinationOrOutput)?void 0===output?outputAudioNodes.forEach((outputAudioNode=>outputAudioNode.disconnect(destinationOrOutput))):void 0===input?getOutputAudioNodeAtIndex(createIndexSizeError,outputAudioNodes,output).disconnect(destinationOrOutput,0):getOutputAudioNodeAtIndex(createIndexSizeError,outputAudioNodes,output).disconnect(destinationOrOutput,0,input):void 0===output?outputAudioNodes.forEach((outputAudioNode=>outputAudioNode.disconnect(destinationOrOutput))):getOutputAudioNodeAtIndex(createIndexSizeError,outputAudioNodes,output).disconnect(destinationOrOutput,0))(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=((activeAudioWorkletNodeInputsStore,getValueForKey)=>nativeAudioWorkletNode=>getValueForKey(activeAudioWorkletNodeInputsStore,nativeAudioWorkletNode))(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=((connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections)=>(nativeContext,baseLatency,processorConstructor,options)=>{if(0===options.numberOfInputs&&0===options.numberOfOutputs)throw createNotSupportedError();const outputChannelCount=Array.isArray(options.outputChannelCount)?options.outputChannelCount:Array.from(options.outputChannelCount);if(outputChannelCount.some((channelCount=>channelCount<1)))throw createNotSupportedError();if(outputChannelCount.length!==options.numberOfOutputs)throw createIndexSizeError();if("explicit"!==options.channelCountMode)throw createNotSupportedError();const numberOfInputChannels=options.channelCount*options.numberOfInputs,numberOfOutputChannels=outputChannelCount.reduce(((sum,value)=>sum+value),0),numberOfParameters=void 0===processorConstructor.parameterDescriptors?0:processorConstructor.parameterDescriptors.length;if(numberOfInputChannels+numberOfParameters>6||numberOfOutputChannels>6)throw createNotSupportedError();const messageChannel=new MessageChannel,gainNodes=[],inputChannelSplitterNodes=[];for(let i=0;i<options.numberOfInputs;i+=1)gainNodes.push(createNativeGainNode(nativeContext,{channelCount:options.channelCount,channelCountMode:options.channelCountMode,channelInterpretation:options.channelInterpretation,gain:1})),inputChannelSplitterNodes.push(createNativeChannelSplitterNode(nativeContext,{channelCount:options.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:options.channelCount}));const constantSourceNodes=[];if(void 0!==processorConstructor.parameterDescriptors)for(const{defaultValue,maxValue,minValue,name}of processorConstructor.parameterDescriptors){const constantSourceNode=createNativeConstantSourceNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==options.parameterData[name]?options.parameterData[name]:void 0===defaultValue?0:defaultValue});Object.defineProperties(constantSourceNode.offset,{defaultValue:{get:()=>void 0===defaultValue?0:defaultValue},maxValue:{get:()=>void 0===maxValue?MOST_POSITIVE_SINGLE_FLOAT:maxValue},minValue:{get:()=>void 0===minValue?MOST_NEGATIVE_SINGLE_FLOAT:minValue}}),constantSourceNodes.push(constantSourceNode)}const inputChannelMergerNode=createNativeChannelMergerNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,numberOfInputChannels+numberOfParameters)}),bufferSize=computeBufferSize(baseLatency,nativeContext.sampleRate),scriptProcessorNode=createNativeScriptProcessorNode(nativeContext,bufferSize,numberOfInputChannels+numberOfParameters,Math.max(1,numberOfOutputChannels)),outputChannelSplitterNode=createNativeChannelSplitterNode(nativeContext,{channelCount:Math.max(1,numberOfOutputChannels),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,numberOfOutputChannels)}),outputChannelMergerNodes=[];for(let i=0;i<options.numberOfOutputs;i+=1)outputChannelMergerNodes.push(createNativeChannelMergerNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:outputChannelCount[i]}));for(let i=0;i<options.numberOfInputs;i+=1){gainNodes[i].connect(inputChannelSplitterNodes[i]);for(let j=0;j<options.channelCount;j+=1)inputChannelSplitterNodes[i].connect(inputChannelMergerNode,j,i*options.channelCount+j)}const parameterMap=new ReadOnlyMap(void 0===processorConstructor.parameterDescriptors?[]:processorConstructor.parameterDescriptors.map((({name},index)=>{const constantSourceNode=constantSourceNodes[index];return constantSourceNode.connect(inputChannelMergerNode,0,numberOfInputChannels+index),constantSourceNode.start(0),[name,constantSourceNode.offset]})));inputChannelMergerNode.connect(scriptProcessorNode);let channelInterpretation=options.channelInterpretation,onprocessorerror=null;const outputAudioNodes=0===options.numberOfOutputs?[scriptProcessorNode]:outputChannelMergerNodes,nativeAudioWorkletNodeFaker={get bufferSize(){return bufferSize},get channelCount(){return options.channelCount},set channelCount(_){throw createInvalidStateError()},get channelCountMode(){return options.channelCountMode},set channelCountMode(_){throw createInvalidStateError()},get channelInterpretation(){return channelInterpretation},set channelInterpretation(value){for(const gainNode of gainNodes)gainNode.channelInterpretation=value;channelInterpretation=value},get context(){return scriptProcessorNode.context},get inputs(){return gainNodes},get numberOfInputs(){return options.numberOfInputs},get numberOfOutputs(){return options.numberOfOutputs},get onprocessorerror(){return onprocessorerror},set onprocessorerror(value){"function"==typeof onprocessorerror&&nativeAudioWorkletNodeFaker.removeEventListener("processorerror",onprocessorerror),onprocessorerror="function"==typeof value?value:null,"function"==typeof onprocessorerror&&nativeAudioWorkletNodeFaker.addEventListener("processorerror",onprocessorerror)},get parameters(){return parameterMap},get port(){return messageChannel.port2},addEventListener:(...args)=>scriptProcessorNode.addEventListener(args[0],args[1],args[2]),connect:connectMultipleOutputs.bind(null,outputAudioNodes),disconnect:disconnectMultipleOutputs.bind(null,outputAudioNodes),dispatchEvent:(...args)=>scriptProcessorNode.dispatchEvent(args[0]),removeEventListener:(...args)=>scriptProcessorNode.removeEventListener(args[0],args[1],args[2])},patchedEventListeners=new Map;var addEventListener,removeEventListener;messageChannel.port1.addEventListener=(addEventListener=messageChannel.port1.addEventListener,(...args)=>{if("message"===args[0]){const unpatchedEventListener="function"==typeof args[1]?args[1]:"object"==typeof args[1]&&null!==args[1]&&"function"==typeof args[1].handleEvent?args[1].handleEvent:null;if(null!==unpatchedEventListener){const patchedEventListener=patchedEventListeners.get(args[1]);void 0!==patchedEventListener?args[1]=patchedEventListener:(args[1]=event=>{exposeCurrentFrameAndCurrentTime(nativeContext.currentTime,nativeContext.sampleRate,(()=>unpatchedEventListener(event)))},patchedEventListeners.set(unpatchedEventListener,args[1]))}}return addEventListener.call(messageChannel.port1,args[0],args[1],args[2])}),messageChannel.port1.removeEventListener=(removeEventListener=messageChannel.port1.removeEventListener,(...args)=>{if("message"===args[0]){const patchedEventListener=patchedEventListeners.get(args[1]);void 0!==patchedEventListener&&(patchedEventListeners.delete(args[1]),args[1]=patchedEventListener)}return removeEventListener.call(messageChannel.port1,args[0],args[1],args[2])});let onmessage=null;Object.defineProperty(messageChannel.port1,"onmessage",{get:()=>onmessage,set:value=>{"function"==typeof onmessage&&messageChannel.port1.removeEventListener("message",onmessage),onmessage="function"==typeof value?value:null,"function"==typeof onmessage&&(messageChannel.port1.addEventListener("message",onmessage),messageChannel.port1.start())}}),processorConstructor.prototype.port=messageChannel.port1;let audioWorkletProcessor=null;const audioWorkletProcessorPromise=((nativeContext,nativeAudioWorkletNode,processorConstructor,audioWorkletNodeOptions)=>{let nodeToProcessorMap=NODE_TO_PROCESSOR_MAPS.get(nativeContext);void 0===nodeToProcessorMap&&(nodeToProcessorMap=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(nativeContext,nodeToProcessorMap));const audioWorkletProcessorPromise=createAudioWorkletProcessorPromise(processorConstructor,audioWorkletNodeOptions);return nodeToProcessorMap.set(nativeAudioWorkletNode,audioWorkletProcessorPromise),audioWorkletProcessorPromise})(nativeContext,nativeAudioWorkletNodeFaker,processorConstructor,options);audioWorkletProcessorPromise.then((dWrkltPrcssr=>audioWorkletProcessor=dWrkltPrcssr));const inputs=createNestedArrays(options.numberOfInputs,options.channelCount),outputs=createNestedArrays(options.numberOfOutputs,outputChannelCount),parameters=void 0===processorConstructor.parameterDescriptors?[]:processorConstructor.parameterDescriptors.reduce(((prmtrs,{name})=>({...prmtrs,[name]:new Float32Array(128)})),{});let isActive=!0;const disconnectOutputsGraph=()=>{options.numberOfOutputs>0&&scriptProcessorNode.disconnect(outputChannelSplitterNode);for(let i=0,outputChannelSplitterNodeOutput=0;i<options.numberOfOutputs;i+=1){const outputChannelMergerNode=outputChannelMergerNodes[i];for(let j=0;j<outputChannelCount[i];j+=1)outputChannelSplitterNode.disconnect(outputChannelMergerNode,outputChannelSplitterNodeOutput+j,j);outputChannelSplitterNodeOutput+=outputChannelCount[i]}},activeInputIndexes=new Map;scriptProcessorNode.onaudioprocess=({inputBuffer,outputBuffer})=>{if(null!==audioWorkletProcessor){const activeInputs=getActiveAudioWorkletNodeInputs(nativeAudioWorkletNodeFaker);for(let i=0;i<bufferSize;i+=128){for(let j=0;j<options.numberOfInputs;j+=1)for(let k=0;k<options.channelCount;k+=1)copyFromChannel(inputBuffer,inputs[j],k,k,i);void 0!==processorConstructor.parameterDescriptors&&processorConstructor.parameterDescriptors.forEach((({name},index)=>{copyFromChannel(inputBuffer,parameters,name,numberOfInputChannels+index,i)}));for(let j=0;j<options.numberOfInputs;j+=1)for(let k=0;k<outputChannelCount[j];k+=1)0===outputs[j][k].byteLength&&(outputs[j][k]=new Float32Array(128));try{const potentiallyEmptyInputs=inputs.map(((input,index)=>{if(activeInputs[index].size>0)return activeInputIndexes.set(index,bufferSize/128),input;const count=activeInputIndexes.get(index);return void 0===count?[]:(input.every((channelData=>channelData.every((sample=>0===sample))))&&(1===count?activeInputIndexes.delete(index):activeInputIndexes.set(index,count-1)),input)})),activeSourceFlag=exposeCurrentFrameAndCurrentTime(nativeContext.currentTime+i/nativeContext.sampleRate,nativeContext.sampleRate,(()=>audioWorkletProcessor.process(potentiallyEmptyInputs,outputs,parameters)));isActive=activeSourceFlag;for(let j=0,outputChannelSplitterNodeOutput=0;j<options.numberOfOutputs;j+=1){for(let k=0;k<outputChannelCount[j];k+=1)copyToChannel(outputBuffer,outputs[j],k,outputChannelSplitterNodeOutput+k,i);outputChannelSplitterNodeOutput+=outputChannelCount[j]}}catch(error){isActive=!1,nativeAudioWorkletNodeFaker.dispatchEvent(new ErrorEvent("processorerror",{colno:error.colno,filename:error.filename,lineno:error.lineno,message:error.message}))}if(!isActive){for(let j=0;j<options.numberOfInputs;j+=1){gainNodes[j].disconnect(inputChannelSplitterNodes[j]);for(let k=0;k<options.channelCount;k+=1)inputChannelSplitterNodes[i].disconnect(inputChannelMergerNode,k,j*options.channelCount+k)}if(void 0!==processorConstructor.parameterDescriptors){const length=processorConstructor.parameterDescriptors.length;for(let j=0;j<length;j+=1){const constantSourceNode=constantSourceNodes[j];constantSourceNode.disconnect(inputChannelMergerNode,0,numberOfInputChannels+j),constantSourceNode.stop()}}inputChannelMergerNode.disconnect(scriptProcessorNode),scriptProcessorNode.onaudioprocess=null,isConnected?disconnectOutputsGraph():disconnectFakeGraph();break}}}};let isConnected=!1;const nativeGainNode=createNativeGainNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),connectFakeGraph=()=>scriptProcessorNode.connect(nativeGainNode).connect(nativeContext.destination),disconnectFakeGraph=()=>{scriptProcessorNode.disconnect(nativeGainNode),nativeGainNode.disconnect()};return connectFakeGraph(),monitorConnections(nativeAudioWorkletNodeFaker,(()=>{if(isActive){disconnectFakeGraph(),options.numberOfOutputs>0&&scriptProcessorNode.connect(outputChannelSplitterNode);for(let i=0,outputChannelSplitterNodeOutput=0;i<options.numberOfOutputs;i+=1){const outputChannelMergerNode=outputChannelMergerNodes[i];for(let j=0;j<outputChannelCount[i];j+=1)outputChannelSplitterNode.connect(outputChannelMergerNode,outputChannelSplitterNodeOutput+j,j);outputChannelSplitterNodeOutput+=outputChannelCount[i]}}isConnected=!0}),(()=>{isActive&&(connectFakeGraph(),disconnectOutputsGraph()),isConnected=!1}))})(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=((createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections)=>(nativeContext,baseLatency,nativeAudioWorkletNodeConstructor,name,processorConstructor,options)=>{if(null!==nativeAudioWorkletNodeConstructor)try{const nativeAudioWorkletNode=new nativeAudioWorkletNodeConstructor(nativeContext,name,options),patchedEventListeners=new Map;let onprocessorerror=null;if(Object.defineProperties(nativeAudioWorkletNode,{channelCount:{get:()=>options.channelCount,set:()=>{throw createInvalidStateError()}},channelCountMode:{get:()=>"explicit",set:()=>{throw createInvalidStateError()}},onprocessorerror:{get:()=>onprocessorerror,set:value=>{"function"==typeof onprocessorerror&&nativeAudioWorkletNode.removeEventListener("processorerror",onprocessorerror),onprocessorerror="function"==typeof value?value:null,"function"==typeof onprocessorerror&&nativeAudioWorkletNode.addEventListener("processorerror",onprocessorerror)}}}),nativeAudioWorkletNode.addEventListener=(addEventListener=nativeAudioWorkletNode.addEventListener,(...args)=>{if("processorerror"===args[0]){const unpatchedEventListener="function"==typeof args[1]?args[1]:"object"==typeof args[1]&&null!==args[1]&&"function"==typeof args[1].handleEvent?args[1].handleEvent:null;if(null!==unpatchedEventListener){const patchedEventListener=patchedEventListeners.get(args[1]);void 0!==patchedEventListener?args[1]=patchedEventListener:(args[1]=event=>{"error"===event.type?(Object.defineProperties(event,{type:{value:"processorerror"}}),unpatchedEventListener(event)):unpatchedEventListener(new ErrorEvent(args[0],{...event}))},patchedEventListeners.set(unpatchedEventListener,args[1]))}}return addEventListener.call(nativeAudioWorkletNode,"error",args[1],args[2]),addEventListener.call(nativeAudioWorkletNode,...args)}),nativeAudioWorkletNode.removeEventListener=(removeEventListener=nativeAudioWorkletNode.removeEventListener,(...args)=>{if("processorerror"===args[0]){const patchedEventListener=patchedEventListeners.get(args[1]);void 0!==patchedEventListener&&(patchedEventListeners.delete(args[1]),args[1]=patchedEventListener)}return removeEventListener.call(nativeAudioWorkletNode,"error",args[1],args[2]),removeEventListener.call(nativeAudioWorkletNode,args[0],args[1],args[2])}),0!==options.numberOfOutputs){const nativeGainNode=createNativeGainNode(nativeContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});nativeAudioWorkletNode.connect(nativeGainNode).connect(nativeContext.destination);return monitorConnections(nativeAudioWorkletNode,(()=>nativeGainNode.disconnect()),(()=>nativeGainNode.connect(nativeContext.destination)))}return nativeAudioWorkletNode}catch(err){if(11===err.code)throw createNotSupportedError();throw err}var removeEventListener,addEventListener;if(void 0===processorConstructor)throw createNotSupportedError();return(audioWorkletNodeOptions=>{const{port1}=new MessageChannel;try{port1.postMessage(audioWorkletNodeOptions)}finally{port1.close()}})(options),createNativeAudioWorkletNodeFaker(nativeContext,baseLatency,processorConstructor,options)})(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=((connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext)=>(name,options,processorConstructor)=>{const renderedNativeAudioNodes=new WeakMap;let processedBufferPromise=null;return{render(proxy,nativeOfflineAudioContext){deleteUnrenderedAudioWorkletNode(nativeOfflineAudioContext,proxy);const renderedNativeAudioWorkletNodeOrGainNode=renderedNativeAudioNodes.get(nativeOfflineAudioContext);return void 0!==renderedNativeAudioWorkletNodeOrGainNode?Promise.resolve(renderedNativeAudioWorkletNodeOrGainNode):(async(proxy,nativeOfflineAudioContext)=>{let nativeAudioWorkletNode=getNativeAudioNode(proxy),nativeOutputNodes=null;const nativeAudioWorkletNodeIsOwnedByContext=isOwnedByContext(nativeAudioWorkletNode,nativeOfflineAudioContext),outputChannelCount=Array.isArray(options.outputChannelCount)?options.outputChannelCount:Array.from(options.outputChannelCount);if(null===nativeAudioWorkletNodeConstructor){const numberOfOutputChannels=outputChannelCount.reduce(((sum,value)=>sum+value),0),outputChannelSplitterNode=createNativeChannelSplitterNode(nativeOfflineAudioContext,{channelCount:Math.max(1,numberOfOutputChannels),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,numberOfOutputChannels)}),outputChannelMergerNodes=[];for(let i=0;i<proxy.numberOfOutputs;i+=1)outputChannelMergerNodes.push(createNativeChannelMergerNode(nativeOfflineAudioContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:outputChannelCount[i]}));const outputGainNode=createNativeGainNode(nativeOfflineAudioContext,{channelCount:options.channelCount,channelCountMode:options.channelCountMode,channelInterpretation:options.channelInterpretation,gain:1});outputGainNode.connect=connectMultipleOutputs.bind(null,outputChannelMergerNodes),outputGainNode.disconnect=disconnectMultipleOutputs.bind(null,outputChannelMergerNodes),nativeOutputNodes=[outputChannelSplitterNode,outputChannelMergerNodes,outputGainNode]}else nativeAudioWorkletNodeIsOwnedByContext||(nativeAudioWorkletNode=new nativeAudioWorkletNodeConstructor(nativeOfflineAudioContext,name));if(renderedNativeAudioNodes.set(nativeOfflineAudioContext,null===nativeOutputNodes?nativeAudioWorkletNode:nativeOutputNodes[2]),null!==nativeOutputNodes){if(null===processedBufferPromise){if(void 0===processorConstructor)throw new Error("Missing the processor constructor.");if(null===nativeOfflineAudioContextConstructor)throw new Error("Missing the native OfflineAudioContext constructor.");const numberOfInputChannels=proxy.channelCount*proxy.numberOfInputs,numberOfParameters=void 0===processorConstructor.parameterDescriptors?0:processorConstructor.parameterDescriptors.length,numberOfChannels=numberOfInputChannels+numberOfParameters,renderBuffer=async()=>{const partialOfflineAudioContext=new nativeOfflineAudioContextConstructor(numberOfChannels,128*Math.ceil(proxy.context.length/128),nativeOfflineAudioContext.sampleRate),gainNodes=[],inputChannelSplitterNodes=[];for(let i=0;i<options.numberOfInputs;i+=1)gainNodes.push(createNativeGainNode(partialOfflineAudioContext,{channelCount:options.channelCount,channelCountMode:options.channelCountMode,channelInterpretation:options.channelInterpretation,gain:1})),inputChannelSplitterNodes.push(createNativeChannelSplitterNode(partialOfflineAudioContext,{channelCount:options.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:options.channelCount}));const constantSourceNodes=await Promise.all(Array.from(proxy.parameters.values()).map((async audioParam=>{const constantSourceNode=createNativeConstantSourceNode(partialOfflineAudioContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:audioParam.value});return await renderAutomation(partialOfflineAudioContext,audioParam,constantSourceNode.offset),constantSourceNode}))),inputChannelMergerNode=createNativeChannelMergerNode(partialOfflineAudioContext,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,numberOfInputChannels+numberOfParameters)});for(let i=0;i<options.numberOfInputs;i+=1){gainNodes[i].connect(inputChannelSplitterNodes[i]);for(let j=0;j<options.channelCount;j+=1)inputChannelSplitterNodes[i].connect(inputChannelMergerNode,j,i*options.channelCount+j)}for(const[index,constantSourceNode]of constantSourceNodes.entries())constantSourceNode.connect(inputChannelMergerNode,0,numberOfInputChannels+index),constantSourceNode.start(0);return inputChannelMergerNode.connect(partialOfflineAudioContext.destination),await Promise.all(gainNodes.map((gainNode=>renderInputsOfAudioNode(proxy,partialOfflineAudioContext,gainNode)))),renderNativeOfflineAudioContext(partialOfflineAudioContext)};processedBufferPromise=processBuffer(proxy,0===numberOfChannels?null:await renderBuffer(),nativeOfflineAudioContext,options,outputChannelCount,processorConstructor,exposeCurrentFrameAndCurrentTime)}const processedBuffer=await processedBufferPromise,audioBufferSourceNode=createNativeAudioBufferSourceNode(nativeOfflineAudioContext,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[outputChannelSplitterNode,outputChannelMergerNodes,outputGainNode]=nativeOutputNodes;null!==processedBuffer&&(audioBufferSourceNode.buffer=processedBuffer,audioBufferSourceNode.start(0)),audioBufferSourceNode.connect(outputChannelSplitterNode);for(let i=0,outputChannelSplitterNodeOutput=0;i<proxy.numberOfOutputs;i+=1){const outputChannelMergerNode=outputChannelMergerNodes[i];for(let j=0;j<outputChannelCount[i];j+=1)outputChannelSplitterNode.connect(outputChannelMergerNode,outputChannelSplitterNodeOutput+j,j);outputChannelSplitterNodeOutput+=outputChannelCount[i]}return outputGainNode}if(nativeAudioWorkletNodeIsOwnedByContext)for(const[nm,audioParam]of proxy.parameters.entries())await connectAudioParam(nativeOfflineAudioContext,audioParam,nativeAudioWorkletNode.parameters.get(nm));else for(const[nm,audioParam]of proxy.parameters.entries())await renderAutomation(nativeOfflineAudioContext,audioParam,nativeAudioWorkletNode.parameters.get(nm));return await renderInputsOfAudioNode(proxy,nativeOfflineAudioContext,nativeAudioWorkletNode),nativeAudioWorkletNode})(proxy,nativeOfflineAudioContext)}}})(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=(backupOfflineAudioContextStore=>nativeContext=>backupOfflineAudioContextStore.get(nativeContext))(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=(activeAudioWorkletNodeInputsStore=>(nativeAudioWorkletNode,activeInputs)=>{activeAudioWorkletNodeInputsStore.set(nativeAudioWorkletNode,activeInputs)})(activeAudioWorkletNodeInputsStore),createNativeOfflineAudioContext=(isSecureContext&&((addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener)=>{})(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,(options=>({...options,outputChannelCount:void 0!==options.outputChannelCount?options.outputChannelCount:1===options.numberOfInputs&&1===options.numberOfOutputs?[options.channelCount]:Array.from({length:options.numberOfOutputs},(()=>1))})),setActiveAudioWorkletNodeInputs,(audioWorkletNodeOptions=>{const{port1,port2}=new MessageChannel;try{port1.postMessage(audioWorkletNodeOptions)}finally{port1.close(),port2.close()}}),wrapEventListener),((createInvalidStateError,createNotSupportedError,createUnknownError,minimalBaseAudioContextConstructor,nativeAudioContextConstructor)=>{})(createInvalidStateError,createNotSupportedError,createUnknownError,minimalBaseAudioContextConstructor,nativeAudioContextConstructor),((createNotSupportedError,nativeOfflineAudioContextConstructor)=>(numberOfChannels,length,sampleRate)=>{if(null===nativeOfflineAudioContextConstructor)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new nativeOfflineAudioContextConstructor(numberOfChannels,length,sampleRate)}catch(err){if("SyntaxError"===err.name)throw createNotSupportedError();throw err}})(createNotSupportedError,nativeOfflineAudioContextConstructor)),startRendering=((audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds)=>(destination,nativeOfflineAudioContext)=>getAudioNodeRenderer(destination).render(destination,nativeOfflineAudioContext).then((()=>Promise.all(Array.from(getUnrenderedAudioWorkletNodes(nativeOfflineAudioContext)).map((audioWorkletNode=>getAudioNodeRenderer(audioWorkletNode).render(audioWorkletNode,nativeOfflineAudioContext)))))).then((()=>renderNativeOfflineAudioContext(nativeOfflineAudioContext))).then((audioBuffer=>("function"!=typeof audioBuffer.copyFromChannel?(wrapAudioBufferCopyChannelMethods(audioBuffer),wrapAudioBufferGetChannelDataMethod(audioBuffer)):cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,(()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)))||wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer),audioBufferStore.add(audioBuffer),audioBuffer))))(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds)},"./node_modules/uuid/dist/commonjs-browser/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"NIL",{enumerable:!0,get:function get(){return _nil.default}}),Object.defineProperty(exports,"parse",{enumerable:!0,get:function get(){return _parse.default}}),Object.defineProperty(exports,"stringify",{enumerable:!0,get:function get(){return _stringify.default}}),Object.defineProperty(exports,"v1",{enumerable:!0,get:function get(){return _v.default}}),Object.defineProperty(exports,"v3",{enumerable:!0,get:function get(){return _v2.default}}),Object.defineProperty(exports,"v4",{enumerable:!0,get:function get(){return _v3.default}}),Object.defineProperty(exports,"v5",{enumerable:!0,get:function get(){return _v4.default}}),Object.defineProperty(exports,"validate",{enumerable:!0,get:function get(){return _validate.default}}),Object.defineProperty(exports,"version",{enumerable:!0,get:function get(){return _version.default}});var _v=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/v1.js")),_v2=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/v3.js")),_v3=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/v4.js")),_v4=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/v5.js")),_nil=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/nil.js")),_version=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/version.js")),_validate=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/validate.js")),_stringify=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/stringify.js")),_parse=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/parse.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},"./node_modules/uuid/dist/commonjs-browser/md5.js":(__unused_webpack_module,exports)=>{"use strict";function getOutputLength(inputLength8){return 14+(inputLength8+64>>>9<<4)+1}function safeAdd(x,y){const lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function md5cmn(q,a,b,x,s,t){return safeAdd(function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt}(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b)}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=function md5(bytes){if("string"==typeof bytes){const msg=unescape(encodeURIComponent(bytes));bytes=new Uint8Array(msg.length);for(let i=0;i<msg.length;++i)bytes[i]=msg.charCodeAt(i)}return function md5ToHexEncodedArray(input){const output=[],length32=32*input.length,hexTab="0123456789abcdef";for(let i=0;i<length32;i+=8){const x=input[i>>5]>>>i%32&255,hex=parseInt(hexTab.charAt(x>>>4&15)+hexTab.charAt(15&x),16);output.push(hex)}return output}(function wordsToMd5(x,len){x[len>>5]|=128<<len%32,x[getOutputLength(len)-1]=len;let a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(let i=0;i<x.length;i+=16){const olda=a,oldb=b,oldc=c,oldd=d;a=md5ff(a,b,c,d,x[i],7,-680876936),d=md5ff(d,a,b,c,x[i+1],12,-389564586),c=md5ff(c,d,a,b,x[i+2],17,606105819),b=md5ff(b,c,d,a,x[i+3],22,-1044525330),a=md5ff(a,b,c,d,x[i+4],7,-176418897),d=md5ff(d,a,b,c,x[i+5],12,1200080426),c=md5ff(c,d,a,b,x[i+6],17,-1473231341),b=md5ff(b,c,d,a,x[i+7],22,-45705983),a=md5ff(a,b,c,d,x[i+8],7,1770035416),d=md5ff(d,a,b,c,x[i+9],12,-1958414417),c=md5ff(c,d,a,b,x[i+10],17,-42063),b=md5ff(b,c,d,a,x[i+11],22,-1990404162),a=md5ff(a,b,c,d,x[i+12],7,1804603682),d=md5ff(d,a,b,c,x[i+13],12,-40341101),c=md5ff(c,d,a,b,x[i+14],17,-1502002290),b=md5ff(b,c,d,a,x[i+15],22,1236535329),a=md5gg(a,b,c,d,x[i+1],5,-165796510),d=md5gg(d,a,b,c,x[i+6],9,-1069501632),c=md5gg(c,d,a,b,x[i+11],14,643717713),b=md5gg(b,c,d,a,x[i],20,-373897302),a=md5gg(a,b,c,d,x[i+5],5,-701558691),d=md5gg(d,a,b,c,x[i+10],9,38016083),c=md5gg(c,d,a,b,x[i+15],14,-660478335),b=md5gg(b,c,d,a,x[i+4],20,-405537848),a=md5gg(a,b,c,d,x[i+9],5,568446438),d=md5gg(d,a,b,c,x[i+14],9,-1019803690),c=md5gg(c,d,a,b,x[i+3],14,-187363961),b=md5gg(b,c,d,a,x[i+8],20,1163531501),a=md5gg(a,b,c,d,x[i+13],5,-1444681467),d=md5gg(d,a,b,c,x[i+2],9,-51403784),c=md5gg(c,d,a,b,x[i+7],14,1735328473),b=md5gg(b,c,d,a,x[i+12],20,-1926607734),a=md5hh(a,b,c,d,x[i+5],4,-378558),d=md5hh(d,a,b,c,x[i+8],11,-2022574463),c=md5hh(c,d,a,b,x[i+11],16,1839030562),b=md5hh(b,c,d,a,x[i+14],23,-35309556),a=md5hh(a,b,c,d,x[i+1],4,-1530992060),d=md5hh(d,a,b,c,x[i+4],11,1272893353),c=md5hh(c,d,a,b,x[i+7],16,-155497632),b=md5hh(b,c,d,a,x[i+10],23,-1094730640),a=md5hh(a,b,c,d,x[i+13],4,681279174),d=md5hh(d,a,b,c,x[i],11,-358537222),c=md5hh(c,d,a,b,x[i+3],16,-722521979),b=md5hh(b,c,d,a,x[i+6],23,76029189),a=md5hh(a,b,c,d,x[i+9],4,-640364487),d=md5hh(d,a,b,c,x[i+12],11,-421815835),c=md5hh(c,d,a,b,x[i+15],16,530742520),b=md5hh(b,c,d,a,x[i+2],23,-995338651),a=md5ii(a,b,c,d,x[i],6,-198630844),d=md5ii(d,a,b,c,x[i+7],10,1126891415),c=md5ii(c,d,a,b,x[i+14],15,-1416354905),b=md5ii(b,c,d,a,x[i+5],21,-57434055),a=md5ii(a,b,c,d,x[i+12],6,1700485571),d=md5ii(d,a,b,c,x[i+3],10,-1894986606),c=md5ii(c,d,a,b,x[i+10],15,-1051523),b=md5ii(b,c,d,a,x[i+1],21,-2054922799),a=md5ii(a,b,c,d,x[i+8],6,1873313359),d=md5ii(d,a,b,c,x[i+15],10,-30611744),c=md5ii(c,d,a,b,x[i+6],15,-1560198380),b=md5ii(b,c,d,a,x[i+13],21,1309151649),a=md5ii(a,b,c,d,x[i+4],6,-145523070),d=md5ii(d,a,b,c,x[i+11],10,-1120210379),c=md5ii(c,d,a,b,x[i+2],15,718787259),b=md5ii(b,c,d,a,x[i+9],21,-343485551),a=safeAdd(a,olda),b=safeAdd(b,oldb),c=safeAdd(c,oldc),d=safeAdd(d,oldd)}return[a,b,c,d]}(function bytesToWords(input){if(0===input.length)return[];const length8=8*input.length,output=new Uint32Array(getOutputLength(length8));for(let i=0;i<length8;i+=8)output[i>>5]|=(255&input[i/8])<<i%32;return output}(bytes),8*bytes.length))};exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/native.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/nil.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default="00000000-0000-0000-0000-000000000000"},"./node_modules/uuid/dist/commonjs-browser/parse.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _validate=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/validate.js"));var _default=function parse(uuid){if(!(0,_validate.default)(uuid))throw TypeError("Invalid UUID");let v;const arr=new Uint8Array(16);return arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24,arr[1]=v>>>16&255,arr[2]=v>>>8&255,arr[3]=255&v,arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8,arr[5]=255&v,arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8,arr[7]=255&v,arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8,arr[9]=255&v,arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255,arr[11]=v/4294967296&255,arr[12]=v>>>24&255,arr[13]=v>>>16&255,arr[14]=v>>>8&255,arr[15]=255&v,arr};exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/regex.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},"./node_modules/uuid/dist/commonjs-browser/rng.js":(__unused_webpack_module,exports)=>{"use strict";let getRandomValues;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function rng(){if(!getRandomValues&&(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)};const rnds8=new Uint8Array(16)},"./node_modules/uuid/dist/commonjs-browser/sha1.js":(__unused_webpack_module,exports)=>{"use strict";function f(s,x,y,z){switch(s){case 0:return x&y^~x&z;case 1:case 3:return x^y^z;case 2:return x&y^x&z^y&z}}function ROTL(x,n){return x<<n|x>>>32-n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=function sha1(bytes){const K=[1518500249,1859775393,2400959708,3395469782],H=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof bytes){const msg=unescape(encodeURIComponent(bytes));bytes=[];for(let i=0;i<msg.length;++i)bytes.push(msg.charCodeAt(i))}else Array.isArray(bytes)||(bytes=Array.prototype.slice.call(bytes));bytes.push(128);const l=bytes.length/4+2,N=Math.ceil(l/16),M=new Array(N);for(let i=0;i<N;++i){const arr=new Uint32Array(16);for(let j=0;j<16;++j)arr[j]=bytes[64*i+4*j]<<24|bytes[64*i+4*j+1]<<16|bytes[64*i+4*j+2]<<8|bytes[64*i+4*j+3];M[i]=arr}M[N-1][14]=8*(bytes.length-1)/Math.pow(2,32),M[N-1][14]=Math.floor(M[N-1][14]),M[N-1][15]=8*(bytes.length-1)&4294967295;for(let i=0;i<N;++i){const W=new Uint32Array(80);for(let t=0;t<16;++t)W[t]=M[i][t];for(let t=16;t<80;++t)W[t]=ROTL(W[t-3]^W[t-8]^W[t-14]^W[t-16],1);let a=H[0],b=H[1],c=H[2],d=H[3],e=H[4];for(let t=0;t<80;++t){const s=Math.floor(t/20),T=ROTL(a,5)+f(s,b,c,d)+e+K[s]+W[t]>>>0;e=d,d=c,c=ROTL(b,30)>>>0,b=a,a=T}H[0]=H[0]+a>>>0,H[1]=H[1]+b>>>0,H[2]=H[2]+c>>>0,H[3]=H[3]+d>>>0,H[4]=H[4]+e>>>0}return[H[0]>>24&255,H[0]>>16&255,H[0]>>8&255,255&H[0],H[1]>>24&255,H[1]>>16&255,H[1]>>8&255,255&H[1],H[2]>>24&255,H[2]>>16&255,H[2]>>8&255,255&H[2],H[3]>>24&255,H[3]>>16&255,H[3]>>8&255,255&H[3],H[4]>>24&255,H[4]>>16&255,H[4]>>8&255,255&H[4]]};exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/stringify.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.unsafeStringify=unsafeStringify;var _validate=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/validate.js"));const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]}var _default=function stringify(arr,offset=0){const uuid=unsafeStringify(arr,offset);if(!(0,_validate.default)(uuid))throw TypeError("Stringified UUID is invalid");return uuid};exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/v1.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _rng=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/rng.js")),_stringify=__webpack_require__("./node_modules/uuid/dist/commonjs-browser/stringify.js");let _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;var _default=function v1(options,buf,offset){let i=buf&&offset||0;const b=buf||new Array(16);let node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){const seedBytes=options.random||(options.rng||_rng.default)();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}let msecs=void 0!==options.msecs?options.msecs:Date.now(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1;const dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq,msecs+=122192928e5;const tl=(1e4*(268435455&msecs)+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;const tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(let n=0;n<6;++n)b[i+n]=node[n];return buf||(0,_stringify.unsafeStringify)(b)};exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/v3.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _v=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/v35.js")),_md=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/md5.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=(0,_v.default)("v3",48,_md.default);exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/v35.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.URL=exports.DNS=void 0,exports.default=function v35(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){var _namespace;if("string"==typeof value&&(value=function stringToBytes(str){str=unescape(encodeURIComponent(str));const bytes=[];for(let i=0;i<str.length;++i)bytes.push(str.charCodeAt(i));return bytes}(value)),"string"==typeof namespace&&(namespace=(0,_parse.default)(namespace)),16!==(null===(_namespace=namespace)||void 0===_namespace?void 0:_namespace.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let bytes=new Uint8Array(16+value.length);if(bytes.set(namespace),bytes.set(value,namespace.length),bytes=hashfunc(bytes),bytes[6]=15&bytes[6]|version,bytes[8]=63&bytes[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=bytes[i];return buf}return(0,_stringify.unsafeStringify)(bytes)}try{generateUUID.name=name}catch(err){}return generateUUID.DNS=DNS,generateUUID.URL=URL,generateUUID};var _stringify=__webpack_require__("./node_modules/uuid/dist/commonjs-browser/stringify.js"),_parse=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/parse.js"));const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";exports.DNS=DNS;const URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";exports.URL=URL},"./node_modules/uuid/dist/commonjs-browser/v4.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _native=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/native.js")),_rng=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/rng.js")),_stringify=__webpack_require__("./node_modules/uuid/dist/commonjs-browser/stringify.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=function v4(options,buf,offset){if(_native.default.randomUUID&&!buf&&!options)return _native.default.randomUUID();const rnds=(options=options||{}).random||(options.rng||_rng.default)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return(0,_stringify.unsafeStringify)(rnds)};exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/v5.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _v=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/v35.js")),_sha=_interopRequireDefault(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/sha1.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=(0,_v.default)("v5",80,_sha.default);exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/validate.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regex=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/regex.js"));var _default=function validate(uuid){return"string"==typeof uuid&&_regex.default.test(uuid)};exports.default=_default},"./node_modules/uuid/dist/commonjs-browser/version.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _validate=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/uuid/dist/commonjs-browser/validate.js"));var _default=function version(uuid){if(!(0,_validate.default)(uuid))throw TypeError("Invalid UUID");return parseInt(uuid.slice(14,15),16)};exports.default=_default}}]);