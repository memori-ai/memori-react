"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[7637],{"./src/components/ChatBubble/VirtualizedContent/VirtualizedContent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_virtuoso__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-virtuoso/dist/index.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const VirtualizedContent=({content,className=""})=>{const[lines,setLines]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),containerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[height,setHeight]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(500),[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),[mounted,setMounted]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>(setMounted(!0),()=>setMounted(!1))),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!content)return setLines([]),void setLoading(!1);setLoading(!0);setTimeout((()=>{if(mounted){const processedLines=(()=>{try{if(content.includes("<")){const chunks=content.split(/(\n{2,}|<div>|<\/div>|<p>|<\/p>|<br\s*\/?>)/).map((chunk=>chunk.trim())).filter((chunk=>chunk.length>0)),processedChunks=[];let currentChunk="";return chunks.forEach((chunk=>{chunk.match(/<[^>]*>/)?(currentChunk&&(processedChunks.push(currentChunk),currentChunk=""),processedChunks.push(chunk)):(currentChunk+=chunk+" ",currentChunk.length>200&&(processedChunks.push(currentChunk),currentChunk=""))})),currentChunk&&processedChunks.push(currentChunk),processedChunks}return content.split(/\n{2,}/).filter((para=>para.trim().length>0)).map((para=>para.trim()))}catch(error){return console.error("Error processing content:",error),content.split(/\n/).filter((line=>line.trim().length>0))}})();setLines(processedLines),setLoading(!1)}}),0)}),[content,mounted]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(setHeight(Math.min(500,.6*window.innerHeight)),containerRef.current){const resizeObserver=new ResizeObserver((()=>{setHeight(Math.min(500,.6*window.innerHeight))}));return resizeObserver.observe(containerRef.current),()=>{containerRef.current&&resizeObserver.unobserve(containerRef.current)}}}),[]);return loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"virtualized-content-loading",children:"Processing content..."}):0===lines.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"virtualized-content-empty",children:"No content to display"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{ref:containerRef,className:`virtualized-content-container ${className}`,style:{height:height+"px",width:"100%",position:"relative"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_virtuoso__WEBPACK_IMPORTED_MODULE_2__.OO,{style:{height,width:"100%",overflow:"auto"},totalCount:lines.length,itemContent:index=>{const line=lines[index];if(!line||0===line.length)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{style:{height:"1px"},children:"Â "});const minHeightStyle={minHeight:"20px"};return line.includes("<")&&line.includes(">")?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{style:minHeightStyle,className:"virtualized-content-html-line",dangerouslySetInnerHTML:{__html:line}}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{style:minHeightStyle,className:"virtualized-content-line",children:line})},defaultItemHeight:20,fixedItemHeight:0,overscan:100})})};VirtualizedContent.displayName="VirtualizedContent";const __WEBPACK_DEFAULT_EXPORT__=VirtualizedContent;try{VirtualizedContent.displayName="VirtualizedContent",VirtualizedContent.__docgenInfo={description:"VirtualizedContent component that renders large HTML content efficiently\nusing virtualization to only render visible elements",displayName:"VirtualizedContent",props:{content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"string"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ChatBubble/VirtualizedContent/VirtualizedContent.tsx#VirtualizedContent"]={docgenInfo:VirtualizedContent.__docgenInfo,name:"VirtualizedContent",path:"src/components/ChatBubble/VirtualizedContent/VirtualizedContent.tsx#VirtualizedContent"})}catch(__react_docgen_typescript_loader_error){}}}]);