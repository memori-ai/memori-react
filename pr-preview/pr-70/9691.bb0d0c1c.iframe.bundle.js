"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[9691],{"./src/components/ChatHistoryDrawer/ChatHistory.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _ui_Drawer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/ui/Drawer.tsx"),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_ui_Card__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Card.tsx"),_ui_Button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/Button.tsx"),_icons_Chat__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/icons/Chat.tsx"),_helpers_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/helpers/utils.ts"),_headlessui_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@headlessui/react/dist/components/dialog/dialog.js"),lodash_debounce__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/lodash/debounce.js"),lodash_debounce__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_8__),_ui_Spin__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/ui/Spin.tsx"),_Chat_Chat__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/Chat/Chat.tsx"),_icons_Download__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/components/icons/Download.tsx"),_icons_Message__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/components/icons/Message.tsx"),_ui_Select__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/ui/Select.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/react/jsx-runtime.js");const calculateTitle=lines=>{const userMessages=lines.filter(line=>line.inbound);if(0===userMessages.length)return"";const insignificantPhrases=["hello","hi","hey","good morning","good afternoon","good evening","thanks","thank you","thx","tnx","ty","thanks!","thank you!","ok","okay","k","yes","no","yep","nope","yeah","nah","good","great","nice","cool","awesome","perfect","excellent","bye","goodbye","see you","see ya","later","good night","how are you","how are you doing","what's up","sup","please","pls","sorry","excuse me","pardon","i see","i understand","got it","gotcha","understood","continue","go on","tell me more","more","next","start","begin","let's start","let's begin","help","can you help","i need help","test","testing","test message","?","??","???","!","!!","!!!","...","..",".","a","an","the","and","or","but","in","on","at","to","for","of","with","by","ciao","salve","buongiorno","buonasera","buonanotte","grazie","grazie mille","grazie!","grazie mille!","thx","tnx","ok","va bene","va bene così","perfetto","ottimo","bene","sì","si","no","certo","certamente","assolutamente","arrivederci","a presto","a dopo","ci vediamo","addio","come stai","come va","tutto bene","che succede","per favore","per piacere","scusa","scusami","mi dispiace","capisco","ho capito","capito","perfetto","continua","vai avanti","dimmi di più","altro","altro ancora","inizia","iniziamo","comincia","cominciamo","aiuto","puoi aiutarmi","ho bisogno di aiuto","test","prova","messaggio di prova","?","??","???","!","!!","!!!","...","..",".","un","una","il","la","gli","le","e","o","ma","in","su","a","per","di","con","da"],scoredMessages=userMessages.map((msg,index)=>{const cleanText=(0,_helpers_utils__WEBPACK_IMPORTED_MODULE_6__._e)(msg.text||"");return{text:cleanText,score:(message=>{const cleanMessage=message.toLowerCase().trim();if(insignificantPhrases.includes(cleanMessage))return 0;const wordCount=cleanMessage.split(/\s+/).filter(word=>word.length>0).length;if(wordCount<3)return.1;if(cleanMessage.length<5)return.1;let score=.5;return(/\?$/.test(cleanMessage)||/^(what|how|why|when|where|who|which|can|could|would|will|do|does|did|is|are|was|were)/.test(cleanMessage)||/^(cosa|come|perché|perche|quando|dove|chi|quale|quali|può|puo|potrebbe|vorrebbe|sarà|sara|fa|fai|fanno|è|e|sono|era|erano)/.test(cleanMessage))&&(score+=.3),wordCount>5&&(score+=.2),wordCount>10&&(score+=.2),wordCount>20&&(score-=.1),/\d/.test(cleanMessage)&&(score+=.1),/[A-ZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞŸ][a-zàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ]+/.test(message)&&(score+=.1),Math.min(score,1)})(cleanText),index,originalIndex:index}});scoredMessages.sort((a,b)=>Math.abs(a.score-b.score)<.1?a.index-b.index:b.score-a.score);let bestMessage=scoredMessages[0];if(bestMessage.score<.3){const betterMessage=scoredMessages.find(msg=>msg.score>.1);betterMessage&&(bestMessage=betterMessage)}if(bestMessage.score<.2){const meaningfulMessages=scoredMessages.filter(msg=>msg.score>.1).slice(0,3).sort((a,b)=>a.index-b.index);if(meaningfulMessages.length>1){const combinedText=meaningfulMessages.map(msg=>msg.text).join(" - ").substring(0,80);return combinedText.length>80?`${combinedText}...`:combinedText}}const title=bestMessage.text;if(title.length>100){const truncated=title.substring(0,100),lastSpace=truncated.lastIndexOf(" ");return lastSpace>70?`${truncated.substring(0,lastSpace)}...`:`${truncated}...`}return title},downloadFile=(text,filename)=>{const data=new Blob([text],{type:"text/plain"}),url=URL.createObjectURL(data),element=document.createElement("a");element.setAttribute("href",url),element.setAttribute("download",filename),element.style.display="none",document.body.appendChild(element),element.click(),document.body.removeChild(element)},ChatHistoryDrawer=({open,onClose,apiClient,sessionId,memori,resumeSession,baseUrl,apiUrl,history,loginToken})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_1__.B)(),{getUserChatLogsByTokenPaged}=apiClient.chatLogs,textCurrentChat=`${t("write_and_speak.conversationStartedLabel")} ${new Intl.DateTimeFormat("it",{dateStyle:"short",timeStyle:"short"}).format(new Date)}\n\n`.concat(history.map(m=>`${m.fromUser?"YOU":memori.name}: ${m.text}`).join("\n")),[chatLogs,setChatLogs]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]),[selectedChatLog,setSelectedChatLog]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[currentPage,setCurrentPage]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(1),[indexPage,setIndexPage]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),[searchText,setSearchText]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(""),[isLoading,setIsLoading]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),[sortOrder,setSortOrder]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)("desc"),[dateRange,setDateRange]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)("all"),[totalItems,setTotalItems]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),[totalPages,setTotalPages]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),formatDateForAPI=date=>`${date.getFullYear()}${String(date.getMonth()+1).padStart(2,"0")}${String(date.getDate()).padStart(2,"0")}${String(date.getHours()).padStart(2,"0")}${String(date.getMinutes()).padStart(2,"0")}${String(date.getSeconds()).padStart(2,"0")}${String(date.getMilliseconds()).padStart(3,"0")}`,fetchChatLogs=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(async(dateRangeValue="all")=>{if(!loginToken)return void setError(t("errorFetchingSession")||"Login token required to fetch chat history");const calculatedIndex=8*(currentPage-1);let response;setIndexPage(calculatedIndex),setIsLoading(!0),setError(null);try{if("all"===dateRangeValue)response=await getUserChatLogsByTokenPaged(loginToken,memori.engineMemoriID??"",calculatedIndex,8,void 0,void 0,!1);else{const{dateFrom,dateTo}=(dateRange=>{if("today"===dateRange){const now=new Date,yesterday=new Date(now.getFullYear(),now.getMonth(),now.getDate()-1);return{dateFrom:formatDateForAPI(yesterday),dateTo:formatDateForAPI(now)}}if("yesterday"===dateRange){const now=new Date,yesterday=new Date(now.getFullYear(),now.getMonth(),now.getDate()-1),dayBeforeYesterday=new Date(yesterday.getFullYear(),yesterday.getMonth(),yesterday.getDate()-2);return{dateFrom:formatDateForAPI(dayBeforeYesterday),dateTo:formatDateForAPI(yesterday)}}if("last_7_days"===dateRange){const now=new Date,sevenDaysAgo=new Date(now.getFullYear(),now.getMonth(),now.getDate()-7);return{dateFrom:formatDateForAPI(sevenDaysAgo),dateTo:formatDateForAPI(now)}}if("last_30_days"===dateRange){const now=new Date,thirtyDaysAgo=new Date(now.getFullYear(),now.getMonth(),now.getDate()-30);return{dateFrom:formatDateForAPI(thirtyDaysAgo),dateTo:formatDateForAPI(now)}}})(dateRangeValue)??{};response=await getUserChatLogsByTokenPaged(loginToken,memori.engineMemoriID??"",calculatedIndex,8,dateFrom??void 0,dateTo??void 0,!1)}const res=response,sortedChatLogs=res.chatLogs.sort((a,b)=>{const dateA=Math.max(...a.lines.map(l=>new Date(l.timestamp).getTime())),dateB=Math.max(...b.lines.map(l=>new Date(l.timestamp).getTime()));return"desc"===sortOrder?dateB-dateA:dateA-dateB});setChatLogs(sortedChatLogs),setTotalItems(res.count||sortedChatLogs.length),setTotalPages(Math.ceil((res.count||sortedChatLogs.length)/8))}catch(err){setError(t("errorFetchingSession")||"Error loading chat history"),console.error("Error fetching chat logs:",err)}finally{setIsLoading(!1)}},[loginToken,memori.engineMemoriID,currentPage,sortOrder,apiUrl]);(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{open&&(setCurrentPage(1),setIndexPage(0))},[open]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{open&&(setCurrentPage(1),setIndexPage(0))},[sortOrder,dateRange,open]),(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{open&&currentPage>0&&fetchChatLogs(dateRange)},[currentPage,dateRange,fetchChatLogs,open]);(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>lodash_debounce__WEBPACK_IMPORTED_MODULE_8___default()(value=>setSearchText(value),300),[]);const paginatedChatLogs=chatLogs,handleResumeChat=async()=>{selectedChatLog&&(resumeSession(selectedChatLog),onClose())};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Drawer__WEBPACK_IMPORTED_MODULE_0__.A,{className:"memori-chat-history-drawer",open,onClose,title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--title-wrapper",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("span",{children:t("write_and_speak.chatHistory")||"Chat History"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--download-button-wrapper",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("span",{className:"memori-chat-history-drawer--download-button-wrapper--text",children:t("write_and_speak.downloadChat")||"Download chat"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.A,{primary:!0,shape:"circle",className:"memori-chat-history-drawer--download-button",title:t("download")||"Download chat",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_icons_Download__WEBPACK_IMPORTED_MODULE_11__.default,{}),onClick:()=>{const fileName=`${memori.name.replace(/\W+/g,"-")}-chat-${(new Date).toISOString().split("T")[0]}.txt`;downloadFile(textCurrentChat,fileName)}})]})]}),description:t("write_and_speak.chatHistoryDescription"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--content",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--toolbar",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--toolbar--actions",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Select__WEBPACK_IMPORTED_MODULE_13__.A,{options:[{label:t("all")||"All",value:"all"},{label:t("today")||"Today",value:"today"},{label:t("yesterday")||"Yesterday",value:"yesterday"},{label:t("last_7_days")||"Last 7 days",value:"last_7_days"},{label:t("last_30_days")||"Last 30 days",value:"last_30_days"}],value:t(dateRange)||"All",className:"memori-chat-history-drawer--toolbar--actions--select",onChange:value=>{setDateRange(value),setCurrentPage(1)}})})}),isLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--loading",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Spin__WEBPACK_IMPORTED_MODULE_9__.A,{spinning:!0,primary:!0,className:"memori-chat-history-drawer--loading--spinner"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("p",{className:"memori-chat-history-drawer--loading--text",children:t("write_and_speak.loadingChatHistory")||"Loading chat history..."})]}):error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--error",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("p",{children:error})}):chatLogs.length?0===chatLogs.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--no-results",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("p",{children:t("write_and_speak.noResultsFound",{searchText:searchText||""})||"No results found"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("ul",{className:"memori-chat-history-drawer--list",children:paginatedChatLogs.map(chatLog=>{const lastMessageDate=Math.max(...chatLog.lines.map(line=>new Date(line.timestamp).getTime()));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Card__WEBPACK_IMPORTED_MODULE_3__.A,{hoverable:!0,onClick:async()=>{selectedChatLog?.chatLogID!==chatLog.chatLogID?setSelectedChatLog(chatLog):setSelectedChatLog(null)},className:"memori-chat-history-drawer--card "+(selectedChatLog?.chatLogID===chatLog.chatLogID?"memori-chat-history-drawer--card--selected":""),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--card--header",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--card--header--content",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--card--header--icon-wrapper",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_icons_Message__WEBPACK_IMPORTED_MODULE_12__.default,{className:"memori-chat-history-drawer--card--header--icon"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--card--header--info",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--card--header--title-wrapper",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_7__.l.Title,{as:"h3",className:"memori-chat-history-drawer--card--header--title",children:calculateTitle(chatLog.lines)||"Chat-"+chatLog.chatLogID.substring(0,4)}),chatLog.boardOfExperts&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--card--header--badge",children:"BOE"})]})})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--card--header--meta",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("time",{className:"memori-chat-history-drawer--card--header--meta--time",dateTime:new Date(lastMessageDate).toISOString(),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("svg",{className:"memori-chat-history-drawer--card--header--meta--icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(timestamp=new Date(lastMessageDate).toISOString(),new Intl.DateTimeFormat(navigator.language,{dateStyle:"medium",timeStyle:"short"}).format(new Date(timestamp)))]}),chatLog.lines.some(line=>line.media&&line.media.filter(m=>"text/html"!==m.mimeType&&"text/plain"!==m.mimeType).length>0)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("span",{className:"memori-chat-history-drawer--card--header--meta--messages",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("svg",{className:"memori-chat-history-drawer--card--header--meta--icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),chatLog.lines.reduce((acc,line)=>acc+(line.media?.filter(m=>"text/html"!==m.mimeType&&"text/plain"!==m.mimeType).length||0),0)]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("span",{className:"memori-chat-history-drawer--card--header--meta--messages",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("svg",{className:"memori-chat-history-drawer--card--header--meta--icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),chatLog.lines.length]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--card--content--header",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.A,{className:"memori-chat-history-drawer--card--content--export-button",onClick:e=>((chatLog,e)=>{e.stopPropagation();const text=`${t("write_and_speak.conversationStartedLabel")} ${new Intl.DateTimeFormat(navigator.language,{dateStyle:"short",timeStyle:"short"}).format(new Date)}\n\n`.concat(chatLog.lines.map(line=>`${line.inbound?"YOU":memori.name}: ${line.text}`).join("\n"));downloadFile(text,`${memori.name.replace(/\W+/g,"-")}-chat-${chatLog.chatLogID.substring(0,4)}.txt`)})(chatLog,e),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--card--content--export-button--content",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_icons_Download__WEBPACK_IMPORTED_MODULE_11__.default,{className:"memori-chat-history-drawer--card--content--export-button--icon"})})})})]}),selectedChatLog?.chatLogID===chatLog.chatLogID&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--card--content",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--card--content--messages",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_Chat_Chat__WEBPACK_IMPORTED_MODULE_10__.A,{baseUrl,apiUrl,memoriTyping:!1,showTypingText:!1,showAIicon:!0,showTranslationOriginal:!1,showWhyThisAnswer:!1,showCopyButton:!1,showInputs:!1,history:chatLog.lines.map(line=>({text:line.text,contextVars:line.contextVars,media:line.media,fromUser:line.inbound,timestamp:line.timestamp})),memori,sessionID:sessionId,pushMessage:()=>{},simulateUserPrompt:()=>{},setSendOnEnter:()=>{},attachmentsMenuOpen:void 0,setAttachmentsMenuOpen:()=>{},userMessage:"",onChangeUserMessage:()=>{},sendMessage:()=>{},startListening:()=>{},stopListening:()=>{},resetTranscript:()=>{},listening:!1,setEnableFocusChatInput:()=>{},stopAudio:()=>{},isHistoryView:!0},`${chatLog.chatLogID}-${chatLog.lines.length}`)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:"memori-chat-history-drawer--card--content--actions",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.A,{className:"memori-chat-history-drawer--card--content--resume-button",primary:!0,onClick:handleResumeChat,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--card--content--resume-button--content",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_icons_Chat__WEBPACK_IMPORTED_MODULE_5__.default,{className:"memori-chat-history-drawer--card--content--resume-button--icon"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("span",{className:"memori-chat-history-drawer--card--content--resume-button--text",children:t("write_and_speak.resumeButton")||"Resume chat"})]})})})]})]})},chatLog.chatLogID);var timestamp})}),totalPages>1&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--pagination",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.A,{primary:!0,onClick:()=>{setCurrentPage(p=>Math.max(1,p-1))},disabled:1===currentPage,className:"memori-chat-history-drawer--pagination--button",children:t("previous")||"Previous"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("span",{className:"memori-chat-history-drawer--pagination--info",children:t("write_and_speak.page",{current:currentPage,total:totalPages})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_4__.A,{primary:!0,onClick:()=>{setCurrentPage(p=>Math.min(totalPages,p+1))},disabled:currentPage===totalPages,className:"memori-chat-history-drawer--pagination--button",children:t("next")||"Next"})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:"memori-chat-history-drawer--empty",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_icons_Chat__WEBPACK_IMPORTED_MODULE_5__.default,{className:"memori-chat-history-drawer--empty--icon"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("p",{className:"memori-chat-history-drawer--empty--text",children:t("write_and_speak.noChatHistoryAvailable")||"No chat history available"})]})]})})};ChatHistoryDrawer.displayName="ChatHistoryDrawer";const __WEBPACK_DEFAULT_EXPORT__=ChatHistoryDrawer;try{ChatHistory.displayName="ChatHistory",ChatHistory.__docgenInfo={description:"",displayName:"ChatHistory",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},apiClient:{defaultValue:null,description:"",name:"apiClient",required:!0,type:{name:'{ constants: { BACKEND_URL: string; ENGINE_URL: string; allowedMediaTypes: string[]; anonTag: "👤"; }; asset: { getResourceUrl: ({ type, resourceURI, sessionID, baseURL, }: ResourceURLParams) => string; }; getAllFunctions: (sessionId: string) => Promise<...>; ... 137 more ...; backend: { ...; }; }'}},sessionId:{defaultValue:null,description:"",name:"sessionId",required:!0,type:{name:"string"}},memori:{defaultValue:null,description:"",name:"memori",required:!0,type:{name:"Memori"}},resumeSession:{defaultValue:null,description:"",name:"resumeSession",required:!0,type:{name:"(chatLog: ChatLog) => void"}},baseUrl:{defaultValue:null,description:"",name:"baseUrl",required:!0,type:{name:"string"}},apiUrl:{defaultValue:null,description:"",name:"apiUrl",required:!0,type:{name:"string"}},history:{defaultValue:null,description:"",name:"history",required:!0,type:{name:"Message[]"}},loginToken:{defaultValue:null,description:"",name:"loginToken",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ChatHistoryDrawer/ChatHistory.tsx#ChatHistory"]={docgenInfo:ChatHistory.__docgenInfo,name:"ChatHistory",path:"src/components/ChatHistoryDrawer/ChatHistory.tsx#ChatHistory"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Chat.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ChatRound=({className,title})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},focusable:"false",width:"24",height:"24",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",className,"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 13.5997 2.37562 15.1116 3.04346 16.4525C3.22094 16.8088 3.28001 17.2161 3.17712 17.6006L2.58151 19.8267C2.32295 20.793 3.20701 21.677 4.17335 21.4185L6.39939 20.8229C6.78393 20.72 7.19121 20.7791 7.54753 20.9565C8.88837 21.6244 10.4003 22 12 22Z",stroke:"currentColor","stroke-width":"1.5"})});ChatRound.displayName="ChatRound";const __WEBPACK_DEFAULT_EXPORT__=ChatRound;try{Chat.displayName="Chat",Chat.__docgenInfo={description:"",displayName:"Chat",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Chat.tsx#Chat"]={docgenInfo:Chat.__docgenInfo,name:"Chat",path:"src/components/icons/Chat.tsx#Chat"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Select.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_headlessui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@headlessui/react/dist/components/listbox/listbox.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),_icons_SelectIcon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/icons/SelectIcon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Select=({className,value,name,displayValue,options,onChange,disabled=!1,label,placeholder})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("memori-select",className),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.W,{value,onChange:value=>{onChange(value)},disabled,name,children:[label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.W.Label,{className:"memori-select--label",children:[label,":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.W.Button,{"aria-label":label,className:"memori-select--button",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("memori-select--value",{"memori-select--value-placeholder":!value}),children:value?displayValue||value:placeholder}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{className:"memori-select--icon",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_icons_SelectIcon__WEBPACK_IMPORTED_MODULE_4__.default,{})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_3__.e,{as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.W.Options,{className:"memori-select--options",children:options.map(opt=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.W.Option,{value:opt.value,className:"memori-select--option",children:opt.label},opt.value))})})]})});Select.displayName="Select";const __WEBPACK_DEFAULT_EXPORT__=Select;try{Select.displayName="Select",Select.__docgenInfo={description:"",displayName:"Select",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: any) => void"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"{ value: any; label: any; }[]"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Select.tsx#Select"]={docgenInfo:Select.__docgenInfo,name:"Select",path:"src/components/ui/Select.tsx#Select"})}catch(__react_docgen_typescript_loader_error){}}}]);