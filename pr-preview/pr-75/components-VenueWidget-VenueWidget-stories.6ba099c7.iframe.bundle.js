"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[4019],{"./node_modules/react-hot-toast/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l$:()=>Oe,Ay:()=>Vt});var react=__webpack_require__("./node_modules/react/index.js");let e={data:""},t=t=>"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||e,l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a=/\/\*[^]*?\*\/|  +/g,n=/\n+/g,o=(e,t)=>{let r="",l="",a="";for(let n in e){let c=e[n];"@"==n[0]?"i"==n[1]?r=n+" "+c+";":l+="f"==n[1]?o(c,n):n+"{"+o(c,"k"==n[1]?"":t)+"}":"object"==typeof c?l+=o(c,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):n):null!=c&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=o.p?o.p(n,c):n+":"+c+";")}return r+(t&&a?t+"{"+a+"}":a)+l},c={},s=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+s(e[r]);return t}return e},i=(e,t,r,i,p)=>{let u=s(e),d=c[u]||(c[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(u));if(!c[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(a,""));)t[4]?o.shift():t[3]?(r=t[3].replace(n," ").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(n," ").trim();return o[0]})(e);c[d]=o(p?{["@keyframes "+d]:t}:t,r?"":"."+d)}let f=r&&c.g?c.g:null;return r&&(c.g=c[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[d],t,i,f),d};function u(e){let r=this||{},l=e.call?e(r.p):e;return i(l.unshift?l.raw?((e,t,r)=>e.reduce((e,l,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?"."+t:e&&"object"==typeof e?e.props?"":o(e,""):!1===e?"":e}return e+l+(null==n?"":n)},""))(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}u.bind({g:1});let d,f,g,h=u.bind({k:1});function j(e,t){let r=this||{};return function(){let l=arguments;function a(n,o){let c=Object.assign({},n),s=c.className||a.className;r.p=Object.assign({theme:f&&f()},c),r.o=/ *go\d+/.test(s),c.className=u.apply(r,l)+(s?" "+s:""),t&&(c.ref=o);let i=e;return e[0]&&(i=c.as||e,delete c.as),g&&i[0]&&g(c),d(i,c)}return t?t(a):a}}var dist_f=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,F=(()=>{let e=0;return()=>(++e).toString()})(),A=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),U=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return U(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||void 0===s?{...o,dismissed:!0,visible:!1}:o)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},P=[],y={toasts:[],pausedAt:void 0},dist_u=e=>{y=U(y,e),P.forEach(t=>{t(y)})},q={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},x=e=>(t,r)=>{let s=((e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||F()}))(t,e,r);return dist_u({type:2,toast:s}),s.id},dist_c=(e,t)=>x("blank")(e,t);dist_c.error=x("error"),dist_c.success=x("success"),dist_c.loading=x("loading"),dist_c.custom=x("custom"),dist_c.dismiss=e=>{dist_u({type:3,toastId:e})},dist_c.remove=e=>dist_u({type:4,toastId:e}),dist_c.promise=(e,t,r)=>{let s=dist_c.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then(a=>{let o=t.success?dist_f(t.success,a):void 0;return o?dist_c.success(o,{id:s,...r,...null==r?void 0:r.success}):dist_c.dismiss(s),a}).catch(a=>{let o=t.error?dist_f(t.error,a):void 0;o?dist_c.error(o,{id:s,...r,...null==r?void 0:r.error}):dist_c.dismiss(s)}),e};var K=(e,t)=>{dist_u({type:1,toast:{id:e,height:t}})},X=()=>{dist_u({type:5,time:Date.now()})},dist_b=new Map,O=e=>{let{toasts:t,pausedAt:r}=((e={})=>{let[t,r]=(0,react.useState)(y),s=(0,react.useRef)(y);(0,react.useEffect)(()=>(s.current!==y&&r(y),P.push(r),()=>{let o=P.indexOf(r);o>-1&&P.splice(o,1)}),[]);let a=t.toasts.map(o=>{var n,i,p;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||(null==(n=e[o.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:o.duration||(null==(i=e[o.type])?void 0:i.duration)||(null==e?void 0:e.duration)||q[o.type],style:{...e.style,...null==(p=e[o.type])?void 0:p.style,...o.style}}});return{...t,toasts:a}})(e);(0,react.useEffect)(()=>{if(r)return;let o=Date.now(),n=t.map(i=>{if(i.duration===1/0)return;let p=(i.duration||0)+i.pauseDuration-(o-i.createdAt);if(!(p<0))return setTimeout(()=>dist_c.dismiss(i.id),p);i.visible&&dist_c.dismiss(i.id)});return()=>{n.forEach(i=>i&&clearTimeout(i))}},[t,r]);let s=(0,react.useCallback)(()=>{r&&dist_u({type:6,time:Date.now()})},[r]),a=(0,react.useCallback)((o,n)=>{let{reverseOrder:i=!1,gutter:p=8,defaultPosition:d}=n||{},h=t.filter(m=>(m.position||d)===(o.position||d)&&m.height),v=h.findIndex(m=>m.id===o.id),S=h.filter((m,E)=>E<v&&m.visible).length;return h.filter(m=>m.visible).slice(...i?[S+1]:[0,S]).reduce((m,E)=>m+(E.height||0)+p,0)},[t]);return(0,react.useEffect)(()=>{t.forEach(o=>{if(o.dismissed)((e,t=1e3)=>{if(dist_b.has(e))return;let r=setTimeout(()=>{dist_b.delete(e),dist_u({type:4,toastId:e})},t);dist_b.set(e,r)})(o.id,o.removeDelay);else{let n=dist_b.get(o.id);n&&(clearTimeout(n),dist_b.delete(o.id))}})},[t]),{toasts:t,handlers:{updateHeight:K,startPause:X,endPause:s,calculateOffset:a}}},oe=h`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,re=h`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,se=h`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,k=j("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${re} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${se} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ne=h`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,V=j("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${ne} 1s linear infinite;
`,pe=h`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,de=h`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_=j("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${de} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ue=j("div")`
  position: absolute;
`,le=j("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,fe=h`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Te=j("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${fe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,M=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return void 0!==t?"string"==typeof t?react.createElement(Te,null,t):t:"blank"===r?null:react.createElement(le,null,react.createElement(V,{...s}),"loading"!==r&&react.createElement(ue,null,"error"===r?react.createElement(k,{...s}):react.createElement(_,{...s})))},ye=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,ge=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,be=j("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Se=j("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,C=react.memo(({toast:e,position:t,style:r,children:s})=>{let a=e.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,o]=A()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ye(s),ge(s)];return{animation:t?`${h(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${h(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},o=react.createElement(M,{toast:e}),n=react.createElement(Se,{...e.ariaProps},dist_f(e.message,e));return react.createElement(be,{className:e.className,style:{...a,...r,...e.style}},"function"==typeof s?s({icon:o,message:n}):react.createElement(react.Fragment,null,o,n))});!function m(e,t,r,l){o.p=t,d=e,f=r,g=l}(react.createElement);var ve=({id:e,className:t,style:r,onHeightUpdate:s,children:a})=>{let o=react.useCallback(n=>{if(n){let i=()=>{let p=n.getBoundingClientRect().height;s(e,p)};i(),new MutationObserver(i).observe(n,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return react.createElement("div",{ref:o,className:t,style:r},a)},De=u`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Oe=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:s,children:a,containerStyle:o,containerClassName:n})=>{let{toasts:i,handlers:p}=O(r);return react.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:n,onMouseEnter:p.startPause,onMouseLeave:p.endPause},i.map(d=>{let h=d.position||t,S=((e,t)=>{let r=e.includes("top"),s=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:A()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...s,...a}})(h,p.calculateOffset(d,{reverseOrder:e,gutter:s,defaultPosition:t}));return react.createElement(ve,{id:d.id,key:d.id,onHeightUpdate:p.updateHeight,className:d.visible?De:"",style:S},"custom"===d.type?dist_f(d.message,d):a?a(d):react.createElement(C,{toast:d,position:h}))}))},Vt=dist_c},"./src/components/VenueWidget/VenueWidget.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithUncertaintyUI:()=>WithUncertaintyUI,WithVenueExactLocartion:()=>WithVenueExactLocartion,WithVenueLargeUncertainty:()=>WithVenueLargeUncertainty,WithVenueUncertainty:()=>WithVenueUncertainty,WithoutGpsButton:()=>WithoutGpsButton,__namedExportsOrder:()=>__namedExportsOrder,default:()=>VenueWidget_stories});var react=__webpack_require__("./node_modules/react/index.js"),I18nWrapper=__webpack_require__("./src/I18nWrapper.tsx"),VenueWidget=__webpack_require__("./src/components/VenueWidget/VenueWidget.tsx"),data=__webpack_require__("./src/mocks/data.ts"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),VenueWidget_VenueWidget=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/VenueWidget/VenueWidget.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(VenueWidget_VenueWidget.A,options);VenueWidget_VenueWidget.A&&VenueWidget_VenueWidget.A.locals&&VenueWidget_VenueWidget.A.locals;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const VenueWidget_stories={title:"Widget/VenueWidget",component:VenueWidget.A,parameters:{controls:{expanded:!0}}},Template=args=>{const[venue,setVenue]=react.useState(args.venue);return(0,jsx_runtime.jsx)(I18nWrapper.A,{children:(0,jsx_runtime.jsx)(VenueWidget.A,{...args,venue,setVenue})})};Template.displayName="Template";const Default=Template.bind({});Default.args={};const WithVenueExactLocartion=Template.bind({});WithVenueExactLocartion.args={venue:{...data.gD,uncertainty:0}};const WithVenueUncertainty=Template.bind({});WithVenueUncertainty.args={venue:{...data.gD,uncertainty:2}};const WithVenueLargeUncertainty=Template.bind({});WithVenueLargeUncertainty.args={venue:{...data.gD,uncertainty:20}};const WithUncertaintyUI=Template.bind({});WithUncertaintyUI.args={venue:data.gD,showUncertainty:!0};const WithoutGpsButton=Template.bind({});WithoutGpsButton.args={venue:data.gD,showGpsButton:!1},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  const [venue, setVenue] = React.useState(args.venue);\n  return <I18nWrapper>\n      <VenueWidget {...args} venue={venue} setVenue={setVenue} />\n    </I18nWrapper>;\n}",...Default.parameters?.docs?.source}}},WithVenueExactLocartion.parameters={...WithVenueExactLocartion.parameters,docs:{...WithVenueExactLocartion.parameters?.docs,source:{originalSource:"args => {\n  const [venue, setVenue] = React.useState(args.venue);\n  return <I18nWrapper>\n      <VenueWidget {...args} venue={venue} setVenue={setVenue} />\n    </I18nWrapper>;\n}",...WithVenueExactLocartion.parameters?.docs?.source}}},WithVenueUncertainty.parameters={...WithVenueUncertainty.parameters,docs:{...WithVenueUncertainty.parameters?.docs,source:{originalSource:"args => {\n  const [venue, setVenue] = React.useState(args.venue);\n  return <I18nWrapper>\n      <VenueWidget {...args} venue={venue} setVenue={setVenue} />\n    </I18nWrapper>;\n}",...WithVenueUncertainty.parameters?.docs?.source}}},WithVenueLargeUncertainty.parameters={...WithVenueLargeUncertainty.parameters,docs:{...WithVenueLargeUncertainty.parameters?.docs,source:{originalSource:"args => {\n  const [venue, setVenue] = React.useState(args.venue);\n  return <I18nWrapper>\n      <VenueWidget {...args} venue={venue} setVenue={setVenue} />\n    </I18nWrapper>;\n}",...WithVenueLargeUncertainty.parameters?.docs?.source}}},WithUncertaintyUI.parameters={...WithUncertaintyUI.parameters,docs:{...WithUncertaintyUI.parameters?.docs,source:{originalSource:"args => {\n  const [venue, setVenue] = React.useState(args.venue);\n  return <I18nWrapper>\n      <VenueWidget {...args} venue={venue} setVenue={setVenue} />\n    </I18nWrapper>;\n}",...WithUncertaintyUI.parameters?.docs?.source}}},WithoutGpsButton.parameters={...WithoutGpsButton.parameters,docs:{...WithoutGpsButton.parameters?.docs,source:{originalSource:"args => {\n  const [venue, setVenue] = React.useState(args.venue);\n  return <I18nWrapper>\n      <VenueWidget {...args} venue={venue} setVenue={setVenue} />\n    </I18nWrapper>;\n}",...WithoutGpsButton.parameters?.docs?.source}}};const __namedExportsOrder=["Default","WithVenueExactLocartion","WithVenueUncertainty","WithVenueLargeUncertainty","WithUncertaintyUI","WithoutGpsButton"]},"./src/components/VenueWidget/VenueWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>VenueWidget_VenueWidget});var react=__webpack_require__("./node_modules/react/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js");const DEGREES_TO_RADIANS=Math.PI/180,getUncertaintyByViewport=bouningBox=>{const[minLat,maxLat,minLng,maxLng]="string"==typeof bouningBox[0]?bouningBox.map(parseFloat):bouningBox,phi1=minLat*DEGREES_TO_RADIANS,lambda1=minLng*DEGREES_TO_RADIANS,phi2=maxLat*DEGREES_TO_RADIANS,lambda2=maxLng*DEGREES_TO_RADIANS;return 6367.5*(2*Math.asin(Math.sqrt(Math.sin((phi2-phi1)/2)*Math.sin((phi2-phi1)/2)+Math.cos(phi1)*Math.cos(phi2)*Math.sin((lambda2-lambda1)/2)*Math.sin((lambda2-lambda1)/2))))};var hooks=__webpack_require__("./node_modules/react-leaflet/lib/hooks.js"),MapContainer=__webpack_require__("./node_modules/react-leaflet/lib/MapContainer.js"),TileLayer=__webpack_require__("./node_modules/react-leaflet/lib/TileLayer.js"),Marker=__webpack_require__("./node_modules/react-leaflet/lib/Marker.js"),Popup=__webpack_require__("./node_modules/react-leaflet/lib/Popup.js"),lib_context=__webpack_require__("./node_modules/@react-leaflet/core/lib/context.js"),leaflet_src=__webpack_require__("./node_modules/leaflet/dist/leaflet-src.js"),leaflet_src_default=__webpack_require__.n(leaflet_src),dist=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),Button=__webpack_require__("./src/components/ui/Button.tsx"),utils=__webpack_require__("./src/helpers/utils.ts"),combobox=__webpack_require__("./node_modules/@headlessui/react/dist/components/combobox/combobox.js"),transition=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Spin=__webpack_require__("./src/components/ui/Spin.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Circle=({center,size})=>{const context=(0,lib_context.U$)();return(0,react.useEffect)(()=>{const square=new(leaflet_src_default().Circle)(center,size),container=context.layerContainer||context.map;return container.addLayer(square),()=>{container.removeLayer(square)}}),null},CenterAndZoomUpdater=({center,uncertainty})=>{const[init,setInit]=(0,react.useState)(!1),map=(0,hooks.ko)(),updateView=(0,react.useCallback)(()=>{let zoom=void 0!==uncertainty?Math.round(Math.log2(1e7/uncertainty)):map.getZoom();map.setView(center,zoom)},[center,uncertainty,map]);return(0,react.useEffect)(()=>{init||(updateView(),setInit(!0))},[]),(0,react.useEffect)(()=>{updateView()},[center,uncertainty,updateView]),null};let DefaultIcon=leaflet_src_default().icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12.5,20.5],shadowAnchor:[12.5,20.5]});leaflet_src_default().Marker.prototype.options.icon=DefaultIcon;const getPlaceName=venue=>{let placeName="Position";return venue?.address?placeName=[venue.address.village||venue.address.suburb,venue.address.town||venue.address.city||venue.address.county||venue.address.state,venue.address.country].filter(Boolean).filter((v,i,a)=>a.indexOf(v)===i).join(", "):venue?.display_name&&(placeName=venue.display_name),placeName},VenueWidget=({venue,setVenue,showUncertainty=!1,showGpsButton=!0,saveAndClose})=>{const{t}=(0,useTranslation.B)(),[isClient,setIsClient]=(0,react.useState)(!1),[updatingPosition,setUpdatingPosition]=(0,react.useState)(!1),[fetching,setFetching]=(0,react.useState)(!1),[query,setQuery]=(0,react.useState)(""),[suggestions,setSuggestions]=(0,react.useState)([]),handleSearch=(0,utils.xD)(async value=>{setFetching(!0);try{let response=await fetch(`https://nominatim.openstreetmap.org/search?q=${value}&format=jsonv2&limit=5&addressdetails=1`),data=await response.json();setSuggestions(data)}catch(error){console.error(error)}finally{setFetching(!1)}},1e3);return(0,react.useEffect)(()=>{setIsClient(!0)},[]),(0,react.useEffect)(()=>{const leafletCSS=document.createElement("link");return leafletCSS.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",leafletCSS.rel="stylesheet",leafletCSS.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",leafletCSS.crossOrigin="",document.head.appendChild(leafletCSS),()=>{document.head.removeChild(leafletCSS)}},[]),(0,jsx_runtime.jsxs)("fieldset",{className:"memori--venue-widget",children:[(0,jsx_runtime.jsx)("legend",{className:"sr-only",children:"Venue"}),(0,jsx_runtime.jsxs)("div",{className:"memori--venue-widget__form-item",children:[(0,jsx_runtime.jsx)("div",{className:"memori--venue-widget__geosuggest",children:updatingPosition?(0,jsx_runtime.jsx)("p",{children:t("write_and_speak.updatingPosition")}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"memori--venue-widget-search",children:(0,jsx_runtime.jsxs)(combobox.G,{value:venue?.latitude&&venue?.longitude?{place_id:0,lat:venue?.latitude,lon:venue?.longitude,display_name:venue?.placeName}:void 0,onChange:value=>{console.log(value);const placeName=getPlaceName(value);setVenue({latitude:value.lat,longitude:value.lon,placeName,uncertainty:value?.boundingbox?getUncertaintyByViewport(value.boundingbox):2})},children:[(0,jsx_runtime.jsx)(combobox.G.Input,{className:"memori--venue-widget-search--input",displayValue:i=>i?getPlaceName(i):"",placeholder:t("searchVenue"),onChange:e=>{return value=e.target.value,setQuery(value),void handleSearch(value);var value}}),(fetching||suggestions.length>0||0===suggestions.length&&""!==query)&&(0,jsx_runtime.jsx)(transition.e,{as:react.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,jsx_runtime.jsx)(combobox.G.Options,{className:"memori--venue-widget-search--options",children:fetching?(0,jsx_runtime.jsx)(Spin.A,{spinning:!0,children:(0,jsx_runtime.jsxs)("div",{className:"memori--venue-widget-search--option memori--venue-widget-search--option-centered",children:[t("loading"),"..."]})}):0===suggestions.length&&""!==query?(0,jsx_runtime.jsx)("div",{className:"memori--venue-widget-search--option memori--venue-widget-search--option-centered",children:t("nothingFound")}):suggestions?.map(s=>(0,jsx_runtime.jsx)(combobox.G.Option,{as:react.Fragment,value:s,children:({active,selected})=>(0,jsx_runtime.jsx)("li",{className:classnames_default()("memori--venue-widget-search--option",{"memori--venue-widget-search--option-active":active,"memori--venue-widget-search--option-selected":selected}),children:s.display_name})},s.place_id))})})]})}),showGpsButton&&(0,jsx_runtime.jsx)(Button.A,{className:"memori--venue-widget__gps-button",primary:!0,loading:updatingPosition,onClick:()=>{setUpdatingPosition(!0),(async()=>{setUpdatingPosition(!0),navigator.geolocation.getCurrentPosition(async coords=>{let venue={latitude:coords.coords.latitude,longitude:coords.coords.longitude,placeName:"Position",uncertainty:coords.coords.accuracy/1e3};try{const result=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${coords.coords.latitude}&lon=${coords.coords.longitude}&format=jsonv2&addressdetails=1`),response=await result.json(),placeName=getPlaceName(response);venue={latitude:coords.coords.latitude,longitude:coords.coords.longitude,placeName,uncertainty:coords.coords.accuracy/1e3},setVenue(venue)}catch(e){let err=e;console.error("[POSITION ERROR]",err),err?.message&&dist.Ay.error(err.message),setVenue(venue)}finally{saveAndClose&&saveAndClose(venue)}setUpdatingPosition(!1)},err=>{console.error("[POSITION ERROR]",err),dist.Ay.error(err.message),setUpdatingPosition(!1)})})()},children:t("write_and_speak.useMyPosition")})]})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Button.A,{outlined:!0,className:"memori--venue-widget__no-location-button",onClick:()=>{let venue={latitude:0,longitude:0,placeName:"Position",uncertainty:0};setVenue(venue),saveAndClose&&saveAndClose(venue)},children:t("write_and_speak.dontWantToProvidePosition")})}),showUncertainty&&(0,jsx_runtime.jsxs)("label",{className:"memori--venue-widget__select-label",children:[(0,jsx_runtime.jsxs)("span",{children:[t("uncertain"),": "]}),(0,jsx_runtime.jsxs)("select",{className:"memori-select--button memori--venue-widget__uncertainty",value:parseFloat((venue?.uncertainty??0).toFixed(2)),disabled:!(venue&&venue.placeName&&venue.latitude&&venue.longitude),onChange:e=>{setVenue({...venue,uncertainty:parseFloat(e.target.value)})},children:[venue?.uncertainty&&![0,1,2,5,10,20,50,100].includes(venue.uncertainty)&&(0,jsx_runtime.jsxs)("option",{value:venue.uncertainty,children:[venue.uncertainty," Km"]}),(0,jsx_runtime.jsx)("option",{value:0,children:t("exactPosition")}),(0,jsx_runtime.jsx)("option",{value:1,children:"1 km"}),(0,jsx_runtime.jsx)("option",{value:2,children:"2 km"}),(0,jsx_runtime.jsx)("option",{value:5,children:"5 km"}),(0,jsx_runtime.jsx)("option",{value:10,children:"10 km"}),(0,jsx_runtime.jsx)("option",{value:20,children:"20 km"}),(0,jsx_runtime.jsx)("option",{value:50,children:"50 km"}),(0,jsx_runtime.jsx)("option",{value:100,children:"100 km"})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"memori--venue-widget__form-item",children:[venue?.placeName&&"Position"!==venue.placeName&&(0,jsx_runtime.jsxs)("p",{className:"memori--venue--widget__place-name",children:[(0,jsx_runtime.jsx)("strong",{children:t("venue")}),": ",venue.placeName]}),(0,jsx_runtime.jsx)("div",{className:"memori--venue-widget__map",children:isClient&&(0,jsx_runtime.jsxs)(MapContainer.W,{className:"memori--venue-widget__map",center:venue?.latitude&&venue?.longitude?[venue.latitude,venue.longitude]:[44.66579,11.48823],zoom:13,scrollWheelZoom:!0,children:[(0,jsx_runtime.jsx)(TileLayer.e,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,jsx_runtime.jsx)(CenterAndZoomUpdater,{center:venue?.latitude&&venue?.longitude?[venue.latitude,venue.longitude]:[44.66579,11.48823],uncertainty:1e3*(venue?.uncertainty??0)}),venue?.latitude&&venue?.longitude&&(0,jsx_runtime.jsx)(Marker.p,{position:[venue.latitude,venue.longitude],icon:DefaultIcon,children:(0,jsx_runtime.jsx)(Popup.z,{children:venue.placeName??""})}),venue?.latitude&&venue?.longitude&&void 0!==venue?.uncertainty&&(0,jsx_runtime.jsx)(Circle,{center:[venue.latitude,venue.longitude],size:1e3*venue.uncertainty})]})})]})]})};VenueWidget.displayName="VenueWidget";const VenueWidget_VenueWidget=VenueWidget;try{VenueWidget.displayName="VenueWidget",VenueWidget.__docgenInfo={description:"",displayName:"VenueWidget",props:{venue:{defaultValue:null,description:"",name:"venue",required:!1,type:{name:"Venue"}},setVenue:{defaultValue:null,description:"",name:"setVenue",required:!0,type:{name:"(venue: Venue) => void"}},showUncertainty:{defaultValue:{value:"false"},description:"",name:"showUncertainty",required:!1,type:{name:"boolean"}},showGpsButton:{defaultValue:{value:"true"},description:"",name:"showGpsButton",required:!1,type:{name:"boolean"}},saveAndClose:{defaultValue:null,description:"",name:"saveAndClose",required:!1,type:{name:"((venue: Venue) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VenueWidget/VenueWidget.tsx#VenueWidget"]={docgenInfo:VenueWidget.__docgenInfo,name:"VenueWidget",path:"src/components/VenueWidget/VenueWidget.tsx#VenueWidget"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Spin.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_icons_Loading__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/icons/Loading.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Spin=({spinning=!1,primary=!1,className,children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("memori-spin",className,{"memori-spin--spinning":spinning,"memori-spin--primary":primary}),children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"memori-spin--spinner",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_icons_Loading__WEBPACK_IMPORTED_MODULE_2__.default,{loading:!0})})]});Spin.displayName="Spin";const __WEBPACK_DEFAULT_EXPORT__=Spin;try{Spin.displayName="Spin",Spin.__docgenInfo={description:"",displayName:"Spin",props:{spinning:{defaultValue:{value:"false"},description:"",name:"spinning",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},primary:{defaultValue:{value:"false"},description:"",name:"primary",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Spin.tsx#Spin"]={docgenInfo:Spin.__docgenInfo,name:"Spin",path:"src/components/ui/Spin.tsx#Spin"})}catch(__react_docgen_typescript_loader_error){}},"./src/helpers/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DN:()=>correctMaterials,GZ:()=>isSkinnedMesh,I2:()=>isSafariIOS,K1:()=>hasTouchscreen,KW:()=>usernameRegEx,Lr:()=>mailRegEx,N8:()=>safeParseJSON,TG:()=>cleanUrl,Vx:()=>stripDuplicates,Zn:()=>escapeHTML,_e:()=>stripHTML,eA:()=>stripMarkdown,f9:()=>stripOutputTags,gI:()=>stripReasoningTags,lA:()=>installMathJax,nr:()=>isSafari,o6:()=>stripEmojis,pF:()=>pwdRegEx,xD:()=>useDebounceFn});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),three__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/three/build/three.module.js");const hasTouchscreen=()=>{let hasTouchScreen=!1;if("undefined"==typeof window||"undefined"==typeof navigator)return hasTouchScreen;if("maxTouchPoints"in navigator)hasTouchScreen=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)hasTouchScreen=navigator.msMaxTouchPoints>0;else{const mQ=window&&"matchMedia"in window&&matchMedia("(pointer:coarse)");if(mQ&&"(pointer:coarse)"===mQ.media)hasTouchScreen=!!mQ.matches;else if("orientation"in window)hasTouchScreen=!0;else{var UA=navigator?.userAgent;hasTouchScreen=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(UA)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(UA)}}return hasTouchScreen},isSafari=()=>{if("undefined"==typeof navigator)return!1;const userAgent=navigator.userAgent,isSafariUA=userAgent.includes("Safari")&&!userAgent.includes("Chrome"),isWebKit="WebKit"in window&&!("Chrome"in window);return isSafariUA||isWebKit},isSafariIOS=()=>{if("undefined"==typeof navigator)return!1;const userAgent=navigator.userAgent;return userAgent.includes("Safari")&&!userAgent.includes("Chrome")&&/iPad|iPhone|iPod/.test(userAgent)},pwdRegEx=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$_:;|,~+=\{\}\[\]%^&*-]).{8,}$/,mailRegEx=/^\w+([.-]?[+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/,usernameRegEx=/^(?!.*\.\.)(?!.*\.$)[^\W][\w.+-]{2,32}$/;function useDebounceFn(fn,delay){const timeoutId=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),originalFn=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>(originalFn.current=fn,()=>{originalFn.current=null}),[fn]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>()=>{clearTimeout(timeoutId.current)},[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>(...args)=>{clearTimeout(timeoutId.current),timeoutId.current=window.setTimeout(()=>{originalFn.current&&originalFn.current(...args)},delay)},[delay])}const stripDuplicates=text=>text.slice(0,text.length/2).trim().toLowerCase()===text.slice(text.length/2+1).trim().toLowerCase()?text.slice(0,text.length/2):text,stripEmojis=text=>text.replaceAll(/[^\p{L}\p{N}\p{P}\p{Z}^$\n]/gu,"").trim(),stripMarkdown=text=>text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=text.replaceAll(/```*?```/g,"")).replaceAll(/```[\s\S]*?```/g,"")).replaceAll(/`[^`]*`/g,"")).replaceAll(/!\[[^\]]*\]\([^)]*\)/g,"")).replaceAll(/\[([^\]]*)\]\([^)]*\)/g,"$1")).replaceAll(/^> /gm,"")).replaceAll(/^#+ /gm,"")).replaceAll(/[*_]/g,"")).replaceAll(/---/g,"")).replaceAll(/~~/g,"")).replaceAll(/^\s*[-*+] /gm,"")).replaceAll(/^\s*\d+\.\s+/gm,"")).replaceAll(/^\|.*\|$/gm,"")).replaceAll(/\$\$[\s\S]*?\$\$/g,"")).replaceAll(/\$[\s\S]*?\$/g,"")).replaceAll(/\\\([\s\S]*?\\\)/g,"")).replaceAll(/\\\[[\s\S]*?\\\]/g,"")).replaceAll(/\s+/g," ").trim(),stripOutputTags=text=>{const outputTagRegex=/<output.*?<\/output>/gs;if(!outputTagRegex.test(text))return text;const strippedText=text.replace(outputTagRegex,"");return stripOutputTags(strippedText)},stripReasoningTags=text=>{const reasoningTagRegex=/<think.*?<\/think>/gs;if(!reasoningTagRegex.test(text))return text;const strippedText=text.replace(reasoningTagRegex,"");return stripOutputTags(strippedText)},stripHTML=text=>{const el=document.createElement("div");return el.innerHTML=text,el.textContent||""},escapeHTML=text=>{const el=document.createElement("textarea");return el.textContent=text,el.innerHTML};function cleanUrl(href){try{href=encodeURI(href).replace(/%25/g,"%")}catch(e){return null}return href}const mathJaxConfig={startup:{elements:[".memori-chat--bubble-content"]},options:{processHtmlClass:"memori-chat--bubble-content"},tex:{inlineMath:[["$","$"],["\\$","\\$"]],displayMath:[["$$","$$"]],processEscapes:!0},asciimath:{fixphi:!0,displaystyle:!0,decimalsign:"."},skipStartupTypeset:!0,chtml:{displayAlign:"left"},svg:{fontCache:"global"}},installMathJax=()=>{window.MathJax=mathJaxConfig,(()=>{const script=document.createElement("script");script.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",script.async=!0,script.id="mathjax-script",document.head.appendChild(script)})()};function correctMaterials(materials){Object.values(materials).forEach(material=>{material instanceof three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial&&(material.roughness=.8,material.metalness=.1,material.shadowSide=2,material.map&&(material.map.anisotropy=16))})}function isSkinnedMesh(object){return!0===object.isSkinnedMesh}const safeParseJSON=(jsonString,fallbackString=!1)=>{try{return JSON.parse(jsonString)}catch(error){return fallbackString?jsonString:null}}}}]);
//# sourceMappingURL=components-VenueWidget-VenueWidget-stories.6ba099c7.iframe.bundle.js.map