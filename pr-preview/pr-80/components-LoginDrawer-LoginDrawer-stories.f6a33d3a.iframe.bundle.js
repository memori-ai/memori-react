"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[7467],{"./src/components/LoginDrawer/LoginDrawer.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ChangePassword:()=>ChangePassword,Default:()=>Default,LoggedIn:()=>LoggedIn,NeedsMissingData:()=>NeedsMissingData,OtpForm:()=>OtpForm,OtpFormLoading:()=>OtpFormLoading,OtpFormWithError:()=>OtpFormWithError,OtpFormWithTimer:()=>OtpFormWithTimer,Signup:()=>Signup,SignupWaitingForOtp:()=>SignupWaitingForOtp,__namedExportsOrder:()=>__namedExportsOrder,default:()=>LoginDrawer_stories});__webpack_require__("./node_modules/react/index.js");var I18nWrapper=__webpack_require__("./src/I18nWrapper.tsx"),LoginDrawer=__webpack_require__("./src/components/LoginDrawer/LoginDrawer.tsx"),data=__webpack_require__("./src/mocks/data.ts"),esm=__webpack_require__("./node_modules/@memori.ai/memori-api-client/esm/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),LoginDrawer_LoginDrawer=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/components/LoginDrawer/LoginDrawer.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(LoginDrawer_LoginDrawer.A,options);LoginDrawer_LoginDrawer.A&&LoginDrawer_LoginDrawer.A.locals&&LoginDrawer_LoginDrawer.A.locals;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const LoginDrawer_stories={title:"Widget/LoginDrawer",component:LoginDrawer.A,argTypes:{open:{control:{type:"boolean"}}},parameters:{controls:{expanded:!0}}},Template=args=>(0,jsx_runtime.jsx)(I18nWrapper.A,{children:(0,jsx_runtime.jsx)(LoginDrawer.A,{...args,onClose:()=>{},onLogin:console.log,onLogout:()=>{},tenant:data.j5,apiClient:(0,esm.A)()})});Template.displayName="Template";const Default=Template.bind({});Default.args={open:!0};const NeedsMissingData=Template.bind({});NeedsMissingData.args={open:!0,__TEST__needMissingData:!0};const Signup=Template.bind({});Signup.args={open:!0,__TEST__signup:!0};const SignupWaitingForOtp=Template.bind({});SignupWaitingForOtp.args={open:!0,__TEST__signup:!0};const ChangePassword=Template.bind({});ChangePassword.args={open:!0,__TEST__changePwd:!0};const LoggedIn=Template.bind({});LoggedIn.args={open:!0,user:data.kQ,loginToken:"token"};const OtpForm=Template.bind({});OtpForm.args={open:!0};const OtpFormWithTimer=Template.bind({});OtpFormWithTimer.args={open:!0};const OtpFormWithError=Template.bind({});OtpFormWithError.args={open:!0};const OtpFormLoading=Template.bind({});OtpFormLoading.args={open:!0},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...Default.parameters?.docs?.source}}},NeedsMissingData.parameters={...NeedsMissingData.parameters,docs:{...NeedsMissingData.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...NeedsMissingData.parameters?.docs?.source}}},Signup.parameters={...Signup.parameters,docs:{...Signup.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...Signup.parameters?.docs?.source}}},SignupWaitingForOtp.parameters={...SignupWaitingForOtp.parameters,docs:{...SignupWaitingForOtp.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...SignupWaitingForOtp.parameters?.docs?.source}}},ChangePassword.parameters={...ChangePassword.parameters,docs:{...ChangePassword.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...ChangePassword.parameters?.docs?.source}}},LoggedIn.parameters={...LoggedIn.parameters,docs:{...LoggedIn.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...LoggedIn.parameters?.docs?.source}}},OtpForm.parameters={...OtpForm.parameters,docs:{...OtpForm.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...OtpForm.parameters?.docs?.source}}},OtpFormWithTimer.parameters={...OtpFormWithTimer.parameters,docs:{...OtpFormWithTimer.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...OtpFormWithTimer.parameters?.docs?.source}}},OtpFormWithError.parameters={...OtpFormWithError.parameters,docs:{...OtpFormWithError.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...OtpFormWithError.parameters?.docs?.source}}},OtpFormLoading.parameters={...OtpFormLoading.parameters,docs:{...OtpFormLoading.parameters?.docs,source:{originalSource:"args => {\n  return <I18nWrapper>\n      <LoginDrawer {...args} onClose={() => {}} onLogin={console.log} onLogout={() => {}} tenant={tenant} apiClient={memoriApiClient()} />\n    </I18nWrapper>;\n}",...OtpFormLoading.parameters?.docs?.source}}};const __namedExportsOrder=["Default","NeedsMissingData","Signup","SignupWaitingForOtp","ChangePassword","LoggedIn","OtpForm","OtpFormWithTimer","OtpFormWithError","OtpFormLoading"]},"./src/components/LoginDrawer/LoginDrawer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ui_Button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ui/Button.tsx"),_ui_Drawer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/Drawer.tsx"),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),classnames__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_5__),_helpers_error__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/helpers/error.ts"),_helpers_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/helpers/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/jsx-runtime.js");const LoginDrawer=({open=!1,onClose,onLogin,user,loginToken,setUser,tenant,apiClient,__TEST__signup=!1,__TEST__needMissingData=!1})=>{const{t,i18n}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.B)(),lang="it"===i18n.language?"it":"en",{pwlUpdateUser,loginWithOTP,validateOTPCode,pwlGetCurrentUser,uploadAsset}=apiClient.backend,isUserLoggedIn=user?.userID&&loginToken,[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[otpCode,setOtpCode]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[otpEmail,setOtpEmail]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[otpError,setOtpError]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[showOtpForm,setShowOtpForm]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),[showOtpCodeForm,setShowOtpCodeForm]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[otpTimer,setOtpTimer]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[otpSent,setOtpSent]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[avatar,setAvatar]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[isResending,setIsResending]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[otpSuccess,setOtpSuccess]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[emailValid,setEmailValid]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[birthDate,setBirthDate]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[tnCAndPPAccepted,setTnCAndPPAccepted]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[pAndCUAccepted,setPAndCUAccepted]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[showSignup,setShowSignup]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(__TEST__signup),[needsMissingData,setNeedsMissingData]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(__TEST__needMissingData?{token:"token",birthDate:!0,tnCAndPPAccepted:!0}:{});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{let interval;return otpTimer&&otpTimer>0&&(interval=setInterval(()=>{setOtpTimer(prev=>prev&&prev>0?prev-1:0)},1e3)),()=>{interval&&clearInterval(interval)}},[otpTimer]);const sendOtpToEmail=async(email,isResend=!1)=>{if(email&&_helpers_utils__WEBPACK_IMPORTED_MODULE_7__.Lr.test(email)){isResend?setIsResending(!0):setLoading(!0),setOtpError(null);try{const response=await loginWithOTP({tenant:tenant.name,eMail:email.trim()});0===response.resultCode?(react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.success(t(isResend?"login.otpResent":"login.otpSent")),setOtpEmail(email.trim()),setOtpSent(!0),setShowOtpCodeForm(!0),startOtpTimer(),setOtpSuccess(!1)):setOtpError(response.resultMessage||t("login.otpSendError"))}catch(err){console.error("[OTP SEND]",err),setOtpError(t("login.otpSendError"))}finally{setLoading(!1),setIsResending(!1)}}else setOtpError(t("login.emailInvalid"))},handleOtpChange=value=>{const numericValue=value.replace(/\D/g,"").slice(0,4);setOtpCode(numericValue),setOtpError(null),4===numericValue.length&&otpEmail.trim().length>0&&(async otp=>{if(otp&&4===otp.length)if(otpEmail&&0!==otpEmail.trim().length){setLoading(!0),setOtpError(null);try{const response=await validateOTPCode(otp,tenant.name,void 0,otpEmail.trim());0===response.resultCode?(setOtpSuccess(!0),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.success(t("login.otpSuccess")),setTimeout(async()=>{try{const{user,...resp}=await pwlGetCurrentUser(response.newSessionToken);user.age&&user.tnCAndPPAccepted?onLogin(user,response.newSessionToken):(setUser(user),setBirthDate(user?.birthDate??""),setTnCAndPPAccepted(user?.tnCAndPPAccepted??!1),setPAndCUAccepted(user?.pAndCUAccepted??!1),setNeedsMissingData({token:response.newSessionToken,birthDate:!user.age,tnCAndPPAccepted:!user.tnCAndPPAccepted}))}catch(err){console.error("[GET USER]",err),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.error(t("login.userFetchError"))}},1e3),setTimeout(()=>{setShowOtpForm(!1),setShowOtpCodeForm(!1),setOtpCode(""),setOtpEmail(""),setOtpSent(!1),setOtpSuccess(!1)},2e3)):-107===response.resultCode?setOtpError(t("login.otpNotFound")):-108===response.resultCode?setOtpError(t("login.otpExpired")):-109===response.resultCode?setOtpError(t("login.otpMissing")):setOtpError(response.resultMessage||t("login.otpInvalid"))}catch(err){console.error("[OTP VALIDATION]",err),setOtpError(t("login.otpError"))}finally{setLoading(!1)}}else setOtpError(t("login.emailRequired"));else setOtpError(t("login.otpInvalidFormat"))})(numericValue)},startOtpTimer=()=>{setOtpTimer(60)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ui_Drawer__WEBPACK_IMPORTED_MODULE_2__.A,{open,onClose,className:classnames__WEBPACK_IMPORTED_MODULE_5___default()("memori--login-drawer",{"memori--login-drawer--logged":isUserLoggedIn,"memori--login-drawer--signup":showSignup}),children:needsMissingData?.token?.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h3",{children:t("login.missingData")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("p",{children:t("login.missingDataHelper")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("form",{className:"memori--login-drawer--form",onSubmit:async e=>{if(e.preventDefault(),!user?.userID||!needsMissingData?.token)return void setError(t("login.userNotFound"));if(!birthDate||!tnCAndPPAccepted)return void setError(t("missingData"));let newUser={userID:user.userID,birthDate:user?.birthDate||!needsMissingData.birthDate?void 0:birthDate,tnCAndPPAccepted:tnCAndPPAccepted||user?.tnCAndPPAccepted,tnCAndPPAcceptanceDate:tnCAndPPAccepted?(new Date).toISOString():void 0,pAndCUAccepted:pAndCUAccepted||user?.pAndCUAccepted,pAndCUAcceptanceDate:pAndCUAccepted?(new Date).toISOString():void 0};const{user:patchedUser,...resp}=await pwlUpdateUser(needsMissingData.token,user.userID,newUser);0!==resp.resultCode?(console.error(resp),react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.error(t((0,_helpers_error__WEBPACK_IMPORTED_MODULE_6__._)(resp.resultCode))),setError(resp.resultMessage)):(react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.Ay.success(t("success")),onLogin(patchedUser||newUser,needsMissingData.token))},children:[needsMissingData.birthDate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("label",{htmlFor:"#birthDate",children:[t("login.birthDate"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("input",{id:"birthDate",name:"birthDate",type:"date",required:!0,onChange:e=>setBirthDate(e.target.value),value:birthDate,autoComplete:"bday"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("small",{children:t("login.birthDateHelper")})})]}),needsMissingData?.tnCAndPPAccepted&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("label",{className:"memori-checkbox",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("span",{className:"memori-checkbox--input-wrapper",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("input",{type:"checkbox",name:"tnCAndPPAccepted",className:"memori-checkbox--input",onChange:e=>setTnCAndPPAccepted(e.target.checked),checked:tnCAndPPAccepted}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{className:"memori-checkbox--inner"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("span",{className:"memori-checkbox--text",children:[t("login.privacyLabel")," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("a",{href:`https://memori.ai/${lang}/privacy_and_cookie`,target:"_blank",rel:"noopener noreferrer",children:t("login.privacyAndCookiePolicy")})," ",t("login.and")," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("a",{href:`https://memori.ai/${lang}/tos`,target:"_blank",rel:"noopener noreferrer",children:t("login.termsOfService")})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("label",{className:"memori-checkbox",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("span",{className:"memori-checkbox--input-wrapper",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("input",{type:"checkbox",name:"pAndCUAccepted",onChange:e=>setPAndCUAccepted(e.target.checked),checked:pAndCUAccepted,className:"memori-checkbox--input"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{className:"memori-checkbox--inner"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("span",{className:"memori-checkbox--text",children:[t("login.pAndCUAccepted")," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("small",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("em",{children:["(",t("login.optional"),")"]})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("small",{children:t("login.goToAccountToChangeYourPreferences")})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("small",{children:t("login.deepThoughtExplaination")})})]}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("p",{className:"memori--login-drawer--inline-error",children:error}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_1__.A,{htmlType:"submit",primary:!0,loading,children:t("login.save")})]})]}):showOtpCodeForm?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"memori--login-drawer--otp-container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"memori--login-drawer--otp-header",children:[otpSuccess&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori--login-drawer--otp-icon",children:"âœ…"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h3",{children:t("login.otpTitle")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("p",{className:"memori--login-drawer--otp-description",children:otpSuccess?t("login.otpSuccessMessage"):t("login.otpCodeDescription",{email:otpEmail})})]}),!otpSuccess&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()("memori--login-drawer--otp-form",{loading}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("label",{htmlFor:"otp-code",className:"memori--login-drawer--otp-label",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{className:"memori--login-drawer--otp-label-text",style:{textAlign:"center"},children:t("login.otpCode")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"memori--login-drawer--otp-input-container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("input",{id:"otp-code",type:"text",className:classnames__WEBPACK_IMPORTED_MODULE_5___default()("memori--login-drawer--otp-input",{success:4===otpCode.length&&!otpError,error:otpError,loading}),value:otpCode,onChange:e=>handleOtpChange(e.target.value),placeholder:"0000",maxLength:4,autoComplete:"one-time-code",required:!0,disabled:loading,"aria-describedby":"otp-help"}),loading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori--login-drawer--otp-loading",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori--login-drawer--otp-spinner"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("small",{id:"otp-help",className:"memori--login-drawer--otp-help",children:t("login.otpHelp")})]})}),otpTimer&&otpTimer>0&&!otpSuccess&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori--login-drawer--otp-timer",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{children:t("login.otpTimer",{seconds:otpTimer})})}),!otpSuccess&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"memori--login-drawer--otp-actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_1__.A,{outlined:!0,onClick:()=>{setShowOtpCodeForm(!1),setOtpCode(""),setOtpError(null)},disabled:loading,children:t("login.backToEmail")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_1__.A,{outlined:!0,onClick:()=>{otpEmail&&_helpers_utils__WEBPACK_IMPORTED_MODULE_7__.Lr.test(otpEmail)&&sendOtpToEmail(otpEmail,!0)},disabled:loading||isResending||otpTimer&&otpTimer>0||!otpEmail,loading:isResending,children:t(isResending?"login.resending":"login.resendOtp")})]}),otpError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{role:"alert",className:"memori--login-drawer--otp-error",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{className:"memori--login-drawer--otp-error-icon",children:"âš ï¸"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{children:otpError})]})]})}):showOtpForm?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"memori--login-drawer--otp-container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"memori--login-drawer--otp-header",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h3",{children:t("login.otpEmailTitle")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("p",{className:"memori--login-drawer--otp-description",children:t("login.otpEmailDescription")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()("memori--login-drawer--otp-form",{loading}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("label",{htmlFor:"otp-email",className:"memori--login-drawer--otp-label",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{className:"memori--login-drawer--otp-label-text",children:t("login.email")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"memori--login-drawer--otp-input-container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("input",{id:"otp-email",type:"email",className:classnames__WEBPACK_IMPORTED_MODULE_5___default()("memori--login-drawer--otp-email-input",{error:otpError&&!_helpers_utils__WEBPACK_IMPORTED_MODULE_7__.Lr.test(otpEmail),valid:emailValid&&!otpError,loading}),value:otpEmail,onChange:e=>{return value=e.target.value,setOtpEmail(value),setOtpError(null),void setEmailValid(_helpers_utils__WEBPACK_IMPORTED_MODULE_7__.Lr.test(value));var value},placeholder:t("login.emailPlaceholder")||"Enter your email",autoComplete:"email",required:!0,disabled:loading,"aria-describedby":"email-help"}),emailValid&&!loading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori--login-drawer--otp-valid-icon",children:"âœ“"}),loading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori--login-drawer--otp-loading",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"memori--login-drawer--otp-spinner"})})]})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"memori--login-drawer--otp-actions",children:[showOtpCodeForm&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_1__.A,{outlined:!0,onClick:()=>{setShowOtpForm(!1),setOtpEmail(""),setOtpError(null),setEmailValid(!1)},disabled:loading,children:t("login.backToLogin")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_1__.A,{primary:!0,onClick:()=>{sendOtpToEmail(otpEmail)},disabled:loading||!emailValid,loading,children:t("login.sendOtp")})]}),otpError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{role:"alert",className:"memori--login-drawer--otp-error",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{className:"memori--login-drawer--otp-error-icon",children:"âš ï¸"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{children:otpError})]})]})}):null})};LoginDrawer.displayName="LoginDrawer";const __WEBPACK_DEFAULT_EXPORT__=LoginDrawer;try{LoginDrawer.displayName="LoginDrawer",LoginDrawer.__docgenInfo={description:"",displayName:"LoginDrawer",props:{open:{defaultValue:{value:"false"},description:"",name:"open",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},user:{defaultValue:null,description:"",name:"user",required:!1,type:{name:"User"}},loginToken:{defaultValue:null,description:"",name:"loginToken",required:!1,type:{name:"string"}},onLogin:{defaultValue:null,description:"",name:"onLogin",required:!0,type:{name:"(user: User, token: string) => void"}},onLogout:{defaultValue:null,description:"",name:"onLogout",required:!0,type:{name:"() => void"}},tenant:{defaultValue:null,description:"",name:"tenant",required:!0,type:{name:"Tenant"}},apiClient:{defaultValue:null,description:"",name:"apiClient",required:!0,type:{name:'{ constants: { BACKEND_URL: string; ENGINE_URL: string; allowedMediaTypes: string[]; anonTag: "ðŸ‘¤"; }; asset: { getResourceUrl: ({ type, resourceURI, sessionID, baseURL, }: ResourceURLParams) => string; }; getAllFunctions: (sessionId: string) => Promise<...>; ... 137 more ...; backend: { ...; }; }'}},__TEST__signup:{defaultValue:{value:"false"},description:"",name:"__TEST__signup",required:!1,type:{name:"boolean"}},__TEST__needMissingData:{defaultValue:{value:"false"},description:"",name:"__TEST__needMissingData",required:!1,type:{name:"boolean"}},setUser:{defaultValue:null,description:"",name:"setUser",required:!0,type:{name:"(user: User) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/LoginDrawer/LoginDrawer.tsx#LoginDrawer"]={docgenInfo:LoginDrawer.__docgenInfo,name:"LoginDrawer",path:"src/components/LoginDrawer/LoginDrawer.tsx#LoginDrawer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Close.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Close=({className,title,bold=!1})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",focusable:"false",role:"img",className,"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z",strokeWidth:bold?2:0,stroke:bold?"currentColor":"none",fill:bold?"none":"currentColor"})});Close.displayName="Close";const __WEBPACK_DEFAULT_EXPORT__=Close;try{Close.displayName="Close",Close.__docgenInfo={description:"",displayName:"Close",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},bold:{defaultValue:{value:"false"},description:"",name:"bold",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Close.tsx#Close"]={docgenInfo:Close.__docgenInfo,name:"Close",path:"src/components/icons/Close.tsx#Close"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/ConfirmDialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@headlessui/react/dist/components/dialog/dialog.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),_Button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Button.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ConfirmDialog=({isOpen,onClose,onConfirm,title,message,confirmText,cancelText})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e,{appear:!0,show:isOpen,as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l,{as:"div",className:"memori-confirm-dialog",onClose,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"memori-confirm-dialog--backdrop"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"memori-confirm-dialog--container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e.Child,{as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Panel,{className:"memori-confirm-dialog--panel",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Title,{className:"memori-confirm-dialog--title",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Description,{className:"memori-confirm-dialog--message",children:message}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"memori-confirm-dialog--actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_3__.A,{onClick:onClose,children:cancelText}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_3__.A,{primary:!0,onClick:onConfirm,children:confirmText})]})]})})})]})});ConfirmDialog.displayName="ConfirmDialog";const __WEBPACK_DEFAULT_EXPORT__=ConfirmDialog;try{ConfirmDialog.displayName="ConfirmDialog",ConfirmDialog.__docgenInfo={description:"",displayName:"ConfirmDialog",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"string"}},confirmText:{defaultValue:null,description:"",name:"confirmText",required:!0,type:{name:"string"}},cancelText:{defaultValue:null,description:"",name:"cancelText",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/ConfirmDialog.tsx#ConfirmDialog"]={docgenInfo:ConfirmDialog.__docgenInfo,name:"ConfirmDialog",path:"src/components/ui/ConfirmDialog.tsx#ConfirmDialog"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Drawer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@headlessui/react/dist/components/dialog/dialog.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),_Spin__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Spin.tsx"),_Button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/Button.tsx"),_icons_Close__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/icons/Close.tsx"),classnames__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__),react_i18next__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),_ConfirmDialog__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/ui/ConfirmDialog.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Drawer=({title,open=!1,data,onClose=()=>{},children,width="80%",footer,showBackdrop=!0,extra,className,placement="right",description,loading=!1,animated=!0,closable=!0,widthMd="80%",widthLg="60%",confirmDialogTitle,confirmDialogMessage,preventBackdropClose=!1,enterDuration="duration-300",leaveDuration="duration-200"})=>{const[originalData,setOriginalData]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[confirmDialogOpen,setConfirmDialogOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.B)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{open&&data&&!originalData&&setOriginalData(data),open||setOriginalData(null)},[open,data,originalData]);const checkChanges=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{if(!data||0===Object.keys(data).length)return onClose();originalData&&JSON.stringify(originalData)!==JSON.stringify(data)?setConfirmDialogOpen(!0):onClose()},[data,originalData,onClose]),handleClose=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{checkChanges()},[checkChanges]),handleConfirmUnsavedChanges=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setConfirmDialogOpen(!1),onClose()},[onClose]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_ConfirmDialog__WEBPACK_IMPORTED_MODULE_8__.A,{isOpen:confirmDialogOpen,onClose:()=>setConfirmDialogOpen(!1),onConfirm:handleConfirmUnsavedChanges,title:confirmDialogTitle||t("confirmDialog.title"),message:confirmDialogMessage||t("confirmDialog.message"),confirmText:t("confirm")||"Confirm",cancelText:t("cancel")||"Cancel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e,{appear:!0,show:open,as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l,{open,onClose:preventBackdropClose?()=>{}:handleClose,className:classnames__WEBPACK_IMPORTED_MODULE_6___default()("memori-drawer",className),children:[showBackdrop&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e.Child,{as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--backdrop"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--container-scrollable",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e.Child,{static:!0,as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:`ease-out ${enterDuration}`,enterFrom:animated?"max-w-0 opacity-0":"opacity-0",enterTo:"max-w-80 opacity-100",leave:`ease-in ${leaveDuration}`,leaveFrom:"max-w-80 opacity-100",leaveTo:animated?"max-w-0 opacity-0":"opacity-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Panel,{className:classnames__WEBPACK_IMPORTED_MODULE_6___default()("memori-drawer--panel",{"memori-drawer--panel-left":"left"===placement,"memori-drawer--with-footer":!!footer}),style:{"--memori-drawer--width":width,"--memori-drawer--width--lg":widthLg,"--memori-drawer--width--md":widthMd},children:[closable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--close",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_4__.A,{shape:"circle",outlined:!0,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_icons_Close__WEBPACK_IMPORTED_MODULE_5__.default,{}),onClick:handleClose})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Spin__WEBPACK_IMPORTED_MODULE_3__.A,{spinning:loading,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"memori-drawer--content",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Title,{className:"memori-drawer--title",children:title}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Description,{className:"memori-drawer--description",children:description}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--content--scrollable",children})]})}),footer&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"memori-drawer--footer",children:[footer.leftAction&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--footer-left-action "+(footer.leftActionClassName||""),children:footer.leftAction}),footer.onSubmit&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"memori-drawer--footer-actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_4__.A,{outlined:!0,onClick:handleClose,children:t("cancel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_4__.A,{htmlType:"submit",onClick:footer.onSubmit,loading:footer.loading,className:"memori-drawer--footer-confirm",children:t("confirm")})]}),extra&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--extra",children:extra})]})]})})})})]})})]})};Drawer.displayName="Drawer";const __WEBPACK_DEFAULT_EXPORT__=Drawer;try{Drawer.displayName="Drawer",Drawer.__docgenInfo={description:"",displayName:"Drawer",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"ReactNode"}},open:{defaultValue:{value:"false"},description:"",name:"open",required:!1,type:{name:"boolean"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},onClose:{defaultValue:{value:"() => { }"},description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},width:{defaultValue:{value:"80%"},description:"",name:"width",required:!1,type:{name:"string | number"}},footer:{defaultValue:null,description:"",name:"footer",required:!1,type:{name:"{ leftAction?: ReactNode; leftActionClassName?: string; onSubmit?: (() => void); loading?: boolean | undefined; } | undefined"}},extra:{defaultValue:null,description:"",name:"extra",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"right"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"Element | ReactNode"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},animated:{defaultValue:{value:"true"},description:"",name:"animated",required:!1,type:{name:"boolean"}},closable:{defaultValue:{value:"true"},description:"",name:"closable",required:!1,type:{name:"boolean"}},widthMd:{defaultValue:{value:"80%"},description:"",name:"widthMd",required:!1,type:{name:"string"}},widthLg:{defaultValue:{value:"60%"},description:"",name:"widthLg",required:!1,type:{name:"string"}},confirmDialogTitle:{defaultValue:null,description:"",name:"confirmDialogTitle",required:!1,type:{name:"string"}},confirmDialogMessage:{defaultValue:null,description:"",name:"confirmDialogMessage",required:!1,type:{name:"string"}},showBackdrop:{defaultValue:{value:"true"},description:"",name:"showBackdrop",required:!1,type:{name:"boolean"}},preventBackdropClose:{defaultValue:{value:"false"},description:"",name:"preventBackdropClose",required:!1,type:{name:"boolean"}},enterDuration:{defaultValue:{value:"duration-300"},description:"",name:"enterDuration",required:!1,type:{name:"string"}},leaveDuration:{defaultValue:{value:"duration-200"},description:"",name:"leaveDuration",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Drawer.tsx#Drawer"]={docgenInfo:Drawer.__docgenInfo,name:"Drawer",path:"src/components/ui/Drawer.tsx#Drawer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Spin.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_icons_Loading__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/icons/Loading.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Spin=({spinning=!1,primary=!1,className,children})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("memori-spin",className,{"memori-spin--spinning":spinning,"memori-spin--primary":primary}),children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"memori-spin--spinner",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_icons_Loading__WEBPACK_IMPORTED_MODULE_2__.default,{loading:!0})})]});Spin.displayName="Spin";const __WEBPACK_DEFAULT_EXPORT__=Spin;try{Spin.displayName="Spin",Spin.__docgenInfo={description:"",displayName:"Spin",props:{spinning:{defaultValue:{value:"false"},description:"",name:"spinning",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},primary:{defaultValue:{value:"false"},description:"",name:"primary",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Spin.tsx#Spin"]={docgenInfo:Spin.__docgenInfo,name:"Spin",path:"src/components/ui/Spin.tsx#Spin"})}catch(__react_docgen_typescript_loader_error){}},"./src/helpers/error.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>getErrori18nKey});const BACKEND_ERRORS=new Map(Object.entries({TENANT_NOT_FOUND:-1,TENANT_REGISTRATION_DISABLED:-2,TENANT_MISSING_NAME:-3,TENANT_MAX_USERS_REACHED:-4,TENANT_MAX_ADMINS_REACHED:-5,TENANT_ALREADY_EXISTS:-6,TENANT_MISSING_DESCRIPTION:-7,TENANT_CANT_SET_COMPLETION_PROVIDER:-8,TENANT_INVALID_TYPE:-9,USER_NOT_CONFIRMED:-11,USER_NOT_FOUND:-12,USER_OR_PASSWORD_INVALID:-13,USER_MUST_CHANGE_PASSWORD:-14,USER_MUST_ENTER_VERIFICATION_CODE:-15,USER_MISSING_TENANT:-21,USER_MISSING_NAME:-22,USER_MISSING_PASSWORD:-23,USER_MISSING_EMAIL:-24,USER_MISSING_VERIFICATION_CODE:-25,USER_NAME_ALREADY_USED:-26,USER_PASSWORD_NOT_CONFORMING_TO_POLICY:-27,USER_EMAIL_ALREADY_USED:-28,USER_EMAIL_INVALID:-29,USER_VERIFICATION_CODE_INVALID:-30,USER_MISSING_NAME_OR_EMAIL:-31,USER_NAME_INVALID:-32,USER_HAS_ONE_OR_MORE_MEMORI:-33,USER_MISSING_NEW_PASSWORD:-34,USER_CANT_CREATE_MEMORI:-35,USER_MAX_MEMORI_REACHED:-36,USER_TOO_MANY_ATTEMPTS:-38,USER_MUST_ACCEPT_TNC_AND_PP:-39,USER_BIRTH_DATE_CANT_BE_CHANGED:-40,USER_CANT_SET_COMPLETION_PROVIDER:-41,USER_CANT_ENABLE_DEEP_THOUGHT:-42,USER_CANT_ENABLE_DCM_INTEGRATION:-43,USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:-44,USER_CREATION_BILLING_DENIED_PERMISSION:-46,USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:-47,USER_CANT_BE_DELETED:-48,USER_ORDER_BY_INVALID:-49,MEMORI_NOT_FOUND:-51,MEMORI_NOT_ACCESSIBLE:-52,MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:-53,SESSION_NOT_FOUND:-101,SESSION_IS_NOT_ADMINISTRATIVE:-102,SESSION_EXPIRED:-103,SESSION_OTP_NOT_FOUND:-107,SESSION_OTP_EXPIRED:-108,SESSION_MISSING_TEMPORARY_TOKEN:-109,MEMORI_MISSING_CONFIGURATION:-201,MEMORI_CONFIGURATION_NOT_FOUND:-202,MEMORI_INVALID_PRIVACY_TYPE:-203,MEMORI_MISSING_PASSWORD:-204,MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:-205,MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:-206,MEMORI_INVALID_VOICE_TYPE:-207,MEMORI_MISSING_NAME:-208,MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:-209,MEMORI_INVALID_ID:-210,MEMORI_NAME_ALREADY_USED:-211,MEMORI_INVALID_PIN:-212,MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:-213,MEMORI_NO_PASSWORD_WHEN_PUBLIC:-214,MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:-215,MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:-216,MEMORI_INVALID_COMPLETION_CONFIG:-217,MEMORI_MACRO_FUNCTIONS_REQUIRES_COMPLETIONS:-218,MEMORI_BLOCKING_DATE_MISSING_OR_WRONG:-219,MEMORI_LIST_FILTER_NOT_SPECIFIED:-220,MEMORI_TRANSFER_MISSING_DESTINATION_USER:-231,MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:-232,MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:-233,MEMORI_TRANSFER_NOTHING_TO_DO:-234,MEMORI_CONFIGURATION_CANT_BE_CHANGED:-251,MEMORI_MISSING_NEW_PASSWORD:-252,MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:-261,MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:-262,MEMORI_SESSION_NOT_FOUND:-263,MEMORI_SESSION_DOESNT_ACCEPT_MEDIA:-264,MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:-271,INTEGRATION_NOT_FOUND:-301,INTEGRATION_INVALID_TYPE:-401,INTEGRATION_ALREADY_EXISTS:-402,INTEGRATION_MEMORI_IS_NOT_PUBLIC:-403,INTEGRATION_MISSING_INVOCATION_TEXT:-404,INTEGRATION_MISSING_DEVICE_EMAILS:-405,INTEGRATION_MEMORI_IS_EMPTY:-406,INTEGRATION_MISSING_PRIVACY_POLICY:-407,INTEGRATION_MISSING_CATEGORY:-408,INTEGRATION_MISSING_DESCRIPTION:-409,INTEGRATION_INVALID_INVOCATION_TEXT:-410,INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:-411,UPLOAD_REQUIRES_MULTIPART_ENCODING:-501,UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:-502,UPLOAD_MAX_LENGTH_EXCEEDED:-503,UPLOAD_FILE_IS_EMPTY:-504,UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:-505,UPLOAD_MISSING_FILE_NAME:-506,UPLOAD_INVALID_MEMORY_ID:-507,UPLOAD_MISSING_FILE_CONTENT:-508,ASSET_NOT_FOUND:-601,ASSET_NOT_ACCESSIBLE:-602,ASSET_MISSING_SESSION_ID:-603,ASSET_INVALID_FILE_NAME:-604,ASSET_MALWARE_SCAN_THREATS_FOUND:-605,INVITATION_NOT_FOUND:-701,INVITATION_NOT_ACCESSIBLE:-702,INVITATION_ALREADY_ACCEPTED:-703,INVITATION_ALREADY_REJECTED:-704,INVITATION_MISSING_DESTINATION_EMAIL:-705,INVITATION_DESTINATION_EMAIL_INVALID:-706,INVITATION_MISSING_TAG:-707,INVITATION_MISSING_PIN:-708,INVITATION_INVALID_PIN:-709,INVITATION_INVALID_TYPE:-710,INVITATION_MISSING_DESTINATION_NAME:-711,INVITATION_TAG_PIN_CANT_BE_CHANGED:-712,INVITATION_CANT_BE_CHANGED:-713,ACTIONLOG_INVALID_USER_ID:-801,ACTIONLOG_INVALID_DATE_FROM_FORMAT:-802,ACTIONLOG_INVALID_DATE_TO_FORMAT:-803,ACTIONLOG_INVALID_MEMORI_ID:-804,CONSUMPTIONLOG_INVALID_TYPE:-901,CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:-902,CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:-903,CONSUMPTIONLOG_INVALID_USER_ID:-904,CONSUMPTIONLOG_INVALID_MEMORI_ID:-905,NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:-1001,BROADCAST_NOT_ALLOWED:-1002,INVALID_NOTIFICATION_TYPE:-1003,NOTIFICATION_NOT_FOUND:-1004,INVALID_NOTIFICATION_FILTER:-1005,INVALID_NOTIFICATION_PERIOD:-1006,PROCESS_INVALID_TYPE:-1401,PROCESS_ALREADY_RUNNING:-1401,PROCESS_NOT_FOUND:-1402,IMPORTCSV_MISSING_CSV:-1502,IMPORTCSV_MISSING_SEPARATOR:-1503,IMPORTCSV_INVALID_SEPARATOR:-1504,IMPORTCSV_MISSING_HEADERS:-1505,IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:-1506,IMPORTCSV_INVALID_RECEIVER_ID:-1507,IMPORTCSV_INVALID_MEDIA_LINK:-1508,IMPORTCSV_INVALID_LINK_TITLE_HANDLING:-1509,IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:-1521,IMPORTTXT_INVALID_GRANULARITY:-1602,IMPORTTXT_INVALID_RECEIVER_ID:-1603,IMPORTTXT_INVALID_MEDIA_LINK:-1604,IMPORTTXT_INVALID_LINK_TITLE_HANDLING:-1605,IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:-1621,IMPORTTXT_IMPORT_LIMIT_EXCEEDED:-1632,IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:-1633,IMPORTTXT_IMPORT_REQUIRES_PAYING:-1634,IMPORTTXT_BILLING_DENIED_PERMISSION:-1635,IMPORT_MISSING_ROWS:-1701,IMPORT_CANT_IMPORT_TO_SECRET_MEMORI:-1702,IMPORTMEMORI_INVALID_MEMORI_SPECS:-1711,IMPORT_MISSING_JSONL:-1712,IMPORTMEMORI_INVALID_SPECS:-1713,EXPORT_MISSING_PASSWORD:1711,EXPORTCSV_MISSING_CSV_SPECS:-1801,EXPORTCSV_MISSING_SEPARATOR:-1802,EXPORTCSV_INVALID_SEPARATOR:-1803,EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:-1804,EXPORTCSV_MISSING_NEW_LINE_CHAR:-1805,EXPORTCSV_INVALID_NEW_LINE_CHAR:-1806,EXPORTJSONL_MISSING_JSONL_SPECS:-1821,EXPORTJSONL_MISSING_PLATFORM:-1822,EXPORTJSONL_INVALID_PLATFORM:-1823,EXPORTJSONL_EXPORT_REQUIRES_PAYING:-1832,ANALYSIS_MISSING_QUERY:-1901,ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:-1902,ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:-1903,BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:-2001,BADGE_ASSIGNMENT_MISSING_REF_ID:-2002,BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:-2003,BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:-2004,BADGE_ASSIGNMENT_MISSING_BADGE_URL:-2005,BADGE_ASSIGNMENT_MISSING_ISSUER_URL:-2006,BADGE_ASSIGNMENT_INVALID_URL:-2007,BADGE_ASSIGNMENT_MISSING_RECIPIENT:-2021,BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:-2022,BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:-2023,BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:-2024,BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:-2025,BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:-2026,BADGE_NOT_FOUND:-2051,OUTCOME_NO_DCM_CONFIGURED:-2071,OUTCOME_USER_BADGES_DISABLED:-2072,COMPLETION_CONFIG_MISSING_NAME:-2401,COMPLETION_CONFIG_MISSING_PROVIDER:-2402,COMPLETION_CONFIG_MISSING_ENDPOINT:-2403,COMPLETION_CONFIG_MISSING_API_KEY:-2404,COMPLETION_CONFIG_MISSING_MODEL:-2405,COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:-2406,COMPLETION_CONFIG_INVALID_NAME:-2407,COMPLETION_CONFIG_INVALID_PURPOSE:-2411,COMPLETION_CONFIG_INVALID_ENDPOINT:-2412,COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:-2413,COMPLETION_CONFIG_INVALID_PROVIDER:-2414,COMPLETION_CONFIG_NOT_FOUND:-2421,COMPLETION_CONFIG_NOT_ACCESSIBLE:-2422,COMPLETION_CONFIG_NAME_RESERVED:-2441,COMPLETION_CONFIG_NAME_ALREADY_EXISTS:-2442,COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:-2443,COMPLETION_CONFIG_MISSING_MANDATORY_PREFIX:-2444,COMPLETION_CONFIG_VISIBILITY_NOT_PERMITTED:-2445,COMPLETION_CONFIG_USE_AS_DEFAULT_NOT_PERMITTED:-2446,COMPLETION_CONFIG_USE_AS_DEFAULT_REQUIRES_TENANT_VISIBILITY:-2447,COMPLETION_CONFIG_CHARGEABLE_NOT_PERMITTED:-2448,COMPLETION_CONFIG_INVALID_APPLY_TO:-2449,COMPLETION_CONFIG_APPLY_TO_TENANT_NOT_ALLOWED:-2450,TRUSTED_APPLICATION_NOT_FOUND:-2501,TRUSTED_APPLICATION_NOT_ACCESSIBLE:-2502,TRUSTED_APPLICATION_NAME_REQUIRED:-2503,TRUSTED_APPLICATION_TOKEN_REQUIRED:-2504,TRUSTED_APPLICATION_NAME_ALREADY_EXISTS:-2505,TRUSTED_APPLICATION_INVALID_TOKEN:-2506}).map(([key,value])=>[value,key])),getErrori18nKey=errorCode=>{if(!errorCode)return"error.generic";if(401===errorCode||403===errorCode)return"error.unauthorized";if(404===errorCode)return"error.notFound";if(422===errorCode)return"error.unprocessableEntity";if(500===errorCode)return"internal server error";let error=BACKEND_ERRORS.get(errorCode);return error?`errors.${error}`:"error.generic"}},"./src/helpers/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DN:()=>correctMaterials,GZ:()=>isSkinnedMesh,I2:()=>isSafariIOS,K1:()=>hasTouchscreen,Lr:()=>mailRegEx,N8:()=>safeParseJSON,TG:()=>cleanUrl,Vx:()=>stripDuplicates,Zn:()=>escapeHTML,_e:()=>stripHTML,eA:()=>stripMarkdown,f9:()=>stripOutputTags,gI:()=>stripReasoningTags,lA:()=>installMathJax,mo:()=>stripDocumentAttachmentTags,nr:()=>isSafari,o6:()=>stripEmojis,xD:()=>useDebounceFn});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),three__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/three/build/three.module.js");const hasTouchscreen=()=>{let hasTouchScreen=!1;if("undefined"==typeof window||"undefined"==typeof navigator)return hasTouchScreen;if("maxTouchPoints"in navigator)hasTouchScreen=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)hasTouchScreen=navigator.msMaxTouchPoints>0;else{const mQ=window&&"matchMedia"in window&&matchMedia("(pointer:coarse)");if(mQ&&"(pointer:coarse)"===mQ.media)hasTouchScreen=!!mQ.matches;else if("orientation"in window)hasTouchScreen=!0;else{var UA=navigator?.userAgent;hasTouchScreen=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(UA)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(UA)}}return hasTouchScreen},isSafari=()=>{if("undefined"==typeof navigator)return!1;const userAgent=navigator.userAgent,isSafariUA=userAgent.includes("Safari")&&!userAgent.includes("Chrome"),isWebKit="WebKit"in window&&!("Chrome"in window);return isSafariUA||isWebKit},isSafariIOS=()=>{if("undefined"==typeof navigator)return!1;const userAgent=navigator.userAgent;return userAgent.includes("Safari")&&!userAgent.includes("Chrome")&&/iPad|iPhone|iPod/.test(userAgent)},mailRegEx=/^\w+([.-]?[+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/;function useDebounceFn(fn,delay){const timeoutId=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),originalFn=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>(originalFn.current=fn,()=>{originalFn.current=null}),[fn]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>()=>{clearTimeout(timeoutId.current)},[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>(...args)=>{clearTimeout(timeoutId.current),timeoutId.current=window.setTimeout(()=>{originalFn.current&&originalFn.current(...args)},delay)},[delay])}const stripDuplicates=text=>text.slice(0,text.length/2).trim().toLowerCase()===text.slice(text.length/2+1).trim().toLowerCase()?text.slice(0,text.length/2):text,stripEmojis=text=>text.replaceAll(/[^\p{L}\p{N}\p{P}\p{Z}^$\n]/gu,"").trim(),stripMarkdown=text=>text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=text.replaceAll(/```*?```/g,"")).replaceAll(/```[\s\S]*?```/g,"")).replaceAll(/`[^`]*`/g,"")).replaceAll(/!\[[^\]]*\]\([^)]*\)/g,"")).replaceAll(/\[([^\]]*)\]\([^)]*\)/g,"$1")).replaceAll(/^> /gm,"")).replaceAll(/^#+ /gm,"")).replaceAll(/[*_]/g,"")).replaceAll(/---/g,"")).replaceAll(/~~/g,"")).replaceAll(/^\s*[-*+] /gm,"")).replaceAll(/^\s*\d+\.\s+/gm,"")).replaceAll(/^\|.*\|$/gm,"")).replaceAll(/\$\$[\s\S]*?\$\$/g,"")).replaceAll(/\$[\s\S]*?\$/g,"")).replaceAll(/\\\([\s\S]*?\\\)/g,"")).replaceAll(/\\\[[\s\S]*?\\\]/g,"")).replaceAll(/\s+/g," ").trim(),stripDocumentAttachmentTags=text=>text.replace(/<document_attachment filename="([^"]+)" type="([^"]+)">([\s\S]*?)<\/document_attachment>/g,"$3"),stripOutputTags=text=>{const outputTagRegex=/<output.*?<\/output>/gs;if(!outputTagRegex.test(text))return text;const strippedText=text.replace(outputTagRegex,"");return stripOutputTags(strippedText)},stripReasoningTags=text=>{const reasoningTagRegex=/<think.*?<\/think>/gs;if(!reasoningTagRegex.test(text))return text;return text.replace(reasoningTagRegex,"")},stripHTML=text=>{const el=document.createElement("div");return el.innerHTML=text,el.textContent||""},escapeHTML=text=>{const el=document.createElement("textarea");return el.textContent=text,el.innerHTML};function cleanUrl(href){try{href=encodeURI(href).replace(/%25/g,"%")}catch(e){return null}return href}const mathJaxConfig={startup:{elements:[".memori-chat--bubble-content"]},options:{processHtmlClass:"memori-chat--bubble-content"},tex:{inlineMath:[["$","$"],["\\$","\\$"]],displayMath:[["$$","$$"]],processEscapes:!0},asciimath:{fixphi:!0,displaystyle:!0,decimalsign:"."},skipStartupTypeset:!0,chtml:{displayAlign:"left"},svg:{fontCache:"global"}},installMathJax=()=>{window.MathJax=mathJaxConfig,(()=>{const script=document.createElement("script");script.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",script.async=!0,script.id="mathjax-script",document.head.appendChild(script)})()};function correctMaterials(materials){Object.values(materials).forEach(material=>{material instanceof three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial&&(material.roughness=.8,material.metalness=.1,material.shadowSide=2,material.map&&(material.map.anisotropy=16))})}function isSkinnedMesh(object){return!0===object.isSkinnedMesh}const safeParseJSON=(jsonString,fallbackString=!1)=>{try{return JSON.parse(jsonString)}catch(error){return fallbackString?jsonString:null}}}}]);