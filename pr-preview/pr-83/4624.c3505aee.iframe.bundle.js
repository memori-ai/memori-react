"use strict";(self.webpackChunk_memori_ai_memori_react=self.webpackChunk_memori_ai_memori_react||[]).push([[4624],{"./src/components/MediaWidget/LinkItemWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,Y:()=>RenderLinkItem});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_icons_Link__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/icons/Link.tsx"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),ellipsed__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ellipsed/lib/ellipsed.js"),_ui_Card__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/Card.tsx"),_headlessui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const RenderLinkItem=({isChild=!1,item,baseUrl,onLinkPreviewInfo,descriptionOneLine=!1})=>{const[link,setLink]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),normURL=item.url?.startsWith("http")||!item.url||0===item.url?.length?item.url:`https://${item.url}`;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{let normURL=item.url?.startsWith("http")||!item.url||0===item.url?.length?item.url:`https://${item.url}`;normURL&&normURL!==link?.urlKey&&(async(url,baseUrl)=>{try{const data=await fetch(`${baseUrl||"https://aisuru.com"}/api/linkpreview/${encodeURIComponent(url)}`);return await data.json()}catch(err){return console.error("getSiteInfo",err),null}})(normURL,baseUrl).then(siteInfo=>{setLink(siteInfo?{...siteInfo,urlKey:normURL}:null),onLinkPreviewInfo&&siteInfo&&onLinkPreviewInfo(siteInfo)})},[item?.url,baseUrl,onLinkPreviewInfo]);const title=item.title&&item.title.length>0?item.title:link?.title,description=link?.description,video=link?.video,image=link?.image??link?.images?.[0];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setTimeout(()=>{(0,ellipsed__WEBPACK_IMPORTED_MODULE_3__.ellipsis)(".memori-link-item--card .memori-card--description",3,{responsive:!0})},300)},[description,item.mediumID]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("a",{href:normURL,target:"_blank",rel:"noopener noreferrer",className:classnames__WEBPACK_IMPORTED_MODULE_2___default()("memori-link-item--link",{"memori-link-item--link--child":isChild}),onClick:e=>{isChild||(e.preventDefault(),e.stopPropagation(),window.open(normURL,"_blank",`toolbar=yes,top=${.1*window.innerHeight},left=${.1*window.innerWidth},width=${.8*window.innerWidth},height=${.8*window.innerHeight}`))},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ui_Card__WEBPACK_IMPORTED_MODULE_4__.A,{hoverable:!0,className:classnames__WEBPACK_IMPORTED_MODULE_2___default()("memori-link-item--card",{"memori-link-item--card-description-oneline":descriptionOneLine,"memori-link-item--card-has-image":image,"memori-link-item--card-has-video":video}),cover:video?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("iframe",{width:"100%",height:"100%",src:video,title:"Video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):image?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("img",{className:"memori-link-item--card-cover-img",src:"data:image/png;base64,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",srcSet:image.includes("data:image")?void 0:image.startsWith("https")?image:`https://${image.replace("http://","")}`,alt:item.title}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"memori-link-item--card-cover-icon",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_icons_Link__WEBPACK_IMPORTED_MODULE_1__.default,{className:"memori-link-item--icon"})}),title,description})})};RenderLinkItem.displayName="RenderLinkItem";const LinkItemWidget=({items,baseUrl,descriptionOneLine=!1,onLinkPreviewInfo,fromUser=!1})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_5__.e,{appear:!0,show:!0,as:"div",className:"memori-link-items",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()("memori-link-items--grid",{"memori-link-items--user":fromUser,"memori-link-items--agent":!fromUser}),children:items.map((item,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_5__.e.Child,{as:"div",className:"memori-link-item",enter:"ease-out duration-500 delay-"+100*index,enterFrom:"opacity-0 scale-95",enterTo:"opacity-1 scale-100",leave:"ease-in duration-300",leaveFrom:"opacity-1 scale-100",leaveTo:"opacity-0 scale-95",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(RenderLinkItem,{item,baseUrl,descriptionOneLine,onLinkPreviewInfo})},item.mediumID))})});LinkItemWidget.displayName="LinkItemWidget";const __WEBPACK_DEFAULT_EXPORT__=LinkItemWidget;try{RenderLinkItem.displayName="RenderLinkItem",RenderLinkItem.__docgenInfo={description:"",displayName:"RenderLinkItem",props:{baseUrl:{defaultValue:null,description:"",name:"baseUrl",required:!1,type:{name:"string"}},fromUser:{defaultValue:{value:"false"},description:"",name:"fromUser",required:!1,type:{name:"boolean"}},isChild:{defaultValue:{value:"false"},description:"",name:"isChild",required:!1,type:{name:"boolean"}},descriptionOneLine:{defaultValue:{value:"false"},description:"",name:"descriptionOneLine",required:!1,type:{name:"boolean"}},onLinkPreviewInfo:{defaultValue:null,description:"",name:"onLinkPreviewInfo",required:!1,type:{name:"((linkPreviewInfo: ILinkPreviewInfo) => void)"}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Medium"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MediaWidget/LinkItemWidget.tsx#RenderLinkItem"]={docgenInfo:RenderLinkItem.__docgenInfo,name:"RenderLinkItem",path:"src/components/MediaWidget/LinkItemWidget.tsx#RenderLinkItem"})}catch(__react_docgen_typescript_loader_error){}try{LinkItemWidget.displayName="LinkItemWidget",LinkItemWidget.__docgenInfo={description:"",displayName:"LinkItemWidget",props:{isChild:{defaultValue:{value:"false"},description:"",name:"isChild",required:!1,type:{name:"boolean"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"Medium[]"}},baseUrl:{defaultValue:null,description:"",name:"baseUrl",required:!1,type:{name:"string"}},descriptionOneLine:{defaultValue:{value:"false"},description:"",name:"descriptionOneLine",required:!1,type:{name:"boolean"}},onLinkPreviewInfo:{defaultValue:null,description:"",name:"onLinkPreviewInfo",required:!1,type:{name:"((linkPreviewInfo: ILinkPreviewInfo) => void)"}},fromUser:{defaultValue:{value:"false"},description:"",name:"fromUser",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MediaWidget/LinkItemWidget.tsx#LinkItemWidget"]={docgenInfo:LinkItemWidget.__docgenInfo,name:"LinkItemWidget",path:"src/components/MediaWidget/LinkItemWidget.tsx#LinkItemWidget"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/MediaWidget/MediaWidget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ui_Button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ui/Button.tsx"),_LinkItemWidget__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/MediaWidget/LinkItemWidget.tsx"),_MediaItemWidget__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/MediaWidget/MediaItemWidget.tsx"),_headlessui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),classnames__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_5__),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MediaWidget=({hints=[],links=[],media=[],simulateUserPrompt=()=>{},sessionID,baseUrl,apiUrl,translateTo,customMediaRenderer,fromUser=!1})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.B)(),[showHints,setShowHints]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),[hintsPagination,setHintsPagination]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(6);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setShowHints(!0)},[hints]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:"memori-media-widget",children:[media?.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_MediaItemWidget__WEBPACK_IMPORTED_MODULE_3__.Ay,{items:media,sessionID,translateTo,baseURL:baseUrl,apiURL:apiUrl,customMediaRenderer,fromUser}),links?.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_LinkItemWidget__WEBPACK_IMPORTED_MODULE_2__.A,{items:links,baseUrl,fromUser}),hints?.length>0&&showHints&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_4__.e,{appear:!0,show:!0,as:"ul",className:"memori-media--hints",children:hints.slice(0,hintsPagination).map((item,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_4__.e.Child,{as:"li",enter:"ease-out duration-500",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-1 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-1",leaveTo:"opacity-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_1__.A,{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()("memori-media--hint"),primary:!0,onClick:()=>{simulateUserPrompt(item.originalText,item.text),setShowHints(!1)},onTouchEnd:()=>{simulateUserPrompt(item.originalText,item.text),setShowHints(!1)},children:item.text},item.text+index)},item.text+index))}),hints.length>hintsPagination&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:"memori-hints--show-more",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ui_Button__WEBPACK_IMPORTED_MODULE_1__.A,{className:"memori-hints--show-more-button",id:"showMoreHints",onClick:()=>setHintsPagination(hintsPagination+6),children:t("expand")||"Expand"})})]})]})};MediaWidget.displayName="MediaWidget";const __WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(MediaWidget);try{MediaWidget.displayName="MediaWidget",MediaWidget.__docgenInfo={description:"",displayName:"MediaWidget",props:{hints:{defaultValue:{value:"[]"},description:"",name:"hints",required:!1,type:{name:"TranslatedHint[]"}},links:{defaultValue:{value:"[]"},description:"",name:"links",required:!1,type:{name:"Medium[]"}},media:{defaultValue:{value:"[]"},description:"",name:"media",required:!1,type:{name:"(Medium & { type?: string; })[]"}},simulateUserPrompt:{defaultValue:{value:"() => {}"},description:"",name:"simulateUserPrompt",required:!1,type:{name:"((item: string, translatedItem?: string) => void)"}},sessionID:{defaultValue:null,description:"",name:"sessionID",required:!1,type:{name:"string"}},baseUrl:{defaultValue:null,description:"",name:"baseUrl",required:!1,type:{name:"string"}},apiUrl:{defaultValue:null,description:"",name:"apiUrl",required:!1,type:{name:"string"}},translateTo:{defaultValue:null,description:"",name:"translateTo",required:!1,type:{name:"string"}},customMediaRenderer:{defaultValue:null,description:"",name:"customMediaRenderer",required:!1,type:{name:"((mimeType: string) => Element | null)"}},fromUser:{defaultValue:{value:"false"},description:"",name:"fromUser",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MediaWidget/MediaWidget.tsx#MediaWidget"]={docgenInfo:MediaWidget.__docgenInfo,name:"MediaWidget",path:"src/components/MediaWidget/MediaWidget.tsx#MediaWidget"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/WhyThisAnswer/WhyThisAnswer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ui_Drawer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ui/Drawer.tsx"),_ui_Spin__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/ui/Spin.tsx"),_ui_Expandable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Expandable.tsx"),react_hot_toast__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),_helpers_error__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/helpers/error.ts"),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),_Snippet_Snippet__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Snippet/Snippet.tsx"),_MediaWidget_MediaWidget__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/MediaWidget/MediaWidget.tsx"),_ui_Card__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/ui/Card.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react/jsx-runtime.js");const addQuestionMark=question=>question.endsWith("?")?question:`${question}?`,WhyThisAnswer=({message,sessionID,visible=!0,initialMatches=[],closeDrawer,client,_TEST_loading=!1})=>{const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_6__.B)(),searchMemory=client?.search.searchMemory,[matches,setMatches]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialMatches),[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(_TEST_loading),fetchMemories=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async()=>{if(setLoading(!0),!_TEST_loading&&searchMemory){try{const{matches,...response}=await searchMemory(sessionID,{searchType:"Semantic",numberOfResults:3,text:message.questionAnswered,date:message.date,placeName:message.placeName,placeLatitude:message.placeLatitude,placeLongitude:message.placeLongitude,placeUncertaintyKm:message.placeUncertaintyKm,contextVars:message.contextVars,tag:message.tag,memoryTags:message.memoryTags});0!==response.resultCode?(console.error(response),react_hot_toast__WEBPACK_IMPORTED_MODULE_4__.Ay.error(t((0,_helpers_error__WEBPACK_IMPORTED_MODULE_5__._)(response.resultCode)))):setMatches(matches??[])}catch(err){console.error("WHYTHISANSWER/FETCH",err),setMatches(initialMatches??[])}setLoading(!1)}},[message,sessionID]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{fetchMemories()},[fetchMemories,message,sessionID]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_ui_Drawer__WEBPACK_IMPORTED_MODULE_1__.A,{open:visible,width:"80%",animated:!1,className:"memori-whythisanswer-drawer",onClose:()=>closeDrawer(),title:t("whyThisAnswer"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{children:t("whyThisAnswerHelper")}),message.questionAnswered&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("p",{className:"memori--whythisanswer-question-answered",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("strong",{children:[t("question")||"Question",":"]})," ",message.questionAnswered]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_ui_Spin__WEBPACK_IMPORTED_MODULE_2__.A,{primary:!0,spinning:loading,children:[!loading&&0===matches.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{role:"info",className:"memori--whythisanswer-no-results",children:t("nothingFound")}),loading&&0===matches.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("ul",{className:"memori--whythisanswer-list memori--whythisanswer-skeleton",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("li",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"memori--whythisanswer-title",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"memori--whythisanswer-confidence",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"memori--whythisanswer-skeleton-text"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-title-text",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{className:"memori--whythisanswer-skeleton-text"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("p",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-skeleton-text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-skeleton-text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-skeleton-text"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-skeleton-block"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("li",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"memori--whythisanswer-title",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"memori--whythisanswer-confidence",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"memori--whythisanswer-skeleton-text"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"memori--whythisanswer-title-text",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{className:"memori--whythisanswer-skeleton-text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{className:"memori--whythisanswer-skeleton-text"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("p",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-skeleton-text"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-skeleton-text"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-skeleton-block"})]})]}),matches.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("ul",{className:"memori--whythisanswer-list",children:matches.map(m=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("li",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"memori--whythisanswer-title",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"memori--whythisanswer-confidence",children:m.confidenceLevel}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"memori--whythisanswer-title-text",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-title-text-top-container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("strong",{children:addQuestionMark(m.memory.title??"")})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{children:m.memory.titleVariants?.map(t=>addQuestionMark(t))?.join(" | ")}),(m.memory.receiverName||m.memory.receiverTag)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("p",{className:"memori--whythisanswer-title-text-top",children:[t("receiverLabel"),": ",m.memory.receiverTag," ",m.memory.receiverName]})]})]}),m.memory.contextVars&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"memori--whythisanswer-contextvars",children:Object.entries(m.memory.contextVars||{}).map(([key,value])=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ui_Card__WEBPACK_IMPORTED_MODULE_9__.A,{className:"memori--whythisanswer-contextvars-card",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("span",{children:[key,": ",value?.toString()||"✔️"]})},key))}),m.memory.answers?.map((a,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("p",{className:"memori--whythisanswer-answer",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ui_Expandable__WEBPACK_IMPORTED_MODULE_3__.A,{mode:"rows",rows:3,children:a.text})},i)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_MediaWidget_MediaWidget__WEBPACK_IMPORTED_MODULE_8__.A,{links:m.memory.media?.filter(m=>"text/html"===m.mimeType)}),m.memory.media?.filter(m=>"text/plain"===m.mimeType)?.map(m=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ui_Expandable__WEBPACK_IMPORTED_MODULE_3__.A,{mode:"rows",rows:2,lineHeightMultiplier:2,innerClassName:"memori--whythisanswer-snippet-expandable",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Snippet_Snippet__WEBPACK_IMPORTED_MODULE_7__.A,{medium:m,showCopyButton:!1},m.mediumID)},m.mediumID))]},m.memory.memoryID))})]})]})};WhyThisAnswer.displayName="WhyThisAnswer";const __WEBPACK_DEFAULT_EXPORT__=WhyThisAnswer;try{WhyThisAnswer.displayName="WhyThisAnswer",WhyThisAnswer.__docgenInfo={description:"",displayName:"WhyThisAnswer",props:{sessionID:{defaultValue:null,description:"",name:"sessionID",required:!0,type:{name:"string"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"Message"}},initialMatches:{defaultValue:{value:"[]"},description:"",name:"initialMatches",required:!1,type:{name:"SearchMatches[]"}},visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},closeDrawer:{defaultValue:null,description:"",name:"closeDrawer",required:!0,type:{name:"() => void"}},client:{defaultValue:null,description:"",name:"client",required:!1,type:{name:'{ constants: { BACKEND_URL: string; ENGINE_URL: string; allowedMediaTypes: string[]; anonTag: "👤"; }; asset: { getResourceUrl: ({ type, resourceURI, sessionID, baseURL, }: ResourceURLParams) => string; }; getAllFunctions: (sessionId: string) => Promise<...>; ... 137 more ...; backend: { ...; }; }'}},_TEST_loading:{defaultValue:{value:"false"},description:"",name:"_TEST_loading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/WhyThisAnswer/WhyThisAnswer.tsx#WhyThisAnswer"]={docgenInfo:WhyThisAnswer.__docgenInfo,name:"WhyThisAnswer",path:"src/components/WhyThisAnswer/WhyThisAnswer.tsx#WhyThisAnswer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/Link.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Link=({className,title})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{...title?{}:{"aria-hidden":"true"},focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className,"aria-label":title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M574 665.4a8.03 8.03 0 0 0-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 0 0-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 0 0 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 0 0 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 0 0-11.3 0L372.3 598.7a8.03 8.03 0 0 0 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"})});Link.displayName="Link";const __WEBPACK_DEFAULT_EXPORT__=Link;try{Link.displayName="Link",Link.__docgenInfo={description:"",displayName:"Link",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/Link.tsx#Link"]={docgenInfo:Link.__docgenInfo,name:"Link",path:"src/components/icons/Link.tsx#Link"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/ConfirmDialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@headlessui/react/dist/components/dialog/dialog.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),_Button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Button.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ConfirmDialog=({isOpen,onClose,onConfirm,title,message,confirmText,cancelText})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e,{appear:!0,show:isOpen,as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l,{as:"div",className:"memori-confirm-dialog",onClose,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"memori-confirm-dialog--backdrop"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"memori-confirm-dialog--container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e.Child,{as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Panel,{className:"memori-confirm-dialog--panel",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Title,{className:"memori-confirm-dialog--title",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Description,{className:"memori-confirm-dialog--message",children:message}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"memori-confirm-dialog--actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_3__.A,{onClick:onClose,children:cancelText}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_3__.A,{primary:!0,onClick:onConfirm,children:confirmText})]})]})})})]})});ConfirmDialog.displayName="ConfirmDialog";const __WEBPACK_DEFAULT_EXPORT__=ConfirmDialog;try{ConfirmDialog.displayName="ConfirmDialog",ConfirmDialog.__docgenInfo={description:"",displayName:"ConfirmDialog",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"string"}},confirmText:{defaultValue:null,description:"",name:"confirmText",required:!0,type:{name:"string"}},cancelText:{defaultValue:null,description:"",name:"cancelText",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/ConfirmDialog.tsx#ConfirmDialog"]={docgenInfo:ConfirmDialog.__docgenInfo,name:"ConfirmDialog",path:"src/components/ui/ConfirmDialog.tsx#ConfirmDialog"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Drawer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@headlessui/react/dist/components/dialog/dialog.js"),_headlessui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@headlessui/react/dist/components/transitions/transition.js"),_Spin__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/Spin.tsx"),_Button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/ui/Button.tsx"),_icons_Close__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/icons/Close.tsx"),classnames__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__),react_i18next__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),_ConfirmDialog__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/ui/ConfirmDialog.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Drawer=({title,open=!1,data,onClose=()=>{},children,width="80%",footer,showBackdrop=!0,extra,className,placement="right",description,loading=!1,animated=!0,closable=!0,widthMd="80%",widthLg="60%",confirmDialogTitle,confirmDialogMessage,preventBackdropClose=!1})=>{const[originalData,setOriginalData]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[confirmDialogOpen,setConfirmDialogOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.B)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{open&&data&&!originalData&&setOriginalData(data),open||setOriginalData(null)},[open,data,originalData]);const checkChanges=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{if(!data||0===Object.keys(data).length)return onClose();originalData&&JSON.stringify(originalData)!==JSON.stringify(data)?setConfirmDialogOpen(!0):onClose()},[data,originalData,onClose]),handleClose=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{checkChanges()},[checkChanges]),handleConfirmUnsavedChanges=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setConfirmDialogOpen(!1),onClose()},[onClose]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_ConfirmDialog__WEBPACK_IMPORTED_MODULE_8__.A,{isOpen:confirmDialogOpen,onClose:()=>setConfirmDialogOpen(!1),onConfirm:handleConfirmUnsavedChanges,title:confirmDialogTitle||t("confirmDialog.title"),message:confirmDialogMessage||t("confirmDialog.message"),confirmText:t("confirm")||"Confirm",cancelText:t("cancel")||"Cancel"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e,{appear:!0,show:open,as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l,{open,onClose:preventBackdropClose?()=>{}:handleClose,className:classnames__WEBPACK_IMPORTED_MODULE_6___default()("memori-drawer",className),children:[showBackdrop&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e.Child,{as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--backdrop"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--container-scrollable",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.e.Child,{static:!0,as:react__WEBPACK_IMPORTED_MODULE_0__.Fragment,enter:"ease-out duration-300",enterFrom:animated?"max-w-0 opacity-0":"opacity-0",enterTo:"max-w-80 opacity-100",leave:"ease-in duration-200",leaveFrom:"max-w-80 opacity-100",leaveTo:animated?"max-w-0 opacity-0":"opacity-0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Panel,{className:classnames__WEBPACK_IMPORTED_MODULE_6___default()("memori-drawer--panel",{"memori-drawer--panel-left":"left"===placement,"memori-drawer--with-footer":!!footer}),style:{"--memori-drawer--width":width,"--memori-drawer--width--lg":widthLg,"--memori-drawer--width--md":widthMd},children:[closable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--close",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_4__.A,{shape:"circle",outlined:!0,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_icons_Close__WEBPACK_IMPORTED_MODULE_5__.default,{}),onClick:handleClose})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Spin__WEBPACK_IMPORTED_MODULE_3__.A,{spinning:loading,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"memori-drawer--content",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Title,{className:"memori-drawer--title",children:title}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_headlessui_react__WEBPACK_IMPORTED_MODULE_1__.l.Description,{className:"memori-drawer--description",children:description}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--content--scrollable",children})]})}),footer&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"memori-drawer--footer",children:[footer.leftAction&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--footer-left-action "+(footer.leftActionClassName||""),children:footer.leftAction}),footer.onSubmit&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"memori-drawer--footer-actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_4__.A,{outlined:!0,onClick:handleClose,children:t("cancel")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_4__.A,{htmlType:"submit",onClick:footer.onSubmit,loading:footer.loading,className:"memori-drawer--footer-confirm",children:t("confirm")})]}),extra&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"memori-drawer--extra",children:extra})]})]})})})})]})})]})};Drawer.displayName="Drawer";const __WEBPACK_DEFAULT_EXPORT__=Drawer;try{Drawer.displayName="Drawer",Drawer.__docgenInfo={description:"",displayName:"Drawer",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"ReactNode"}},open:{defaultValue:{value:"false"},description:"",name:"open",required:!1,type:{name:"boolean"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},onClose:{defaultValue:{value:"() => {}"},description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},width:{defaultValue:{value:"80%"},description:"",name:"width",required:!1,type:{name:"string | number"}},footer:{defaultValue:null,description:"",name:"footer",required:!1,type:{name:"{ leftAction?: ReactNode; leftActionClassName?: string; onSubmit?: (() => void); loading?: boolean | undefined; } | undefined"}},extra:{defaultValue:null,description:"",name:"extra",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"right"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"Element | ReactNode"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},animated:{defaultValue:{value:"true"},description:"",name:"animated",required:!1,type:{name:"boolean"}},closable:{defaultValue:{value:"true"},description:"",name:"closable",required:!1,type:{name:"boolean"}},widthMd:{defaultValue:{value:"80%"},description:"",name:"widthMd",required:!1,type:{name:"string"}},widthLg:{defaultValue:{value:"60%"},description:"",name:"widthLg",required:!1,type:{name:"string"}},confirmDialogTitle:{defaultValue:null,description:"",name:"confirmDialogTitle",required:!1,type:{name:"string"}},confirmDialogMessage:{defaultValue:null,description:"",name:"confirmDialogMessage",required:!1,type:{name:"string"}},showBackdrop:{defaultValue:{value:"true"},description:"",name:"showBackdrop",required:!1,type:{name:"boolean"}},preventBackdropClose:{defaultValue:{value:"false"},description:"",name:"preventBackdropClose",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Drawer.tsx#Drawer"]={docgenInfo:Drawer.__docgenInfo,name:"Drawer",path:"src/components/ui/Drawer.tsx#Drawer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/ui/Expandable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_Button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ui/Button.tsx"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),react_i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),_helpers_message__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/helpers/message.ts"),_helpers_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/helpers/constants.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Expandable=({rows,className,innerClassName,btnClassName,lineHeightMultiplier=1.2,defaultExpanded=!1,expandSymbol=()=>"...",collapseSymbol=lang=>"it"===lang?"Mostra meno":"Show less",children,mode="rows"})=>{const{i18n}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_3__.B)(),lang=i18n.language,collapseSymbolText=collapseSymbol(lang),expandSymbolText=expandSymbol(lang),[expanded,setExpanded]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultExpanded),[needsExpanding,setNeedsExpanding]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[rowHeight,setRowHeight]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(16),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(ref.current)if("rows"===mode){let height=ref.current.getBoundingClientRect().height,computedStyle=getComputedStyle(ref.current),elLineHeight=computedStyle.lineHeight,lineHeight="normal"!==elLineHeight&&elLineHeight?.length?parseInt(elLineHeight,10):lineHeightMultiplier*parseInt(computedStyle.fontSize,10);setRowHeight(lineHeight),height&&rows&&height>rows*lineHeight&&setNeedsExpanding(!0)}else if("characters"===mode){const textContent=ref.current.textContent||"";(textContent.length>_helpers_constants__WEBPACK_IMPORTED_MODULE_5__.MAX_MSG_CHARS||textContent.split(" ").length>_helpers_constants__WEBPACK_IMPORTED_MODULE_5__.MAX_MSG_WORDS)&&setNeedsExpanding(!0)}},[rows,mode,ref.current]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()("memori-expandable",className),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{ref,className:classnames__WEBPACK_IMPORTED_MODULE_2___default()("memori-expandable--inner",innerClassName),style:{maxHeight:expanded||!needsExpanding||"characters"===mode?"9999px":rowHeight*(rows||1)+"px"},children:(()=>{if("characters"===mode&&!expanded&&needsExpanding){const content=ref.current?.textContent||"";return(0,_helpers_message__WEBPACK_IMPORTED_MODULE_4__.Sj)(content)}return children})()}),needsExpanding&&!expanded&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_1__.A,{ghost:!0,padded:!1,className:btnClassName,onClick:()=>setExpanded(!0),children:expandSymbolText}),needsExpanding&&expanded&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_1__.A,{ghost:!0,padded:!1,className:btnClassName,onClick:()=>setExpanded(!1),children:collapseSymbolText})]})};Expandable.displayName="Expandable";const __WEBPACK_DEFAULT_EXPORT__=Expandable;try{Expandable.displayName="Expandable",Expandable.__docgenInfo={description:"",displayName:"Expandable",props:{rows:{defaultValue:null,description:"",name:"rows",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},innerClassName:{defaultValue:null,description:"",name:"innerClassName",required:!1,type:{name:"string"}},btnClassName:{defaultValue:null,description:"",name:"btnClassName",required:!1,type:{name:"string"}},lineHeightMultiplier:{defaultValue:{value:"1.2"},description:"",name:"lineHeightMultiplier",required:!1,type:{name:"number"}},defaultExpanded:{defaultValue:{value:"false"},description:"",name:"defaultExpanded",required:!1,type:{name:"boolean"}},expandSymbol:{defaultValue:{value:"() => '...'"},description:"",name:"expandSymbol",required:!1,type:{name:"((lang: string) => ReactNode)"}},collapseSymbol:{defaultValue:{value:"(lang: string) =>\n    lang === 'it' ? 'Mostra meno' : 'Show less'"},description:"",name:"collapseSymbol",required:!1,type:{name:"((lang: string) => ReactNode)"}},mode:{defaultValue:{value:"rows"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"rows"'},{value:'"characters"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Expandable.tsx#Expandable"]={docgenInfo:Expandable.__docgenInfo,name:"Expandable",path:"src/components/ui/Expandable.tsx#Expandable"})}catch(__react_docgen_typescript_loader_error){}},"./src/helpers/error.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>getErrori18nKey});const BACKEND_ERRORS=new Map(Object.entries({TENANT_NOT_FOUND:-1,TENANT_REGISTRATION_DISABLED:-2,TENANT_MISSING_NAME:-3,TENANT_MAX_USERS_REACHED:-4,TENANT_MAX_ADMINS_REACHED:-5,TENANT_ALREADY_EXISTS:-6,TENANT_MISSING_DESCRIPTION:-7,TENANT_CANT_SET_COMPLETION_PROVIDER:-8,TENANT_INVALID_TYPE:-9,USER_NOT_CONFIRMED:-11,USER_NOT_FOUND:-12,USER_OR_PASSWORD_INVALID:-13,USER_MUST_CHANGE_PASSWORD:-14,USER_MUST_ENTER_VERIFICATION_CODE:-15,USER_MISSING_TENANT:-21,USER_MISSING_NAME:-22,USER_MISSING_PASSWORD:-23,USER_MISSING_EMAIL:-24,USER_MISSING_VERIFICATION_CODE:-25,USER_NAME_ALREADY_USED:-26,USER_PASSWORD_NOT_CONFORMING_TO_POLICY:-27,USER_EMAIL_ALREADY_USED:-28,USER_EMAIL_INVALID:-29,USER_VERIFICATION_CODE_INVALID:-30,USER_MISSING_NAME_OR_EMAIL:-31,USER_NAME_INVALID:-32,USER_HAS_ONE_OR_MORE_MEMORI:-33,USER_MISSING_NEW_PASSWORD:-34,USER_CANT_CREATE_MEMORI:-35,USER_MAX_MEMORI_REACHED:-36,USER_TOO_MANY_ATTEMPTS:-38,USER_MUST_ACCEPT_TNC_AND_PP:-39,USER_BIRTH_DATE_CANT_BE_CHANGED:-40,USER_CANT_SET_COMPLETION_PROVIDER:-41,USER_CANT_ENABLE_DEEP_THOUGHT:-42,USER_CANT_ENABLE_DCM_INTEGRATION:-43,USER_CANT_ENABLE_CHAINING_OR_BOARD_OF_EXPERTS:-44,USER_CREATION_BILLING_DENIED_PERMISSION:-46,USER_HAS_ONE_OR_MORE_COMPLETION_CONFIGS:-47,USER_CANT_BE_DELETED:-48,USER_ORDER_BY_INVALID:-49,MEMORI_NOT_FOUND:-51,MEMORI_NOT_ACCESSIBLE:-52,MEMORI_ONLY_OWNER_CAN_CHANGE_GIVER_TAG_AND_PIN:-53,SESSION_NOT_FOUND:-101,SESSION_IS_NOT_ADMINISTRATIVE:-102,SESSION_EXPIRED:-103,SESSION_OTP_NOT_FOUND:-107,SESSION_OTP_EXPIRED:-108,SESSION_MISSING_TEMPORARY_TOKEN:-109,MEMORI_MISSING_CONFIGURATION:-201,MEMORI_CONFIGURATION_NOT_FOUND:-202,MEMORI_INVALID_PRIVACY_TYPE:-203,MEMORI_MISSING_PASSWORD:-204,MEMORI_INVALID_TOTAL_NUMBER_OF_RECOVERY_TOKENS:-205,MEMORI_INVALID_MINIMUM_NUMBER_OF_RECOVERY_TOKENS:-206,MEMORI_INVALID_VOICE_TYPE:-207,MEMORI_MISSING_NAME:-208,MEMORI_MISSING_PASSWORD_OR_RECOVERY_TOKENS:-209,MEMORI_INVALID_ID:-210,MEMORI_NAME_ALREADY_USED:-211,MEMORI_INVALID_PIN:-212,MEMORI_GIVER_TAG_PIN_CHANGE_REQUIRES_SEPARATE_OPERATION:-213,MEMORI_NO_PASSWORD_WHEN_PUBLIC:-214,MEMORI_DEEP_THOUGHT_REQUIRES_COMPLETIONS:-215,MEMORI_BOARD_OF_EXPERTS_REQUIRES_COMPLETIONS:-216,MEMORI_INVALID_COMPLETION_CONFIG:-217,MEMORI_MACRO_FUNCTIONS_REQUIRES_COMPLETIONS:-218,MEMORI_BLOCKING_DATE_MISSING_OR_WRONG:-219,MEMORI_LIST_FILTER_NOT_SPECIFIED:-220,MEMORI_TRANSFER_MISSING_DESTINATION_USER:-231,MEMORI_TRANSFER_INVALID_DESTINATION_USER_ID:-232,MEMORI_TRANSFER_DESTINATION_USER_DATA_INCONSISTENT:-233,MEMORI_TRANSFER_NOTHING_TO_DO:-234,MEMORI_CONFIGURATION_CANT_BE_CHANGED:-251,MEMORI_MISSING_NEW_PASSWORD:-252,MEMORI_SESSIONS_INVALID_DATE_FROM_FORMAT:-261,MEMORI_SESSIONS_INVALID_DATE_TO_FORMAT:-262,MEMORI_SESSION_NOT_FOUND:-263,MEMORI_SESSION_DOESNT_ACCEPT_MEDIA:-264,MEMORI_FEATURE_REQUIRES_SUBSCRIPTION:-271,INTEGRATION_NOT_FOUND:-301,INTEGRATION_INVALID_TYPE:-401,INTEGRATION_ALREADY_EXISTS:-402,INTEGRATION_MEMORI_IS_NOT_PUBLIC:-403,INTEGRATION_MISSING_INVOCATION_TEXT:-404,INTEGRATION_MISSING_DEVICE_EMAILS:-405,INTEGRATION_MEMORI_IS_EMPTY:-406,INTEGRATION_MISSING_PRIVACY_POLICY:-407,INTEGRATION_MISSING_CATEGORY:-408,INTEGRATION_MISSING_DESCRIPTION:-409,INTEGRATION_INVALID_INVOCATION_TEXT:-410,INTEGRATION_GOOGLE_NO_MORE_AVAILABLE:-411,UPLOAD_REQUIRES_MULTIPART_ENCODING:-501,UPLOAD_MISSING_CONTENT_TYPE_BOUNDARY:-502,UPLOAD_MAX_LENGTH_EXCEEDED:-503,UPLOAD_FILE_IS_EMPTY:-504,UPLOAD_INVALID_FILE_TYPE_OR_SIGNATURE:-505,UPLOAD_MISSING_FILE_NAME:-506,UPLOAD_INVALID_MEMORY_ID:-507,UPLOAD_MISSING_FILE_CONTENT:-508,ASSET_NOT_FOUND:-601,ASSET_NOT_ACCESSIBLE:-602,ASSET_MISSING_SESSION_ID:-603,ASSET_INVALID_FILE_NAME:-604,ASSET_MALWARE_SCAN_THREATS_FOUND:-605,INVITATION_NOT_FOUND:-701,INVITATION_NOT_ACCESSIBLE:-702,INVITATION_ALREADY_ACCEPTED:-703,INVITATION_ALREADY_REJECTED:-704,INVITATION_MISSING_DESTINATION_EMAIL:-705,INVITATION_DESTINATION_EMAIL_INVALID:-706,INVITATION_MISSING_TAG:-707,INVITATION_MISSING_PIN:-708,INVITATION_INVALID_PIN:-709,INVITATION_INVALID_TYPE:-710,INVITATION_MISSING_DESTINATION_NAME:-711,INVITATION_TAG_PIN_CANT_BE_CHANGED:-712,INVITATION_CANT_BE_CHANGED:-713,ACTIONLOG_INVALID_USER_ID:-801,ACTIONLOG_INVALID_DATE_FROM_FORMAT:-802,ACTIONLOG_INVALID_DATE_TO_FORMAT:-803,ACTIONLOG_INVALID_MEMORI_ID:-804,CONSUMPTIONLOG_INVALID_TYPE:-901,CONSUMPTIONLOG_INVALID_DATE_FROM_FORMAT:-902,CONSUMPTIONLOG_INVALID_DATE_TO_FORMAT:-903,CONSUMPTIONLOG_INVALID_USER_ID:-904,CONSUMPTIONLOG_INVALID_MEMORI_ID:-905,NOTIFICATIONPREFS_INVALID_CHATLOG_EXTRACTION_PERIOD:-1001,BROADCAST_NOT_ALLOWED:-1002,INVALID_NOTIFICATION_TYPE:-1003,NOTIFICATION_NOT_FOUND:-1004,INVALID_NOTIFICATION_FILTER:-1005,INVALID_NOTIFICATION_PERIOD:-1006,PROCESS_INVALID_TYPE:-1401,PROCESS_ALREADY_RUNNING:-1401,PROCESS_NOT_FOUND:-1402,IMPORTCSV_MISSING_CSV:-1502,IMPORTCSV_MISSING_SEPARATOR:-1503,IMPORTCSV_INVALID_SEPARATOR:-1504,IMPORTCSV_MISSING_HEADERS:-1505,IMPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:-1506,IMPORTCSV_INVALID_RECEIVER_ID:-1507,IMPORTCSV_INVALID_MEDIA_LINK:-1508,IMPORTCSV_INVALID_LINK_TITLE_HANDLING:-1509,IMPORTCSV_UNDETECTABLE_CHAR_ENCODING:-1521,IMPORTTXT_INVALID_GRANULARITY:-1602,IMPORTTXT_INVALID_RECEIVER_ID:-1603,IMPORTTXT_INVALID_MEDIA_LINK:-1604,IMPORTTXT_INVALID_LINK_TITLE_HANDLING:-1605,IMPORTTXT_UNDETECTABLE_CHAR_ENCODING:-1621,IMPORTTXT_IMPORT_LIMIT_EXCEEDED:-1632,IMPORTTXT_IMPORT_ON_GPT4_REQUIRES_API_KEY:-1633,IMPORTTXT_IMPORT_REQUIRES_PAYING:-1634,IMPORTTXT_BILLING_DENIED_PERMISSION:-1635,IMPORT_MISSING_ROWS:-1701,IMPORT_CANT_IMPORT_TO_SECRET_MEMORI:-1702,IMPORTMEMORI_INVALID_MEMORI_SPECS:-1711,IMPORT_MISSING_JSONL:-1712,IMPORTMEMORI_INVALID_SPECS:-1713,EXPORT_MISSING_PASSWORD:1711,EXPORTCSV_MISSING_CSV_SPECS:-1801,EXPORTCSV_MISSING_SEPARATOR:-1802,EXPORTCSV_INVALID_SEPARATOR:-1803,EXPORTCSV_MISSING_TITLE_VARIANT_SEPARATOR:-1804,EXPORTCSV_MISSING_NEW_LINE_CHAR:-1805,EXPORTCSV_INVALID_NEW_LINE_CHAR:-1806,EXPORTJSONL_MISSING_JSONL_SPECS:-1821,EXPORTJSONL_MISSING_PLATFORM:-1822,EXPORTJSONL_INVALID_PLATFORM:-1823,EXPORTJSONL_EXPORT_REQUIRES_PAYING:-1832,ANALYSIS_MISSING_QUERY:-1901,ANALYSIS_CANT_ANALYZE_SECRET_MEMORI:-1902,ANALYSIS_USER_QUERY_MATCH_REQUIRES_DEEP_THOUGHT:-1903,BADGE_ASSIGNMENT_WRONG_OR_MISSING_CREDENTIALS:-2001,BADGE_ASSIGNMENT_MISSING_REF_ID:-2002,BADGE_ASSIGNMENT_OUTCOME_NOT_FOUND:-2003,BADGE_ASSIGNMENT_MISSING_ASSERTION_URL:-2004,BADGE_ASSIGNMENT_MISSING_BADGE_URL:-2005,BADGE_ASSIGNMENT_MISSING_ISSUER_URL:-2006,BADGE_ASSIGNMENT_INVALID_URL:-2007,BADGE_ASSIGNMENT_MISSING_RECIPIENT:-2021,BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_TYPE:-2022,BADGE_ASSIGNMENT_MISSING_RECIPIENT_IDENTITY:-2023,BADGE_ASSIGNMENT_MISSING_RECIPIENT_HASH_TYPE:-2024,BADGE_ASSIGNMENT_UNKNOWN_RECIPIENT_HASH_TYPE:-2025,BADGE_ASSIGNMENT_WRONG_RECIPIENT_IDENTITY:-2026,BADGE_NOT_FOUND:-2051,OUTCOME_NO_DCM_CONFIGURED:-2071,OUTCOME_USER_BADGES_DISABLED:-2072,COMPLETION_CONFIG_MISSING_NAME:-2401,COMPLETION_CONFIG_MISSING_PROVIDER:-2402,COMPLETION_CONFIG_MISSING_ENDPOINT:-2403,COMPLETION_CONFIG_MISSING_API_KEY:-2404,COMPLETION_CONFIG_MISSING_MODEL:-2405,COMPLETION_CONFIG_NO_PURPOSE_SPECIFIED:-2406,COMPLETION_CONFIG_INVALID_NAME:-2407,COMPLETION_CONFIG_INVALID_PURPOSE:-2411,COMPLETION_CONFIG_INVALID_ENDPOINT:-2412,COMPLETION_CONFIG_INCONSISTENT_ENDPOINT:-2413,COMPLETION_CONFIG_INVALID_PROVIDER:-2414,COMPLETION_CONFIG_NOT_FOUND:-2421,COMPLETION_CONFIG_NOT_ACCESSIBLE:-2422,COMPLETION_CONFIG_NAME_RESERVED:-2441,COMPLETION_CONFIG_NAME_ALREADY_EXISTS:-2442,COMPLETION_CONFIG_VISIBILITY_CHANGE_NOT_ALLOWED:-2443,COMPLETION_CONFIG_MISSING_MANDATORY_PREFIX:-2444,COMPLETION_CONFIG_VISIBILITY_NOT_PERMITTED:-2445,COMPLETION_CONFIG_USE_AS_DEFAULT_NOT_PERMITTED:-2446,COMPLETION_CONFIG_USE_AS_DEFAULT_REQUIRES_TENANT_VISIBILITY:-2447,COMPLETION_CONFIG_CHARGEABLE_NOT_PERMITTED:-2448,COMPLETION_CONFIG_INVALID_APPLY_TO:-2449,COMPLETION_CONFIG_APPLY_TO_TENANT_NOT_ALLOWED:-2450,TRUSTED_APPLICATION_NOT_FOUND:-2501,TRUSTED_APPLICATION_NOT_ACCESSIBLE:-2502,TRUSTED_APPLICATION_NAME_REQUIRED:-2503,TRUSTED_APPLICATION_TOKEN_REQUIRED:-2504,TRUSTED_APPLICATION_NAME_ALREADY_EXISTS:-2505,TRUSTED_APPLICATION_INVALID_TOKEN:-2506}).map(([key,value])=>[value,key])),getErrori18nKey=errorCode=>{if(!errorCode)return"error.generic";if(401===errorCode||403===errorCode)return"error.unauthorized";if(404===errorCode)return"error.notFound";if(422===errorCode)return"error.unprocessableEntity";if(500===errorCode)return"internal server error";let error=BACKEND_ERRORS.get(errorCode);return error?`errors.${error}`:"error.generic"}},"./src/helpers/message.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A_:()=>renderMsg,Sj:()=>truncateMessage});var marked_esm=__webpack_require__("./node_modules/marked/lib/marked.esm.js"),purify_es=__webpack_require__("./node_modules/dompurify/dist/purify.es.mjs"),constants=__webpack_require__("./src/helpers/constants.ts"),utils=__webpack_require__("./src/helpers/utils.ts"),src=__webpack_require__("./node_modules/marked-linkify-it/src/index.js"),marked_katex_extension_src=__webpack_require__("./node_modules/marked-katex-extension/src/index.js");const getTableCell=(text,cell,type,align)=>{if(!cell.rowspan)return"";return`${`<${type}`+(cell.colspan>1?` colspan=${cell.colspan}`:"")+(cell.rowspan>1?` rowspan=${cell.rowspan}`:"")+(align?` align=${align}`:"")+">"+text}</${type}>\n`},splitCells=(tableRow,count,prevRow=[])=>{const cells=[...tableRow.matchAll(/(?:[^|\\]|\\.?)+(?:\|+|$)/g)].map(x=>x[0]);cells[0]?.trim()||cells.shift(),cells[cells.length-1]?.trim()||cells.pop();let i,j,trimmedCell,prevCell,prevCols,numCols=0;for(i=0;i<cells.length;i++){if(trimmedCell=cells[i].split(/\|+$/)[0],cells[i]={rowspan:1,colspan:Math.max(cells[i].length-trimmedCell.length,1),text:trimmedCell.trim().replace(/\\\|/g,"|")},"^"===trimmedCell.slice(-1)&&prevRow.length)for(prevCols=0,j=0;j<prevRow.length;j++){if(prevCell=prevRow[j],prevCols===numCols&&prevCell.colspan===cells[i].colspan){cells[i].rowSpanTarget=prevCell.rowSpanTarget??prevCell,cells[i].rowSpanTarget.text+=` ${cells[i].text.slice(0,-1)}`,cells[i].rowSpanTarget.rowspan+=1,cells[i].rowspan=0;break}if(prevCols+=prevCell.colspan,prevCols>numCols)break}numCols+=cells[i].colspan}if(numCols>count)cells.splice(count);else for(;numCols<count;)cells.push({colspan:1,text:""}),numCols+=1;return cells};marked_esm.xI.use({async:!1,gfm:!0,pedantic:!1,renderer:{link:({href,title,text})=>{const cleanHref=href?(0,utils.TG)(href):null;if(null===cleanHref)return text;let out='<a href="'+(href=cleanHref)+'"';return title&&(out+=' title="'+title+'"'),out+=' target="_blank" rel="noopener noreferrer">'+text+"</a>",out}}}),marked_esm.xI.use((0,src.A)()),marked_esm.xI.use(function markedExtendedTables(){return{extensions:[{name:"spanTable",level:"block",start:src=>src.match(/^\n *([^\n ].*\|.*)\n/)?.index,tokenizer(src,tokens){const cap=new RegExp("^ *([^\\n ].*\\|.*\\n(?: *[^\\s].*\\n)*?) {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n| {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)| {0,3}#{1,6} | {0,3}>| {4}[^\\n]| {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n| {0,3}(?:[*+-]|1[.)]) |<\\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?: +|\\n|\\/?>)|<(?:script|pre|style|textarea|!--)).*(?:\\n|$))*)\\n*|$)").exec(src);if(cap){const item={type:"spanTable",header:cap[1].replace(/\n$/,"").split("\n"),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:cap[3]?cap[3].replace(/\n$/,"").split("\n"):[]};item.header[0]=splitCells(item.header[0]);const colCount=item.header[0].reduce((length,header)=>length+header.colspan,0);if(colCount===item.align.length){let i,j,k,row;item.raw=cap[0];let l=item.align.length;for(i=0;i<l;i++)/^ *-+: *$/.test(item.align[i])?item.align[i]="right":/^ *:-+: *$/.test(item.align[i])?item.align[i]="center":/^ *:-+ *$/.test(item.align[i])?item.align[i]="left":item.align[i]=null;for(l=item.header.length,i=1;i<l;i++)item.header[i]=splitCells(item.header[i],colCount,item.header[i-1]);for(l=item.rows.length,i=0;i<l;i++)item.rows[i]=splitCells(item.rows[i],colCount,item.rows[i-1]);for(l=item.header.length,j=0;j<l;j++)for(row=item.header[j],k=0;k<row.length;k++)row[k].tokens=[],this.lexer.inline(row[k].text,row[k].tokens);for(l=item.rows.length,j=0;j<l;j++)for(row=item.rows[j],k=0;k<row.length;k++)row[k].tokens=[],this.lexer.inline(row[k].text,row[k].tokens);return item}}},renderer(token){let i,j,row,cell,col,text,output='<div class="memori--responsive-table-wrapper"><table class="memori--table memori--table--compact">';for(output+="<thead>",i=0;i<token.header.length;i++){row=token.header[i];let col=0;for(output+="<tr>",j=0;j<row.length;j++)cell=row[j],text=this.parser.parseInline(cell.tokens),output+=getTableCell(text,cell,"th",token.align[col]),col+=cell.colspan;output+="</tr>"}if(output+="</thead>",token.rows.length){for(output+="<tbody>",i=0;i<token.rows.length;i++){for(row=token.rows[i],col=0,output+="<tr>",j=0;j<row.length;j++)cell=row[j],text=this.parser.parseInline(cell.tokens),output+=getTableCell(text,cell,"td",token.align[col]),col+=cell.colspan;output+="</tr>"}output+="</tbody>"}return output+="</table></div>",output}}]}}());const truncateMessage=message=>{let truncatedMessage=message;return message.length>constants.MAX_MSG_CHARS&&(truncatedMessage=`${message.slice(0,constants.MAX_MSG_CHARS)}\n<br />...`),truncatedMessage.split(" ").length>constants.MAX_MSG_WORDS&&(truncatedMessage=truncatedMessage.split(" ").slice(0,constants.MAX_MSG_WORDS).join(" ")),truncatedMessage},renderMsg=(text,useMathFormatting=!1,reasoningText="Reasoning...",showReasoning)=>{try{let preprocessedText=text.trim().replaceAll(/\[([^\]]+)\]\(([^\)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replaceAll(/<think.*?>(.*?)<\/think>/gs,showReasoning?`<details class="memori-think"><summary>${reasoningText}</summary>$1</details>`:"").replaceAll(/<document_attachment filename="([^"]+)" type="([^"]+)">([\s\S]*?)<\/document_attachment>/g,"").replaceAll(/<output\s+class\s*=\s*["\']memori-artifact["\'][^>]*data-mimetype\s*=\s*["\']([^"']+)["\'][^>]*>([\s\S]*?)(?:<\/output>|$)/gi,"").replaceAll(/```markdown([^```]+)```/g,"$1").replaceAll("($","( $").replaceAll(":$",": $").replaceAll("\frac","\\frac").replaceAll("\beta","\\beta").replaceAll("cdot","\\cdot");useMathFormatting&&(marked_esm.xI.use((0,marked_katex_extension_src.A)({})),preprocessedText=preprocessedText.replace(/\\+\[(.*?)\\*\]/gs,(_,content)=>`$$${content}$$`),preprocessedText=preprocessedText.replace(/\[([^[\]]+?)\]/g,(match,content)=>!/[\\+a-z0-9_{}^=\-\+\*\/]+/i.test(content)||match.startsWith("[http")||match.includes("](")?match:`$$${content}$$`));const outputTags=[];let outputPlaceholder=0;preprocessedText=preprocessedText.replace(/(<output[^>]*>)([\s\S]*?)(<\/output>)/g,(_,openTag,content,closeTag)=>{const placeholder=`\x3c!--OUTPUT_PLACEHOLDER_${outputPlaceholder++}--\x3e`;return outputTags.push(`${openTag}${content}${closeTag}`),placeholder}),preprocessedText=preprocessedText.replace(/(<!--OUTPUT_PLACEHOLDER_\d+-->)\s*([^\s<\n-])/g,"$1\n\n$2");let parsedText=marked_esm.xI.parse(preprocessedText).toString().trim();outputTags.forEach((tag,index)=>{parsedText=parsedText.replace(`\x3c!--OUTPUT_PLACEHOLDER_${index}--\x3e`,tag)}),parsedText=purify_es.A.sanitize(parsedText,{ADD_ATTR:["target"]});return{text:parsedText.replace(/(<br>)+/g,"<br>").replace(/<p><\/p>/g,"<br>").replace(/<p><br><\/p>/g,"<br>")}}catch(e){return console.error("Error rendering message:",e),{text}}}}}]);